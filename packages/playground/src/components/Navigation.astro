---
interface Props {
	currentPath?: string
}

const { currentPath = '' } = Astro.props
const path = currentPath || Astro.url.pathname

const links = [
	{ href: '/', label: 'Home' },
	{ href: '/components/', label: 'Components' },
	{ href: '/cms/', label: 'CMS' },
	{ href: '/llm-enhancements/', label: 'LLM' },
	{ href: '/agent-summary/', label: 'Agents' },
	{ href: '/nua/', label: 'Nua' },
	{ href: '/cli/', label: 'CLI' },
]

function isActive(href: string) {
	if (href === '/') return path === '/' || path === ''
	return path.startsWith(href)
}
---

<nav class="sticky top-0 z-50 border-b border-slate-800/80 bg-slate-950/80 backdrop-blur-xl">
	<div class="mx-auto flex max-w-6xl items-center justify-between px-6 py-3">
		<a href="/" class="flex items-center gap-2.5 text-sm font-semibold text-slate-100 transition hover:text-white">
			<span class="flex h-7 w-7 items-center justify-center rounded-lg bg-indigo-500/20 text-xs font-bold text-indigo-300">N</span>
			<span>Nua Playground</span>
		</a>

		<button
			id="nav-toggle"
			class="flex h-8 w-8 items-center justify-center rounded-lg border border-slate-700 bg-slate-800/60 text-slate-400 transition hover:border-slate-600 hover:text-slate-200 lg:hidden"
			aria-label="Toggle navigation"
			aria-expanded="false"
		>
			<svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
				<path id="nav-icon-open" stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
				<path id="nav-icon-close" class="hidden" stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
			</svg>
		</button>

		<div id="nav-links" class="hidden lg:flex lg:items-center lg:gap-1">
			{links.map(({ href, label }) => (
				<a
					href={href}
					class:list={[
						'rounded-md px-3 py-1.5 text-sm transition',
						isActive(href)
							? 'bg-indigo-500/15 font-medium text-indigo-200'
							: 'text-slate-400 hover:bg-slate-800/60 hover:text-slate-200',
					]}
				>
					{label}
				</a>
			))}
		</div>
	</div>

	<div id="nav-mobile" class="hidden border-t border-slate-800/60 px-6 pb-4 pt-2 lg:hidden">
		{links.map(({ href, label }) => (
			<a
				href={href}
				class:list={[
					'block rounded-md px-3 py-2 text-sm transition',
					isActive(href)
						? 'bg-indigo-500/15 font-medium text-indigo-200'
						: 'text-slate-400 hover:bg-slate-800/60 hover:text-slate-200',
				]}
			>
				{label}
			</a>
		))}
	</div>
</nav>

<script>
	const toggle = document.getElementById('nav-toggle')!
	const mobile = document.getElementById('nav-mobile')!
	const iconOpen = document.getElementById('nav-icon-open')!
	const iconClose = document.getElementById('nav-icon-close')!

	toggle.addEventListener('click', () => {
		const open = mobile.classList.toggle('hidden')
		iconOpen.classList.toggle('hidden', !open)
		iconClose.classList.toggle('hidden', open)
		toggle.setAttribute('aria-expanded', String(!open))
	})
</script>

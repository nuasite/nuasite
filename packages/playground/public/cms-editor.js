
(()=>{var FV=Object.create;var{getPrototypeOf:BV,defineProperty:I2,getOwnPropertyNames:Aq,getOwnPropertyDescriptor:VV}=Object,Pq=Object.prototype.hasOwnProperty;var Rq=(Z,Q,J)=>{J=Z!=null?FV(BV(Z)):{};let X=Q||!Z||!Z.__esModule?I2(J,"default",{value:Z,enumerable:!0}):J;for(let Y of Aq(Z))if(!Pq.call(X,Y))I2(X,Y,{get:()=>Z[Y],enumerable:!0});return X},jq=new WeakMap,LV=(Z)=>{var Q=jq.get(Z),J;if(Q)return Q;if(Q=I2({},"__esModule",{value:!0}),Z&&typeof Z==="object"||typeof Z==="function")Aq(Z).map((X)=>!Pq.call(Q,X)&&I2(Q,X,{get:()=>Z[X],enumerable:!(J=VV(Z,X))||J.enumerable}));return jq.set(Z,Q),Q},l8=(Z,Q)=>()=>(Q||Z((Q={exports:{}}).exports,Q),Q.exports);var Mq=(Z,Q)=>{for(var J in Q)I2(Z,J,{get:Q[J],enumerable:!0,configurable:!0,set:(X)=>Q[J]=()=>X})};var L3=l8((tC,V3)=>{var I6=1000,E6=I6*60,T6=E6*60,S4=T6*24,FO=S4*7,BO=S4*365.25;V3.exports=function(Z,Q){Q=Q||{};var J=typeof Z;if(J==="string"&&Z.length>0)return VO(Z);else if(J==="number"&&isFinite(Z))return Q.long?_O(Z):LO(Z);throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(Z))};function VO(Z){if(Z=String(Z),Z.length>100)return;var Q=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(Z);if(!Q)return;var J=parseFloat(Q[1]),X=(Q[2]||"ms").toLowerCase();switch(X){case"years":case"year":case"yrs":case"yr":case"y":return J*BO;case"weeks":case"week":case"w":return J*FO;case"days":case"day":case"d":return J*S4;case"hours":case"hour":case"hrs":case"hr":case"h":return J*T6;case"minutes":case"minute":case"mins":case"min":case"m":return J*E6;case"seconds":case"second":case"secs":case"sec":case"s":return J*I6;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return J;default:return}}function LO(Z){var Q=Math.abs(Z);if(Q>=S4)return Math.round(Z/S4)+"d";if(Q>=T6)return Math.round(Z/T6)+"h";if(Q>=E6)return Math.round(Z/E6)+"m";if(Q>=I6)return Math.round(Z/I6)+"s";return Z+"ms"}function _O(Z){var Q=Math.abs(Z);if(Q>=S4)return g7(Z,Q,S4,"day");if(Q>=T6)return g7(Z,Q,T6,"hour");if(Q>=E6)return g7(Z,Q,E6,"minute");if(Q>=I6)return g7(Z,Q,I6,"second");return Z+" ms"}function g7(Z,Q,J,X){var Y=Q>=J*1.5;return Math.round(Z/J)+" "+X+(Y?"s":"")}});var O3=l8((eC,_3)=>{function OO(Z){J.debug=J,J.default=J,J.coerce=K,J.disable=G,J.enable=Y,J.enabled=U,J.humanize=L3(),J.destroy=H,Object.keys(Z).forEach((W)=>{J[W]=Z[W]}),J.names=[],J.skips=[],J.formatters={};function Q(W){let z=0;for(let F=0;F<W.length;F++)z=(z<<5)-z+W.charCodeAt(F),z|=0;return J.colors[Math.abs(z)%J.colors.length]}J.selectColor=Q;function J(W){let z,F=null,B,V;function O(...N){if(!O.enabled)return;let j=O,R=Number(new Date),E=R-(z||R);if(j.diff=E,j.prev=z,j.curr=R,z=R,N[0]=J.coerce(N[0]),typeof N[0]!=="string")N.unshift("%O");let $=0;N[0]=N[0].replace(/%([a-zA-Z%])/g,(I,g)=>{if(I==="%%")return"%";$++;let S=J.formatters[g];if(typeof S==="function"){let u=N[$];I=S.call(j,u),N.splice($,1),$--}return I}),J.formatArgs.call(j,N),(j.log||J.log).apply(j,N)}if(O.namespace=W,O.useColors=J.useColors(),O.color=J.selectColor(W),O.extend=X,O.destroy=J.destroy,Object.defineProperty(O,"enabled",{enumerable:!0,configurable:!1,get:()=>{if(F!==null)return F;if(B!==J.namespaces)B=J.namespaces,V=J.enabled(W);return V},set:(N)=>{F=N}}),typeof J.init==="function")J.init(O);return O}function X(W,z){let F=J(this.namespace+(typeof z>"u"?":":z)+W);return F.log=this.log,F}function Y(W){J.save(W),J.namespaces=W,J.names=[],J.skips=[];let z=(typeof W==="string"?W:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let F of z)if(F[0]==="-")J.skips.push(F.slice(1));else J.names.push(F)}function q(W,z){let F=0,B=0,V=-1,O=0;while(F<W.length)if(B<z.length&&(z[B]===W[F]||z[B]==="*"))if(z[B]==="*")V=B,O=F,B++;else F++,B++;else if(V!==-1)B=V+1,O++,F=O;else return!1;while(B<z.length&&z[B]==="*")B++;return B===z.length}function G(){let W=[...J.names,...J.skips.map((z)=>"-"+z)].join(",");return J.enable(""),W}function U(W){for(let z of J.skips)if(q(W,z))return!1;for(let z of J.names)if(q(W,z))return!0;return!1}function K(W){if(W instanceof Error)return W.stack||W.message;return W}function H(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return J.enable(J.load()),J}_3.exports=OO});var N3=l8((D1,v7)=>{D1.formatArgs=jO;D1.save=AO;D1.load=PO;D1.useColors=NO;D1.storage=RO();D1.destroy=(()=>{let Z=!1;return()=>{if(!Z)Z=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}})();D1.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function NO(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let Z;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(Z=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(Z[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function jO(Z){if(Z[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+Z[0]+(this.useColors?"%c ":" ")+"+"+v7.exports.humanize(this.diff),!this.useColors)return;let Q="color: "+this.color;Z.splice(1,0,Q,"color: inherit");let J=0,X=0;Z[0].replace(/%[a-zA-Z%]/g,(Y)=>{if(Y==="%%")return;if(J++,Y==="%c")X=J}),Z.splice(X,0,Q)}D1.log=console.debug||console.log||(()=>{});function AO(Z){try{if(Z)D1.storage.setItem("debug",Z);else D1.storage.removeItem("debug")}catch(Q){}}function PO(){let Z;try{Z=D1.storage.getItem("debug")||D1.storage.getItem("DEBUG")}catch(Q){}if(!Z&&typeof process<"u"&&"env"in process)Z=process.env.DEBUG;return Z}function RO(){try{return localStorage}catch(Z){}}v7.exports=O3()(D1);var{formatters:MO}=v7.exports;MO.j=function(Z){try{return JSON.stringify(Z)}catch(Q){return"[UnexpectedJSONParseError]: "+Q.message}}});var LK=l8((Ix,VK)=>{var i7=Object.prototype.hasOwnProperty,BK=Object.prototype.toString,UK=Object.defineProperty,KK=Object.getOwnPropertyDescriptor,HK=function(Q){if(typeof Array.isArray==="function")return Array.isArray(Q);return BK.call(Q)==="[object Array]"},WK=function(Q){if(!Q||BK.call(Q)!=="[object Object]")return!1;var J=i7.call(Q,"constructor"),X=Q.constructor&&Q.constructor.prototype&&i7.call(Q.constructor.prototype,"isPrototypeOf");if(Q.constructor&&!J&&!X)return!1;var Y;for(Y in Q);return typeof Y>"u"||i7.call(Q,Y)},zK=function(Q,J){if(UK&&J.name==="__proto__")UK(Q,J.name,{enumerable:!0,configurable:!0,value:J.newValue,writable:!0});else Q[J.name]=J.newValue},FK=function(Q,J){if(J==="__proto__"){if(!i7.call(Q,J))return;else if(KK)return KK(Q,J).value}return Q[J]};VK.exports=function Z(){var Q,J,X,Y,q,G,U=arguments[0],K=1,H=arguments.length,W=!1;if(typeof U==="boolean")W=U,U=arguments[1]||{},K=2;if(U==null||typeof U!=="object"&&typeof U!=="function")U={};for(;K<H;++K)if(Q=arguments[K],Q!=null){for(J in Q)if(X=FK(U,J),Y=FK(Q,J),U!==Y){if(W&&Y&&(WK(Y)||(q=HK(Y)))){if(q)q=!1,G=X&&HK(X)?X:[];else G=X&&WK(X)?X:{};zK(U,{name:J,newValue:Z(W,G,Y)})}else if(typeof Y<"u")zK(U,{name:J,newValue:Y})}}return U}});var SI={};Mq(SI,{CmsEditor:()=>Bq});var r8,L0,$q,UZ,L4,Dq,bq,Cq,yq,KZ,YZ,qZ,_V,E2={},Sq=[],OV=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,a8=Array.isArray;function N5(Z,Q){for(var J in Q)Z[J]=Q[J];return Z}function HZ(Z){Z&&Z.parentNode&&Z.parentNode.removeChild(Z)}function NV(Z,Q,J){var X,Y,q,G={};for(q in Q)q=="key"?X=Q[q]:q=="ref"?Y=Q[q]:G[q]=Q[q];if(arguments.length>2&&(G.children=arguments.length>3?r8.call(arguments,2):J),typeof Z=="function"&&Z.defaultProps!=null)for(q in Z.defaultProps)G[q]===void 0&&(G[q]=Z.defaultProps[q]);return d8(Z,G,X,Y,null)}function d8(Z,Q,J,X,Y){var q={type:Z,props:Q,key:J,ref:X,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:Y==null?++$q:Y,__i:-1,__u:0};return Y==null&&L0.vnode!=null&&L0.vnode(q),q}function X1(Z){return Z.children}function f5(Z,Q){this.props=Z,this.context=Q}function B6(Z,Q){if(Q==null)return Z.__?B6(Z.__,Z.__i+1):null;for(var J;Q<Z.__k.length;Q++)if((J=Z.__k[Q])!=null&&J.__e!=null)return J.__e;return typeof Z.type=="function"?B6(Z):null}function wq(Z){var Q,J;if((Z=Z.__)!=null&&Z.__c!=null){for(Z.__e=Z.__c.base=null,Q=0;Q<Z.__k.length;Q++)if((J=Z.__k[Q])!=null&&J.__e!=null){Z.__e=Z.__c.base=J.__e;break}return wq(Z)}}function Iq(Z){(!Z.__d&&(Z.__d=!0)&&L4.push(Z)&&!c8.__r++||Dq!=L0.debounceRendering)&&((Dq=L0.debounceRendering)||bq)(c8)}function c8(){for(var Z,Q,J,X,Y,q,G,U=1;L4.length;)L4.length>U&&L4.sort(Cq),Z=L4.shift(),U=L4.length,Z.__d&&(J=void 0,X=void 0,Y=(X=(Q=Z).__v).__e,q=[],G=[],Q.__P&&((J=N5({},X)).__v=X.__v+1,L0.vnode&&L0.vnode(J),WZ(Q.__P,J,X,Q.__n,Q.__P.namespaceURI,32&X.__u?[Y]:null,q,Y==null?B6(X):Y,!!(32&X.__u),G),J.__v=X.__v,J.__.__k[J.__i]=J,gq(q,J,G),X.__e=X.__=null,J.__e!=Y&&wq(J)));c8.__r=0}function xq(Z,Q,J,X,Y,q,G,U,K,H,W){var z,F,B,V,O,N,j,R=X&&X.__k||Sq,E=Q.length;for(K=jV(J,Q,R,K,E),z=0;z<E;z++)(B=J.__k[z])!=null&&(F=B.__i==-1?E2:R[B.__i]||E2,B.__i=z,N=WZ(Z,B,F,Y,q,G,U,K,H,W),V=B.__e,B.ref&&F.ref!=B.ref&&(F.ref&&zZ(F.ref,null,B),W.push(B.ref,B.__c||V,B)),O==null&&V!=null&&(O=V),(j=!!(4&B.__u))||F.__k===B.__k?K=kq(B,K,Z,j):typeof B.type=="function"&&N!==void 0?K=N:V&&(K=V.nextSibling),B.__u&=-7);return J.__e=O,K}function jV(Z,Q,J,X,Y){var q,G,U,K,H,W=J.length,z=W,F=0;for(Z.__k=Array(Y),q=0;q<Y;q++)(G=Q[q])!=null&&typeof G!="boolean"&&typeof G!="function"?(typeof G=="string"||typeof G=="number"||typeof G=="bigint"||G.constructor==String?G=Z.__k[q]=d8(null,G,null,null,null):a8(G)?G=Z.__k[q]=d8(X1,{children:G},null,null,null):G.constructor==null&&G.__b>0?G=Z.__k[q]=d8(G.type,G.props,G.key,G.ref?G.ref:null,G.__v):Z.__k[q]=G,K=q+F,G.__=Z,G.__b=Z.__b+1,(H=G.__i=AV(G,J,K,z))!=-1&&(z--,(U=J[H])&&(U.__u|=2)),U==null||U.__v==null?(H==-1&&(Y>W?F--:Y<W&&F++),typeof G.type!="function"&&(G.__u|=4)):H!=K&&(H==K-1?F--:H==K+1?F++:(H>K?F--:F++,G.__u|=4))):Z.__k[q]=null;if(z)for(q=0;q<W;q++)(U=J[q])!=null&&(2&U.__u)==0&&(U.__e==X&&(X=B6(U)),hq(U,U));return X}function kq(Z,Q,J,X){var Y,q;if(typeof Z.type=="function"){for(Y=Z.__k,q=0;Y&&q<Y.length;q++)Y[q]&&(Y[q].__=Z,Q=kq(Y[q],Q,J,X));return Q}Z.__e!=Q&&(X&&(Q&&Z.type&&!Q.parentNode&&(Q=B6(Z)),J.insertBefore(Z.__e,Q||null)),Q=Z.__e);do Q=Q&&Q.nextSibling;while(Q!=null&&Q.nodeType==8);return Q}function AV(Z,Q,J,X){var Y,q,G,U=Z.key,K=Z.type,H=Q[J],W=H!=null&&(2&H.__u)==0;if(H===null&&U==null||W&&U==H.key&&K==H.type)return J;if(X>(W?1:0)){for(Y=J-1,q=J+1;Y>=0||q<Q.length;)if((H=Q[G=Y>=0?Y--:q++])!=null&&(2&H.__u)==0&&U==H.key&&K==H.type)return G}return-1}function Eq(Z,Q,J){Q[0]=="-"?Z.setProperty(Q,J==null?"":J):Z[Q]=J==null?"":typeof J!="number"||OV.test(Q)?J:J+"px"}function i8(Z,Q,J,X,Y){var q,G;Z:if(Q=="style")if(typeof J=="string")Z.style.cssText=J;else{if(typeof X=="string"&&(Z.style.cssText=X=""),X)for(Q in X)J&&Q in J||Eq(Z.style,Q,"");if(J)for(Q in J)X&&J[Q]==X[Q]||Eq(Z.style,Q,J[Q])}else if(Q[0]=="o"&&Q[1]=="n")q=Q!=(Q=Q.replace(yq,"$1")),G=Q.toLowerCase(),Q=G in Z||Q=="onFocusOut"||Q=="onFocusIn"?G.slice(2):Q.slice(2),Z.l||(Z.l={}),Z.l[Q+q]=J,J?X?J.u=X.u:(J.u=KZ,Z.addEventListener(Q,q?qZ:YZ,q)):Z.removeEventListener(Q,q?qZ:YZ,q);else{if(Y=="http://www.w3.org/2000/svg")Q=Q.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(Q!="width"&&Q!="height"&&Q!="href"&&Q!="list"&&Q!="form"&&Q!="tabIndex"&&Q!="download"&&Q!="rowSpan"&&Q!="colSpan"&&Q!="role"&&Q!="popover"&&Q in Z)try{Z[Q]=J==null?"":J;break Z}catch(U){}typeof J=="function"||(J==null||J===!1&&Q[4]!="-"?Z.removeAttribute(Q):Z.setAttribute(Q,Q=="popover"&&J==1?"":J))}}function Tq(Z){return function(Q){if(this.l){var J=this.l[Q.type+Z];if(Q.t==null)Q.t=KZ++;else if(Q.t<J.u)return;return J(L0.event?L0.event(Q):Q)}}}function WZ(Z,Q,J,X,Y,q,G,U,K,H){var W,z,F,B,V,O,N,j,R,E,$,w,I,g,S,u,T,F0=Q.type;if(Q.constructor!=null)return null;128&J.__u&&(K=!!(32&J.__u),q=[U=Q.__e=J.__e]),(W=L0.__b)&&W(Q);Z:if(typeof F0=="function")try{if(j=Q.props,R="prototype"in F0&&F0.prototype.render,E=(W=F0.contextType)&&X[W.__c],$=W?E?E.props.value:W.__:X,J.__c?N=(z=Q.__c=J.__c).__=z.__E:(R?Q.__c=z=new F0(j,$):(Q.__c=z=new f5(j,$),z.constructor=F0,z.render=RV),E&&E.sub(z),z.state||(z.state={}),z.__n=X,F=z.__d=!0,z.__h=[],z._sb=[]),R&&z.__s==null&&(z.__s=z.state),R&&F0.getDerivedStateFromProps!=null&&(z.__s==z.state&&(z.__s=N5({},z.__s)),N5(z.__s,F0.getDerivedStateFromProps(j,z.__s))),B=z.props,V=z.state,z.__v=Q,F)R&&F0.getDerivedStateFromProps==null&&z.componentWillMount!=null&&z.componentWillMount(),R&&z.componentDidMount!=null&&z.__h.push(z.componentDidMount);else{if(R&&F0.getDerivedStateFromProps==null&&j!==B&&z.componentWillReceiveProps!=null&&z.componentWillReceiveProps(j,$),Q.__v==J.__v||!z.__e&&z.shouldComponentUpdate!=null&&z.shouldComponentUpdate(j,z.__s,$)===!1){for(Q.__v!=J.__v&&(z.props=j,z.state=z.__s,z.__d=!1),Q.__e=J.__e,Q.__k=J.__k,Q.__k.some(function(e){e&&(e.__=Q)}),w=0;w<z._sb.length;w++)z.__h.push(z._sb[w]);z._sb=[],z.__h.length&&G.push(z);break Z}z.componentWillUpdate!=null&&z.componentWillUpdate(j,z.__s,$),R&&z.componentDidUpdate!=null&&z.__h.push(function(){z.componentDidUpdate(B,V,O)})}if(z.context=$,z.props=j,z.__P=Z,z.__e=!1,I=L0.__r,g=0,R){for(z.state=z.__s,z.__d=!1,I&&I(Q),W=z.render(z.props,z.state,z.context),S=0;S<z._sb.length;S++)z.__h.push(z._sb[S]);z._sb=[]}else do z.__d=!1,I&&I(Q),W=z.render(z.props,z.state,z.context),z.state=z.__s;while(z.__d&&++g<25);z.state=z.__s,z.getChildContext!=null&&(X=N5(N5({},X),z.getChildContext())),R&&!F&&z.getSnapshotBeforeUpdate!=null&&(O=z.getSnapshotBeforeUpdate(B,V)),u=W,W!=null&&W.type===X1&&W.key==null&&(u=vq(W.props.children)),U=xq(Z,a8(u)?u:[u],Q,J,X,Y,q,G,U,K,H),z.base=Q.__e,Q.__u&=-161,z.__h.length&&G.push(z),N&&(z.__E=z.__=null)}catch(e){if(Q.__v=null,K||q!=null)if(e.then){for(Q.__u|=K?160:128;U&&U.nodeType==8&&U.nextSibling;)U=U.nextSibling;q[q.indexOf(U)]=null,Q.__e=U}else{for(T=q.length;T--;)HZ(q[T]);GZ(Q)}else Q.__e=J.__e,Q.__k=J.__k,e.then||GZ(Q);L0.__e(e,Q,J)}else q==null&&Q.__v==J.__v?(Q.__k=J.__k,Q.__e=J.__e):U=Q.__e=PV(J.__e,Q,J,X,Y,q,G,K,H);return(W=L0.diffed)&&W(Q),128&Q.__u?void 0:U}function GZ(Z){Z&&Z.__c&&(Z.__c.__e=!0),Z&&Z.__k&&Z.__k.forEach(GZ)}function gq(Z,Q,J){for(var X=0;X<J.length;X++)zZ(J[X],J[++X],J[++X]);L0.__c&&L0.__c(Q,Z),Z.some(function(Y){try{Z=Y.__h,Y.__h=[],Z.some(function(q){q.call(Y)})}catch(q){L0.__e(q,Y.__v)}})}function vq(Z){return typeof Z!="object"||Z==null||Z.__b&&Z.__b>0?Z:a8(Z)?Z.map(vq):N5({},Z)}function PV(Z,Q,J,X,Y,q,G,U,K){var H,W,z,F,B,V,O,N=J.props||E2,j=Q.props,R=Q.type;if(R=="svg"?Y="http://www.w3.org/2000/svg":R=="math"?Y="http://www.w3.org/1998/Math/MathML":Y||(Y="http://www.w3.org/1999/xhtml"),q!=null){for(H=0;H<q.length;H++)if((B=q[H])&&"setAttribute"in B==!!R&&(R?B.localName==R:B.nodeType==3)){Z=B,q[H]=null;break}}if(Z==null){if(R==null)return document.createTextNode(j);Z=document.createElementNS(Y,R,j.is&&j),U&&(L0.__m&&L0.__m(Q,q),U=!1),q=null}if(R==null)N===j||U&&Z.data==j||(Z.data=j);else{if(q=q&&r8.call(Z.childNodes),!U&&q!=null)for(N={},H=0;H<Z.attributes.length;H++)N[(B=Z.attributes[H]).name]=B.value;for(H in N)if(B=N[H],H=="children");else if(H=="dangerouslySetInnerHTML")z=B;else if(!(H in j)){if(H=="value"&&"defaultValue"in j||H=="checked"&&"defaultChecked"in j)continue;i8(Z,H,null,B,Y)}for(H in j)B=j[H],H=="children"?F=B:H=="dangerouslySetInnerHTML"?W=B:H=="value"?V=B:H=="checked"?O=B:U&&typeof B!="function"||N[H]===B||i8(Z,H,B,N[H],Y);if(W)U||z&&(W.__html==z.__html||W.__html==Z.innerHTML)||(Z.innerHTML=W.__html),Q.__k=[];else if(z&&(Z.innerHTML=""),xq(Q.type=="template"?Z.content:Z,a8(F)?F:[F],Q,J,X,R=="foreignObject"?"http://www.w3.org/1999/xhtml":Y,q,G,q?q[0]:J.__k&&B6(J,0),U,K),q!=null)for(H=q.length;H--;)HZ(q[H]);U||(H="value",R=="progress"&&V==null?Z.removeAttribute("value"):V!=null&&(V!==Z[H]||R=="progress"&&!V||R=="option"&&V!=N[H])&&i8(Z,H,V,N[H],Y),H="checked",O!=null&&O!=Z[H]&&i8(Z,H,O,N[H],Y))}return Z}function zZ(Z,Q,J){try{if(typeof Z=="function"){var X=typeof Z.__u=="function";X&&Z.__u(),X&&Q==null||(Z.__u=Z(Q))}else Z.current=Q}catch(Y){L0.__e(Y,J)}}function hq(Z,Q,J){var X,Y;if(L0.unmount&&L0.unmount(Z),(X=Z.ref)&&(X.current&&X.current!=Z.__e||zZ(X,null,Q)),(X=Z.__c)!=null){if(X.componentWillUnmount)try{X.componentWillUnmount()}catch(q){L0.__e(q,Q)}X.base=X.__P=null}if(X=Z.__k)for(Y=0;Y<X.length;Y++)X[Y]&&hq(X[Y],Q,J||typeof Z.type!="function");J||HZ(Z.__e),Z.__c=Z.__=Z.__e=void 0}function RV(Z,Q,J){return this.constructor(Z,J)}function uq(Z,Q,J){var X,Y,q,G;Q==document&&(Q=document.documentElement),L0.__&&L0.__(Z,Q),Y=(X=typeof J=="function")?null:J&&J.__k||Q.__k,q=[],G=[],WZ(Q,Z=(!X&&J||Q).__k=NV(X1,null,[Z]),Y||E2,E2,Q.namespaceURI,!X&&J?[J]:Y?null:Q.firstChild?r8.call(Q.childNodes):null,q,!X&&J?J:Y?Y.__e:Q.firstChild,X,G),gq(q,Z,G)}r8=Sq.slice,L0={__e:function(Z,Q,J,X){for(var Y,q,G;Q=Q.__;)if((Y=Q.__c)&&!Y.__)try{if((q=Y.constructor)&&q.getDerivedStateFromError!=null&&(Y.setState(q.getDerivedStateFromError(Z)),G=Y.__d),Y.componentDidCatch!=null&&(Y.componentDidCatch(Z,X||{}),G=Y.__d),G)return Y.__E=Y}catch(U){Z=U}throw Z}},$q=0,UZ=function(Z){return Z!=null&&Z.constructor==null},f5.prototype.setState=function(Z,Q){var J;J=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=N5({},this.state),typeof Z=="function"&&(Z=Z(N5({},J),this.props)),Z&&N5(J,Z),Z!=null&&this.__v&&(Q&&this._sb.push(Q),Iq(this))},f5.prototype.forceUpdate=function(Z){this.__v&&(this.__e=!0,Z&&this.__h.push(Z),Iq(this))},f5.prototype.render=X1,L4=[],bq=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Cq=function(Z,Q){return Z.__v.__b-Q.__v.__b},c8.__r=0,yq=/(PointerCapture)$|Capture$/i,KZ=0,YZ=Tq(!1),qZ=Tq(!0),_V=0;var T2,g0,FZ,fq,$2=0,aq=[],m0=L0,mq=m0.__b,pq=m0.__r,lq=m0.diffed,iq=m0.__c,dq=m0.unmount,cq=m0.__;function VZ(Z,Q){m0.__h&&m0.__h(g0,Z,$2||Q),$2=0;var J=g0.__H||(g0.__H={__:[],__h:[]});return Z>=J.__.length&&J.__.push({}),J.__[Z]}function J0(Z){return $2=1,MV(sq,Z)}function MV(Z,Q,J){var X=VZ(T2++,2);if(X.t=Z,!X.__c&&(X.__=[J?J(Q):sq(void 0,Q),function(U){var K=X.__N?X.__N[0]:X.__[0],H=X.t(K,U);K!==H&&(X.__N=[H,X.__[1]],X.__c.setState({}))}],X.__c=g0,!g0.__f)){var Y=function(U,K,H){if(!X.__c.__H)return!0;var W=X.__c.__H.__.filter(function(F){return!!F.__c});if(W.every(function(F){return!F.__N}))return!q||q.call(this,U,K,H);var z=X.__c.props!==U;return W.forEach(function(F){if(F.__N){var B=F.__[0];F.__=F.__N,F.__N=void 0,B!==F.__[0]&&(z=!0)}}),q&&q.call(this,U,K,H)||z};g0.__f=!0;var{shouldComponentUpdate:q,componentWillUpdate:G}=g0;g0.componentWillUpdate=function(U,K,H){if(this.__e){var W=q;q=void 0,Y(U,K,H),q=W}G&&G.call(this,U,K,H)},g0.shouldComponentUpdate=Y}return X.__N||X.__}function j0(Z,Q){var J=VZ(T2++,3);!m0.__s&&nq(J.__H,Q)&&(J.__=Z,J.u=Q,g0.__H.__h.push(J))}function x0(Z){return $2=5,V6(function(){return{current:Z}},[])}function V6(Z,Q){var J=VZ(T2++,7);return nq(J.__H,Q)&&(J.__=Z(),J.__H=Q,J.__h=Z),J.__}function U0(Z,Q){return $2=8,V6(function(){return Z},Q)}function DV(){for(var Z;Z=aq.shift();)if(Z.__P&&Z.__H)try{Z.__H.__h.forEach(n8),Z.__H.__h.forEach(BZ),Z.__H.__h=[]}catch(Q){Z.__H.__h=[],m0.__e(Q,Z.__v)}}m0.__b=function(Z){g0=null,mq&&mq(Z)},m0.__=function(Z,Q){Z&&Q.__k&&Q.__k.__m&&(Z.__m=Q.__k.__m),cq&&cq(Z,Q)},m0.__r=function(Z){pq&&pq(Z),T2=0;var Q=(g0=Z.__c).__H;Q&&(FZ===g0?(Q.__h=[],g0.__h=[],Q.__.forEach(function(J){J.__N&&(J.__=J.__N),J.u=J.__N=void 0})):(Q.__h.forEach(n8),Q.__h.forEach(BZ),Q.__h=[],T2=0)),FZ=g0},m0.diffed=function(Z){lq&&lq(Z);var Q=Z.__c;Q&&Q.__H&&(Q.__H.__h.length&&(aq.push(Q)!==1&&fq===m0.requestAnimationFrame||((fq=m0.requestAnimationFrame)||IV)(DV)),Q.__H.__.forEach(function(J){J.u&&(J.__H=J.u),J.u=void 0})),FZ=g0=null},m0.__c=function(Z,Q){Q.some(function(J){try{J.__h.forEach(n8),J.__h=J.__h.filter(function(X){return!X.__||BZ(X)})}catch(X){Q.some(function(Y){Y.__h&&(Y.__h=[])}),Q=[],m0.__e(X,J.__v)}}),iq&&iq(Z,Q)},m0.unmount=function(Z){dq&&dq(Z);var Q,J=Z.__c;J&&J.__H&&(J.__H.__.forEach(function(X){try{n8(X)}catch(Y){Q=Y}}),J.__H=void 0,Q&&m0.__e(Q,J.__v))};var rq=typeof requestAnimationFrame=="function";function IV(Z){var Q,J=function(){clearTimeout(X),rq&&cancelAnimationFrame(Q),setTimeout(Z)},X=setTimeout(J,35);rq&&(Q=requestAnimationFrame(J))}function n8(Z){var Q=g0,J=Z.__c;typeof J=="function"&&(Z.__c=void 0,J()),g0=Q}function BZ(Z){var Q=g0;Z.__c=Z.__(),g0=Q}function nq(Z,Q){return!Z||Z.length!==Q.length||Q.some(function(J,X){return J!==Z[X]})}function sq(Z,Q){return typeof Q=="function"?Q(Z):Q}function _Z(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var O4=_Z();function JG(Z){O4=Z}var y2={exec:()=>null};function A0(Z,Q=""){let J=typeof Z==="string"?Z:Z.source,X={replace:(Y,q)=>{let G=typeof q==="string"?q:q.source;return G=G.replace(z1.caret,"$1"),J=J.replace(Y,G),X},getRegex:()=>{return new RegExp(J,Q)}};return X}var z1={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:(Z)=>new RegExp(`^( {0,3}${Z})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:(Z)=>new RegExp(`^ {0,${Math.min(3,Z-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:(Z)=>new RegExp(`^ {0,${Math.min(3,Z-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:(Z)=>new RegExp(`^ {0,${Math.min(3,Z-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:(Z)=>new RegExp(`^ {0,${Math.min(3,Z-1)}}#`),htmlBeginRegex:(Z)=>new RegExp(`^ {0,${Math.min(3,Z-1)}}<(?:[a-z].*>|!--)`,"i")},EV=/^(?:[ \t]*(?:\n|$))+/,TV=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,$V=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,S2=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,bV=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,OZ=/(?:[*+-]|\d{1,9}[.)])/,XG=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,YG=A0(XG).replace(/bull/g,OZ).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),CV=A0(XG).replace(/bull/g,OZ).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),NZ=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,yV=/^[^\n]+/,jZ=/(?!\s*\])(?:\\.|[^\[\]\\])+/,SV=A0(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",jZ).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),wV=A0(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,OZ).getRegex(),Q7="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",AZ=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,xV=A0("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$))","i").replace("comment",AZ).replace("tag",Q7).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),qG=A0(NZ).replace("hr",S2).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Q7).getRegex(),kV=A0(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",qG).getRegex(),PZ={blockquote:kV,code:TV,def:SV,fences:$V,heading:bV,hr:S2,html:xV,lheading:YG,list:wV,newline:EV,paragraph:qG,table:y2,text:yV},oq=A0("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",S2).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}\t)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Q7).getRegex(),gV={...PZ,lheading:CV,table:oq,paragraph:A0(NZ).replace("hr",S2).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",oq).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Q7).getRegex()},vV={...PZ,html:A0(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",AZ).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:y2,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:A0(NZ).replace("hr",S2).replace("heading",` *#{1,6} *[^
]`).replace("lheading",YG).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},hV=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,uV=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,GG=/^( {2,}|\\)\n(?!\s*$)/,fV=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,J7=/[\p{P}\p{S}]/u,RZ=/[\s\p{P}\p{S}]/u,UG=/[^\s\p{P}\p{S}]/u,mV=A0(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,RZ).getRegex(),KG=/(?!~)[\p{P}\p{S}]/u,pV=/(?!~)[\s\p{P}\p{S}]/u,lV=/(?:[^\s\p{P}\p{S}]|~)/u,iV=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,HG=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,dV=A0(HG,"u").replace(/punct/g,J7).getRegex(),cV=A0(HG,"u").replace(/punct/g,KG).getRegex(),WG="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",rV=A0(WG,"gu").replace(/notPunctSpace/g,UG).replace(/punctSpace/g,RZ).replace(/punct/g,J7).getRegex(),aV=A0(WG,"gu").replace(/notPunctSpace/g,lV).replace(/punctSpace/g,pV).replace(/punct/g,KG).getRegex(),nV=A0("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,UG).replace(/punctSpace/g,RZ).replace(/punct/g,J7).getRegex(),sV=A0(/\\(punct)/,"gu").replace(/punct/g,J7).getRegex(),oV=A0(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),tV=A0(AZ).replace("(?:-->|$)","-->").getRegex(),eV=A0("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",tV).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),t8=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,ZL=A0(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",t8).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),zG=A0(/^!?\[(label)\]\[(ref)\]/).replace("label",t8).replace("ref",jZ).getRegex(),FG=A0(/^!?\[(ref)\](?:\[\])?/).replace("ref",jZ).getRegex(),QL=A0("reflink|nolink(?!\\()","g").replace("reflink",zG).replace("nolink",FG).getRegex(),MZ={_backpedal:y2,anyPunctuation:sV,autolink:oV,blockSkip:iV,br:GG,code:uV,del:y2,emStrongLDelim:dV,emStrongRDelimAst:rV,emStrongRDelimUnd:nV,escape:hV,link:ZL,nolink:FG,punctuation:mV,reflink:zG,reflinkSearch:QL,tag:eV,text:fV,url:y2},JL={...MZ,link:A0(/^!?\[(label)\]\((.*?)\)/).replace("label",t8).getRegex(),reflink:A0(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",t8).getRegex()},LZ={...MZ,emStrongRDelimAst:aV,emStrongLDelim:cV,url:A0(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},XL={...LZ,br:A0(GG).replace("{2,}","*").getRegex(),text:A0(LZ.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},s8={normal:PZ,gfm:gV,pedantic:vV},b2={normal:MZ,gfm:LZ,breaks:XL,pedantic:JL},YL={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},tq=(Z)=>YL[Z];function Q5(Z,Q){if(Q){if(z1.escapeTest.test(Z))return Z.replace(z1.escapeReplace,tq)}else if(z1.escapeTestNoEncode.test(Z))return Z.replace(z1.escapeReplaceNoEncode,tq);return Z}function eq(Z){try{Z=encodeURI(Z).replace(z1.percentDecode,"%")}catch{return null}return Z}function ZG(Z,Q){let J=Z.replace(z1.findPipe,(q,G,U)=>{let K=!1,H=G;while(--H>=0&&U[H]==="\\")K=!K;if(K)return"|";else return" |"}),X=J.split(z1.splitPipe),Y=0;if(!X[0].trim())X.shift();if(X.length>0&&!X.at(-1)?.trim())X.pop();if(Q)if(X.length>Q)X.splice(Q);else while(X.length<Q)X.push("");for(;Y<X.length;Y++)X[Y]=X[Y].trim().replace(z1.slashPipe,"|");return X}function C2(Z,Q,J){let X=Z.length;if(X===0)return"";let Y=0;while(Y<X){let q=Z.charAt(X-Y-1);if(q===Q&&!J)Y++;else if(q!==Q&&J)Y++;else break}return Z.slice(0,X-Y)}function qL(Z,Q){if(Z.indexOf(Q[1])===-1)return-1;let J=0;for(let X=0;X<Z.length;X++)if(Z[X]==="\\")X++;else if(Z[X]===Q[0])J++;else if(Z[X]===Q[1]){if(J--,J<0)return X}if(J>0)return-2;return-1}function QG(Z,Q,J,X,Y){let q=Q.href,G=Q.title||null,U=Z[1].replace(Y.other.outputLinkReplace,"$1");X.state.inLink=!0;let K={type:Z[0].charAt(0)==="!"?"image":"link",raw:J,href:q,title:G,text:U,tokens:X.inlineTokens(U)};return X.state.inLink=!1,K}function GL(Z,Q,J){let X=Z.match(J.other.indentCodeCompensation);if(X===null)return Q;let Y=X[1];return Q.split(`
`).map((q)=>{let G=q.match(J.other.beginningSpace);if(G===null)return q;let[U]=G;if(U.length>=Y.length)return q.slice(Y.length);return q}).join(`
`)}var e8=class{options;rules;lexer;constructor(Z){this.options=Z||O4}space(Z){let Q=this.rules.block.newline.exec(Z);if(Q&&Q[0].length>0)return{type:"space",raw:Q[0]}}code(Z){let Q=this.rules.block.code.exec(Z);if(Q){let J=Q[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:Q[0],codeBlockStyle:"indented",text:!this.options.pedantic?C2(J,`
`):J}}}fences(Z){let Q=this.rules.block.fences.exec(Z);if(Q){let J=Q[0],X=GL(J,Q[3]||"",this.rules);return{type:"code",raw:J,lang:Q[2]?Q[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):Q[2],text:X}}}heading(Z){let Q=this.rules.block.heading.exec(Z);if(Q){let J=Q[2].trim();if(this.rules.other.endingHash.test(J)){let X=C2(J,"#");if(this.options.pedantic)J=X.trim();else if(!X||this.rules.other.endingSpaceChar.test(X))J=X.trim()}return{type:"heading",raw:Q[0],depth:Q[1].length,text:J,tokens:this.lexer.inline(J)}}}hr(Z){let Q=this.rules.block.hr.exec(Z);if(Q)return{type:"hr",raw:C2(Q[0],`
`)}}blockquote(Z){let Q=this.rules.block.blockquote.exec(Z);if(Q){let J=C2(Q[0],`
`).split(`
`),X="",Y="",q=[];while(J.length>0){let G=!1,U=[],K;for(K=0;K<J.length;K++)if(this.rules.other.blockquoteStart.test(J[K]))U.push(J[K]),G=!0;else if(!G)U.push(J[K]);else break;J=J.slice(K);let H=U.join(`
`),W=H.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");X=X?`${X}
${H}`:H,Y=Y?`${Y}
${W}`:W;let z=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(W,q,!0),this.lexer.state.top=z,J.length===0)break;let F=q.at(-1);if(F?.type==="code")break;else if(F?.type==="blockquote"){let B=F,V=B.raw+`
`+J.join(`
`),O=this.blockquote(V);q[q.length-1]=O,X=X.substring(0,X.length-B.raw.length)+O.raw,Y=Y.substring(0,Y.length-B.text.length)+O.text;break}else if(F?.type==="list"){let B=F,V=B.raw+`
`+J.join(`
`),O=this.list(V);q[q.length-1]=O,X=X.substring(0,X.length-F.raw.length)+O.raw,Y=Y.substring(0,Y.length-B.raw.length)+O.raw,J=V.substring(q.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:X,tokens:q,text:Y}}}list(Z){let Q=this.rules.block.list.exec(Z);if(Q){let J=Q[1].trim(),X=J.length>1,Y={type:"list",raw:"",ordered:X,start:X?+J.slice(0,-1):"",loose:!1,items:[]};if(J=X?`\\d{1,9}\\${J.slice(-1)}`:`\\${J}`,this.options.pedantic)J=X?J:"[*+-]";let q=this.rules.other.listItemRegex(J),G=!1;while(Z){let K=!1,H="",W="";if(!(Q=q.exec(Z)))break;if(this.rules.block.hr.test(Z))break;H=Q[0],Z=Z.substring(H.length);let z=Q[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,(j)=>" ".repeat(3*j.length)),F=Z.split(`
`,1)[0],B=!z.trim(),V=0;if(this.options.pedantic)V=2,W=z.trimStart();else if(B)V=Q[1].length+1;else V=Q[2].search(this.rules.other.nonSpaceChar),V=V>4?1:V,W=z.slice(V),V+=Q[1].length;if(B&&this.rules.other.blankLine.test(F))H+=F+`
`,Z=Z.substring(F.length+1),K=!0;if(!K){let j=this.rules.other.nextBulletRegex(V),R=this.rules.other.hrRegex(V),E=this.rules.other.fencesBeginRegex(V),$=this.rules.other.headingBeginRegex(V),w=this.rules.other.htmlBeginRegex(V);while(Z){let I=Z.split(`
`,1)[0],g;if(F=I,this.options.pedantic)F=F.replace(this.rules.other.listReplaceNesting,"  "),g=F;else g=F.replace(this.rules.other.tabCharGlobal,"    ");if(E.test(F))break;if($.test(F))break;if(w.test(F))break;if(j.test(F))break;if(R.test(F))break;if(g.search(this.rules.other.nonSpaceChar)>=V||!F.trim())W+=`
`+g.slice(V);else{if(B)break;if(z.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4)break;if(E.test(z))break;if($.test(z))break;if(R.test(z))break;W+=`
`+F}if(!B&&!F.trim())B=!0;H+=I+`
`,Z=Z.substring(I.length+1),z=g.slice(V)}}if(!Y.loose){if(G)Y.loose=!0;else if(this.rules.other.doubleBlankLine.test(H))G=!0}let O=null,N;if(this.options.gfm){if(O=this.rules.other.listIsTask.exec(W),O)N=O[0]!=="[ ] ",W=W.replace(this.rules.other.listReplaceTask,"")}Y.items.push({type:"list_item",raw:H,task:!!O,checked:N,loose:!1,text:W,tokens:[]}),Y.raw+=H}let U=Y.items.at(-1);if(U)U.raw=U.raw.trimEnd(),U.text=U.text.trimEnd();else return;Y.raw=Y.raw.trimEnd();for(let K=0;K<Y.items.length;K++)if(this.lexer.state.top=!1,Y.items[K].tokens=this.lexer.blockTokens(Y.items[K].text,[]),!Y.loose){let H=Y.items[K].tokens.filter((z)=>z.type==="space"),W=H.length>0&&H.some((z)=>this.rules.other.anyLine.test(z.raw));Y.loose=W}if(Y.loose)for(let K=0;K<Y.items.length;K++)Y.items[K].loose=!0;return Y}}html(Z){let Q=this.rules.block.html.exec(Z);if(Q)return{type:"html",block:!0,raw:Q[0],pre:Q[1]==="pre"||Q[1]==="script"||Q[1]==="style",text:Q[0]}}def(Z){let Q=this.rules.block.def.exec(Z);if(Q){let J=Q[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),X=Q[2]?Q[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",Y=Q[3]?Q[3].substring(1,Q[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):Q[3];return{type:"def",tag:J,raw:Q[0],href:X,title:Y}}}table(Z){let Q=this.rules.block.table.exec(Z);if(!Q)return;if(!this.rules.other.tableDelimiter.test(Q[2]))return;let J=ZG(Q[1]),X=Q[2].replace(this.rules.other.tableAlignChars,"").split("|"),Y=Q[3]?.trim()?Q[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],q={type:"table",raw:Q[0],header:[],align:[],rows:[]};if(J.length!==X.length)return;for(let G of X)if(this.rules.other.tableAlignRight.test(G))q.align.push("right");else if(this.rules.other.tableAlignCenter.test(G))q.align.push("center");else if(this.rules.other.tableAlignLeft.test(G))q.align.push("left");else q.align.push(null);for(let G=0;G<J.length;G++)q.header.push({text:J[G],tokens:this.lexer.inline(J[G]),header:!0,align:q.align[G]});for(let G of Y)q.rows.push(ZG(G,q.header.length).map((U,K)=>{return{text:U,tokens:this.lexer.inline(U),header:!1,align:q.align[K]}}));return q}lheading(Z){let Q=this.rules.block.lheading.exec(Z);if(Q)return{type:"heading",raw:Q[0],depth:Q[2].charAt(0)==="="?1:2,text:Q[1],tokens:this.lexer.inline(Q[1])}}paragraph(Z){let Q=this.rules.block.paragraph.exec(Z);if(Q){let J=Q[1].charAt(Q[1].length-1)===`
`?Q[1].slice(0,-1):Q[1];return{type:"paragraph",raw:Q[0],text:J,tokens:this.lexer.inline(J)}}}text(Z){let Q=this.rules.block.text.exec(Z);if(Q)return{type:"text",raw:Q[0],text:Q[0],tokens:this.lexer.inline(Q[0])}}escape(Z){let Q=this.rules.inline.escape.exec(Z);if(Q)return{type:"escape",raw:Q[0],text:Q[1]}}tag(Z){let Q=this.rules.inline.tag.exec(Z);if(Q){if(!this.lexer.state.inLink&&this.rules.other.startATag.test(Q[0]))this.lexer.state.inLink=!0;else if(this.lexer.state.inLink&&this.rules.other.endATag.test(Q[0]))this.lexer.state.inLink=!1;if(!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(Q[0]))this.lexer.state.inRawBlock=!0;else if(this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(Q[0]))this.lexer.state.inRawBlock=!1;return{type:"html",raw:Q[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:Q[0]}}}link(Z){let Q=this.rules.inline.link.exec(Z);if(Q){let J=Q[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(J)){if(!this.rules.other.endAngleBracket.test(J))return;let q=C2(J.slice(0,-1),"\\");if((J.length-q.length)%2===0)return}else{let q=qL(Q[2],"()");if(q===-2)return;if(q>-1){let U=(Q[0].indexOf("!")===0?5:4)+Q[1].length+q;Q[2]=Q[2].substring(0,q),Q[0]=Q[0].substring(0,U).trim(),Q[3]=""}}let X=Q[2],Y="";if(this.options.pedantic){let q=this.rules.other.pedanticHrefTitle.exec(X);if(q)X=q[1],Y=q[3]}else Y=Q[3]?Q[3].slice(1,-1):"";if(X=X.trim(),this.rules.other.startAngleBracket.test(X))if(this.options.pedantic&&!this.rules.other.endAngleBracket.test(J))X=X.slice(1);else X=X.slice(1,-1);return QG(Q,{href:X?X.replace(this.rules.inline.anyPunctuation,"$1"):X,title:Y?Y.replace(this.rules.inline.anyPunctuation,"$1"):Y},Q[0],this.lexer,this.rules)}}reflink(Z,Q){let J;if((J=this.rules.inline.reflink.exec(Z))||(J=this.rules.inline.nolink.exec(Z))){let X=(J[2]||J[1]).replace(this.rules.other.multipleSpaceGlobal," "),Y=Q[X.toLowerCase()];if(!Y){let q=J[0].charAt(0);return{type:"text",raw:q,text:q}}return QG(J,Y,J[0],this.lexer,this.rules)}}emStrong(Z,Q,J=""){let X=this.rules.inline.emStrongLDelim.exec(Z);if(!X)return;if(X[3]&&J.match(this.rules.other.unicodeAlphaNumeric))return;if(!(X[1]||X[2])||!J||this.rules.inline.punctuation.exec(J)){let q=[...X[0]].length-1,G,U,K=q,H=0,W=X[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;W.lastIndex=0,Q=Q.slice(-1*Z.length+q);while((X=W.exec(Q))!=null){if(G=X[1]||X[2]||X[3]||X[4]||X[5]||X[6],!G)continue;if(U=[...G].length,X[3]||X[4]){K+=U;continue}else if(X[5]||X[6]){if(q%3&&!((q+U)%3)){H+=U;continue}}if(K-=U,K>0)continue;U=Math.min(U,U+K+H);let z=[...X[0]][0].length,F=Z.slice(0,q+X.index+z+U);if(Math.min(q,U)%2){let V=F.slice(1,-1);return{type:"em",raw:F,text:V,tokens:this.lexer.inlineTokens(V)}}let B=F.slice(2,-2);return{type:"strong",raw:F,text:B,tokens:this.lexer.inlineTokens(B)}}}}codespan(Z){let Q=this.rules.inline.code.exec(Z);if(Q){let J=Q[2].replace(this.rules.other.newLineCharGlobal," "),X=this.rules.other.nonSpaceChar.test(J),Y=this.rules.other.startingSpaceChar.test(J)&&this.rules.other.endingSpaceChar.test(J);if(X&&Y)J=J.substring(1,J.length-1);return{type:"codespan",raw:Q[0],text:J}}}br(Z){let Q=this.rules.inline.br.exec(Z);if(Q)return{type:"br",raw:Q[0]}}del(Z){let Q=this.rules.inline.del.exec(Z);if(Q)return{type:"del",raw:Q[0],text:Q[2],tokens:this.lexer.inlineTokens(Q[2])}}autolink(Z){let Q=this.rules.inline.autolink.exec(Z);if(Q){let J,X;if(Q[2]==="@")J=Q[1],X="mailto:"+J;else J=Q[1],X=J;return{type:"link",raw:Q[0],text:J,href:X,tokens:[{type:"text",raw:J,text:J}]}}}url(Z){let Q;if(Q=this.rules.inline.url.exec(Z)){let J,X;if(Q[2]==="@")J=Q[0],X="mailto:"+J;else{let Y;do Y=Q[0],Q[0]=this.rules.inline._backpedal.exec(Q[0])?.[0]??"";while(Y!==Q[0]);if(J=Q[0],Q[1]==="www.")X="http://"+Q[0];else X=Q[0]}return{type:"link",raw:Q[0],text:J,href:X,tokens:[{type:"text",raw:J,text:J}]}}}inlineText(Z){let Q=this.rules.inline.text.exec(Z);if(Q){let J=this.lexer.state.inRawBlock;return{type:"text",raw:Q[0],text:Q[0],escaped:J}}}},j5=class Z{tokens;options;state;tokenizer;inlineQueue;constructor(Q){this.tokens=[],this.tokens.links=Object.create(null),this.options=Q||O4,this.options.tokenizer=this.options.tokenizer||new e8,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let J={other:z1,block:s8.normal,inline:b2.normal};if(this.options.pedantic)J.block=s8.pedantic,J.inline=b2.pedantic;else if(this.options.gfm)if(J.block=s8.gfm,this.options.breaks)J.inline=b2.breaks;else J.inline=b2.gfm;this.tokenizer.rules=J}static get rules(){return{block:s8,inline:b2}}static lex(Q,J){return new Z(J).lex(Q)}static lexInline(Q,J){return new Z(J).inlineTokens(Q)}lex(Q){Q=Q.replace(z1.carriageReturn,`
`),this.blockTokens(Q,this.tokens);for(let J=0;J<this.inlineQueue.length;J++){let X=this.inlineQueue[J];this.inlineTokens(X.src,X.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(Q,J=[],X=!1){if(this.options.pedantic)Q=Q.replace(z1.tabCharGlobal,"    ").replace(z1.spaceLine,"");while(Q){let Y;if(this.options.extensions?.block?.some((G)=>{if(Y=G.call({lexer:this},Q,J))return Q=Q.substring(Y.raw.length),J.push(Y),!0;return!1}))continue;if(Y=this.tokenizer.space(Q)){Q=Q.substring(Y.raw.length);let G=J.at(-1);if(Y.raw.length===1&&G!==void 0)G.raw+=`
`;else J.push(Y);continue}if(Y=this.tokenizer.code(Q)){Q=Q.substring(Y.raw.length);let G=J.at(-1);if(G?.type==="paragraph"||G?.type==="text")G.raw+=`
`+Y.raw,G.text+=`
`+Y.text,this.inlineQueue.at(-1).src=G.text;else J.push(Y);continue}if(Y=this.tokenizer.fences(Q)){Q=Q.substring(Y.raw.length),J.push(Y);continue}if(Y=this.tokenizer.heading(Q)){Q=Q.substring(Y.raw.length),J.push(Y);continue}if(Y=this.tokenizer.hr(Q)){Q=Q.substring(Y.raw.length),J.push(Y);continue}if(Y=this.tokenizer.blockquote(Q)){Q=Q.substring(Y.raw.length),J.push(Y);continue}if(Y=this.tokenizer.list(Q)){Q=Q.substring(Y.raw.length),J.push(Y);continue}if(Y=this.tokenizer.html(Q)){Q=Q.substring(Y.raw.length),J.push(Y);continue}if(Y=this.tokenizer.def(Q)){Q=Q.substring(Y.raw.length);let G=J.at(-1);if(G?.type==="paragraph"||G?.type==="text")G.raw+=`
`+Y.raw,G.text+=`
`+Y.raw,this.inlineQueue.at(-1).src=G.text;else if(!this.tokens.links[Y.tag])this.tokens.links[Y.tag]={href:Y.href,title:Y.title};continue}if(Y=this.tokenizer.table(Q)){Q=Q.substring(Y.raw.length),J.push(Y);continue}if(Y=this.tokenizer.lheading(Q)){Q=Q.substring(Y.raw.length),J.push(Y);continue}let q=Q;if(this.options.extensions?.startBlock){let G=1/0,U=Q.slice(1),K;if(this.options.extensions.startBlock.forEach((H)=>{if(K=H.call({lexer:this},U),typeof K==="number"&&K>=0)G=Math.min(G,K)}),G<1/0&&G>=0)q=Q.substring(0,G+1)}if(this.state.top&&(Y=this.tokenizer.paragraph(q))){let G=J.at(-1);if(X&&G?.type==="paragraph")G.raw+=`
`+Y.raw,G.text+=`
`+Y.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=G.text;else J.push(Y);X=q.length!==Q.length,Q=Q.substring(Y.raw.length);continue}if(Y=this.tokenizer.text(Q)){Q=Q.substring(Y.raw.length);let G=J.at(-1);if(G?.type==="text")G.raw+=`
`+Y.raw,G.text+=`
`+Y.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=G.text;else J.push(Y);continue}if(Q){let G="Infinite loop on byte: "+Q.charCodeAt(0);if(this.options.silent){console.error(G);break}else throw Error(G)}}return this.state.top=!0,J}inline(Q,J=[]){return this.inlineQueue.push({src:Q,tokens:J}),J}inlineTokens(Q,J=[]){let X=Q,Y=null;if(this.tokens.links){let U=Object.keys(this.tokens.links);if(U.length>0){while((Y=this.tokenizer.rules.inline.reflinkSearch.exec(X))!=null)if(U.includes(Y[0].slice(Y[0].lastIndexOf("[")+1,-1)))X=X.slice(0,Y.index)+"["+"a".repeat(Y[0].length-2)+"]"+X.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex)}}while((Y=this.tokenizer.rules.inline.anyPunctuation.exec(X))!=null)X=X.slice(0,Y.index)+"++"+X.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);while((Y=this.tokenizer.rules.inline.blockSkip.exec(X))!=null)X=X.slice(0,Y.index)+"["+"a".repeat(Y[0].length-2)+"]"+X.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let q=!1,G="";while(Q){if(!q)G="";q=!1;let U;if(this.options.extensions?.inline?.some((H)=>{if(U=H.call({lexer:this},Q,J))return Q=Q.substring(U.raw.length),J.push(U),!0;return!1}))continue;if(U=this.tokenizer.escape(Q)){Q=Q.substring(U.raw.length),J.push(U);continue}if(U=this.tokenizer.tag(Q)){Q=Q.substring(U.raw.length),J.push(U);continue}if(U=this.tokenizer.link(Q)){Q=Q.substring(U.raw.length),J.push(U);continue}if(U=this.tokenizer.reflink(Q,this.tokens.links)){Q=Q.substring(U.raw.length);let H=J.at(-1);if(U.type==="text"&&H?.type==="text")H.raw+=U.raw,H.text+=U.text;else J.push(U);continue}if(U=this.tokenizer.emStrong(Q,X,G)){Q=Q.substring(U.raw.length),J.push(U);continue}if(U=this.tokenizer.codespan(Q)){Q=Q.substring(U.raw.length),J.push(U);continue}if(U=this.tokenizer.br(Q)){Q=Q.substring(U.raw.length),J.push(U);continue}if(U=this.tokenizer.del(Q)){Q=Q.substring(U.raw.length),J.push(U);continue}if(U=this.tokenizer.autolink(Q)){Q=Q.substring(U.raw.length),J.push(U);continue}if(!this.state.inLink&&(U=this.tokenizer.url(Q))){Q=Q.substring(U.raw.length),J.push(U);continue}let K=Q;if(this.options.extensions?.startInline){let H=1/0,W=Q.slice(1),z;if(this.options.extensions.startInline.forEach((F)=>{if(z=F.call({lexer:this},W),typeof z==="number"&&z>=0)H=Math.min(H,z)}),H<1/0&&H>=0)K=Q.substring(0,H+1)}if(U=this.tokenizer.inlineText(K)){if(Q=Q.substring(U.raw.length),U.raw.slice(-1)!=="_")G=U.raw.slice(-1);q=!0;let H=J.at(-1);if(H?.type==="text")H.raw+=U.raw,H.text+=U.text;else J.push(U);continue}if(Q){let H="Infinite loop on byte: "+Q.charCodeAt(0);if(this.options.silent){console.error(H);break}else throw Error(H)}}return J}},Z7=class{options;parser;constructor(Z){this.options=Z||O4}space(Z){return""}code({text:Z,lang:Q,escaped:J}){let X=(Q||"").match(z1.notSpaceStart)?.[0],Y=Z.replace(z1.endingNewline,"")+`
`;if(!X)return"<pre><code>"+(J?Y:Q5(Y,!0))+`</code></pre>
`;return'<pre><code class="language-'+Q5(X)+'">'+(J?Y:Q5(Y,!0))+`</code></pre>
`}blockquote({tokens:Z}){return`<blockquote>
${this.parser.parse(Z)}</blockquote>
`}html({text:Z}){return Z}heading({tokens:Z,depth:Q}){return`<h${Q}>${this.parser.parseInline(Z)}</h${Q}>
`}hr(Z){return`<hr>
`}list(Z){let{ordered:Q,start:J}=Z,X="";for(let G=0;G<Z.items.length;G++){let U=Z.items[G];X+=this.listitem(U)}let Y=Q?"ol":"ul",q=Q&&J!==1?' start="'+J+'"':"";return"<"+Y+q+`>
`+X+"</"+Y+`>
`}listitem(Z){let Q="";if(Z.task){let J=this.checkbox({checked:!!Z.checked});if(Z.loose)if(Z.tokens[0]?.type==="paragraph"){if(Z.tokens[0].text=J+" "+Z.tokens[0].text,Z.tokens[0].tokens&&Z.tokens[0].tokens.length>0&&Z.tokens[0].tokens[0].type==="text")Z.tokens[0].tokens[0].text=J+" "+Q5(Z.tokens[0].tokens[0].text),Z.tokens[0].tokens[0].escaped=!0}else Z.tokens.unshift({type:"text",raw:J+" ",text:J+" ",escaped:!0});else Q+=J+" "}return Q+=this.parser.parse(Z.tokens,!!Z.loose),`<li>${Q}</li>
`}checkbox({checked:Z}){return"<input "+(Z?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:Z}){return`<p>${this.parser.parseInline(Z)}</p>
`}table(Z){let Q="",J="";for(let Y=0;Y<Z.header.length;Y++)J+=this.tablecell(Z.header[Y]);Q+=this.tablerow({text:J});let X="";for(let Y=0;Y<Z.rows.length;Y++){let q=Z.rows[Y];J="";for(let G=0;G<q.length;G++)J+=this.tablecell(q[G]);X+=this.tablerow({text:J})}if(X)X=`<tbody>${X}</tbody>`;return`<table>
<thead>
`+Q+`</thead>
`+X+`</table>
`}tablerow({text:Z}){return`<tr>
${Z}</tr>
`}tablecell(Z){let Q=this.parser.parseInline(Z.tokens),J=Z.header?"th":"td";return(Z.align?`<${J} align="${Z.align}">`:`<${J}>`)+Q+`</${J}>
`}strong({tokens:Z}){return`<strong>${this.parser.parseInline(Z)}</strong>`}em({tokens:Z}){return`<em>${this.parser.parseInline(Z)}</em>`}codespan({text:Z}){return`<code>${Q5(Z,!0)}</code>`}br(Z){return"<br>"}del({tokens:Z}){return`<del>${this.parser.parseInline(Z)}</del>`}link({href:Z,title:Q,tokens:J}){let X=this.parser.parseInline(J),Y=eq(Z);if(Y===null)return X;Z=Y;let q='<a href="'+Z+'"';if(Q)q+=' title="'+Q5(Q)+'"';return q+=">"+X+"</a>",q}image({href:Z,title:Q,text:J,tokens:X}){if(X)J=this.parser.parseInline(X,this.parser.textRenderer);let Y=eq(Z);if(Y===null)return Q5(J);Z=Y;let q=`<img src="${Z}" alt="${J}"`;if(Q)q+=` title="${Q5(Q)}"`;return q+=">",q}text(Z){return"tokens"in Z&&Z.tokens?this.parser.parseInline(Z.tokens):("escaped"in Z)&&Z.escaped?Z.text:Q5(Z.text)}},DZ=class{strong({text:Z}){return Z}em({text:Z}){return Z}codespan({text:Z}){return Z}del({text:Z}){return Z}html({text:Z}){return Z}text({text:Z}){return Z}link({text:Z}){return""+Z}image({text:Z}){return""+Z}br(){return""}},A5=class Z{options;renderer;textRenderer;constructor(Q){this.options=Q||O4,this.options.renderer=this.options.renderer||new Z7,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new DZ}static parse(Q,J){return new Z(J).parse(Q)}static parseInline(Q,J){return new Z(J).parseInline(Q)}parse(Q,J=!0){let X="";for(let Y=0;Y<Q.length;Y++){let q=Q[Y];if(this.options.extensions?.renderers?.[q.type]){let U=q,K=this.options.extensions.renderers[U.type].call({parser:this},U);if(K!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(U.type)){X+=K||"";continue}}let G=q;switch(G.type){case"space":{X+=this.renderer.space(G);continue}case"hr":{X+=this.renderer.hr(G);continue}case"heading":{X+=this.renderer.heading(G);continue}case"code":{X+=this.renderer.code(G);continue}case"table":{X+=this.renderer.table(G);continue}case"blockquote":{X+=this.renderer.blockquote(G);continue}case"list":{X+=this.renderer.list(G);continue}case"html":{X+=this.renderer.html(G);continue}case"paragraph":{X+=this.renderer.paragraph(G);continue}case"text":{let U=G,K=this.renderer.text(U);while(Y+1<Q.length&&Q[Y+1].type==="text")U=Q[++Y],K+=`
`+this.renderer.text(U);if(J)X+=this.renderer.paragraph({type:"paragraph",raw:K,text:K,tokens:[{type:"text",raw:K,text:K,escaped:!0}]});else X+=K;continue}default:{let U='Token with "'+G.type+'" type was not found.';if(this.options.silent)return console.error(U),"";else throw Error(U)}}}return X}parseInline(Q,J=this.renderer){let X="";for(let Y=0;Y<Q.length;Y++){let q=Q[Y];if(this.options.extensions?.renderers?.[q.type]){let U=this.options.extensions.renderers[q.type].call({parser:this},q);if(U!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(q.type)){X+=U||"";continue}}let G=q;switch(G.type){case"escape":{X+=J.text(G);break}case"html":{X+=J.html(G);break}case"link":{X+=J.link(G);break}case"image":{X+=J.image(G);break}case"strong":{X+=J.strong(G);break}case"em":{X+=J.em(G);break}case"codespan":{X+=J.codespan(G);break}case"br":{X+=J.br(G);break}case"del":{X+=J.del(G);break}case"text":{X+=J.text(G);break}default:{let U='Token with "'+G.type+'" type was not found.';if(this.options.silent)return console.error(U),"";else throw Error(U)}}}return X}},o8=class{options;block;constructor(Z){this.options=Z||O4}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(Z){return Z}postprocess(Z){return Z}processAllTokens(Z){return Z}provideLexer(){return this.block?j5.lex:j5.lexInline}provideParser(){return this.block?A5.parse:A5.parseInline}},UL=class{defaults=_Z();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=A5;Renderer=Z7;TextRenderer=DZ;Lexer=j5;Tokenizer=e8;Hooks=o8;constructor(...Z){this.use(...Z)}walkTokens(Z,Q){let J=[];for(let X of Z)switch(J=J.concat(Q.call(this,X)),X.type){case"table":{let Y=X;for(let q of Y.header)J=J.concat(this.walkTokens(q.tokens,Q));for(let q of Y.rows)for(let G of q)J=J.concat(this.walkTokens(G.tokens,Q));break}case"list":{let Y=X;J=J.concat(this.walkTokens(Y.items,Q));break}default:{let Y=X;if(this.defaults.extensions?.childTokens?.[Y.type])this.defaults.extensions.childTokens[Y.type].forEach((q)=>{let G=Y[q].flat(1/0);J=J.concat(this.walkTokens(G,Q))});else if(Y.tokens)J=J.concat(this.walkTokens(Y.tokens,Q))}}return J}use(...Z){let Q=this.defaults.extensions||{renderers:{},childTokens:{}};return Z.forEach((J)=>{let X={...J};if(X.async=this.defaults.async||X.async||!1,J.extensions)J.extensions.forEach((Y)=>{if(!Y.name)throw Error("extension name required");if("renderer"in Y){let q=Q.renderers[Y.name];if(q)Q.renderers[Y.name]=function(...G){let U=Y.renderer.apply(this,G);if(U===!1)U=q.apply(this,G);return U};else Q.renderers[Y.name]=Y.renderer}if("tokenizer"in Y){if(!Y.level||Y.level!=="block"&&Y.level!=="inline")throw Error("extension level must be 'block' or 'inline'");let q=Q[Y.level];if(q)q.unshift(Y.tokenizer);else Q[Y.level]=[Y.tokenizer];if(Y.start){if(Y.level==="block")if(Q.startBlock)Q.startBlock.push(Y.start);else Q.startBlock=[Y.start];else if(Y.level==="inline")if(Q.startInline)Q.startInline.push(Y.start);else Q.startInline=[Y.start]}}if("childTokens"in Y&&Y.childTokens)Q.childTokens[Y.name]=Y.childTokens}),X.extensions=Q;if(J.renderer){let Y=this.defaults.renderer||new Z7(this.defaults);for(let q in J.renderer){if(!(q in Y))throw Error(`renderer '${q}' does not exist`);if(["options","parser"].includes(q))continue;let G=q,U=J.renderer[G],K=Y[G];Y[G]=(...H)=>{let W=U.apply(Y,H);if(W===!1)W=K.apply(Y,H);return W||""}}X.renderer=Y}if(J.tokenizer){let Y=this.defaults.tokenizer||new e8(this.defaults);for(let q in J.tokenizer){if(!(q in Y))throw Error(`tokenizer '${q}' does not exist`);if(["options","rules","lexer"].includes(q))continue;let G=q,U=J.tokenizer[G],K=Y[G];Y[G]=(...H)=>{let W=U.apply(Y,H);if(W===!1)W=K.apply(Y,H);return W}}X.tokenizer=Y}if(J.hooks){let Y=this.defaults.hooks||new o8;for(let q in J.hooks){if(!(q in Y))throw Error(`hook '${q}' does not exist`);if(["options","block"].includes(q))continue;let G=q,U=J.hooks[G],K=Y[G];if(o8.passThroughHooks.has(q))Y[G]=(H)=>{if(this.defaults.async)return Promise.resolve(U.call(Y,H)).then((z)=>{return K.call(Y,z)});let W=U.call(Y,H);return K.call(Y,W)};else Y[G]=(...H)=>{let W=U.apply(Y,H);if(W===!1)W=K.apply(Y,H);return W}}X.hooks=Y}if(J.walkTokens){let Y=this.defaults.walkTokens,q=J.walkTokens;X.walkTokens=function(G){let U=[];if(U.push(q.call(this,G)),Y)U=U.concat(Y.call(this,G));return U}}this.defaults={...this.defaults,...X}}),this}setOptions(Z){return this.defaults={...this.defaults,...Z},this}lexer(Z,Q){return j5.lex(Z,Q??this.defaults)}parser(Z,Q){return A5.parse(Z,Q??this.defaults)}parseMarkdown(Z){return(J,X)=>{let Y={...X},q={...this.defaults,...Y},G=this.onError(!!q.silent,!!q.async);if(this.defaults.async===!0&&Y.async===!1)return G(Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof J>"u"||J===null)return G(Error("marked(): input parameter is undefined or null"));if(typeof J!=="string")return G(Error("marked(): input parameter is of type "+Object.prototype.toString.call(J)+", string expected"));if(q.hooks)q.hooks.options=q,q.hooks.block=Z;let U=q.hooks?q.hooks.provideLexer():Z?j5.lex:j5.lexInline,K=q.hooks?q.hooks.provideParser():Z?A5.parse:A5.parseInline;if(q.async)return Promise.resolve(q.hooks?q.hooks.preprocess(J):J).then((H)=>U(H,q)).then((H)=>q.hooks?q.hooks.processAllTokens(H):H).then((H)=>q.walkTokens?Promise.all(this.walkTokens(H,q.walkTokens)).then(()=>H):H).then((H)=>K(H,q)).then((H)=>q.hooks?q.hooks.postprocess(H):H).catch(G);try{if(q.hooks)J=q.hooks.preprocess(J);let H=U(J,q);if(q.hooks)H=q.hooks.processAllTokens(H);if(q.walkTokens)this.walkTokens(H,q.walkTokens);let W=K(H,q);if(q.hooks)W=q.hooks.postprocess(W);return W}catch(H){return G(H)}}}onError(Z,Q){return(J)=>{if(J.message+=`
Please report this to https://github.com/markedjs/marked.`,Z){let X="<p>An error occurred:</p><pre>"+Q5(J.message+"",!0)+"</pre>";if(Q)return Promise.resolve(X);return X}if(Q)return Promise.reject(J);throw J}}},_4=new UL;function O0(Z,Q){return _4.parse(Z,Q)}O0.options=O0.setOptions=function(Z){return _4.setOptions(Z),O0.defaults=_4.defaults,JG(O0.defaults),O0};O0.getDefaults=_Z;O0.defaults=O4;O0.use=function(...Z){return _4.use(...Z),O0.defaults=_4.defaults,JG(O0.defaults),O0};O0.walkTokens=function(Z,Q){return _4.walkTokens(Z,Q)};O0.parseInline=_4.parseInline;O0.Parser=A5;O0.parser=A5.parse;O0.Renderer=Z7;O0.TextRenderer=DZ;O0.Lexer=j5;O0.lexer=j5.lex;O0.Tokenizer=e8;O0.Hooks=o8;O0.parse=O0;var{options:vI,setOptions:hI,use:uI,walkTokens:fI,parseInline:mI}=O0;var pI=A5.parse,lI=j5.lex;var KL=Symbol.for("preact-signals");function Y7(){if(!(m5>1)){var Z,Q=!1;while(w2!==void 0){var J=w2;w2=void 0,IZ++;while(J!==void 0){var X=J.o;if(J.o=void 0,J.f&=-3,!(8&J.f)&&VG(J))try{J.c()}catch(Y){if(!Q)Z=Y,Q=!0}J=X}}if(IZ=0,m5--,Q)throw Z}else m5--}function N4(Z){if(m5>0)return Z();m5++;try{return Z()}finally{Y7()}}var P0=void 0;function EZ(Z){var Q=P0;P0=void 0;try{return Z()}finally{P0=Q}}var w2=void 0,m5=0,IZ=0,X7=0;function BG(Z){if(P0!==void 0){var Q=Z.n;if(Q===void 0||Q.t!==P0){if(Q={i:0,S:Z,p:P0.s,n:void 0,t:P0,e:void 0,x:void 0,r:Q},P0.s!==void 0)P0.s.n=Q;if(P0.s=Q,Z.n=Q,32&P0.f)Z.S(Q);return Q}else if(Q.i===-1){if(Q.i=0,Q.n!==void 0){if(Q.n.p=Q.p,Q.p!==void 0)Q.p.n=Q.n;Q.p=P0.s,Q.n=void 0,P0.s.n=Q,P0.s=Q}return Q}}}function c0(Z,Q){this.v=Z,this.i=0,this.n=void 0,this.t=void 0,this.W=Q==null?void 0:Q.watched,this.Z=Q==null?void 0:Q.unwatched,this.name=Q==null?void 0:Q.name}c0.prototype.brand=KL;c0.prototype.h=function(){return!0};c0.prototype.S=function(Z){var Q=this,J=this.t;if(J!==Z&&Z.e===void 0)if(Z.x=J,this.t=Z,J!==void 0)J.e=Z;else EZ(function(){var X;(X=Q.W)==null||X.call(Q)})};c0.prototype.U=function(Z){var Q=this;if(this.t!==void 0){var{e:J,x:X}=Z;if(J!==void 0)J.x=X,Z.e=void 0;if(X!==void 0)X.e=J,Z.x=void 0;if(Z===this.t){if(this.t=X,X===void 0)EZ(function(){var Y;(Y=Q.Z)==null||Y.call(Q)})}}};c0.prototype.subscribe=function(Z){var Q=this;return A4(function(){var J=Q.value,X=P0;P0=void 0;try{Z(J)}finally{P0=X}},{name:"sub"})};c0.prototype.valueOf=function(){return this.value};c0.prototype.toString=function(){return this.value+""};c0.prototype.toJSON=function(){return this.value};c0.prototype.peek=function(){var Z=P0;P0=void 0;try{return this.value}finally{P0=Z}};Object.defineProperty(c0.prototype,"value",{get:function(){var Z=BG(this);if(Z!==void 0)Z.i=this.i;return this.v},set:function(Z){if(Z!==this.v){if(IZ>100)throw Error("Cycle detected");this.v=Z,this.i++,X7++,m5++;try{for(var Q=this.t;Q!==void 0;Q=Q.x)Q.t.N()}finally{Y7()}}}});function v0(Z,Q){return new c0(Z,Q)}function VG(Z){for(var Q=Z.s;Q!==void 0;Q=Q.n)if(Q.S.i!==Q.i||!Q.S.h()||Q.S.i!==Q.i)return!0;return!1}function LG(Z){for(var Q=Z.s;Q!==void 0;Q=Q.n){var J=Q.S.n;if(J!==void 0)Q.r=J;if(Q.S.n=Q,Q.i=-1,Q.n===void 0){Z.s=Q;break}}}function _G(Z){var Q=Z.s,J=void 0;while(Q!==void 0){var X=Q.p;if(Q.i===-1){if(Q.S.U(Q),X!==void 0)X.n=Q.n;if(Q.n!==void 0)Q.n.p=X}else J=Q;if(Q.S.n=Q.r,Q.r!==void 0)Q.r=void 0;Q=X}Z.s=J}function j4(Z,Q){c0.call(this,void 0),this.x=Z,this.s=void 0,this.g=X7-1,this.f=4,this.W=Q==null?void 0:Q.watched,this.Z=Q==null?void 0:Q.unwatched,this.name=Q==null?void 0:Q.name}j4.prototype=new c0;j4.prototype.h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32)return!0;if(this.f&=-5,this.g===X7)return!0;if(this.g=X7,this.f|=1,this.i>0&&!VG(this))return this.f&=-2,!0;var Z=P0;try{LG(this),P0=this;var Q=this.x();if(16&this.f||this.v!==Q||this.i===0)this.v=Q,this.f&=-17,this.i++}catch(J){this.v=J,this.f|=16,this.i++}return P0=Z,_G(this),this.f&=-2,!0};j4.prototype.S=function(Z){if(this.t===void 0){this.f|=36;for(var Q=this.s;Q!==void 0;Q=Q.n)Q.S.S(Q)}c0.prototype.S.call(this,Z)};j4.prototype.U=function(Z){if(this.t!==void 0){if(c0.prototype.U.call(this,Z),this.t===void 0){this.f&=-33;for(var Q=this.s;Q!==void 0;Q=Q.n)Q.S.U(Q)}}};j4.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var Z=this.t;Z!==void 0;Z=Z.x)Z.t.N()}};Object.defineProperty(j4.prototype,"value",{get:function(){if(1&this.f)throw Error("Cycle detected");var Z=BG(this);if(this.h(),Z!==void 0)Z.i=this.i;if(16&this.f)throw this.v;return this.v}});function C0(Z,Q){return new j4(Z,Q)}function OG(Z){var Q=Z.u;if(Z.u=void 0,typeof Q=="function"){m5++;var J=P0;P0=void 0;try{Q()}catch(X){throw Z.f&=-2,Z.f|=8,TZ(Z),X}finally{P0=J,Y7()}}}function TZ(Z){for(var Q=Z.s;Q!==void 0;Q=Q.n)Q.S.U(Q);Z.x=void 0,Z.s=void 0,OG(Z)}function HL(Z){if(P0!==this)throw Error("Out-of-order effect");if(_G(this),P0=Z,this.f&=-2,8&this.f)TZ(this);Y7()}function L6(Z,Q){this.x=Z,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32,this.name=Q==null?void 0:Q.name}L6.prototype.c=function(){var Z=this.S();try{if(8&this.f)return;if(this.x===void 0)return;var Q=this.x();if(typeof Q=="function")this.u=Q}finally{Z()}};L6.prototype.S=function(){if(1&this.f)throw Error("Cycle detected");this.f|=1,this.f&=-9,OG(this),LG(this),m5++;var Z=P0;return P0=this,HL.bind(this,Z)};L6.prototype.N=function(){if(!(2&this.f))this.f|=2,this.o=w2,w2=this};L6.prototype.d=function(){if(this.f|=8,!(1&this.f))TZ(this)};L6.prototype.dispose=function(){this.d()};function A4(Z,Q){var J=new L6(Z,Q);try{J.c()}catch(Y){throw J.d(),Y}var X=J.d.bind(J);return X[Symbol.dispose]=X,X}var NG,bZ,$Z,G7=typeof window<"u"&&!!window.__PREACT_SIGNALS_DEVTOOLS__;var jG=[];A4(function(){NG=this.N})();function _6(Z,Q){L0[Z]=Q.bind(null,L0[Z]||function(){})}function q7(Z){if($Z)$Z();$Z=Z&&Z.S()}function AG(Z){var Q=this,J=Z.data,X=zL(J);X.value=J;var Y=V6(function(){var U=Q,K=Q.__v;while(K=K.__)if(K.__c){K.__c.__$f|=4;break}var H=C0(function(){var B=X.value.value;return B===0?0:B===!0?"":B||""}),W=C0(function(){return!Array.isArray(H.value)&&!UZ(H.value)}),z=A4(function(){if(this.N=PG,W.value){var B=H.value;if(U.__v&&U.__v.__e&&U.__v.__e.nodeType===3)U.__v.__e.data=B}}),F=Q.__$u.d;return Q.__$u.d=function(){z(),F.call(this)},[W,H]},[]),q=Y[0],G=Y[1];return q.value?G.peek():G.value}AG.displayName="ReactiveTextNode";Object.defineProperties(c0.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:AG},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}});_6("__b",function(Z,Q){if(G7&&typeof Q.type=="function")window.__PREACT_SIGNALS_DEVTOOLS__.exitComponent();if(typeof Q.type=="string"){var J,X=Q.props;for(var Y in X)if(Y!=="children"){var q=X[Y];if(q instanceof c0){if(!J)Q.__np=J={};J[Y]=q,X[Y]=q.peek()}}}Z(Q)});_6("__r",function(Z,Q){if(G7&&typeof Q.type=="function")window.__PREACT_SIGNALS_DEVTOOLS__.enterComponent(Q);if(Q.type!==X1){q7();var J,X=Q.__c;if(X){if(X.__$f&=-2,(J=X.__$u)===void 0)X.__$u=J=function(Y){var q;return A4(function(){q=this}),q.c=function(){X.__$f|=1,X.setState({})},q}()}bZ=X,q7(J)}Z(Q)});_6("__e",function(Z,Q,J,X){if(G7)window.__PREACT_SIGNALS_DEVTOOLS__.exitComponent();q7(),bZ=void 0,Z(Q,J,X)});_6("diffed",function(Z,Q){if(G7&&typeof Q.type=="function")window.__PREACT_SIGNALS_DEVTOOLS__.exitComponent();q7(),bZ=void 0;var J;if(typeof Q.type=="string"&&(J=Q.__e)){var{__np:X,props:Y}=Q;if(X){var q=J.U;if(q)for(var G in q){var U=q[G];if(U!==void 0&&!(G in X))U.d(),q[G]=void 0}else q={},J.U=q;for(var K in X){var H=q[K],W=X[K];if(H===void 0)H=WL(J,K,W,Y),q[K]=H;else H.o(W,Y)}}}Z(Q)});function WL(Z,Q,J,X){var Y=Q in Z&&Z.ownerSVGElement===void 0,q=v0(J);return{o:function(G,U){q.value=G,X=U},d:A4(function(){this.N=PG;var G=q.value.value;if(X[Q]!==G)if(X[Q]=G,Y)Z[Q]=G;else if(G!=null&&(G!==!1||Q[4]==="-"))Z.setAttribute(Q,G);else Z.removeAttribute(Q)})}}_6("unmount",function(Z,Q){if(typeof Q.type=="string"){var J=Q.__e;if(J){var X=J.U;if(X){J.U=void 0;for(var Y in X){var q=X[Y];if(q)q.d()}}}}else{var G=Q.__c;if(G){var U=G.__$u;if(U)G.__$u=void 0,U.d()}}Z(Q)});_6("__h",function(Z,Q,J,X){if(X<3||X===9)Q.__$f|=2;Z(Q,J,X)});f5.prototype.shouldComponentUpdate=function(Z,Q){var J=this.__$u,X=J&&J.s!==void 0;for(var Y in Q)return!0;if(this.__f||typeof this.u=="boolean"&&this.u===!0){var q=2&this.__$f;if(!(X||q||4&this.__$f))return!0;if(1&this.__$f)return!0}else{if(!(X||4&this.__$f))return!0;if(3&this.__$f)return!0}for(var G in Z)if(G!=="__source"&&Z[G]!==this.props[G])return!0;for(var U in this.props)if(!(U in Z))return!0;return!1};function zL(Z,Q){return J0(function(){return v0(Z,Q)})[0]}var FL=function(Z){queueMicrotask(function(){queueMicrotask(Z)})};function BL(){N4(function(){var Z;while(Z=jG.shift())NG.call(Z)})}function PG(){if(jG.push(this)===1)(L0.requestAnimationFrame||FL)(BL)}var VL={apiBase:"/_nua/cms",highlightColor:"#005AE0",debug:!1};function U7(){let Z=typeof window<"u"?window.NuaCmsConfig||{}:{};return{...VL,...Z}}function LL(){return{isPromptVisible:!1,isProcessing:!1,targetElementId:null,streamingContent:null,error:null,isChatOpen:!1,chatMessages:[],chatContextElementId:null,currentStatus:null,statusMessage:null}}function _L(){return{isOpen:!1,currentComponentId:null,mode:"edit"}}function OL(){return{isOpen:!1,currentPage:null,activeElementId:null}}function RG(){return{isOpen:!1,items:[],isLoading:!1,selectedItem:null,insertCallback:null}}function MG(){return{isOpen:!1,isCreating:!1,template:"blog"}}var qE=v0(!1),M1=v0(!1),x2=v0(!1),l5=v0(null),NL=v0(null),Y1=v0(new Map),GE=v0(new Map),UE=v0(new Map),F1=v0({entries:{},components:{},componentDefinitions:{}}),$0=v0(LL()),N6=C0(()=>$0.value.isProcessing),d1=C0(()=>$0.value.isChatOpen),DG=C0(()=>$0.value.chatMessages),IG=C0(()=>$0.value.chatContextElementId),EG=C0(()=>$0.value.currentStatus),TG=C0(()=>$0.value.statusMessage),p5=v0(_L()),KE=C0(()=>p5.value.isOpen),HE=C0(()=>p5.value.mode),J5=v0(OL()),WE=C0(()=>J5.value.isOpen),$G=C0(()=>J5.value.currentPage),R1=v0(RG()),bG=C0(()=>R1.value.isOpen),CG=C0(()=>R1.value.items),yG=C0(()=>R1.value.isLoading),P4=v0(MG()),SG=C0(()=>P4.value.isOpen),wG=C0(()=>P4.value.isCreating),P5=v0(U7()),O6=v0([]),jL=0,CZ=C0(()=>{let Z=Y1.value;return Array.from(Z.values()).filter((Q)=>Q.isDirty).length}),xG=C0(()=>{let Z=Y1.value;return Array.from(Z.entries()).filter(([Q,J])=>J.isDirty)}),zE=C0(()=>CZ.value>0);function kG(Z){F1.value=Z}function yZ(Z){M1.value=Z}function SZ(Z){x2.value=Z}function j6(Z){l5.value=Z}function wZ(Z){N4(()=>{NL.value=Z,p5.value={...p5.value,currentComponentId:Z}})}function gG(Z,Q){let J=new Map(Y1.value);J.set(Z,Q),Y1.value=J}function xZ(Z,Q){let J=Y1.value.get(Z);if(J){let X=new Map(Y1.value);X.set(Z,Q(J)),Y1.value=X}}function vG(){Y1.value=new Map}function i5(Z){return Y1.value.get(Z)}function R5(Z){$0.value={...$0.value,isProcessing:Z}}function hG(Z,Q){$0.value={...$0.value,currentStatus:Z,statusMessage:Q??null}}function k2(){$0.value={...$0.value,currentStatus:null,statusMessage:null}}function K7(Z){$0.value={...$0.value,isChatOpen:Z}}function H7(Z){$0.value={...$0.value,chatMessages:[...$0.value.chatMessages,Z]}}function uG(Z){$0.value={...$0.value,chatMessages:Z}}function W7(Z,Q){$0.value={...$0.value,chatMessages:$0.value.chatMessages.map((J)=>J.id===Z?{...J,content:Q}:J)}}function g2(Z){$0.value={...$0.value,chatContextElementId:Z}}function kZ(Z){p5.value={...p5.value,isOpen:Z}}function v2(Z){J5.value={...J5.value,isOpen:Z}}function fG(Z){if(J5.value.currentPage)J5.value={...J5.value,currentPage:{...J5.value.currentPage,content:Z,isDirty:!0}}}function mG(Z){J5.value={...J5.value,activeElementId:Z}}function pG(Z){R1.value={...R1.value,isOpen:Z}}function z7(Z){R1.value={...R1.value,items:Z}}function gZ(Z){R1.value={...R1.value,isLoading:Z}}function lG(Z){R1.value={...R1.value,isOpen:!0,insertCallback:Z}}function iG(){R1.value=RG()}function dG(Z){P4.value={...P4.value,isOpen:Z}}function vZ(Z){P4.value={...P4.value,isCreating:Z}}function cG(){P4.value=MG()}function I0(Z,Q="info"){let J=`toast-${++jL}`;return O6.value=[...O6.value,{id:J,message:Z,type:Q}],J}function rG(Z){O6.value=O6.value.filter((Q)=>Q.id!==Z)}function aG(Z){P5.value=Z}var AL=0;function A(Z,Q,J,X,Y,q){Q||(Q={});var G,U,K=Q;if("ref"in K)for(U in K={},Q)U=="ref"?G=Q[U]:K[U]=Q[U];var H={type:Z,props:K,key:J,ref:G,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--AL,__i:-1,__u:0,__source:Y,__self:q};if(typeof Z=="function"&&(G=Z.defaultProps))for(U in G)K[U]===void 0&&(K[U]=G[U]);return L0.vnode&&L0.vnode(H),H}O0.setOptions({breaks:!0,gfm:!0});function PL(Z){try{return O0.parse(Z,{async:!1})}catch{return Z}}var nG=({callbacks:Z})=>{let[Q,J]=J0(""),[X,Y]=J0(new Set),q=x0(null),G=x0(null),U=d1.value,K=DG.value,H=IG.value,W=N6.value,z=EG.value,F=TG.value;j0(()=>{if(q.current)q.current.scrollIntoView({behavior:"smooth"})},[K,z]),j0(()=>{if(U&&G.current&&!W)setTimeout(()=>G.current?.focus(),50)},[U,W]);let B=(R)=>{if(R.preventDefault(),Q.trim()&&!W){if(Z.onSend(Q.trim(),H||void 0),J(""),G.current)G.current.style.height="auto"}},V=(R)=>{let E=R.target;J(E.value),E.style.height="auto",E.style.height=`${Math.min(E.scrollHeight,120)}px`},O=(R)=>{if(R.key==="Enter"&&!R.shiftKey)R.preventDefault(),B(R)},N=(R,E,$)=>{Z.onApplyToElement(E,$),Y(new Set(X).add(R))};if(!U)return null;let j=(R)=>R.stopPropagation();return A("div",{class:"fixed right-5 top-5 bottom-24 w-100 max-w-[calc(100vw-40px)] bg-white shadow-brutalist-md border-4 border-black z-2147483645 flex flex-col font-sans overflow-hidden transition-all duration-300","data-cms-ui":!0,onMouseDown:j,onClick:j,children:[A("div",{class:"px-5 py-4 border-b-4 border-black flex items-center justify-between bg-blue-bold",children:[A("div",{class:"flex items-center gap-2.5",children:[A("div",{class:"flex items-center text-white",children:A("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round",children:A("path",{d:"M12 3l1.912 5.813a2 2 0 0 0 1.275 1.275L21 12l-5.813 1.912a2 2 0 0 0-1.275 1.275L12 21l-1.912-5.813a2 2 0 0 0-1.275-1.275L3 12l5.813-1.912a2 2 0 0 0 1.275-1.275L12 3z"},void 0,!1,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this),A("h3",{class:"m-0 text-base font-bold text-white uppercase tracking-wider",children:"AI Assistant"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),A("button",{onClick:Z.onClose,class:"bg-transparent border-none text-white text-2xl cursor-pointer p-0 leading-none transition-colors w-6 h-6 flex items-center justify-center hover:text-slate-200 font-bold",children:"×"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),A("div",{class:"flex-1 overflow-y-auto p-4 flex flex-col gap-4 bg-white",children:[K.length===0?A("div",{class:"flex flex-col items-center justify-center h-full text-slate-800 text-center p-10",children:[A("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mb-4 text-black",children:A("path",{d:"M12 3l1.912 5.813a2 2 0 0 0 1.275 1.275L21 12l-5.813 1.912a2 2 0 0 0-1.275 1.275L12 21l-1.912-5.813a2 2 0 0 0-1.275-1.275L3 12l5.813-1.912a2 2 0 0 0 1.275-1.275L12 3z"},void 0,!1,void 0,this)},void 0,!1,void 0,this),A("div",{class:"text-sm font-bold mb-2 text-black uppercase tracking-wide",children:"Start a conversation"},void 0,!1,void 0,this),A("div",{class:"text-xs font-medium text-slate-600",children:"Ask AI to help you edit content"},void 0,!1,void 0,this)]},void 0,!0,void 0,this):K.map((R)=>A("div",{class:"flex flex-col gap-1.5 animate-[slideIn_0.2s_ease]",children:[A("div",{class:`px-4 py-3 text-[13px] leading-relaxed wrap-break-word max-w-[85%] border-2 border-black shadow-brutalist-sm font-medium ${R.role==="user"?"bg-blue-bold text-white self-end":"bg-white text-slate-800 self-start cms-markdown"}`,dangerouslySetInnerHTML:R.role==="assistant"?{__html:PL(R.content)}:void 0,children:R.role==="user"?R.content:void 0},void 0,!1,void 0,this),R.elementId&&A("div",{class:`text-[10px] text-slate-500 font-mono font-bold px-1 uppercase ${R.role==="user"?"self-end":"self-start"}`,children:["\uD83D\uDCCD ",R.elementId]},void 0,!0,void 0,this),R.role==="assistant"&&R.elementId&&A("button",{onClick:()=>N(R.id,R.content,R.elementId),disabled:X.has(R.id),class:`px-3 py-1.5 border-2 border-black text-[11px] font-bold cursor-pointer self-start transition-all mt-1 shadow-brutalist-sm active:translate-x-px active:translate-y-px active:shadow-none ${X.has(R.id)?"bg-emerald-100 text-emerald-800 cursor-not-allowed opacity-80 shadow-none translate-x-0.5 translate-y-0.5":"bg-white text-slate-800 hover:bg-blue-50"}`,children:X.has(R.id)?"✓ APPLIED":"APPLY TO ELEMENT"},void 0,!1,void 0,this)]},R.id,!0,void 0,this)),z&&A("div",{class:"flex items-center gap-2 px-4 py-3 bg-slate-100 border-2 border-black text-[13px] text-slate-700 self-start shadow-brutalist-sm animate-[slideIn_0.2s_ease]",children:[A(ML,{status:z},void 0,!1,void 0,this),A("span",{class:"font-medium",children:F||RL(z)},void 0,!1,void 0,this)]},void 0,!0,void 0,this),A("div",{ref:q},void 0,!1,void 0,this)]},void 0,!0,void 0,this),A("div",{class:"p-4 border-t-4 border-black bg-white",children:[H&&A("div",{class:"px-3 py-2 bg-purple-100 border-2 border-black mb-3 text-[11px] text-purple-900 relative shadow-brutalist-sm",children:[A("button",{onClick:()=>Z.onSend("",void 0),class:"absolute top-1 right-2 bg-none border-none text-purple-900 cursor-pointer p-0 text-base leading-none hover:text-purple-700 font-bold",children:"×"},void 0,!1,void 0,this),A("div",{class:"font-bold mb-1 uppercase",children:"Editing:"},void 0,!1,void 0,this),A("div",{class:"font-mono font-bold",children:H},void 0,!1,void 0,this)]},void 0,!0,void 0,this),A("form",{onSubmit:B,class:"flex gap-2",children:[A("textarea",{ref:G,placeholder:"ASK AI ANYTHING...",rows:1,value:Q,onInput:V,onKeyDown:O,disabled:W,class:`flex-1 px-3 py-2.5 border-2 border-black text-[13px] font-sans resize-none max-h-30 transition-all outline-none focus:bg-blue-50 shadow-brutalist-sm font-medium placeholder:text-slate-400 ${W?"bg-slate-100 text-slate-400 opacity-60":"bg-white text-slate-800"}`},void 0,!1,void 0,this),A("button",{type:"submit",disabled:W,class:`px-4 border-2 border-black cursor-pointer transition-all flex items-center justify-center shadow-brutalist-sm active:translate-x-0.5 active:translate-y-0.5 active:shadow-none ${W?"bg-slate-200 text-slate-400 cursor-not-allowed":"bg-blue-bold text-white hover:bg-blue-700"}`,children:W?A("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5",class:"animate-spin",children:A("path",{d:"M12 2v4m0 12v4M4.93 4.93l2.83 2.83m8.48 8.48l2.83 2.83M2 12h4m12 0h4M4.93 19.07l2.83-2.83m8.48-8.48l2.83-2.83"},void 0,!1,void 0,this)},void 0,!1,void 0,this):A("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round",children:[A("line",{x1:"22",y1:"2",x2:"11",y2:"13"},void 0,!1,void 0,this),A("polygon",{points:"22 2 15 22 11 13 2 9 22 2"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)};function RL(Z){switch(Z){case"thinking":return"Thinking...";case"coding":return"Writing code...";case"building":return"Building preview...";case"deploying":return"Deploying...";case"complete":return"Done!";default:return"Processing..."}}function ML({status:Z}){switch(Z){case"thinking":return A("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",class:"animate-pulse text-purple-600",children:[A("circle",{cx:"12",cy:"12",r:"10"},void 0,!1,void 0,this),A("path",{d:"M12 16v-4m0-4h.01"},void 0,!1,void 0,this)]},void 0,!0,void 0,this);case"coding":return A("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",class:"text-blue-600",children:[A("polyline",{points:"16 18 22 12 16 6"},void 0,!1,void 0,this),A("polyline",{points:"8 6 2 12 8 18"},void 0,!1,void 0,this)]},void 0,!0,void 0,this);case"building":return A("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",class:"animate-spin text-orange-600",children:A("path",{d:"M12 2v4m0 12v4M4.93 4.93l2.83 2.83m8.48 8.48l2.83 2.83M2 12h4m12 0h4M4.93 19.07l2.83-2.83m8.48-8.48l2.83-2.83"},void 0,!1,void 0,this)},void 0,!1,void 0,this);case"deploying":return A("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",class:"animate-bounce text-green-600",children:A("path",{d:"M12 19V5m-7 7l7-7 7 7"},void 0,!1,void 0,this)},void 0,!1,void 0,this);case"complete":return A("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",class:"text-green-600",children:A("path",{d:"M20 6L9 17l-5-5"},void 0,!1,void 0,this)},void 0,!1,void 0,this);default:return A("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",class:"animate-spin text-slate-600",children:A("path",{d:"M12 2v4m0 12v4M4.93 4.93l2.83 2.83m8.48 8.48l2.83 2.83M2 12h4m12 0h4M4.93 19.07l2.83-2.83m8.48-8.48l2.83-2.83"},void 0,!1,void 0,this)},void 0,!1,void 0,this)}}function sG({callbacks:Z,visible:Q,elementId:J,rect:X,processing:Y}){let[q,G]=J0(!1),[U,K]=J0(""),H=x0(null);if(j0(()=>{if(!Q)G(!1),K("")},[Q]),j0(()=>{if(q&&H.current)setTimeout(()=>H.current?.focus(),50)},[q]),!Q||!X||!J)return null;let W=200,z=50,F=X.left+X.width/2-W/2,B=X.top-z-8,V=10,O=window.innerWidth-W-V;if(F=Math.max(V,Math.min(F,O)),B<V)B=X.bottom+8;let j=window.innerHeight-z-V;B=Math.min(B,j);let R=(I)=>{if(I.preventDefault(),I.stopPropagation(),!q&&J)G(!0)},E=(I)=>{I.preventDefault(),I.stopPropagation(),G(!1)},$=(I)=>{if(I.preventDefault(),I.stopPropagation(),U.trim()&&J)Z.onPromptSubmit(U.trim(),J),G(!1),K("")},w=(I)=>{I.stopPropagation()};return A("div",{"data-cms-ui":!0,onMouseDown:w,onClick:(I)=>I.stopPropagation(),style:{position:"fixed",left:`${F}px`,top:`${B}px`,zIndex:2147483645,fontFamily:"system-ui, -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"12px"},children:A("div",{class:`tooltip ${q?"expanded":""} ${Y?"processing":""} bg-white shadow-brutalist-sm border-2 border-black text-slate-800 font-bold cursor-pointer transition-all duration-200 pointer-events-auto select-none`,onClick:R,onMouseDown:w,style:{padding:q?"12px":"8px 12px",minWidth:q?"280px":"auto",maxWidth:q?"320px":"auto"},children:[Y&&A("div",{class:"flex items-center gap-1.5 text-slate-500",children:[A("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5",class:"animate-spin",children:A("path",{d:"M12 2v4m0 12v4M4.93 4.93l2.83 2.83m8.48 8.48l2.83 2.83M2 12h4m12 0h4M4.93 19.07l2.83-2.83m8.48-8.48l2.83-2.83"},void 0,!1,void 0,this)},void 0,!1,void 0,this),A("span",{class:"uppercase tracking-wide",children:"Processing..."},void 0,!1,void 0,this)]},void 0,!0,void 0,this),q&&!Y&&A("form",{class:"prompt-form flex flex-col gap-2",onSubmit:$,children:[A("label",{class:"text-[11px] text-slate-500 mb-1 font-bold uppercase",children:"What would you like to change?"},void 0,!1,void 0,this),A("input",{ref:H,type:"text",placeholder:"E.G., MAKE IT SHORTER...",value:U,onInput:(I)=>K(I.target.value),onMouseDown:(I)=>I.stopPropagation(),class:"w-full px-2 py-1.5 border-2 border-black bg-white text-slate-800 text-xs font-sans outline-none focus:bg-blue-50 transition-all shadow-brutalist-sm font-medium"},void 0,!1,void 0,this),A("div",{class:"flex gap-1.5 justify-end mt-1",children:[A("button",{type:"button",onClick:E,onMouseDown:(I)=>I.stopPropagation(),class:"px-3 py-1.5 text-[11px] font-bold cursor-pointer transition-all border-2 border-black bg-white text-slate-800 hover:bg-slate-50 shadow-brutalist-sm active:translate-x-px active:translate-y-px active:shadow-none",children:"CANCEL"},void 0,!1,void 0,this),A("button",{type:"submit",onMouseDown:(I)=>I.stopPropagation(),class:"px-3 py-1.5 text-[11px] font-bold cursor-pointer transition-all border-2 border-black bg-blue-bold text-white hover:bg-blue-700 shadow-brutalist-sm active:translate-x-px active:translate-y-px active:shadow-none",children:"APPLY"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)}var oG={HIGHLIGHT:2147483645,OVERLAY:2147483646,MODAL:2147483647,TOAST:2147483648},c1={ELEMENT_DETECTION_THROTTLE_MS:16,BLUR_DELAY_MS:10,TOAST_VISIBLE_DURATION_MS:2200,TOAST_FADE_DURATION_MS:200,PREVIEW_SUCCESS_DURATION_MS:3000,PREVIEW_ERROR_DURATION_MS:5000,FOCUS_DELAY_MS:50},R4={COMPONENT_EDGE_THRESHOLD:32,LABEL_OUTSIDE_THRESHOLD:28,STICKY_PADDING:8,VIEWPORT_PADDING:16,TOOLTIP_WIDTH:200,TOOLTIP_EXPANDED_MIN_WIDTH:280,TOOLTIP_EXPANDED_MAX_WIDTH:320,BLOCK_EDITOR_WIDTH:400,BLOCK_EDITOR_HEIGHT:500,AI_CHAT_WIDTH:400},A6={REQUEST_TIMEOUT_MS:30000,AI_STREAM_TIMEOUT_MS:120000,MAX_RETRIES:3,RETRY_BASE_DELAY_MS:1000},F7={PENDING_EDITS:"cms-pending-edits"},X0={UI_ATTRIBUTE:"data-cms-ui",ID_ATTRIBUTE:"data-cms-id",COMPONENT_ID_ATTRIBUTE:"data-cms-component-id",HIGHLIGHT_ELEMENT:"cms-highlight-overlay"};var hZ=(Z,Q)=>Z.entries[Q],tG=(Z,Q)=>(Q in Z.entries);var P6=(Z,Q)=>Z.components?.[Q],uZ=(Z)=>Z.componentDefinitions??{},B7=(Z,Q)=>uZ(Z)[Q],eG=(Z)=>Object.keys(Z.entries).length;function QU({visible:Z,componentId:Q,rect:J,onClose:X,onUpdateProps:Y,onInsertComponent:q,onRemoveBlock:G,onAIFillProps:U}){let[K,H]=J0("edit"),[W,z]=J0("after"),[F,B]=J0(null),[V,O]=J0({}),[N,j]=J0(""),[R,E]=J0(!1),$=x0(null),[w,I]=J0({top:0,left:0}),g=uZ(F1.value),S=Q?P6(F1.value,Q):null,u=S?B7(F1.value,S.componentName):null;j0(()=>{if(S)O(S.props||{})},[S]),j0(()=>{if(!Z)return;let p=()=>{let f=R4.BLOCK_EDITOR_WIDTH,T0=R4.BLOCK_EDITOR_HEIGHT,D=R4.VIEWPORT_PADDING,d0=window.innerWidth,t0=window.innerHeight,M,B0;if(J){if(M=J.bottom+D,B0=J.left,M+T0>t0-D)M=Math.max(D,J.top-T0-D);if(M<D)M=Math.max(D,(t0-T0)/2);if(B0+f>d0-D)B0=d0-f-D;if(B0<D)B0=D}else M=(t0-T0)/2,B0=(d0-f)/2;I({top:M,left:B0})};return p(),window.addEventListener("resize",p),window.addEventListener("scroll",p),()=>{window.removeEventListener("resize",p),window.removeEventListener("scroll",p)}},[Z,J]);let T=(p,f)=>{O((T0)=>({...T0,[p]:f}))},F0=()=>{if(Q)Y(Q,V),X()},e=(p)=>{z(p),H("insert-picker"),B(null),O({})},m=(p)=>{let f=g[p];if(!f)return;let T0={};for(let D of f.props)if(D.defaultValue!==void 0)T0[D.name]=D.defaultValue;else if(D.required)T0[D.name]="";B(p),O(T0),H("insert-props")},c=()=>{if(F&&Q)q(W,Q,F,V),X()},o=()=>{H("edit"),B(null),O(S?.props||{})},V0=async()=>{if(!Q||!N.trim())return;E(!0);try{let p=await U(Q,N);O((f)=>({...f,...p})),j("")}finally{E(!1)}};if(!Z)return null;return A(X1,{children:[A("div",{"data-cms-ui":!0,onClick:X,onMouseDown:(p)=>p.stopPropagation(),class:"fixed inset-0 bg-black/20 backdrop-blur-sm z-2147483646"},void 0,!1,void 0,this),A("div",{ref:$,"data-cms-ui":!0,onMouseDown:(p)=>p.stopPropagation(),onClick:(p)=>p.stopPropagation(),class:"fixed z-2147483647 w-[400px] max-w-[calc(100vw-32px)] max-h-[calc(100vh-32px)] bg-white shadow-brutalist-md font-sans text-sm overflow-hidden flex flex-col border-4 border-black",style:{top:`${w.top}px`,left:`${w.left}px`},children:[A("div",{class:"px-4 py-3 border-b-4 border-black flex justify-between items-center bg-blue-bold",children:[A("span",{class:"font-bold text-white uppercase tracking-wider",children:K==="edit"?u?`Edit ${u.name}`:"Block Editor":K==="insert-picker"?`Insert ${W==="before"?"Before":"After"}`:`Add ${F}`},void 0,!1,void 0,this),A("button",{onClick:X,class:"bg-transparent border-none cursor-pointer p-1 text-white hover:text-slate-200 transition-colors font-bold text-lg",children:"✕"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),A("div",{class:"p-4 overflow-y-auto flex-1 bg-white",children:K==="edit"&&u?A(X1,{children:[A("div",{class:"mb-4 flex gap-2",children:[A("button",{onClick:()=>e("before"),class:"flex-1 py-2.5 px-3 bg-white text-emerald-700 border-2 border-black cursor-pointer text-[13px] font-bold flex items-center justify-center gap-1.5 hover:bg-emerald-50 transition-colors shadow-brutalist-sm active:translate-x-0.5 active:translate-y-0.5 active:shadow-none",children:[A("span",{class:"text-base",children:"↑"},void 0,!1,void 0,this)," INSERT BEFORE"]},void 0,!0,void 0,this),A("button",{onClick:()=>e("after"),class:"flex-1 py-2.5 px-3 bg-white text-emerald-700 border-2 border-black cursor-pointer text-[13px] font-bold flex items-center justify-center gap-1.5 hover:bg-emerald-50 transition-colors shadow-brutalist-sm active:translate-x-0.5 active:translate-y-0.5 active:shadow-none",children:[A("span",{class:"text-base",children:"↓"},void 0,!1,void 0,this)," INSERT AFTER"]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),A("div",{class:"mb-4",children:[A("div",{class:"text-xs font-bold text-black tracking-wider mb-2 uppercase border-b-2 border-black pb-1 inline-block",children:"PROPS"},void 0,!1,void 0,this),u.props.map((p)=>A(ZU,{prop:p,value:V[p.name]||"",onChange:(f)=>T(p.name,f)},p.name,!1,void 0,this))]},void 0,!0,void 0,this),A("div",{class:"mb-4",children:[A("div",{class:"text-xs font-bold text-black tracking-wider mb-2 uppercase border-b-2 border-black pb-1 inline-block",children:"AI ASSIST"},void 0,!1,void 0,this),A("div",{class:"flex gap-2",children:[A("input",{type:"text",value:N,onInput:(p)=>j(p.target.value),placeholder:"Describe what you want...",class:"flex-1 px-3 py-2 border-2 border-black text-[13px] outline-none focus:bg-blue-50 transition-all shadow-brutalist-sm"},void 0,!1,void 0,this),A("button",{onClick:V0,disabled:R||!N.trim(),class:`px-4 py-2 bg-purple-600 text-white border-2 border-black cursor-pointer font-bold transition-all shadow-brutalist-sm active:translate-x-0.5 active:translate-y-0.5 active:shadow-none ${R||!N.trim()?"opacity-50 cursor-not-allowed":"hover:bg-purple-700"}`,children:R?"...":"FILL"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),A("div",{class:"flex gap-2 justify-between pt-4 border-t-4 border-black mt-4",children:[A("button",{onClick:()=>Q&&G(Q),class:"px-4 py-2 bg-rose-600 text-white border-2 border-black cursor-pointer hover:bg-rose-700 transition-colors font-bold shadow-brutalist-sm active:translate-x-0.5 active:translate-y-0.5 active:shadow-none",children:"REMOVE"},void 0,!1,void 0,this),A("div",{class:"flex gap-2",children:[A("button",{onClick:X,class:"px-4 py-2 bg-white text-slate-800 border-2 border-black cursor-pointer hover:bg-slate-50 transition-colors font-bold shadow-brutalist-sm active:translate-x-0.5 active:translate-y-0.5 active:shadow-none",children:"CANCEL"},void 0,!1,void 0,this),A("button",{onClick:F0,class:"px-4 py-2 bg-blue-bold text-white border-2 border-black cursor-pointer hover:bg-blue-700 transition-all shadow-brutalist-sm active:translate-x-0.5 active:translate-y-0.5 active:shadow-none font-bold",children:"SAVE"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this):K==="insert-props"&&F?A(X1,{children:[A("div",{class:"mb-4",children:[A("div",{class:"px-3 py-2 bg-emerald-100 border-2 border-black mb-3 text-[13px] text-emerald-900 font-medium shadow-brutalist-sm",children:["Inserting ",A("strong",{children:F},void 0,!1,void 0,this)," ",W," current component"]},void 0,!0,void 0,this),g[F]?.props.map((p)=>A(ZU,{prop:p,value:V[p.name]||"",onChange:(f)=>T(p.name,f)},p.name,!1,void 0,this))]},void 0,!0,void 0,this),A("div",{class:"flex gap-2 justify-end pt-4 border-t-4 border-black mt-4",children:[A("button",{onClick:()=>H("insert-picker"),class:"px-4 py-2 bg-white text-slate-800 border-2 border-black cursor-pointer hover:bg-slate-50 transition-colors font-bold shadow-brutalist-sm active:translate-x-0.5 active:translate-y-0.5 active:shadow-none",children:"← BACK"},void 0,!1,void 0,this),A("button",{onClick:c,class:"px-4 py-2 bg-emerald-600 text-white border-2 border-black cursor-pointer hover:bg-emerald-700 transition-all shadow-brutalist-sm active:translate-x-0.5 active:translate-y-0.5 active:shadow-none font-bold",children:"INSERT COMPONENT"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this):K==="insert-picker"?A("div",{children:[A("div",{class:"text-xs font-bold text-black tracking-wider mb-3 uppercase border-b-2 border-black pb-1 inline-block",children:"SELECT COMPONENT TO INSERT"},void 0,!1,void 0,this),A("div",{class:"flex flex-col gap-2",children:Object.values(g).map((p)=>A("button",{onClick:()=>m(p.name),class:"p-3 bg-white border-2 border-black cursor-pointer text-left transition-all hover:bg-blue-50 shadow-brutalist-sm active:translate-x-px active:translate-y-px active:shadow-none group",children:[A("div",{class:"font-bold text-slate-800 group-hover:text-blue-bold",children:p.name},void 0,!1,void 0,this),p.description&&A("div",{class:"text-xs text-slate-600 mt-1 font-medium",children:p.description},void 0,!1,void 0,this),A("div",{class:"text-[11px] text-slate-500 mt-1 font-mono font-bold",children:[p.props.length," props",p.slots&&p.slots.length>0&&` • ${p.slots.length} slots`]},void 0,!0,void 0,this)]},p.name,!0,void 0,this))},void 0,!1,void 0,this),A("div",{class:"mt-4 pt-4 border-t-4 border-black",children:A("button",{onClick:o,class:"w-full px-4 py-2 bg-white text-slate-800 border-2 border-black cursor-pointer hover:bg-slate-50 transition-colors font-bold shadow-brutalist-sm active:translate-x-0.5 active:translate-y-0.5 active:shadow-none",children:"← BACK TO EDIT"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this):A("div",{class:"text-center text-slate-500 py-8 font-bold",children:A("p",{children:"Select a component to edit its properties."},void 0,!1,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)}function ZU({prop:Z,value:Q,onChange:J}){let X=Z.type==="boolean",Y=Z.type==="number";return A("div",{class:"mb-3",children:[A("label",{class:"block text-[13px] font-bold text-slate-800 mb-1 uppercase",children:[Z.name,Z.required&&A("span",{class:"text-rose-600 ml-1",children:"*"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),Z.description&&A("div",{class:"text-[11px] text-slate-500 mb-1 font-medium",children:Z.description},void 0,!1,void 0,this),X?A("label",{class:"flex items-center gap-2 cursor-pointer",children:[A("input",{type:"checkbox",checked:Q==="true",onChange:(q)=>J(q.target.checked?"true":"false"),class:"accent-blue-bold w-5 h-5 border-2 border-black"},void 0,!1,void 0,this),A("span",{class:"text-[13px] text-slate-800 font-bold",children:Q==="true"?"ENABLED":"DISABLED"},void 0,!1,void 0,this)]},void 0,!0,void 0,this):A("input",{type:Y?"number":"text",value:Q,onInput:(q)=>J(q.target.value),placeholder:Z.defaultValue||`Enter ${Z.name}...`,class:"w-full px-3 py-2 border-2 border-black text-[13px] outline-none focus:bg-blue-50 transition-all shadow-brutalist-sm font-medium"},void 0,!1,void 0,this),A("div",{class:"text-[10px] text-slate-400 mt-1 font-mono font-bold",children:["TYPE: ",Z.type.toUpperCase()]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)}async function JU(Z,Q={},J=A6.REQUEST_TIMEOUT_MS){let X=new AbortController,Y=setTimeout(()=>X.abort(),J);try{return await fetch(Z,{...Q,signal:X.signal})}finally{clearTimeout(Y)}}async function XU(Z,Q){let J=await JU(`${Z.apiBase}/markdown/create`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(Q)});if(!J.ok){let X=await J.text().catch(()=>"");return{success:!1,error:`Create page failed (${J.status}): ${X||J.statusText}`}}return J.json()}async function YU(Z,Q,J=50){let X=new URLSearchParams({limit:String(J)});if(Q)X.set("cursor",Q);let Y=await JU(`${Z.apiBase}/media/list?${X}`,{method:"GET",credentials:"include"});if(!Y.ok)throw Error(`Failed to fetch media library (${Y.status})`);return Y.json()}async function fZ(Z,Q,J){let X=new FormData;return X.append("file",Q),new Promise((Y)=>{let q=new XMLHttpRequest;q.upload.addEventListener("progress",(G)=>{if(G.lengthComputable&&J){let U=Math.round(G.loaded/G.total*100);J(U)}}),q.addEventListener("load",()=>{if(q.status>=200&&q.status<300)try{let G=JSON.parse(q.responseText);Y(G)}catch{Y({success:!1,error:"Invalid response format"})}else Y({success:!1,error:`Upload failed (${q.status}): ${q.statusText}`})}),q.addEventListener("error",()=>{Y({success:!1,error:"Network error during upload"})}),q.addEventListener("timeout",()=>{Y({success:!1,error:"Upload timed out"})}),q.open("POST",`${Z.apiBase}/media/upload`),q.withCredentials=!0,q.timeout=A6.REQUEST_TIMEOUT_MS*2,q.send(X)})}function qU(){let Z=SG.value,Q=wG.value,[J,X]=J0(""),[Y,q]=J0(""),[G,U]=J0(""),[K,H]=J0(""),[W,z]=J0(!0),F=(O)=>{if(X(O),!Y||Y===mZ(J))q(mZ(O))},B=U0(()=>{cG(),X(""),q(""),U(""),H(""),z(!0)},[]),V=async()=>{if(!J.trim()){I0("Please enter a title","error");return}vZ(!0);try{let O=await XU(P5.value,{title:J.trim(),slug:Y||mZ(J),frontmatter:{author:G||void 0,excerpt:K||void 0,draft:W,date:new Date().toISOString().split("T")[0]},content:`# ${J}

Start writing your content here...`});if(O.success)I0(`Created: ${O.filePath}`,"success"),B();else I0(O.error||"Failed to create page","error")}catch(O){let N=O instanceof Error?O.message:"Unknown error";I0(`Failed: ${N}`,"error")}finally{vZ(!1)}};if(!Z)return null;return A("div",{class:"fixed inset-0 z-[2147483647] flex items-center justify-center bg-black/50",onClick:B,"data-cms-ui":!0,children:A("div",{class:"bg-white rounded-lg shadow-xl max-w-md w-full",onClick:(O)=>O.stopPropagation(),"data-cms-ui":!0,children:[A("div",{class:"flex items-center justify-between p-4 border-b",children:[A("h2",{class:"text-lg font-semibold text-gray-900",children:"Create New Page"},void 0,!1,void 0,this),A("button",{type:"button",onClick:B,class:"text-gray-500 hover:text-gray-700",disabled:Q,"data-cms-ui":!0,children:A("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},void 0,!1,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this),A("div",{class:"p-4 space-y-4",children:[A("div",{children:[A("label",{class:"block text-sm font-medium text-gray-700 mb-1",children:["Title ",A("span",{class:"text-red-500",children:"*"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),A("input",{type:"text",value:J,onInput:(O)=>F(O.target.value),placeholder:"My awesome blog post",class:"w-full px-3 py-2 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:Q,"data-cms-ui":!0},void 0,!1,void 0,this)]},void 0,!0,void 0,this),A("div",{children:[A("label",{class:"block text-sm font-medium text-gray-700 mb-1",children:"URL Slug"},void 0,!1,void 0,this),A("input",{type:"text",value:Y,onInput:(O)=>q(O.target.value),placeholder:"my-awesome-blog-post",class:"w-full px-3 py-2 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:Q,"data-cms-ui":!0},void 0,!1,void 0,this),A("p",{class:"mt-1 text-xs text-gray-500",children:["Will be saved to: content/blog/",Y||"your-slug",".md"]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),A("div",{children:[A("label",{class:"block text-sm font-medium text-gray-700 mb-1",children:"Author"},void 0,!1,void 0,this),A("input",{type:"text",value:G,onInput:(O)=>U(O.target.value),placeholder:"John Doe",class:"w-full px-3 py-2 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:Q,"data-cms-ui":!0},void 0,!1,void 0,this)]},void 0,!0,void 0,this),A("div",{children:[A("label",{class:"block text-sm font-medium text-gray-700 mb-1",children:"Excerpt"},void 0,!1,void 0,this),A("textarea",{value:K,onInput:(O)=>H(O.target.value),placeholder:"A brief description of your post...",class:"w-full px-3 py-2 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",rows:2,disabled:Q,"data-cms-ui":!0},void 0,!1,void 0,this)]},void 0,!0,void 0,this),A("div",{class:"flex items-center gap-2",children:[A("input",{type:"checkbox",id:"is-draft",checked:W,onChange:(O)=>z(O.target.checked),class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",disabled:Q,"data-cms-ui":!0},void 0,!1,void 0,this),A("label",{for:"is-draft",class:"text-sm text-gray-700",children:"Save as draft"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),A("div",{class:"flex items-center justify-end gap-3 p-4 border-t bg-gray-50 rounded-b-lg",children:[A("button",{type:"button",onClick:B,class:"px-4 py-2 text-sm text-gray-700 hover:text-gray-900",disabled:Q,"data-cms-ui":!0,children:"Cancel"},void 0,!1,void 0,this),A("button",{type:"button",onClick:V,class:"px-4 py-2 bg-blue-600 text-white rounded-md text-sm font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",disabled:Q||!J.trim(),"data-cms-ui":!0,children:[Q&&A("div",{class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"},void 0,!1,void 0,this),Q?"Creating...":"Create Page"]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)}function mZ(Z){return Z.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}class r1 extends f5{constructor(Z){super(Z);this.state={hasError:!1,error:null}}static getDerivedStateFromError(Z){return{hasError:!0,error:Z}}componentDidCatch(Z,Q){console.error("[CMS] Component error:",Z),console.error("[CMS] Component stack:",Q.componentStack),this.props.onError?.(Z,Q)}handleRetry=()=>{this.setState({hasError:!1,error:null})};render(){if(this.state.hasError){if(this.props.fallback)return this.props.fallback;let Z=this.props.componentName||"Component";return A("div",{"data-cms-ui":!0,class:"p-4 bg-red-50 border-2 border-red-500 text-red-800 font-sans text-sm",style:{fontFamily:"system-ui, -apple-system, sans-serif"},children:[A("div",{class:"font-bold mb-2 flex items-center gap-2",children:[A("span",{class:"text-red-600",children:"⚠"},void 0,!1,void 0,this),Z," Error"]},void 0,!0,void 0,this),A("div",{class:"text-xs text-red-600 mb-3 font-mono",children:this.state.error?.message||"An unexpected error occurred"},void 0,!1,void 0,this),A("button",{onClick:this.handleRetry,class:"px-3 py-1.5 bg-red-600 text-white border-2 border-red-800 text-xs font-bold cursor-pointer hover:bg-red-700 transition-colors",children:"Retry"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}return this.props.children}}var T1=((Z)=>{return Z.docTypeError="docTypeError",Z.contextNotFound="contextNotFound",Z.timerNotFound="timerNotFound",Z.ctxCallOutOfScope="ctxCallOutOfScope",Z.createNodeInParserFail="createNodeInParserFail",Z.stackOverFlow="stackOverFlow",Z.parserMatchError="parserMatchError",Z.serializerMatchError="serializerMatchError",Z.getAtomFromSchemaFail="getAtomFromSchemaFail",Z.expectDomTypeError="expectDomTypeError",Z.callCommandBeforeEditorView="callCommandBeforeEditorView",Z.missingRootElement="missingRootElement",Z.missingNodeInSchema="missingNodeInSchema",Z.missingMarkInSchema="missingMarkInSchema",Z.ctxNotBind="ctxNotBind",Z.missingYjsDoc="missingYjsDoc",Z})(T1||{});class $1 extends Error{constructor(Z,Q){super(Q);this.name="MilkdownError",this.code=Z}}var DL=(Z,Q)=>typeof Q==="function"?"[Function]":Q,V7=(Z)=>JSON.stringify(Z,DL);function GU(Z){return new $1(T1.docTypeError,`Doc type error, unsupported type: ${V7(Z)}`)}function UU(Z){return new $1(T1.contextNotFound,`Context "${Z}" not found, do you forget to inject it?`)}function KU(Z){return new $1(T1.timerNotFound,`Timer "${Z}" not found, do you forget to record it?`)}function R6(){return new $1(T1.ctxCallOutOfScope,"Should not call a context out of the plugin.")}function HU(Z,Q,J){let Y=`Cannot create node for ${"name"in Z?Z.name:Z}`,q=(W)=>{if(W==null)return"null";if(Array.isArray(W))return`[${W.map(q).join(", ")}]`;if(typeof W==="object"){if("toJSON"in W&&typeof W.toJSON==="function")return JSON.stringify(W.toJSON());if("spec"in W)return JSON.stringify(W.spec);return JSON.stringify(W)}if(typeof W==="string"||typeof W==="number"||typeof W==="boolean")return JSON.stringify(W);if(typeof W==="function")return`[Function: ${W.name||"anonymous"}]`;try{return String(W)}catch{return"[Unserializable]"}},G=["[Description]",Y],U=["[Attributes]",Q],K=["[Content]",(J??[]).map((W)=>{if(!W)return"null";if(typeof W==="object"&&"type"in W)return`${W}`;return q(W)})],H=[G,U,K].reduce((W,[z,F])=>{let B=`${z}: ${q(F)}.`;return W.concat(B)},[]);return new $1(T1.createNodeInParserFail,H.join(`
`))}function pZ(){return new $1(T1.stackOverFlow,"Stack over flow, cannot pop on an empty stack.")}function WU(Z){return new $1(T1.parserMatchError,`Cannot match target parser for node: ${V7(Z)}.`)}function zU(Z){return new $1(T1.serializerMatchError,`Cannot match target serializer for node: ${V7(Z)}.`)}function k1(Z){return new $1(T1.expectDomTypeError,`Expect to be a dom, but get: ${V7(Z)}.`)}function L7(){return new $1(T1.callCommandBeforeEditorView,"You're trying to call a command before editor view initialized, make sure to get commandManager from ctx after editor view has been initialized")}function FU(Z){return new $1(T1.missingNodeInSchema,`Missing node in schema, milkdown cannot find "${Z}" in schema.`)}function BU(Z){return new $1(T1.missingMarkInSchema,`Missing mark in schema, milkdown cannot find "${Z}" in schema.`)}class _7{constructor(){this.sliceMap=new Map,this.get=(Z)=>{let Q=typeof Z==="string"?[...this.sliceMap.values()].find((J)=>J.type.name===Z):this.sliceMap.get(Z.id);if(!Q){let J=typeof Z==="string"?Z:Z.name;throw UU(J)}return Q},this.remove=(Z)=>{let Q=typeof Z==="string"?[...this.sliceMap.values()].find((J)=>J.type.name===Z):this.sliceMap.get(Z.id);if(!Q)return;this.sliceMap.delete(Q.type.id)},this.has=(Z)=>{if(typeof Z==="string")return[...this.sliceMap.values()].some((Q)=>Q.type.name===Z);return this.sliceMap.has(Z.id)}}}class VU{constructor(Z,Q,J){this.#Q=[],this.#X=()=>{this.#Q.forEach((X)=>X(this.#Z))},this.set=(X)=>{this.#Z=X,this.#X()},this.get=()=>this.#Z,this.update=(X)=>{this.#Z=X(this.#Z),this.#X()},this.type=J,this.#Z=Q,Z.set(J.id,this)}#Q;#Z;#X;on(Z){return this.#Q.push(Z),()=>{this.#Q=this.#Q.filter((Q)=>Q!==Z)}}once(Z){let Q=this.on((J)=>{Z(J),Q()});return Q}off(Z){this.#Q=this.#Q.filter((Q)=>Q!==Z)}offAll(){this.#Q=[]}}class LU{constructor(Z,Q){this.id=Symbol(`Context-${Q}`),this.name=Q,this._defaultValue=Z,this._typeInfo=()=>{throw R6()}}create(Z,Q=this._defaultValue){return new VU(Z,Q,this)}}var Y0=(Z,Q)=>new LU(Z,Q);class _U{constructor(Z,Q,J){this.#J=new Set,this.#G=new Set,this.#q=new Map,this.#Y=new Map,this.read=()=>{return{metadata:this.#Q,injectedSlices:[...this.#J].map((X)=>({name:typeof X==="string"?X:X.name,value:this.#U(X)})),consumedSlices:[...this.#G].map((X)=>({name:typeof X==="string"?X:X.name,value:this.#U(X)})),recordedTimers:[...this.#q].map(([X,{duration:Y}])=>({name:X.name,duration:Y,status:this.#K(X)})),waitTimers:[...this.#Y].map(([X,{duration:Y}])=>({name:X.name,duration:Y,status:this.#K(X)}))}},this.onRecord=(X)=>{this.#q.set(X,{start:Date.now(),duration:0})},this.onClear=(X)=>{this.#q.delete(X)},this.onDone=(X)=>{let Y=this.#q.get(X);if(!Y)return;Y.duration=Date.now()-Y.start},this.onWait=(X,Y)=>{let q=Date.now();Y.finally(()=>{this.#Y.set(X,{duration:Date.now()-q})}).catch(console.error)},this.onInject=(X)=>{this.#J.add(X)},this.onRemove=(X)=>{this.#J.delete(X)},this.onUse=(X)=>{this.#G.add(X)},this.#U=(X)=>{return this.#Z.get(X).get()},this.#K=(X)=>{return this.#X.get(X).status},this.#Z=Z,this.#X=Q,this.#Q=J}#Q;#Z;#X;#J;#G;#q;#Y;#U;#K}class O7{constructor(Z,Q,J){if(this.produce=(X)=>{if(X&&Object.keys(X).length)return new O7(this.#Q,this.#Z,{...X});return this},this.inject=(X,Y)=>{let q=X.create(this.#Q.sliceMap);if(Y!=null)q.set(Y);return this.#J?.onInject(X),this},this.remove=(X)=>{return this.#Q.remove(X),this.#J?.onRemove(X),this},this.record=(X)=>{return X.create(this.#Z.store),this.#J?.onRecord(X),this},this.clearTimer=(X)=>{return this.#Z.remove(X),this.#J?.onClear(X),this},this.isInjected=(X)=>this.#Q.has(X),this.isRecorded=(X)=>this.#Z.has(X),this.use=(X)=>{return this.#J?.onUse(X),this.#Q.get(X)},this.get=(X)=>this.use(X).get(),this.set=(X,Y)=>this.use(X).set(Y),this.update=(X,Y)=>this.use(X).update(Y),this.timer=(X)=>this.#Z.get(X),this.done=(X)=>{this.timer(X).done(),this.#J?.onDone(X)},this.wait=(X)=>{let Y=this.timer(X).start();return this.#J?.onWait(X,Y),Y},this.waitTimers=async(X)=>{await Promise.all(this.get(X).map((Y)=>this.wait(Y)))},this.#Q=Z,this.#Z=Q,this.#X=J,J)this.#J=new _U(Z,Q,J)}#Q;#Z;#X;#J;get meta(){return this.#X}get inspector(){return this.#J}}class lZ{constructor(){this.store=new Map,this.get=(Z)=>{let Q=this.store.get(Z.id);if(!Q)throw KU(Z.name);return Q},this.remove=(Z)=>{this.store.delete(Z.id)},this.has=(Z)=>{return this.store.has(Z.id)}}}class OU{constructor(Z,Q){this.#Q=null,this.#Z=null,this.#J="pending",this.start=()=>{return this.#Q??=new Promise((J,X)=>{this.#Z=(Y)=>{if(!(Y instanceof CustomEvent))return;if(Y.detail.id===this.#X)this.#J="resolved",this.#G(),Y.stopImmediatePropagation(),J()},this.#q(()=>{if(this.#J==="pending")this.#J="rejected";this.#G(),X(Error(`Timing ${this.type.name} timeout.`))}),this.#J="pending",addEventListener(this.type.name,this.#Z)}),this.#Q},this.done=()=>{let J=new CustomEvent(this.type.name,{detail:{id:this.#X}});dispatchEvent(J)},this.#G=()=>{if(this.#Z)removeEventListener(this.type.name,this.#Z)},this.#q=(J)=>{setTimeout(()=>{J()},this.type.timeout)},this.#X=Symbol(Q.name),this.type=Q,Z.set(Q.id,this)}#Q;#Z;#X;#J;get status(){return this.#J}#G;#q}class NU{constructor(Z,Q=3000){this.create=(J)=>{return new OU(J,this)},this.id=Symbol(`Timer-${Z}`),this.name=Z,this.timeout=Q}}var g1=(Z,Q=3000)=>new NU(Z,Q);function q1(Z){this.content=Z}q1.prototype={constructor:q1,find:function(Z){for(var Q=0;Q<this.content.length;Q+=2)if(this.content[Q]===Z)return Q;return-1},get:function(Z){var Q=this.find(Z);return Q==-1?void 0:this.content[Q+1]},update:function(Z,Q,J){var X=J&&J!=Z?this.remove(J):this,Y=X.find(Z),q=X.content.slice();if(Y==-1)q.push(J||Z,Q);else if(q[Y+1]=Q,J)q[Y]=J;return new q1(q)},remove:function(Z){var Q=this.find(Z);if(Q==-1)return this;var J=this.content.slice();return J.splice(Q,2),new q1(J)},addToStart:function(Z,Q){return new q1([Z,Q].concat(this.remove(Z).content))},addToEnd:function(Z,Q){var J=this.remove(Z).content.slice();return J.push(Z,Q),new q1(J)},addBefore:function(Z,Q,J){var X=this.remove(Q),Y=X.content.slice(),q=X.find(Z);return Y.splice(q==-1?Y.length:q,0,Q,J),new q1(Y)},forEach:function(Z){for(var Q=0;Q<this.content.length;Q+=2)Z(this.content[Q],this.content[Q+1])},prepend:function(Z){if(Z=q1.from(Z),!Z.size)return this;return new q1(Z.content.concat(this.subtract(Z).content))},append:function(Z){if(Z=q1.from(Z),!Z.size)return this;return new q1(this.subtract(Z).content.concat(Z.content))},subtract:function(Z){var Q=this;Z=q1.from(Z);for(var J=0;J<Z.content.length;J+=2)Q=Q.remove(Z.content[J]);return Q},toObject:function(){var Z={};return this.forEach(function(Q,J){Z[Q]=J}),Z},get size(){return this.content.length>>1}};q1.from=function(Z){if(Z instanceof q1)return Z;var Q=[];if(Z)for(var J in Z)Q.push(J,Z[J]);return new q1(Q)};var iZ=q1;function $U(Z,Q,J){for(let X=0;;X++){if(X==Z.childCount||X==Q.childCount)return Z.childCount==Q.childCount?null:J;let Y=Z.child(X),q=Q.child(X);if(Y==q){J+=Y.nodeSize;continue}if(!Y.sameMarkup(q))return J;if(Y.isText&&Y.text!=q.text){for(let G=0;Y.text[G]==q.text[G];G++)J++;return J}if(Y.content.size||q.content.size){let G=$U(Y.content,q.content,J+1);if(G!=null)return G}J+=Y.nodeSize}}function bU(Z,Q,J,X){for(let Y=Z.childCount,q=Q.childCount;;){if(Y==0||q==0)return Y==q?null:{a:J,b:X};let G=Z.child(--Y),U=Q.child(--q),K=G.nodeSize;if(G==U){J-=K,X-=K;continue}if(!G.sameMarkup(U))return{a:J,b:X};if(G.isText&&G.text!=U.text){let H=0,W=Math.min(G.text.length,U.text.length);while(H<W&&G.text[G.text.length-H-1]==U.text[U.text.length-H-1])H++,J--,X--;return{a:J,b:X}}if(G.content.size||U.content.size){let H=bU(G.content,U.content,J-1,X-1);if(H)return H}J-=K,X-=K}}class x{constructor(Z,Q){if(this.content=Z,this.size=Q||0,Q==null)for(let J=0;J<Z.length;J++)this.size+=Z[J].nodeSize}nodesBetween(Z,Q,J,X=0,Y){for(let q=0,G=0;G<Q;q++){let U=this.content[q],K=G+U.nodeSize;if(K>Z&&J(U,X+G,Y||null,q)!==!1&&U.content.size){let H=G+1;U.nodesBetween(Math.max(0,Z-H),Math.min(U.content.size,Q-H),J,X+H)}G=K}}descendants(Z){this.nodesBetween(0,this.size,Z)}textBetween(Z,Q,J,X){let Y="",q=!0;return this.nodesBetween(Z,Q,(G,U)=>{let K=G.isText?G.text.slice(Math.max(Z,U)-U,Q-U):!G.isLeaf?"":X?typeof X==="function"?X(G):X:G.type.spec.leafText?G.type.spec.leafText(G):"";if(G.isBlock&&(G.isLeaf&&K||G.isTextblock)&&J)if(q)q=!1;else Y+=J;Y+=K},0),Y}append(Z){if(!Z.size)return this;if(!this.size)return Z;let Q=this.lastChild,J=Z.firstChild,X=this.content.slice(),Y=0;if(Q.isText&&Q.sameMarkup(J))X[X.length-1]=Q.withText(Q.text+J.text),Y=1;for(;Y<Z.content.length;Y++)X.push(Z.content[Y]);return new x(X,this.size+Z.size)}cut(Z,Q=this.size){if(Z==0&&Q==this.size)return this;let J=[],X=0;if(Q>Z)for(let Y=0,q=0;q<Q;Y++){let G=this.content[Y],U=q+G.nodeSize;if(U>Z){if(q<Z||U>Q)if(G.isText)G=G.cut(Math.max(0,Z-q),Math.min(G.text.length,Q-q));else G=G.cut(Math.max(0,Z-q-1),Math.min(G.content.size,Q-q-1));J.push(G),X+=G.nodeSize}q=U}return new x(J,X)}cutByIndex(Z,Q){if(Z==Q)return x.empty;if(Z==0&&Q==this.content.length)return this;return new x(this.content.slice(Z,Q))}replaceChild(Z,Q){let J=this.content[Z];if(J==Q)return this;let X=this.content.slice(),Y=this.size+Q.nodeSize-J.nodeSize;return X[Z]=Q,new x(X,Y)}addToStart(Z){return new x([Z].concat(this.content),this.size+Z.nodeSize)}addToEnd(Z){return new x(this.content.concat(Z),this.size+Z.nodeSize)}eq(Z){if(this.content.length!=Z.content.length)return!1;for(let Q=0;Q<this.content.length;Q++)if(!this.content[Q].eq(Z.content[Q]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(Z){let Q=this.content[Z];if(!Q)throw RangeError("Index "+Z+" out of range for "+this);return Q}maybeChild(Z){return this.content[Z]||null}forEach(Z){for(let Q=0,J=0;Q<this.content.length;Q++){let X=this.content[Q];Z(X,J,Q),J+=X.nodeSize}}findDiffStart(Z,Q=0){return $U(this,Z,Q)}findDiffEnd(Z,Q=this.size,J=Z.size){return bU(this,Z,Q,J)}findIndex(Z){if(Z==0)return N7(0,Z);if(Z==this.size)return N7(this.content.length,Z);if(Z>this.size||Z<0)throw RangeError(`Position ${Z} outside of fragment (${this})`);for(let Q=0,J=0;;Q++){let X=this.child(Q),Y=J+X.nodeSize;if(Y>=Z){if(Y==Z)return N7(Q+1,Y);return N7(Q,J)}J=Y}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map((Z)=>Z.toJSON()):null}static fromJSON(Z,Q){if(!Q)return x.empty;if(!Array.isArray(Q))throw RangeError("Invalid input for Fragment.fromJSON");return new x(Q.map(Z.nodeFromJSON))}static fromArray(Z){if(!Z.length)return x.empty;let Q,J=0;for(let X=0;X<Z.length;X++){let Y=Z[X];if(J+=Y.nodeSize,X&&Y.isText&&Z[X-1].sameMarkup(Y)){if(!Q)Q=Z.slice(0,X);Q[Q.length-1]=Y.withText(Q[Q.length-1].text+Y.text)}else if(Q)Q.push(Y)}return new x(Q||Z,J)}static from(Z){if(!Z)return x.empty;if(Z instanceof x)return Z;if(Array.isArray(Z))return this.fromArray(Z);if(Z.attrs)return new x([Z],Z.nodeSize);throw RangeError("Can not convert "+Z+" to a Fragment"+(Z.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}x.empty=new x([],0);var dZ={index:0,offset:0};function N7(Z,Q){return dZ.index=Z,dZ.offset=Q,dZ}function A7(Z,Q){if(Z===Q)return!0;if(!(Z&&typeof Z=="object")||!(Q&&typeof Q=="object"))return!1;let J=Array.isArray(Z);if(Array.isArray(Q)!=J)return!1;if(J){if(Z.length!=Q.length)return!1;for(let X=0;X<Z.length;X++)if(!A7(Z[X],Q[X]))return!1}else{for(let X in Z)if(!(X in Q)||!A7(Z[X],Q[X]))return!1;for(let X in Q)if(!(X in Z))return!1}return!0}class K0{constructor(Z,Q){this.type=Z,this.attrs=Q}addToSet(Z){let Q,J=!1;for(let X=0;X<Z.length;X++){let Y=Z[X];if(this.eq(Y))return Z;if(this.type.excludes(Y.type)){if(!Q)Q=Z.slice(0,X)}else if(Y.type.excludes(this.type))return Z;else{if(!J&&Y.type.rank>this.type.rank){if(!Q)Q=Z.slice(0,X);Q.push(this),J=!0}if(Q)Q.push(Y)}}if(!Q)Q=Z.slice();if(!J)Q.push(this);return Q}removeFromSet(Z){for(let Q=0;Q<Z.length;Q++)if(this.eq(Z[Q]))return Z.slice(0,Q).concat(Z.slice(Q+1));return Z}isInSet(Z){for(let Q=0;Q<Z.length;Q++)if(this.eq(Z[Q]))return!0;return!1}eq(Z){return this==Z||this.type==Z.type&&A7(this.attrs,Z.attrs)}toJSON(){let Z={type:this.type.name};for(let Q in this.attrs){Z.attrs=this.attrs;break}return Z}static fromJSON(Z,Q){if(!Q)throw RangeError("Invalid input for Mark.fromJSON");let J=Z.marks[Q.type];if(!J)throw RangeError(`There is no mark type ${Q.type} in this schema`);let X=J.create(Q.attrs);return J.checkAttrs(X.attrs),X}static sameSet(Z,Q){if(Z==Q)return!0;if(Z.length!=Q.length)return!1;for(let J=0;J<Z.length;J++)if(!Z[J].eq(Q[J]))return!1;return!0}static setFrom(Z){if(!Z||Array.isArray(Z)&&Z.length==0)return K0.none;if(Z instanceof K0)return[Z];let Q=Z.slice();return Q.sort((J,X)=>J.type.rank-X.type.rank),Q}}K0.none=[];class M6 extends Error{}class h{constructor(Z,Q,J){this.content=Z,this.openStart=Q,this.openEnd=J}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(Z,Q){let J=yU(this.content,Z+this.openStart,Q);return J&&new h(J,this.openStart,this.openEnd)}removeBetween(Z,Q){return new h(CU(this.content,Z+this.openStart,Q+this.openStart),this.openStart,this.openEnd)}eq(Z){return this.content.eq(Z.content)&&this.openStart==Z.openStart&&this.openEnd==Z.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let Z={content:this.content.toJSON()};if(this.openStart>0)Z.openStart=this.openStart;if(this.openEnd>0)Z.openEnd=this.openEnd;return Z}static fromJSON(Z,Q){if(!Q)return h.empty;let J=Q.openStart||0,X=Q.openEnd||0;if(typeof J!="number"||typeof X!="number")throw RangeError("Invalid input for Slice.fromJSON");return new h(x.fromJSON(Z,Q.content),J,X)}static maxOpen(Z,Q=!0){let J=0,X=0;for(let Y=Z.firstChild;Y&&!Y.isLeaf&&(Q||!Y.type.spec.isolating);Y=Y.firstChild)J++;for(let Y=Z.lastChild;Y&&!Y.isLeaf&&(Q||!Y.type.spec.isolating);Y=Y.lastChild)X++;return new h(Z,J,X)}}h.empty=new h(x.empty,0,0);function CU(Z,Q,J){let{index:X,offset:Y}=Z.findIndex(Q),q=Z.maybeChild(X),{index:G,offset:U}=Z.findIndex(J);if(Y==Q||q.isText){if(U!=J&&!Z.child(G).isText)throw RangeError("Removing non-flat range");return Z.cut(0,Q).append(Z.cut(J))}if(X!=G)throw RangeError("Removing non-flat range");return Z.replaceChild(X,q.copy(CU(q.content,Q-Y-1,J-Y-1)))}function yU(Z,Q,J,X){let{index:Y,offset:q}=Z.findIndex(Q),G=Z.maybeChild(Y);if(q==Q||G.isText){if(X&&!X.canReplace(Y,Y,J))return null;return Z.cut(0,Q).append(J).append(Z.cut(Q))}let U=yU(G.content,Q-q-1,J,G);return U&&Z.replaceChild(Y,G.copy(U))}function IL(Z,Q,J){if(J.openStart>Z.depth)throw new M6("Inserted content deeper than insertion position");if(Z.depth-J.openStart!=Q.depth-J.openEnd)throw new M6("Inconsistent open depths");return SU(Z,Q,J,0)}function SU(Z,Q,J,X){let Y=Z.index(X),q=Z.node(X);if(Y==Q.index(X)&&X<Z.depth-J.openStart){let G=SU(Z,Q,J,X+1);return q.copy(q.content.replaceChild(Y,G))}else if(!J.content.size)return D4(q,P7(Z,Q,X));else if(!J.openStart&&!J.openEnd&&Z.depth==X&&Q.depth==X){let G=Z.parent,U=G.content;return D4(G,U.cut(0,Z.parentOffset).append(J.content).append(U.cut(Q.parentOffset)))}else{let{start:G,end:U}=EL(J,Z);return D4(q,xU(Z,G,U,Q,X))}}function wU(Z,Q){if(!Q.type.compatibleContent(Z.type))throw new M6("Cannot join "+Q.type.name+" onto "+Z.type.name)}function rZ(Z,Q,J){let X=Z.node(J);return wU(X,Q.node(J)),X}function M4(Z,Q){let J=Q.length-1;if(J>=0&&Z.isText&&Z.sameMarkup(Q[J]))Q[J]=Z.withText(Q[J].text+Z.text);else Q.push(Z)}function u2(Z,Q,J,X){let Y=(Q||Z).node(J),q=0,G=Q?Q.index(J):Y.childCount;if(Z){if(q=Z.index(J),Z.depth>J)q++;else if(Z.textOffset)M4(Z.nodeAfter,X),q++}for(let U=q;U<G;U++)M4(Y.child(U),X);if(Q&&Q.depth==J&&Q.textOffset)M4(Q.nodeBefore,X)}function D4(Z,Q){return Z.type.checkContent(Q),Z.copy(Q)}function xU(Z,Q,J,X,Y){let q=Z.depth>Y&&rZ(Z,Q,Y+1),G=X.depth>Y&&rZ(J,X,Y+1),U=[];if(u2(null,Z,Y,U),q&&G&&Q.index(Y)==J.index(Y))wU(q,G),M4(D4(q,xU(Z,Q,J,X,Y+1)),U);else{if(q)M4(D4(q,P7(Z,Q,Y+1)),U);if(u2(Q,J,Y,U),G)M4(D4(G,P7(J,X,Y+1)),U)}return u2(X,null,Y,U),new x(U)}function P7(Z,Q,J){let X=[];if(u2(null,Z,J,X),Z.depth>J){let Y=rZ(Z,Q,J+1);M4(D4(Y,P7(Z,Q,J+1)),X)}return u2(Q,null,J,X),new x(X)}function EL(Z,Q){let J=Q.depth-Z.openStart,Y=Q.node(J).copy(Z.content);for(let q=J-1;q>=0;q--)Y=Q.node(q).copy(x.from(Y));return{start:Y.resolveNoCache(Z.openStart+J),end:Y.resolveNoCache(Y.content.size-Z.openEnd-J)}}class m2{constructor(Z,Q,J){this.pos=Z,this.path=Q,this.parentOffset=J,this.depth=Q.length/3-1}resolveDepth(Z){if(Z==null)return this.depth;if(Z<0)return this.depth+Z;return Z}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(Z){return this.path[this.resolveDepth(Z)*3]}index(Z){return this.path[this.resolveDepth(Z)*3+1]}indexAfter(Z){return Z=this.resolveDepth(Z),this.index(Z)+(Z==this.depth&&!this.textOffset?0:1)}start(Z){return Z=this.resolveDepth(Z),Z==0?0:this.path[Z*3-1]+1}end(Z){return Z=this.resolveDepth(Z),this.start(Z)+this.node(Z).content.size}before(Z){if(Z=this.resolveDepth(Z),!Z)throw RangeError("There is no position before the top-level node");return Z==this.depth+1?this.pos:this.path[Z*3-1]}after(Z){if(Z=this.resolveDepth(Z),!Z)throw RangeError("There is no position after the top-level node");return Z==this.depth+1?this.pos:this.path[Z*3-1]+this.path[Z*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let Z=this.parent,Q=this.index(this.depth);if(Q==Z.childCount)return null;let J=this.pos-this.path[this.path.length-1],X=Z.child(Q);return J?Z.child(Q).cut(J):X}get nodeBefore(){let Z=this.index(this.depth),Q=this.pos-this.path[this.path.length-1];if(Q)return this.parent.child(Z).cut(0,Q);return Z==0?null:this.parent.child(Z-1)}posAtIndex(Z,Q){Q=this.resolveDepth(Q);let J=this.path[Q*3],X=Q==0?0:this.path[Q*3-1]+1;for(let Y=0;Y<Z;Y++)X+=J.child(Y).nodeSize;return X}marks(){let Z=this.parent,Q=this.index();if(Z.content.size==0)return K0.none;if(this.textOffset)return Z.child(Q).marks;let J=Z.maybeChild(Q-1),X=Z.maybeChild(Q);if(!J){let G=J;J=X,X=G}let Y=J.marks;for(var q=0;q<Y.length;q++)if(Y[q].type.spec.inclusive===!1&&(!X||!Y[q].isInSet(X.marks)))Y=Y[q--].removeFromSet(Y);return Y}marksAcross(Z){let Q=this.parent.maybeChild(this.index());if(!Q||!Q.isInline)return null;let J=Q.marks,X=Z.parent.maybeChild(Z.index());for(var Y=0;Y<J.length;Y++)if(J[Y].type.spec.inclusive===!1&&(!X||!J[Y].isInSet(X.marks)))J=J[Y--].removeFromSet(J);return J}sharedDepth(Z){for(let Q=this.depth;Q>0;Q--)if(this.start(Q)<=Z&&this.end(Q)>=Z)return Q;return 0}blockRange(Z=this,Q){if(Z.pos<this.pos)return Z.blockRange(this);for(let J=this.depth-(this.parent.inlineContent||this.pos==Z.pos?1:0);J>=0;J--)if(Z.pos<=this.end(J)&&(!Q||Q(this.node(J))))return new D7(this,Z,J);return null}sameParent(Z){return this.pos-this.parentOffset==Z.pos-Z.parentOffset}max(Z){return Z.pos>this.pos?Z:this}min(Z){return Z.pos<this.pos?Z:this}toString(){let Z="";for(let Q=1;Q<=this.depth;Q++)Z+=(Z?"/":"")+this.node(Q).type.name+"_"+this.index(Q-1);return Z+":"+this.parentOffset}static resolve(Z,Q){if(!(Q>=0&&Q<=Z.content.size))throw RangeError("Position "+Q+" out of range");let J=[],X=0,Y=Q;for(let q=Z;;){let{index:G,offset:U}=q.content.findIndex(Y),K=Y-U;if(J.push(q,G,X+U),!K)break;if(q=q.child(G),q.isText)break;Y=K-1,X+=U+1}return new m2(Q,J,Y)}static resolveCached(Z,Q){let J=jU.get(Z);if(J)for(let Y=0;Y<J.elts.length;Y++){let q=J.elts[Y];if(q.pos==Q)return q}else jU.set(Z,J=new kU);let X=J.elts[J.i]=m2.resolve(Z,Q);return J.i=(J.i+1)%TL,X}}class kU{constructor(){this.elts=[],this.i=0}}var TL=12,jU=new WeakMap;class D7{constructor(Z,Q,J){this.$from=Z,this.$to=Q,this.depth=J}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}var $L=Object.create(null);class B1{constructor(Z,Q,J,X=K0.none){this.type=Z,this.attrs=Q,this.marks=X,this.content=J||x.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(Z){return this.content.child(Z)}maybeChild(Z){return this.content.maybeChild(Z)}forEach(Z){this.content.forEach(Z)}nodesBetween(Z,Q,J,X=0){this.content.nodesBetween(Z,Q,J,X,this)}descendants(Z){this.nodesBetween(0,this.content.size,Z)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(Z,Q,J,X){return this.content.textBetween(Z,Q,J,X)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(Z){return this==Z||this.sameMarkup(Z)&&this.content.eq(Z.content)}sameMarkup(Z){return this.hasMarkup(Z.type,Z.attrs,Z.marks)}hasMarkup(Z,Q,J){return this.type==Z&&A7(this.attrs,Q||Z.defaultAttrs||$L)&&K0.sameSet(this.marks,J||K0.none)}copy(Z=null){if(Z==this.content)return this;return new B1(this.type,this.attrs,Z,this.marks)}mark(Z){return Z==this.marks?this:new B1(this.type,this.attrs,this.content,Z)}cut(Z,Q=this.content.size){if(Z==0&&Q==this.content.size)return this;return this.copy(this.content.cut(Z,Q))}slice(Z,Q=this.content.size,J=!1){if(Z==Q)return h.empty;let X=this.resolve(Z),Y=this.resolve(Q),q=J?0:X.sharedDepth(Q),G=X.start(q),K=X.node(q).content.cut(X.pos-G,Y.pos-G);return new h(K,X.depth-q,Y.depth-q)}replace(Z,Q,J){return IL(this.resolve(Z),this.resolve(Q),J)}nodeAt(Z){for(let Q=this;;){let{index:J,offset:X}=Q.content.findIndex(Z);if(Q=Q.maybeChild(J),!Q)return null;if(X==Z||Q.isText)return Q;Z-=X+1}}childAfter(Z){let{index:Q,offset:J}=this.content.findIndex(Z);return{node:this.content.maybeChild(Q),index:Q,offset:J}}childBefore(Z){if(Z==0)return{node:null,index:0,offset:0};let{index:Q,offset:J}=this.content.findIndex(Z);if(J<Z)return{node:this.content.child(Q),index:Q,offset:J};let X=this.content.child(Q-1);return{node:X,index:Q-1,offset:J-X.nodeSize}}resolve(Z){return m2.resolveCached(this,Z)}resolveNoCache(Z){return m2.resolve(this,Z)}rangeHasMark(Z,Q,J){let X=!1;if(Q>Z)this.nodesBetween(Z,Q,(Y)=>{if(J.isInSet(Y.marks))X=!0;return!X});return X}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let Z=this.type.name;if(this.content.size)Z+="("+this.content.toStringInner()+")";return gU(this.marks,Z)}contentMatchAt(Z){let Q=this.type.contentMatch.matchFragment(this.content,0,Z);if(!Q)throw Error("Called contentMatchAt on a node with invalid content");return Q}canReplace(Z,Q,J=x.empty,X=0,Y=J.childCount){let q=this.contentMatchAt(Z).matchFragment(J,X,Y),G=q&&q.matchFragment(this.content,Q);if(!G||!G.validEnd)return!1;for(let U=X;U<Y;U++)if(!this.type.allowsMarks(J.child(U).marks))return!1;return!0}canReplaceWith(Z,Q,J,X){if(X&&!this.type.allowsMarks(X))return!1;let Y=this.contentMatchAt(Z).matchType(J),q=Y&&Y.matchFragment(this.content,Q);return q?q.validEnd:!1}canAppend(Z){if(Z.content.size)return this.canReplace(this.childCount,this.childCount,Z.content);else return this.type.compatibleContent(Z.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let Z=K0.none;for(let Q=0;Q<this.marks.length;Q++){let J=this.marks[Q];J.type.checkAttrs(J.attrs),Z=J.addToSet(Z)}if(!K0.sameSet(Z,this.marks))throw RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map((Q)=>Q.type.name)}`);this.content.forEach((Q)=>Q.check())}toJSON(){let Z={type:this.type.name};for(let Q in this.attrs){Z.attrs=this.attrs;break}if(this.content.size)Z.content=this.content.toJSON();if(this.marks.length)Z.marks=this.marks.map((Q)=>Q.toJSON());return Z}static fromJSON(Z,Q){if(!Q)throw RangeError("Invalid input for Node.fromJSON");let J=void 0;if(Q.marks){if(!Array.isArray(Q.marks))throw RangeError("Invalid mark data for Node.fromJSON");J=Q.marks.map(Z.markFromJSON)}if(Q.type=="text"){if(typeof Q.text!="string")throw RangeError("Invalid text node in JSON");return Z.text(Q.text,J)}let X=x.fromJSON(Z,Q.content),Y=Z.nodeType(Q.type).create(Q.attrs,X,J);return Y.type.checkAttrs(Y.attrs),Y}}B1.prototype.text=void 0;class R7 extends B1{constructor(Z,Q,J,X){super(Z,Q,null,X);if(!J)throw RangeError("Empty text nodes are not allowed");this.text=J}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);return gU(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(Z,Q){return this.text.slice(Z,Q)}get nodeSize(){return this.text.length}mark(Z){return Z==this.marks?this:new R7(this.type,this.attrs,this.text,Z)}withText(Z){if(Z==this.text)return this;return new R7(this.type,this.attrs,Z,this.marks)}cut(Z=0,Q=this.text.length){if(Z==0&&Q==this.text.length)return this;return this.withText(this.text.slice(Z,Q))}eq(Z){return this.sameMarkup(Z)&&this.text==Z.text}toJSON(){let Z=super.toJSON();return Z.text=this.text,Z}}function gU(Z,Q){for(let J=Z.length-1;J>=0;J--)Q=Z[J].type.name+"("+Q+")";return Q}class I4{constructor(Z){this.validEnd=Z,this.next=[],this.wrapCache=[]}static parse(Z,Q){let J=new vU(Z,Q);if(J.next==null)return I4.empty;let X=hU(J);if(J.next)J.err("Unexpected trailing text");let Y=kL(xL(X));return gL(Y,J),Y}matchType(Z){for(let Q=0;Q<this.next.length;Q++)if(this.next[Q].type==Z)return this.next[Q].next;return null}matchFragment(Z,Q=0,J=Z.childCount){let X=this;for(let Y=Q;X&&Y<J;Y++)X=X.matchType(Z.child(Y).type);return X}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let Z=0;Z<this.next.length;Z++){let{type:Q}=this.next[Z];if(!(Q.isText||Q.hasRequiredAttrs()))return Q}return null}compatible(Z){for(let Q=0;Q<this.next.length;Q++)for(let J=0;J<Z.next.length;J++)if(this.next[Q].type==Z.next[J].type)return!0;return!1}fillBefore(Z,Q=!1,J=0){let X=[this];function Y(q,G){let U=q.matchFragment(Z,J);if(U&&(!Q||U.validEnd))return x.from(G.map((K)=>K.createAndFill()));for(let K=0;K<q.next.length;K++){let{type:H,next:W}=q.next[K];if(!(H.isText||H.hasRequiredAttrs())&&X.indexOf(W)==-1){X.push(W);let z=Y(W,G.concat(H));if(z)return z}}return null}return Y(this,[])}findWrapping(Z){for(let J=0;J<this.wrapCache.length;J+=2)if(this.wrapCache[J]==Z)return this.wrapCache[J+1];let Q=this.computeWrapping(Z);return this.wrapCache.push(Z,Q),Q}computeWrapping(Z){let Q=Object.create(null),J=[{match:this,type:null,via:null}];while(J.length){let X=J.shift(),Y=X.match;if(Y.matchType(Z)){let q=[];for(let G=X;G.type;G=G.via)q.push(G.type);return q.reverse()}for(let q=0;q<Y.next.length;q++){let{type:G,next:U}=Y.next[q];if(!G.isLeaf&&!G.hasRequiredAttrs()&&!(G.name in Q)&&(!X.type||U.validEnd))J.push({match:G.contentMatch,type:G,via:X}),Q[G.name]=!0}}return null}get edgeCount(){return this.next.length}edge(Z){if(Z>=this.next.length)throw RangeError(`There's no ${Z}th edge in this content match`);return this.next[Z]}toString(){let Z=[];function Q(J){Z.push(J);for(let X=0;X<J.next.length;X++)if(Z.indexOf(J.next[X].next)==-1)Q(J.next[X].next)}return Q(this),Z.map((J,X)=>{let Y=X+(J.validEnd?"*":" ")+" ";for(let q=0;q<J.next.length;q++)Y+=(q?", ":"")+J.next[q].type.name+"->"+Z.indexOf(J.next[q].next);return Y}).join(`
`)}}I4.empty=new I4(!0);class vU{constructor(Z,Q){if(this.string=Z,this.nodeTypes=Q,this.inline=null,this.pos=0,this.tokens=Z.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]=="")this.tokens.pop();if(this.tokens[0]=="")this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(Z){return this.next==Z&&(this.pos++||!0)}err(Z){throw SyntaxError(Z+" (in content expression '"+this.string+"')")}}function hU(Z){let Q=[];do Q.push(bL(Z));while(Z.eat("|"));return Q.length==1?Q[0]:{type:"choice",exprs:Q}}function bL(Z){let Q=[];do Q.push(CL(Z));while(Z.next&&Z.next!=")"&&Z.next!="|");return Q.length==1?Q[0]:{type:"seq",exprs:Q}}function CL(Z){let Q=wL(Z);for(;;)if(Z.eat("+"))Q={type:"plus",expr:Q};else if(Z.eat("*"))Q={type:"star",expr:Q};else if(Z.eat("?"))Q={type:"opt",expr:Q};else if(Z.eat("{"))Q=yL(Z,Q);else break;return Q}function AU(Z){if(/\D/.test(Z.next))Z.err("Expected number, got '"+Z.next+"'");let Q=Number(Z.next);return Z.pos++,Q}function yL(Z,Q){let J=AU(Z),X=J;if(Z.eat(","))if(Z.next!="}")X=AU(Z);else X=-1;if(!Z.eat("}"))Z.err("Unclosed braced range");return{type:"range",min:J,max:X,expr:Q}}function SL(Z,Q){let J=Z.nodeTypes,X=J[Q];if(X)return[X];let Y=[];for(let q in J){let G=J[q];if(G.isInGroup(Q))Y.push(G)}if(Y.length==0)Z.err("No node type or group '"+Q+"' found");return Y}function wL(Z){if(Z.eat("(")){let Q=hU(Z);if(!Z.eat(")"))Z.err("Missing closing paren");return Q}else if(!/\W/.test(Z.next)){let Q=SL(Z,Z.next).map((J)=>{if(Z.inline==null)Z.inline=J.isInline;else if(Z.inline!=J.isInline)Z.err("Mixing inline and block content");return{type:"name",value:J}});return Z.pos++,Q.length==1?Q[0]:{type:"choice",exprs:Q}}else Z.err("Unexpected token '"+Z.next+"'")}function xL(Z){let Q=[[]];return Y(q(Z,0),J()),Q;function J(){return Q.push([])-1}function X(G,U,K){let H={term:K,to:U};return Q[G].push(H),H}function Y(G,U){G.forEach((K)=>K.to=U)}function q(G,U){if(G.type=="choice")return G.exprs.reduce((K,H)=>K.concat(q(H,U)),[]);else if(G.type=="seq")for(let K=0;;K++){let H=q(G.exprs[K],U);if(K==G.exprs.length-1)return H;Y(H,U=J())}else if(G.type=="star"){let K=J();return X(U,K),Y(q(G.expr,K),K),[X(K)]}else if(G.type=="plus"){let K=J();return Y(q(G.expr,U),K),Y(q(G.expr,K),K),[X(K)]}else if(G.type=="opt")return[X(U)].concat(q(G.expr,U));else if(G.type=="range"){let K=U;for(let H=0;H<G.min;H++){let W=J();Y(q(G.expr,K),W),K=W}if(G.max==-1)Y(q(G.expr,K),K);else for(let H=G.min;H<G.max;H++){let W=J();X(K,W),Y(q(G.expr,K),W),K=W}return[X(K)]}else if(G.type=="name")return[X(U,void 0,G.value)];else throw Error("Unknown expr type")}}function uU(Z,Q){return Q-Z}function PU(Z,Q){let J=[];return X(Q),J.sort(uU);function X(Y){let q=Z[Y];if(q.length==1&&!q[0].term)return X(q[0].to);J.push(Y);for(let G=0;G<q.length;G++){let{term:U,to:K}=q[G];if(!U&&J.indexOf(K)==-1)X(K)}}}function kL(Z){let Q=Object.create(null);return J(PU(Z,0));function J(X){let Y=[];X.forEach((G)=>{Z[G].forEach(({term:U,to:K})=>{if(!U)return;let H;for(let W=0;W<Y.length;W++)if(Y[W][0]==U)H=Y[W][1];PU(Z,K).forEach((W)=>{if(!H)Y.push([U,H=[]]);if(H.indexOf(W)==-1)H.push(W)})})});let q=Q[X.join(",")]=new I4(X.indexOf(Z.length-1)>-1);for(let G=0;G<Y.length;G++){let U=Y[G][1].sort(uU);q.next.push({type:Y[G][0],next:Q[U.join(",")]||J(U)})}return q}}function gL(Z,Q){for(let J=0,X=[Z];J<X.length;J++){let Y=X[J],q=!Y.validEnd,G=[];for(let U=0;U<Y.next.length;U++){let{type:K,next:H}=Y.next[U];if(G.push(K.name),q&&!(K.isText||K.hasRequiredAttrs()))q=!1;if(X.indexOf(H)==-1)X.push(H)}if(q)Q.err("Only non-generatable nodes ("+G.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function fU(Z){let Q=Object.create(null);for(let J in Z){let X=Z[J];if(!X.hasDefault)return null;Q[J]=X.default}return Q}function mU(Z,Q){let J=Object.create(null);for(let X in Z){let Y=Q&&Q[X];if(Y===void 0){let q=Z[X];if(q.hasDefault)Y=q.default;else throw RangeError("No value supplied for attribute "+X)}J[X]=Y}return J}function pU(Z,Q,J,X){for(let Y in Q)if(!(Y in Z))throw RangeError(`Unsupported attribute ${Y} for ${J} of type ${Y}`);for(let Y in Z){let q=Z[Y];if(q.validate)q.validate(Q[Y])}}function lU(Z,Q){let J=Object.create(null);if(Q)for(let X in Q)J[X]=new iU(Z,X,Q[X]);return J}class M7{constructor(Z,Q,J){this.name=Z,this.schema=Q,this.spec=J,this.markSet=null,this.groups=J.group?J.group.split(" "):[],this.attrs=lU(Z,J.attrs),this.defaultAttrs=fU(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(J.inline||Z=="text"),this.isText=Z=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==I4.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(Z){return this.groups.indexOf(Z)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let Z in this.attrs)if(this.attrs[Z].isRequired)return!0;return!1}compatibleContent(Z){return this==Z||this.contentMatch.compatible(Z.contentMatch)}computeAttrs(Z){if(!Z&&this.defaultAttrs)return this.defaultAttrs;else return mU(this.attrs,Z)}create(Z=null,Q,J){if(this.isText)throw Error("NodeType.create can't construct text nodes");return new B1(this,this.computeAttrs(Z),x.from(Q),K0.setFrom(J))}createChecked(Z=null,Q,J){return Q=x.from(Q),this.checkContent(Q),new B1(this,this.computeAttrs(Z),Q,K0.setFrom(J))}createAndFill(Z=null,Q,J){if(Z=this.computeAttrs(Z),Q=x.from(Q),Q.size){let q=this.contentMatch.fillBefore(Q);if(!q)return null;Q=q.append(Q)}let X=this.contentMatch.matchFragment(Q),Y=X&&X.fillBefore(x.empty,!0);if(!Y)return null;return new B1(this,Z,Q.append(Y),K0.setFrom(J))}validContent(Z){let Q=this.contentMatch.matchFragment(Z);if(!Q||!Q.validEnd)return!1;for(let J=0;J<Z.childCount;J++)if(!this.allowsMarks(Z.child(J).marks))return!1;return!0}checkContent(Z){if(!this.validContent(Z))throw RangeError(`Invalid content for node ${this.name}: ${Z.toString().slice(0,50)}`)}checkAttrs(Z){pU(this.attrs,Z,"node",this.name)}allowsMarkType(Z){return this.markSet==null||this.markSet.indexOf(Z)>-1}allowsMarks(Z){if(this.markSet==null)return!0;for(let Q=0;Q<Z.length;Q++)if(!this.allowsMarkType(Z[Q].type))return!1;return!0}allowedMarks(Z){if(this.markSet==null)return Z;let Q;for(let J=0;J<Z.length;J++)if(!this.allowsMarkType(Z[J].type)){if(!Q)Q=Z.slice(0,J)}else if(Q)Q.push(Z[J]);return!Q?Z:Q.length?Q:K0.none}static compile(Z,Q){let J=Object.create(null);Z.forEach((Y,q)=>J[Y]=new M7(Y,Q,q));let X=Q.spec.topNode||"doc";if(!J[X])throw RangeError("Schema is missing its top node type ('"+X+"')");if(!J.text)throw RangeError("Every schema needs a 'text' type");for(let Y in J.text.attrs)throw RangeError("The text node type should not have attributes");return J}}function vL(Z,Q,J){let X=J.split("|");return(Y)=>{let q=Y===null?"null":typeof Y;if(X.indexOf(q)<0)throw RangeError(`Expected value of type ${X} for attribute ${Q} on type ${Z}, got ${q}`)}}class iU{constructor(Z,Q,J){this.hasDefault=Object.prototype.hasOwnProperty.call(J,"default"),this.default=J.default,this.validate=typeof J.validate=="string"?vL(Z,Q,J.validate):J.validate}get isRequired(){return!this.hasDefault}}class l2{constructor(Z,Q,J,X){this.name=Z,this.rank=Q,this.schema=J,this.spec=X,this.attrs=lU(Z,X.attrs),this.excluded=null;let Y=fU(this.attrs);this.instance=Y?new K0(this,Y):null}create(Z=null){if(!Z&&this.instance)return this.instance;return new K0(this,mU(this.attrs,Z))}static compile(Z,Q){let J=Object.create(null),X=0;return Z.forEach((Y,q)=>J[Y]=new l2(Y,X++,Q,q)),J}removeFromSet(Z){for(var Q=0;Q<Z.length;Q++)if(Z[Q].type==this)Z=Z.slice(0,Q).concat(Z.slice(Q+1)),Q--;return Z}isInSet(Z){for(let Q=0;Q<Z.length;Q++)if(Z[Q].type==this)return Z[Q]}checkAttrs(Z){pU(this.attrs,Z,"mark",this.name)}excludes(Z){return this.excluded.indexOf(Z)>-1}}class sZ{constructor(Z){this.linebreakReplacement=null,this.cached=Object.create(null);let Q=this.spec={};for(let X in Z)Q[X]=Z[X];Q.nodes=iZ.from(Z.nodes),Q.marks=iZ.from(Z.marks||{}),this.nodes=M7.compile(this.spec.nodes,this),this.marks=l2.compile(this.spec.marks,this);let J=Object.create(null);for(let X in this.nodes){if(X in this.marks)throw RangeError(X+" can not be both a node and a mark");let Y=this.nodes[X],q=Y.spec.content||"",G=Y.spec.marks;if(Y.contentMatch=J[q]||(J[q]=I4.parse(q,this.nodes)),Y.inlineContent=Y.contentMatch.inlineContent,Y.spec.linebreakReplacement){if(this.linebreakReplacement)throw RangeError("Multiple linebreak nodes defined");if(!Y.isInline||!Y.isLeaf)throw RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=Y}Y.markSet=G=="_"?null:G?RU(this,G.split(" ")):G==""||!Y.inlineContent?[]:null}for(let X in this.marks){let Y=this.marks[X],q=Y.spec.excludes;Y.excluded=q==null?[Y]:q==""?[]:RU(this,q.split(" "))}this.nodeFromJSON=(X)=>B1.fromJSON(this,X),this.markFromJSON=(X)=>K0.fromJSON(this,X),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(Z,Q=null,J,X){if(typeof Z=="string")Z=this.nodeType(Z);else if(!(Z instanceof M7))throw RangeError("Invalid node type: "+Z);else if(Z.schema!=this)throw RangeError("Node type from different schema used ("+Z.name+")");return Z.createChecked(Q,J,X)}text(Z,Q){let J=this.nodes.text;return new R7(J,J.defaultAttrs,Z,K0.setFrom(Q))}mark(Z,Q){if(typeof Z=="string")Z=this.marks[Z];return Z.create(Q)}nodeType(Z){let Q=this.nodes[Z];if(!Q)throw RangeError("Unknown node type: "+Z);return Q}}function RU(Z,Q){let J=[];for(let X=0;X<Q.length;X++){let Y=Q[X],q=Z.marks[Y],G=q;if(q)J.push(q);else for(let U in Z.marks){let K=Z.marks[U];if(Y=="_"||K.spec.group&&K.spec.group.split(" ").indexOf(Y)>-1)J.push(G=K)}if(!G)throw SyntaxError("Unknown mark type: '"+Q[X]+"'")}return J}function hL(Z){return Z.tag!=null}function uL(Z){return Z.style!=null}class M5{constructor(Z,Q){this.schema=Z,this.rules=Q,this.tags=[],this.styles=[];let J=this.matchedStyles=[];Q.forEach((X)=>{if(hL(X))this.tags.push(X);else if(uL(X)){let Y=/[^=]*/.exec(X.style)[0];if(J.indexOf(Y)<0)J.push(Y);this.styles.push(X)}}),this.normalizeLists=!this.tags.some((X)=>{if(!/^(ul|ol)\b/.test(X.tag)||!X.node)return!1;let Y=Z.nodes[X.node];return Y.contentMatch.matchType(Y)})}parse(Z,Q={}){let J=new nZ(this,Q,!1);return J.addAll(Z,K0.none,Q.from,Q.to),J.finish()}parseSlice(Z,Q={}){let J=new nZ(this,Q,!0);return J.addAll(Z,K0.none,Q.from,Q.to),h.maxOpen(J.finish())}matchTag(Z,Q,J){for(let X=J?this.tags.indexOf(J)+1:0;X<this.tags.length;X++){let Y=this.tags[X];if(pL(Z,Y.tag)&&(Y.namespace===void 0||Z.namespaceURI==Y.namespace)&&(!Y.context||Q.matchesContext(Y.context))){if(Y.getAttrs){let q=Y.getAttrs(Z);if(q===!1)continue;Y.attrs=q||void 0}return Y}}}matchStyle(Z,Q,J,X){for(let Y=X?this.styles.indexOf(X)+1:0;Y<this.styles.length;Y++){let q=this.styles[Y],G=q.style;if(G.indexOf(Z)!=0||q.context&&!J.matchesContext(q.context)||G.length>Z.length&&(G.charCodeAt(Z.length)!=61||G.slice(Z.length+1)!=Q))continue;if(q.getAttrs){let U=q.getAttrs(Q);if(U===!1)continue;q.attrs=U||void 0}return q}}static schemaRules(Z){let Q=[];function J(X){let Y=X.priority==null?50:X.priority,q=0;for(;q<Q.length;q++){let G=Q[q];if((G.priority==null?50:G.priority)<Y)break}Q.splice(q,0,X)}for(let X in Z.marks){let Y=Z.marks[X].spec.parseDOM;if(Y)Y.forEach((q)=>{if(J(q=DU(q)),!(q.mark||q.ignore||q.clearMark))q.mark=X})}for(let X in Z.nodes){let Y=Z.nodes[X].spec.parseDOM;if(Y)Y.forEach((q)=>{if(J(q=DU(q)),!(q.node||q.ignore||q.mark))q.node=X})}return Q}static fromSchema(Z){return Z.cached.domParser||(Z.cached.domParser=new M5(Z,M5.schemaRules(Z)))}}var dU={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},fL={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},cU={ol:!0,ul:!0},p2=1,aZ=2,f2=4;function MU(Z,Q,J){if(Q!=null)return(Q?p2:0)|(Q==="full"?aZ:0);return Z&&Z.whitespace=="pre"?p2|aZ:J&~f2}class h2{constructor(Z,Q,J,X,Y,q){this.type=Z,this.attrs=Q,this.marks=J,this.solid=X,this.options=q,this.content=[],this.activeMarks=K0.none,this.match=Y||(q&f2?null:Z.contentMatch)}findWrapping(Z){if(!this.match){if(!this.type)return[];let Q=this.type.contentMatch.fillBefore(x.from(Z));if(Q)this.match=this.type.contentMatch.matchFragment(Q);else{let J=this.type.contentMatch,X;if(X=J.findWrapping(Z.type))return this.match=J,X;else return null}}return this.match.findWrapping(Z.type)}finish(Z){if(!(this.options&p2)){let J=this.content[this.content.length-1],X;if(J&&J.isText&&(X=/[ \t\r\n\u000c]+$/.exec(J.text))){let Y=J;if(J.text.length==X[0].length)this.content.pop();else this.content[this.content.length-1]=Y.withText(Y.text.slice(0,Y.text.length-X[0].length))}}let Q=x.from(this.content);if(!Z&&this.match)Q=Q.append(this.match.fillBefore(x.empty,!0));return this.type?this.type.create(this.attrs,Q,this.marks):Q}inlineContext(Z){if(this.type)return this.type.inlineContent;if(this.content.length)return this.content[0].isInline;return Z.parentNode&&!dU.hasOwnProperty(Z.parentNode.nodeName.toLowerCase())}}class nZ{constructor(Z,Q,J){this.parser=Z,this.options=Q,this.isOpen=J,this.open=0,this.localPreserveWS=!1;let X=Q.topNode,Y,q=MU(null,Q.preserveWhitespace,0)|(J?f2:0);if(X)Y=new h2(X.type,X.attrs,K0.none,!0,Q.topMatch||X.type.contentMatch,q);else if(J)Y=new h2(null,null,K0.none,!0,null,q);else Y=new h2(Z.schema.topNodeType,null,K0.none,!0,null,q);this.nodes=[Y],this.find=Q.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(Z,Q){if(Z.nodeType==3)this.addTextNode(Z,Q);else if(Z.nodeType==1)this.addElement(Z,Q)}addTextNode(Z,Q){let J=Z.nodeValue,X=this.top,Y=X.options&aZ?"full":this.localPreserveWS||(X.options&p2)>0,{schema:q}=this.parser;if(Y==="full"||X.inlineContext(Z)||/[^ \t\r\n\u000c]/.test(J)){if(!Y){if(J=J.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(J)&&this.open==this.nodes.length-1){let G=X.content[X.content.length-1],U=Z.previousSibling;if(!G||U&&U.nodeName=="BR"||G.isText&&/[ \t\r\n\u000c]$/.test(G.text))J=J.slice(1)}}else if(Y==="full")J=J.replace(/\r\n?/g,`
`);else if(q.linebreakReplacement&&/[\r\n]/.test(J)&&this.top.findWrapping(q.linebreakReplacement.create())){let G=J.split(/\r?\n|\r/);for(let U=0;U<G.length;U++){if(U)this.insertNode(q.linebreakReplacement.create(),Q,!0);if(G[U])this.insertNode(q.text(G[U]),Q,!/\S/.test(G[U]))}J=""}else J=J.replace(/\r?\n|\r/g," ");if(J)this.insertNode(q.text(J),Q,!/\S/.test(J));this.findInText(Z)}else this.findInside(Z)}addElement(Z,Q,J){let X=this.localPreserveWS,Y=this.top;if(Z.tagName=="PRE"||/pre/.test(Z.style&&Z.style.whiteSpace))this.localPreserveWS=!0;let q=Z.nodeName.toLowerCase(),G;if(cU.hasOwnProperty(q)&&this.parser.normalizeLists)mL(Z);let U=this.options.ruleFromNode&&this.options.ruleFromNode(Z)||(G=this.parser.matchTag(Z,this,J));Z:if(U?U.ignore:fL.hasOwnProperty(q))this.findInside(Z),this.ignoreFallback(Z,Q);else if(!U||U.skip||U.closeParent){if(U&&U.closeParent)this.open=Math.max(0,this.open-1);else if(U&&U.skip.nodeType)Z=U.skip;let K,H=this.needsBlock;if(dU.hasOwnProperty(q)){if(Y.content.length&&Y.content[0].isInline&&this.open)this.open--,Y=this.top;if(K=!0,!Y.type)this.needsBlock=!0}else if(!Z.firstChild){this.leafFallback(Z,Q);break Z}let W=U&&U.skip?Q:this.readStyles(Z,Q);if(W)this.addAll(Z,W);if(K)this.sync(Y);this.needsBlock=H}else{let K=this.readStyles(Z,Q);if(K)this.addElementByRule(Z,U,K,U.consuming===!1?G:void 0)}this.localPreserveWS=X}leafFallback(Z,Q){if(Z.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent)this.addTextNode(Z.ownerDocument.createTextNode(`
`),Q)}ignoreFallback(Z,Q){if(Z.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent))this.findPlace(this.parser.schema.text("-"),Q,!0)}readStyles(Z,Q){let J=Z.style;if(J&&J.length)for(let X=0;X<this.parser.matchedStyles.length;X++){let Y=this.parser.matchedStyles[X],q=J.getPropertyValue(Y);if(q)for(let G=void 0;;){let U=this.parser.matchStyle(Y,q,this,G);if(!U)break;if(U.ignore)return null;if(U.clearMark)Q=Q.filter((K)=>!U.clearMark(K));else Q=Q.concat(this.parser.schema.marks[U.mark].create(U.attrs));if(U.consuming===!1)G=U;else break}}return Q}addElementByRule(Z,Q,J,X){let Y,q;if(Q.node){if(q=this.parser.schema.nodes[Q.node],!q.isLeaf){let U=this.enter(q,Q.attrs||null,J,Q.preserveWhitespace);if(U)Y=!0,J=U}else if(!this.insertNode(q.create(Q.attrs),J,Z.nodeName=="BR"))this.leafFallback(Z,J)}else{let U=this.parser.schema.marks[Q.mark];J=J.concat(U.create(Q.attrs))}let G=this.top;if(q&&q.isLeaf)this.findInside(Z);else if(X)this.addElement(Z,J,X);else if(Q.getContent)this.findInside(Z),Q.getContent(Z,this.parser.schema).forEach((U)=>this.insertNode(U,J,!1));else{let U=Z;if(typeof Q.contentElement=="string")U=Z.querySelector(Q.contentElement);else if(typeof Q.contentElement=="function")U=Q.contentElement(Z);else if(Q.contentElement)U=Q.contentElement;this.findAround(Z,U,!0),this.addAll(U,J),this.findAround(Z,U,!1)}if(Y&&this.sync(G))this.open--}addAll(Z,Q,J,X){let Y=J||0;for(let q=J?Z.childNodes[J]:Z.firstChild,G=X==null?null:Z.childNodes[X];q!=G;q=q.nextSibling,++Y)this.findAtPoint(Z,Y),this.addDOM(q,Q);this.findAtPoint(Z,Y)}findPlace(Z,Q,J){let X,Y;for(let q=this.open,G=0;q>=0;q--){let U=this.nodes[q],K=U.findWrapping(Z);if(K&&(!X||X.length>K.length+G)){if(X=K,Y=U,!K.length)break}if(U.solid){if(J)break;G+=2}}if(!X)return null;this.sync(Y);for(let q=0;q<X.length;q++)Q=this.enterInner(X[q],null,Q,!1);return Q}insertNode(Z,Q,J){if(Z.isInline&&this.needsBlock&&!this.top.type){let Y=this.textblockFromContext();if(Y)Q=this.enterInner(Y,null,Q)}let X=this.findPlace(Z,Q,J);if(X){this.closeExtra();let Y=this.top;if(Y.match)Y.match=Y.match.matchType(Z.type);let q=K0.none;for(let G of X.concat(Z.marks))if(Y.type?Y.type.allowsMarkType(G.type):IU(G.type,Z.type))q=G.addToSet(q);return Y.content.push(Z.mark(q)),!0}return!1}enter(Z,Q,J,X){let Y=this.findPlace(Z.create(Q),J,!1);if(Y)Y=this.enterInner(Z,Q,J,!0,X);return Y}enterInner(Z,Q,J,X=!1,Y){this.closeExtra();let q=this.top;q.match=q.match&&q.match.matchType(Z);let G=MU(Z,Y,q.options);if(q.options&f2&&q.content.length==0)G|=f2;let U=K0.none;return J=J.filter((K)=>{if(q.type?q.type.allowsMarkType(K.type):IU(K.type,Z))return U=K.addToSet(U),!1;return!0}),this.nodes.push(new h2(Z,Q,U,X,null,G)),this.open++,J}closeExtra(Z=!1){let Q=this.nodes.length-1;if(Q>this.open){for(;Q>this.open;Q--)this.nodes[Q-1].content.push(this.nodes[Q].finish(Z));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(Z){for(let Q=this.open;Q>=0;Q--)if(this.nodes[Q]==Z)return this.open=Q,!0;else if(this.localPreserveWS)this.nodes[Q].options|=p2;return!1}get currentPos(){this.closeExtra();let Z=0;for(let Q=this.open;Q>=0;Q--){let J=this.nodes[Q].content;for(let X=J.length-1;X>=0;X--)Z+=J[X].nodeSize;if(Q)Z++}return Z}findAtPoint(Z,Q){if(this.find){for(let J=0;J<this.find.length;J++)if(this.find[J].node==Z&&this.find[J].offset==Q)this.find[J].pos=this.currentPos}}findInside(Z){if(this.find){for(let Q=0;Q<this.find.length;Q++)if(this.find[Q].pos==null&&Z.nodeType==1&&Z.contains(this.find[Q].node))this.find[Q].pos=this.currentPos}}findAround(Z,Q,J){if(Z!=Q&&this.find){for(let X=0;X<this.find.length;X++)if(this.find[X].pos==null&&Z.nodeType==1&&Z.contains(this.find[X].node)){if(Q.compareDocumentPosition(this.find[X].node)&(J?2:4))this.find[X].pos=this.currentPos}}}findInText(Z){if(this.find){for(let Q=0;Q<this.find.length;Q++)if(this.find[Q].node==Z)this.find[Q].pos=this.currentPos-(Z.nodeValue.length-this.find[Q].offset)}}matchesContext(Z){if(Z.indexOf("|")>-1)return Z.split(/\s*\|\s*/).some(this.matchesContext,this);let Q=Z.split("/"),J=this.options.context,X=!this.isOpen&&(!J||J.parent.type==this.nodes[0].type),Y=-(J?J.depth+1:0)+(X?0:1),q=(G,U)=>{for(;G>=0;G--){let K=Q[G];if(K==""){if(G==Q.length-1||G==0)continue;for(;U>=Y;U--)if(q(G-1,U))return!0;return!1}else{let H=U>0||U==0&&X?this.nodes[U].type:J&&U>=Y?J.node(U-Y).type:null;if(!H||H.name!=K&&!H.isInGroup(K))return!1;U--}}return!0};return q(Q.length-1,this.open)}textblockFromContext(){let Z=this.options.context;if(Z)for(let Q=Z.depth;Q>=0;Q--){let J=Z.node(Q).contentMatchAt(Z.indexAfter(Q)).defaultType;if(J&&J.isTextblock&&J.defaultAttrs)return J}for(let Q in this.parser.schema.nodes){let J=this.parser.schema.nodes[Q];if(J.isTextblock&&J.defaultAttrs)return J}}}function mL(Z){for(let Q=Z.firstChild,J=null;Q;Q=Q.nextSibling){let X=Q.nodeType==1?Q.nodeName.toLowerCase():null;if(X&&cU.hasOwnProperty(X)&&J)J.appendChild(Q),Q=J;else if(X=="li")J=Q;else if(X)J=null}}function pL(Z,Q){return(Z.matches||Z.msMatchesSelector||Z.webkitMatchesSelector||Z.mozMatchesSelector).call(Z,Q)}function DU(Z){let Q={};for(let J in Z)Q[J]=Z[J];return Q}function IU(Z,Q){let J=Q.schema.nodes;for(let X in J){let Y=J[X];if(!Y.allowsMarkType(Z))continue;let q=[],G=(U)=>{q.push(U);for(let K=0;K<U.edgeCount;K++){let{type:H,next:W}=U.edge(K);if(H==Q)return!0;if(q.indexOf(W)<0&&G(W))return!0}};if(G(Y.contentMatch))return!0}}class d5{constructor(Z,Q){this.nodes=Z,this.marks=Q}serializeFragment(Z,Q={},J){if(!J)J=cZ(Q).createDocumentFragment();let X=J,Y=[];return Z.forEach((q)=>{if(Y.length||q.marks.length){let G=0,U=0;while(G<Y.length&&U<q.marks.length){let K=q.marks[U];if(!this.marks[K.type.name]){U++;continue}if(!K.eq(Y[G][0])||K.type.spec.spanning===!1)break;G++,U++}while(G<Y.length)X=Y.pop()[1];while(U<q.marks.length){let K=q.marks[U++],H=this.serializeMark(K,q.isInline,Q);if(H)Y.push([K,X]),X.appendChild(H.dom),X=H.contentDOM||H.dom}}X.appendChild(this.serializeNodeInner(q,Q))}),J}serializeNodeInner(Z,Q){let{dom:J,contentDOM:X}=j7(cZ(Q),this.nodes[Z.type.name](Z),null,Z.attrs);if(X){if(Z.isLeaf)throw RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(Z.content,Q,X)}return J}serializeNode(Z,Q={}){let J=this.serializeNodeInner(Z,Q);for(let X=Z.marks.length-1;X>=0;X--){let Y=this.serializeMark(Z.marks[X],Z.isInline,Q);if(Y)(Y.contentDOM||Y.dom).appendChild(J),J=Y.dom}return J}serializeMark(Z,Q,J={}){let X=this.marks[Z.type.name];return X&&j7(cZ(J),X(Z,Q),null,Z.attrs)}static renderSpec(Z,Q,J=null,X){return j7(Z,Q,J,X)}static fromSchema(Z){return Z.cached.domSerializer||(Z.cached.domSerializer=new d5(this.nodesFromSchema(Z),this.marksFromSchema(Z)))}static nodesFromSchema(Z){let Q=EU(Z.nodes);if(!Q.text)Q.text=(J)=>J.text;return Q}static marksFromSchema(Z){return EU(Z.marks)}}function EU(Z){let Q={};for(let J in Z){let X=Z[J].spec.toDOM;if(X)Q[J]=X}return Q}function cZ(Z){return Z.document||window.document}var TU=new WeakMap;function lL(Z){let Q=TU.get(Z);if(Q===void 0)TU.set(Z,Q=iL(Z));return Q}function iL(Z){let Q=null;function J(X){if(X&&typeof X=="object")if(Array.isArray(X))if(typeof X[0]=="string"){if(!Q)Q=[];Q.push(X)}else for(let Y=0;Y<X.length;Y++)J(X[Y]);else for(let Y in X)J(X[Y])}return J(Z),Q}function j7(Z,Q,J,X){if(typeof Q=="string")return{dom:Z.createTextNode(Q)};if(Q.nodeType!=null)return{dom:Q};if(Q.dom&&Q.dom.nodeType!=null)return Q;let Y=Q[0],q;if(typeof Y!="string")throw RangeError("Invalid array passed to renderSpec");if(X&&(q=lL(X))&&q.indexOf(Q)>-1)throw RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let G=Y.indexOf(" ");if(G>0)J=Y.slice(0,G),Y=Y.slice(G+1);let U,K=J?Z.createElementNS(J,Y):Z.createElement(Y),H=Q[1],W=1;if(H&&typeof H=="object"&&H.nodeType==null&&!Array.isArray(H)){W=2;for(let z in H)if(H[z]!=null){let F=z.indexOf(" ");if(F>0)K.setAttributeNS(z.slice(0,F),z.slice(F+1),H[z]);else if(z=="style"&&K.style)K.style.cssText=H[z];else K.setAttribute(z,H[z])}}for(let z=W;z<Q.length;z++){let F=Q[z];if(F===0){if(z<Q.length-1||z>W)throw RangeError("Content hole must be the only child of its parent node");return{dom:K,contentDOM:K}}else{let{dom:B,contentDOM:V}=j7(Z,F,J,X);if(K.appendChild(B),V){if(U)throw RangeError("Multiple content holes");U=V}}}return{dom:K,contentDOM:U}}class rU extends Error{name="Assertion";code="ERR_ASSERTION";constructor(Z,Q,J,X,Y){super(Z);if(Error.captureStackTrace)Error.captureStackTrace(this,this.constructor);this.actual=Q,this.expected=J,this.generated=Y,this.operator=X}}function P(Z,Q){dL(Boolean(Z),!1,!0,"ok","Expected value to be truthy",Q)}function dL(Z,Q,J,X,Y,q){if(!Z)throw q instanceof Error?q:new rU(q||Y,Q,J,X,!q)}var cL={};function E4(Z,Q){let J=Q||cL,X=typeof J.includeImageAlt==="boolean"?J.includeImageAlt:!0,Y=typeof J.includeHtml==="boolean"?J.includeHtml:!0;return nU(Z,X,Y)}function nU(Z,Q,J){if(rL(Z)){if("value"in Z)return Z.type==="html"&&!J?"":Z.value;if(Q&&"alt"in Z&&Z.alt)return Z.alt;if("children"in Z)return aU(Z.children,Q,J)}if(Array.isArray(Z))return aU(Z,Q,J);return""}function aU(Z,Q,J){let X=[],Y=-1;while(++Y<Z.length)X[Y]=nU(Z[Y],Q,J);return X.join("")}function rL(Z){return Boolean(Z&&typeof Z==="object")}var sU=document.createElement("i");function D6(Z){let Q="&"+Z+";";sU.innerHTML=Q;let J=sU.textContent;if(J.charCodeAt(J.length-1)===59&&Z!=="semi")return!1;return J===Q?!1:J}var L={carriageReturn:-5,lineFeed:-4,carriageReturnLineFeed:-3,horizontalTab:-2,virtualSpace:-1,eof:null,nul:0,soh:1,stx:2,etx:3,eot:4,enq:5,ack:6,bel:7,bs:8,ht:9,lf:10,vt:11,ff:12,cr:13,so:14,si:15,dle:16,dc1:17,dc2:18,dc3:19,dc4:20,nak:21,syn:22,etb:23,can:24,em:25,sub:26,esc:27,fs:28,gs:29,rs:30,us:31,space:32,exclamationMark:33,quotationMark:34,numberSign:35,dollarSign:36,percentSign:37,ampersand:38,apostrophe:39,leftParenthesis:40,rightParenthesis:41,asterisk:42,plusSign:43,comma:44,dash:45,dot:46,slash:47,digit0:48,digit1:49,digit2:50,digit3:51,digit4:52,digit5:53,digit6:54,digit7:55,digit8:56,digit9:57,colon:58,semicolon:59,lessThan:60,equalsTo:61,greaterThan:62,questionMark:63,atSign:64,uppercaseA:65,uppercaseB:66,uppercaseC:67,uppercaseD:68,uppercaseE:69,uppercaseF:70,uppercaseG:71,uppercaseH:72,uppercaseI:73,uppercaseJ:74,uppercaseK:75,uppercaseL:76,uppercaseM:77,uppercaseN:78,uppercaseO:79,uppercaseP:80,uppercaseQ:81,uppercaseR:82,uppercaseS:83,uppercaseT:84,uppercaseU:85,uppercaseV:86,uppercaseW:87,uppercaseX:88,uppercaseY:89,uppercaseZ:90,leftSquareBracket:91,backslash:92,rightSquareBracket:93,caret:94,underscore:95,graveAccent:96,lowercaseA:97,lowercaseB:98,lowercaseC:99,lowercaseD:100,lowercaseE:101,lowercaseF:102,lowercaseG:103,lowercaseH:104,lowercaseI:105,lowercaseJ:106,lowercaseK:107,lowercaseL:108,lowercaseM:109,lowercaseN:110,lowercaseO:111,lowercaseP:112,lowercaseQ:113,lowercaseR:114,lowercaseS:115,lowercaseT:116,lowercaseU:117,lowercaseV:118,lowercaseW:119,lowercaseX:120,lowercaseY:121,lowercaseZ:122,leftCurlyBrace:123,verticalBar:124,rightCurlyBrace:125,tilde:126,del:127,byteOrderMarker:65279,replacementCharacter:65533};var k={attentionSideAfter:2,attentionSideBefore:1,atxHeadingOpeningFenceSizeMax:6,autolinkDomainSizeMax:63,autolinkSchemeSizeMax:32,cdataOpeningString:"CDATA[",characterGroupPunctuation:2,characterGroupWhitespace:1,characterReferenceDecimalSizeMax:7,characterReferenceHexadecimalSizeMax:6,characterReferenceNamedSizeMax:31,codeFencedSequenceSizeMin:3,contentTypeContent:"content",contentTypeDocument:"document",contentTypeFlow:"flow",contentTypeString:"string",contentTypeText:"text",hardBreakPrefixSizeMin:2,htmlBasic:6,htmlCdata:5,htmlComment:2,htmlComplete:7,htmlDeclaration:4,htmlInstruction:3,htmlRawSizeMax:8,htmlRaw:1,linkResourceDestinationBalanceMax:32,linkReferenceSizeMax:999,listItemValueSizeMax:10,numericBaseDecimal:10,numericBaseHexadecimal:16,tabSize:4,thematicBreakMarkerCountMin:3,v8MaxSafeChunkSize:1e4};var _={data:"data",whitespace:"whitespace",lineEnding:"lineEnding",lineEndingBlank:"lineEndingBlank",linePrefix:"linePrefix",lineSuffix:"lineSuffix",atxHeading:"atxHeading",atxHeadingSequence:"atxHeadingSequence",atxHeadingText:"atxHeadingText",autolink:"autolink",autolinkEmail:"autolinkEmail",autolinkMarker:"autolinkMarker",autolinkProtocol:"autolinkProtocol",characterEscape:"characterEscape",characterEscapeValue:"characterEscapeValue",characterReference:"characterReference",characterReferenceMarker:"characterReferenceMarker",characterReferenceMarkerNumeric:"characterReferenceMarkerNumeric",characterReferenceMarkerHexadecimal:"characterReferenceMarkerHexadecimal",characterReferenceValue:"characterReferenceValue",codeFenced:"codeFenced",codeFencedFence:"codeFencedFence",codeFencedFenceSequence:"codeFencedFenceSequence",codeFencedFenceInfo:"codeFencedFenceInfo",codeFencedFenceMeta:"codeFencedFenceMeta",codeFlowValue:"codeFlowValue",codeIndented:"codeIndented",codeText:"codeText",codeTextData:"codeTextData",codeTextPadding:"codeTextPadding",codeTextSequence:"codeTextSequence",content:"content",definition:"definition",definitionDestination:"definitionDestination",definitionDestinationLiteral:"definitionDestinationLiteral",definitionDestinationLiteralMarker:"definitionDestinationLiteralMarker",definitionDestinationRaw:"definitionDestinationRaw",definitionDestinationString:"definitionDestinationString",definitionLabel:"definitionLabel",definitionLabelMarker:"definitionLabelMarker",definitionLabelString:"definitionLabelString",definitionMarker:"definitionMarker",definitionTitle:"definitionTitle",definitionTitleMarker:"definitionTitleMarker",definitionTitleString:"definitionTitleString",emphasis:"emphasis",emphasisSequence:"emphasisSequence",emphasisText:"emphasisText",escapeMarker:"escapeMarker",hardBreakEscape:"hardBreakEscape",hardBreakTrailing:"hardBreakTrailing",htmlFlow:"htmlFlow",htmlFlowData:"htmlFlowData",htmlText:"htmlText",htmlTextData:"htmlTextData",image:"image",label:"label",labelText:"labelText",labelLink:"labelLink",labelImage:"labelImage",labelMarker:"labelMarker",labelImageMarker:"labelImageMarker",labelEnd:"labelEnd",link:"link",paragraph:"paragraph",reference:"reference",referenceMarker:"referenceMarker",referenceString:"referenceString",resource:"resource",resourceDestination:"resourceDestination",resourceDestinationLiteral:"resourceDestinationLiteral",resourceDestinationLiteralMarker:"resourceDestinationLiteralMarker",resourceDestinationRaw:"resourceDestinationRaw",resourceDestinationString:"resourceDestinationString",resourceMarker:"resourceMarker",resourceTitle:"resourceTitle",resourceTitleMarker:"resourceTitleMarker",resourceTitleString:"resourceTitleString",setextHeading:"setextHeading",setextHeadingText:"setextHeadingText",setextHeadingLine:"setextHeadingLine",setextHeadingLineSequence:"setextHeadingLineSequence",strong:"strong",strongSequence:"strongSequence",strongText:"strongText",thematicBreak:"thematicBreak",thematicBreakSequence:"thematicBreakSequence",blockQuote:"blockQuote",blockQuotePrefix:"blockQuotePrefix",blockQuoteMarker:"blockQuoteMarker",blockQuotePrefixWhitespace:"blockQuotePrefixWhitespace",listOrdered:"listOrdered",listUnordered:"listUnordered",listItemIndent:"listItemIndent",listItemMarker:"listItemMarker",listItemPrefix:"listItemPrefix",listItemPrefixWhitespace:"listItemPrefixWhitespace",listItemValue:"listItemValue",chunkDocument:"chunkDocument",chunkContent:"chunkContent",chunkFlow:"chunkFlow",chunkText:"chunkText",chunkString:"chunkString"};var b1={ht:"\t",lf:`
`,cr:"\r",space:" ",exclamationMark:"!",quotationMark:'"',numberSign:"#",dollarSign:"$",percentSign:"%",ampersand:"&",apostrophe:"'",leftParenthesis:"(",rightParenthesis:")",asterisk:"*",plusSign:"+",comma:",",dash:"-",dot:".",slash:"/",digit0:"0",digit1:"1",digit2:"2",digit3:"3",digit4:"4",digit5:"5",digit6:"6",digit7:"7",digit8:"8",digit9:"9",colon:":",semicolon:";",lessThan:"<",equalsTo:"=",greaterThan:">",questionMark:"?",atSign:"@",uppercaseA:"A",uppercaseB:"B",uppercaseC:"C",uppercaseD:"D",uppercaseE:"E",uppercaseF:"F",uppercaseG:"G",uppercaseH:"H",uppercaseI:"I",uppercaseJ:"J",uppercaseK:"K",uppercaseL:"L",uppercaseM:"M",uppercaseN:"N",uppercaseO:"O",uppercaseP:"P",uppercaseQ:"Q",uppercaseR:"R",uppercaseS:"S",uppercaseT:"T",uppercaseU:"U",uppercaseV:"V",uppercaseW:"W",uppercaseX:"X",uppercaseY:"Y",uppercaseZ:"Z",leftSquareBracket:"[",backslash:"\\",rightSquareBracket:"]",caret:"^",underscore:"_",graveAccent:"`",lowercaseA:"a",lowercaseB:"b",lowercaseC:"c",lowercaseD:"d",lowercaseE:"e",lowercaseF:"f",lowercaseG:"g",lowercaseH:"h",lowercaseI:"i",lowercaseJ:"j",lowercaseK:"k",lowercaseL:"l",lowercaseM:"m",lowercaseN:"n",lowercaseO:"o",lowercaseP:"p",lowercaseQ:"q",lowercaseR:"r",lowercaseS:"s",lowercaseT:"t",lowercaseU:"u",lowercaseV:"v",lowercaseW:"w",lowercaseX:"x",lowercaseY:"y",lowercaseZ:"z",leftCurlyBrace:"{",verticalBar:"|",rightCurlyBrace:"}",tilde:"~",replacementCharacter:"�"};function h0(Z,Q,J,X){let Y=Z.length,q=0,G;if(Q<0)Q=-Q>Y?0:Y+Q;else Q=Q>Y?Y:Q;if(J=J>0?J:0,X.length<k.v8MaxSafeChunkSize)G=Array.from(X),G.unshift(Q,J),Z.splice(...G);else{if(J)Z.splice(Q,J);while(q<X.length)G=X.slice(q,q+k.v8MaxSafeChunkSize),G.unshift(Q,0),Z.splice(...G),q+=k.v8MaxSafeChunkSize,Q+=k.v8MaxSafeChunkSize}}function V1(Z,Q){if(Z.length>0)return h0(Z,Z.length,0,Q),Z;return Q}var oU={}.hasOwnProperty;function I7(Z){let Q={},J=-1;while(++J<Z.length)aL(Q,Z[J]);return Q}function aL(Z,Q){let J;for(J in Q){let Y=(oU.call(Z,J)?Z[J]:void 0)||(Z[J]={}),q=Q[J],G;if(q)for(G in q){if(!oU.call(Y,G))Y[G]=[];let U=q[G];nL(Y[G],Array.isArray(U)?U:U?[U]:[])}}}function nL(Z,Q){let J=-1,X=[];while(++J<Q.length)(Q[J].add==="after"?Z:X).push(Q[J]);h0(Z,0,0,X)}function E7(Z,Q){let J=Number.parseInt(Z,Q);if(J<L.ht||J===L.vt||J>L.cr&&J<L.space||J>L.tilde&&J<160||J>55295&&J<57344||J>64975&&J<65008||(J&65535)===65535||(J&65535)===65534||J>1114111)return b1.replacementCharacter;return String.fromCodePoint(J)}function G1(Z){return Z.replace(/[\t\n\r ]+/g,b1.space).replace(/^ | $/g,"").toLowerCase().toUpperCase()}var r0=c5(/[A-Za-z]/),a0=c5(/[\dA-Za-z]/),tU=c5(/[#-'*+\--9=?A-Z^-~]/);function T4(Z){return Z!==null&&(Z<L.space||Z===L.del)}var i2=c5(/\d/),eU=c5(/[\dA-Fa-f]/),Z3=c5(/[!-/:-@[-`{-~]/);function v(Z){return Z!==null&&Z<L.horizontalTab}function H0(Z){return Z!==null&&(Z<L.nul||Z===L.space)}function r(Z){return Z===L.horizontalTab||Z===L.virtualSpace||Z===L.space}var $4=c5(/\p{P}|\p{S}/u),Y5=c5(/\s/);function c5(Z){return Q;function Q(J){return J!==null&&J>-1&&Z.test(String.fromCharCode(J))}}function a(Z,Q,J,X){let Y=X?X-1:Number.POSITIVE_INFINITY,q=0;return G;function G(K){if(r(K))return Z.enter(J),U(K);return Q(K)}function U(K){if(r(K)&&q++<Y)return Z.consume(K),U;return Z.exit(J),Q(K)}}var Q3={tokenize:sL};function sL(Z){let Q=Z.attempt(this.parser.constructs.contentInitial,X,Y),J;return Q;function X(U){if(P(U===L.eof||v(U),"expected eol or eof"),U===L.eof){Z.consume(U);return}return Z.enter(_.lineEnding),Z.consume(U),Z.exit(_.lineEnding),a(Z,Q,_.linePrefix)}function Y(U){return P(U!==L.eof&&!v(U),"expected anything other than a line ending or EOF"),Z.enter(_.paragraph),q(U)}function q(U){let K=Z.enter(_.chunkText,{contentType:k.contentTypeText,previous:J});if(J)J.next=K;return J=K,G(U)}function G(U){if(U===L.eof){Z.exit(_.chunkText),Z.exit(_.paragraph),Z.consume(U);return}if(v(U))return Z.consume(U),Z.exit(_.chunkText),q;return Z.consume(U),G}}var X3={tokenize:oL},J3={tokenize:tL};function oL(Z){let Q=this,J=[],X=0,Y,q,G;return U;function U(E){if(X<J.length){let $=J[X];return Q.containerState=$[1],P($[0].continuation,"expected `continuation` to be defined on container construct"),Z.attempt($[0].continuation,K,H)(E)}return H(E)}function K(E){if(P(Q.containerState,"expected `containerState` to be defined after continuation"),X++,Q.containerState._closeFlow){if(Q.containerState._closeFlow=void 0,Y)R();let $=Q.events.length,w=$,I;while(w--)if(Q.events[w][0]==="exit"&&Q.events[w][1].type===_.chunkFlow){I=Q.events[w][1].end;break}P(I,"could not find previous flow chunk"),j(X);let g=$;while(g<Q.events.length)Q.events[g][1].end={...I},g++;return h0(Q.events,w+1,0,Q.events.slice($)),Q.events.length=g,H(E)}return U(E)}function H(E){if(X===J.length){if(!Y)return F(E);if(Y.currentConstruct&&Y.currentConstruct.concrete)return V(E);Q.interrupt=Boolean(Y.currentConstruct&&!Y._gfmTableDynamicInterruptHack)}return Q.containerState={},Z.check(J3,W,z)(E)}function W(E){if(Y)R();return j(X),F(E)}function z(E){return Q.parser.lazy[Q.now().line]=X!==J.length,G=Q.now().offset,V(E)}function F(E){return Q.containerState={},Z.attempt(J3,B,V)(E)}function B(E){return P(Q.currentConstruct,"expected `currentConstruct` to be defined on tokenizer"),P(Q.containerState,"expected `containerState` to be defined on tokenizer"),X++,J.push([Q.currentConstruct,Q.containerState]),F(E)}function V(E){if(E===L.eof){if(Y)R();j(0),Z.consume(E);return}return Y=Y||Q.parser.flow(Q.now()),Z.enter(_.chunkFlow,{_tokenizer:Y,contentType:k.contentTypeFlow,previous:q}),O(E)}function O(E){if(E===L.eof){N(Z.exit(_.chunkFlow),!0),j(0),Z.consume(E);return}if(v(E))return Z.consume(E),N(Z.exit(_.chunkFlow)),X=0,Q.interrupt=void 0,U;return Z.consume(E),O}function N(E,$){P(Y,"expected `childFlow` to be defined when continuing");let w=Q.sliceStream(E);if($)w.push(null);if(E.previous=q,q)q.next=E;if(q=E,Y.defineSkip(E.start),Y.write(w),Q.parser.lazy[E.start.line]){let I=Y.events.length;while(I--)if(Y.events[I][1].start.offset<G&&(!Y.events[I][1].end||Y.events[I][1].end.offset>G))return;let g=Q.events.length,S=g,u,T;while(S--)if(Q.events[S][0]==="exit"&&Q.events[S][1].type===_.chunkFlow){if(u){T=Q.events[S][1].end;break}u=!0}P(T,"could not find previous flow chunk"),j(X),I=g;while(I<Q.events.length)Q.events[I][1].end={...T},I++;h0(Q.events,S+1,0,Q.events.slice(g)),Q.events.length=I}}function j(E){let $=J.length;while($-- >E){let w=J[$];Q.containerState=w[1],P(w[0].exit,"expected `exit` to be defined on container construct"),w[0].exit.call(Q,Z)}J.length=E}function R(){P(Q.containerState,"expected `containerState` to be defined when closing flow"),P(Y,"expected `childFlow` to be defined when closing it"),Y.write([L.eof]),q=void 0,Y=void 0,Q.containerState._closeFlow=void 0}}function tL(Z,Q,J){return P(this.parser.constructs.disable.null,"expected `disable.null` to be populated"),a(Z,Z.attempt(this.parser.constructs.document,Q,J),_.linePrefix,this.parser.constructs.disable.null.includes("codeIndented")?void 0:k.tabSize)}function D5(Z){if(Z===L.eof||H0(Z)||Y5(Z))return k.characterGroupWhitespace;if($4(Z))return k.characterGroupPunctuation}function r5(Z,Q,J){let X=[],Y=-1;while(++Y<Z.length){let q=Z[Y].resolveAll;if(q&&!X.includes(q))Q=q(Q,J),X.push(q)}return Q}var d2={name:"attention",resolveAll:eL,tokenize:Z_};function eL(Z,Q){let J=-1,X,Y,q,G,U,K,H,W;while(++J<Z.length)if(Z[J][0]==="enter"&&Z[J][1].type==="attentionSequence"&&Z[J][1]._close){X=J;while(X--)if(Z[X][0]==="exit"&&Z[X][1].type==="attentionSequence"&&Z[X][1]._open&&Q.sliceSerialize(Z[X][1]).charCodeAt(0)===Q.sliceSerialize(Z[J][1]).charCodeAt(0)){if((Z[X][1]._close||Z[J][1]._open)&&(Z[J][1].end.offset-Z[J][1].start.offset)%3&&!((Z[X][1].end.offset-Z[X][1].start.offset+Z[J][1].end.offset-Z[J][1].start.offset)%3))continue;K=Z[X][1].end.offset-Z[X][1].start.offset>1&&Z[J][1].end.offset-Z[J][1].start.offset>1?2:1;let z={...Z[X][1].end},F={...Z[J][1].start};if(Y3(z,-K),Y3(F,K),G={type:K>1?_.strongSequence:_.emphasisSequence,start:z,end:{...Z[X][1].end}},U={type:K>1?_.strongSequence:_.emphasisSequence,start:{...Z[J][1].start},end:F},q={type:K>1?_.strongText:_.emphasisText,start:{...Z[X][1].end},end:{...Z[J][1].start}},Y={type:K>1?_.strong:_.emphasis,start:{...G.start},end:{...U.end}},Z[X][1].end={...G.start},Z[J][1].start={...U.end},H=[],Z[X][1].end.offset-Z[X][1].start.offset)H=V1(H,[["enter",Z[X][1],Q],["exit",Z[X][1],Q]]);if(H=V1(H,[["enter",Y,Q],["enter",G,Q],["exit",G,Q],["enter",q,Q]]),P(Q.parser.constructs.insideSpan.null,"expected `insideSpan` to be populated"),H=V1(H,r5(Q.parser.constructs.insideSpan.null,Z.slice(X+1,J),Q)),H=V1(H,[["exit",q,Q],["enter",U,Q],["exit",U,Q],["exit",Y,Q]]),Z[J][1].end.offset-Z[J][1].start.offset)W=2,H=V1(H,[["enter",Z[J][1],Q],["exit",Z[J][1],Q]]);else W=0;h0(Z,X-1,J-X+3,H),J=X+H.length-W-2;break}}J=-1;while(++J<Z.length)if(Z[J][1].type==="attentionSequence")Z[J][1].type="data";return Z}function Z_(Z,Q){let J=this.parser.constructs.attentionMarkers.null,X=this.previous,Y=D5(X),q;return G;function G(K){return P(K===L.asterisk||K===L.underscore,"expected asterisk or underscore"),q=K,Z.enter("attentionSequence"),U(K)}function U(K){if(K===q)return Z.consume(K),U;let H=Z.exit("attentionSequence"),W=D5(K);P(J,"expected `attentionMarkers` to be populated");let z=!W||W===k.characterGroupPunctuation&&Y||J.includes(K),F=!Y||Y===k.characterGroupPunctuation&&W||J.includes(X);return H._open=Boolean(q===L.asterisk?z:z&&(Y||!F)),H._close=Boolean(q===L.asterisk?F:F&&(W||!z)),Q(K)}}function Y3(Z,Q){Z.column+=Q,Z.offset+=Q,Z._bufferIndex+=Q}var oZ={name:"autolink",tokenize:Q_};function Q_(Z,Q,J){let X=0;return Y;function Y(B){return P(B===L.lessThan,"expected `<`"),Z.enter(_.autolink),Z.enter(_.autolinkMarker),Z.consume(B),Z.exit(_.autolinkMarker),Z.enter(_.autolinkProtocol),q}function q(B){if(r0(B))return Z.consume(B),G;if(B===L.atSign)return J(B);return H(B)}function G(B){if(B===L.plusSign||B===L.dash||B===L.dot||a0(B))return X=1,U(B);return H(B)}function U(B){if(B===L.colon)return Z.consume(B),X=0,K;if((B===L.plusSign||B===L.dash||B===L.dot||a0(B))&&X++<k.autolinkSchemeSizeMax)return Z.consume(B),U;return X=0,H(B)}function K(B){if(B===L.greaterThan)return Z.exit(_.autolinkProtocol),Z.enter(_.autolinkMarker),Z.consume(B),Z.exit(_.autolinkMarker),Z.exit(_.autolink),Q;if(B===L.eof||B===L.space||B===L.lessThan||T4(B))return J(B);return Z.consume(B),K}function H(B){if(B===L.atSign)return Z.consume(B),W;if(tU(B))return Z.consume(B),H;return J(B)}function W(B){return a0(B)?z(B):J(B)}function z(B){if(B===L.dot)return Z.consume(B),X=0,W;if(B===L.greaterThan)return Z.exit(_.autolinkProtocol).type=_.autolinkEmail,Z.enter(_.autolinkMarker),Z.consume(B),Z.exit(_.autolinkMarker),Z.exit(_.autolink),Q;return F(B)}function F(B){if((B===L.dash||a0(B))&&X++<k.autolinkDomainSizeMax){let V=B===L.dash?F:z;return Z.consume(B),V}return J(B)}}var q5={partial:!0,tokenize:J_};function J_(Z,Q,J){return X;function X(q){return r(q)?a(Z,Y,_.linePrefix)(q):Y(q)}function Y(q){return q===L.eof||v(q)?Q(q):J(q)}}var T7={continuation:{tokenize:Y_},exit:q_,name:"blockQuote",tokenize:X_};function X_(Z,Q,J){let X=this;return Y;function Y(G){if(G===L.greaterThan){let U=X.containerState;if(P(U,"expected `containerState` to be defined in container"),!U.open)Z.enter(_.blockQuote,{_container:!0}),U.open=!0;return Z.enter(_.blockQuotePrefix),Z.enter(_.blockQuoteMarker),Z.consume(G),Z.exit(_.blockQuoteMarker),q}return J(G)}function q(G){if(r(G))return Z.enter(_.blockQuotePrefixWhitespace),Z.consume(G),Z.exit(_.blockQuotePrefixWhitespace),Z.exit(_.blockQuotePrefix),Q;return Z.exit(_.blockQuotePrefix),Q(G)}}function Y_(Z,Q,J){let X=this;return Y;function Y(G){if(r(G))return P(X.parser.constructs.disable.null,"expected `disable.null` to be populated"),a(Z,q,_.linePrefix,X.parser.constructs.disable.null.includes("codeIndented")?void 0:k.tabSize)(G);return q(G)}function q(G){return Z.attempt(T7,Q,J)(G)}}function q_(Z){Z.exit(_.blockQuote)}var $7={name:"characterEscape",tokenize:G_};function G_(Z,Q,J){return X;function X(q){return P(q===L.backslash,"expected `\\`"),Z.enter(_.characterEscape),Z.enter(_.escapeMarker),Z.consume(q),Z.exit(_.escapeMarker),Y}function Y(q){if(Z3(q))return Z.enter(_.characterEscapeValue),Z.consume(q),Z.exit(_.characterEscapeValue),Z.exit(_.characterEscape),Q;return J(q)}}var b7={name:"characterReference",tokenize:U_};function U_(Z,Q,J){let X=this,Y=0,q,G;return U;function U(z){return P(z===L.ampersand,"expected `&`"),Z.enter(_.characterReference),Z.enter(_.characterReferenceMarker),Z.consume(z),Z.exit(_.characterReferenceMarker),K}function K(z){if(z===L.numberSign)return Z.enter(_.characterReferenceMarkerNumeric),Z.consume(z),Z.exit(_.characterReferenceMarkerNumeric),H;return Z.enter(_.characterReferenceValue),q=k.characterReferenceNamedSizeMax,G=a0,W(z)}function H(z){if(z===L.uppercaseX||z===L.lowercaseX)return Z.enter(_.characterReferenceMarkerHexadecimal),Z.consume(z),Z.exit(_.characterReferenceMarkerHexadecimal),Z.enter(_.characterReferenceValue),q=k.characterReferenceHexadecimalSizeMax,G=eU,W;return Z.enter(_.characterReferenceValue),q=k.characterReferenceDecimalSizeMax,G=i2,W(z)}function W(z){if(z===L.semicolon&&Y){let F=Z.exit(_.characterReferenceValue);if(G===a0&&!D6(X.sliceSerialize(F)))return J(z);return Z.enter(_.characterReferenceMarker),Z.consume(z),Z.exit(_.characterReferenceMarker),Z.exit(_.characterReference),Q}if(G(z)&&Y++<q)return Z.consume(z),W;return J(z)}}var q3={partial:!0,tokenize:H_},C7={concrete:!0,name:"codeFenced",tokenize:K_};function K_(Z,Q,J){let X=this,Y={partial:!0,tokenize:w},q=0,G=0,U;return K;function K(I){return H(I)}function H(I){P(I===L.graveAccent||I===L.tilde,"expected `` ` `` or `~`");let g=X.events[X.events.length-1];return q=g&&g[1].type===_.linePrefix?g[2].sliceSerialize(g[1],!0).length:0,U=I,Z.enter(_.codeFenced),Z.enter(_.codeFencedFence),Z.enter(_.codeFencedFenceSequence),W(I)}function W(I){if(I===U)return G++,Z.consume(I),W;if(G<k.codeFencedSequenceSizeMin)return J(I);return Z.exit(_.codeFencedFenceSequence),r(I)?a(Z,z,_.whitespace)(I):z(I)}function z(I){if(I===L.eof||v(I))return Z.exit(_.codeFencedFence),X.interrupt?Q(I):Z.check(q3,O,$)(I);return Z.enter(_.codeFencedFenceInfo),Z.enter(_.chunkString,{contentType:k.contentTypeString}),F(I)}function F(I){if(I===L.eof||v(I))return Z.exit(_.chunkString),Z.exit(_.codeFencedFenceInfo),z(I);if(r(I))return Z.exit(_.chunkString),Z.exit(_.codeFencedFenceInfo),a(Z,B,_.whitespace)(I);if(I===L.graveAccent&&I===U)return J(I);return Z.consume(I),F}function B(I){if(I===L.eof||v(I))return z(I);return Z.enter(_.codeFencedFenceMeta),Z.enter(_.chunkString,{contentType:k.contentTypeString}),V(I)}function V(I){if(I===L.eof||v(I))return Z.exit(_.chunkString),Z.exit(_.codeFencedFenceMeta),z(I);if(I===L.graveAccent&&I===U)return J(I);return Z.consume(I),V}function O(I){return P(v(I),"expected eol"),Z.attempt(Y,$,N)(I)}function N(I){return P(v(I),"expected eol"),Z.enter(_.lineEnding),Z.consume(I),Z.exit(_.lineEnding),j}function j(I){return q>0&&r(I)?a(Z,R,_.linePrefix,q+1)(I):R(I)}function R(I){if(I===L.eof||v(I))return Z.check(q3,O,$)(I);return Z.enter(_.codeFlowValue),E(I)}function E(I){if(I===L.eof||v(I))return Z.exit(_.codeFlowValue),R(I);return Z.consume(I),E}function $(I){return Z.exit(_.codeFenced),Q(I)}function w(I,g,S){let u=0;return T;function T(o){return P(v(o),"expected eol"),I.enter(_.lineEnding),I.consume(o),I.exit(_.lineEnding),F0}function F0(o){return P(X.parser.constructs.disable.null,"expected `disable.null` to be populated"),I.enter(_.codeFencedFence),r(o)?a(I,e,_.linePrefix,X.parser.constructs.disable.null.includes("codeIndented")?void 0:k.tabSize)(o):e(o)}function e(o){if(o===U)return I.enter(_.codeFencedFenceSequence),m(o);return S(o)}function m(o){if(o===U)return u++,I.consume(o),m;if(u>=G)return I.exit(_.codeFencedFenceSequence),r(o)?a(I,c,_.whitespace)(o):c(o);return S(o)}function c(o){if(o===L.eof||v(o))return I.exit(_.codeFencedFence),g(o);return S(o)}}}function H_(Z,Q,J){let X=this;return Y;function Y(G){if(G===L.eof)return J(G);return P(v(G),"expected eol"),Z.enter(_.lineEnding),Z.consume(G),Z.exit(_.lineEnding),q}function q(G){return X.parser.lazy[X.now().line]?J(G):Q(G)}}var c2={name:"codeIndented",tokenize:z_},W_={partial:!0,tokenize:F_};function z_(Z,Q,J){let X=this;return Y;function Y(H){return P(r(H)),Z.enter(_.codeIndented),a(Z,q,_.linePrefix,k.tabSize+1)(H)}function q(H){let W=X.events[X.events.length-1];return W&&W[1].type===_.linePrefix&&W[2].sliceSerialize(W[1],!0).length>=k.tabSize?G(H):J(H)}function G(H){if(H===L.eof)return K(H);if(v(H))return Z.attempt(W_,G,K)(H);return Z.enter(_.codeFlowValue),U(H)}function U(H){if(H===L.eof||v(H))return Z.exit(_.codeFlowValue),G(H);return Z.consume(H),U}function K(H){return Z.exit(_.codeIndented),Q(H)}}function F_(Z,Q,J){let X=this;return Y;function Y(G){if(X.parser.lazy[X.now().line])return J(G);if(v(G))return Z.enter(_.lineEnding),Z.consume(G),Z.exit(_.lineEnding),Y;return a(Z,q,_.linePrefix,k.tabSize+1)(G)}function q(G){let U=X.events[X.events.length-1];return U&&U[1].type===_.linePrefix&&U[2].sliceSerialize(U[1],!0).length>=k.tabSize?Q(G):v(G)?Y(G):J(G)}}var tZ={name:"codeText",previous:G3,resolve:B_,tokenize:V_};function B_(Z){let Q=Z.length-4,J=3,X,Y;if((Z[J][1].type===_.lineEnding||Z[J][1].type==="space")&&(Z[Q][1].type===_.lineEnding||Z[Q][1].type==="space")){X=J;while(++X<Q)if(Z[X][1].type===_.codeTextData){Z[J][1].type=_.codeTextPadding,Z[Q][1].type=_.codeTextPadding,J+=2,Q-=2;break}}X=J-1,Q++;while(++X<=Q)if(Y===void 0){if(X!==Q&&Z[X][1].type!==_.lineEnding)Y=X}else if(X===Q||Z[X][1].type===_.lineEnding){if(Z[Y][1].type=_.codeTextData,X!==Y+2)Z[Y][1].end=Z[X-1][1].end,Z.splice(Y+2,X-Y-2),Q-=X-Y-2,X=Y+2;Y=void 0}return Z}function G3(Z){return Z!==L.graveAccent||this.events[this.events.length-1][1].type===_.characterEscape}function V_(Z,Q,J){let X=this,Y=0,q,G;return U;function U(F){return P(F===L.graveAccent,"expected `` ` ``"),P(G3.call(X,X.previous),"expected correct previous"),Z.enter(_.codeText),Z.enter(_.codeTextSequence),K(F)}function K(F){if(F===L.graveAccent)return Z.consume(F),Y++,K;return Z.exit(_.codeTextSequence),H(F)}function H(F){if(F===L.eof)return J(F);if(F===L.space)return Z.enter("space"),Z.consume(F),Z.exit("space"),H;if(F===L.graveAccent)return G=Z.enter(_.codeTextSequence),q=0,z(F);if(v(F))return Z.enter(_.lineEnding),Z.consume(F),Z.exit(_.lineEnding),H;return Z.enter(_.codeTextData),W(F)}function W(F){if(F===L.eof||F===L.space||F===L.graveAccent||v(F))return Z.exit(_.codeTextData),H(F);return Z.consume(F),W}function z(F){if(F===L.graveAccent)return Z.consume(F),q++,z;if(q===Y)return Z.exit(_.codeTextSequence),Z.exit(_.codeText),Q(F);return G.type=_.codeTextData,W(F)}}class eZ{constructor(Z){this.left=Z?[...Z]:[],this.right=[]}get(Z){if(Z<0||Z>=this.left.length+this.right.length)throw RangeError("Cannot access index `"+Z+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");if(Z<this.left.length)return this.left[Z];return this.right[this.right.length-Z+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(Z,Q){let J=Q===null||Q===void 0?Number.POSITIVE_INFINITY:Q;if(J<this.left.length)return this.left.slice(Z,J);if(Z>this.left.length)return this.right.slice(this.right.length-J+this.left.length,this.right.length-Z+this.left.length).reverse();return this.left.slice(Z).concat(this.right.slice(this.right.length-J+this.left.length).reverse())}splice(Z,Q,J){let X=Q||0;this.setCursor(Math.trunc(Z));let Y=this.right.splice(this.right.length-X,Number.POSITIVE_INFINITY);if(J)r2(this.left,J);return Y.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(Z){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(Z)}pushMany(Z){this.setCursor(Number.POSITIVE_INFINITY),r2(this.left,Z)}unshift(Z){this.setCursor(0),this.right.push(Z)}unshiftMany(Z){this.setCursor(0),r2(this.right,Z.reverse())}setCursor(Z){if(Z===this.left.length||Z>this.left.length&&this.right.length===0||Z<0&&this.left.length===0)return;if(Z<this.left.length){let Q=this.left.splice(Z,Number.POSITIVE_INFINITY);r2(this.right,Q.reverse())}else{let Q=this.right.splice(this.left.length+this.right.length-Z,Number.POSITIVE_INFINITY);r2(this.left,Q.reverse())}}}function r2(Z,Q){let J=0;if(Q.length<k.v8MaxSafeChunkSize)Z.push(...Q);else while(J<Q.length)Z.push(...Q.slice(J,J+k.v8MaxSafeChunkSize)),J+=k.v8MaxSafeChunkSize}function y7(Z){let Q={},J=-1,X,Y,q,G,U,K,H,W=new eZ(Z);while(++J<W.length){while(J in Q)J=Q[J];if(X=W.get(J),J&&X[1].type===_.chunkFlow&&W.get(J-1)[1].type===_.listItemPrefix){if(P(X[1]._tokenizer,"expected `_tokenizer` on subtokens"),K=X[1]._tokenizer.events,q=0,q<K.length&&K[q][1].type===_.lineEndingBlank)q+=2;if(q<K.length&&K[q][1].type===_.content)while(++q<K.length){if(K[q][1].type===_.content)break;if(K[q][1].type===_.chunkText)K[q][1]._isInFirstContentOfListItem=!0,q++}}if(X[0]==="enter"){if(X[1].contentType)Object.assign(Q,L_(W,J)),J=Q[J],H=!0}else if(X[1]._container){q=J,Y=void 0;while(q--)if(G=W.get(q),G[1].type===_.lineEnding||G[1].type===_.lineEndingBlank){if(G[0]==="enter"){if(Y)W.get(Y)[1].type=_.lineEndingBlank;G[1].type=_.lineEnding,Y=q}}else if(G[1].type===_.linePrefix||G[1].type===_.listItemIndent);else break;if(Y)X[1].end={...W.get(Y)[1].start},U=W.slice(Y,J),U.unshift(X),W.splice(Y,J-Y+1,U)}}return h0(Z,0,Number.POSITIVE_INFINITY,W.slice(0)),!H}function L_(Z,Q){let J=Z.get(Q)[1],X=Z.get(Q)[2],Y=Q-1,q=[];P(J.contentType,"expected `contentType` on subtokens");let G=J._tokenizer;if(!G){if(G=X.parser[J.contentType](J.start),J._contentTypeTextTrailing)G._contentTypeTextTrailing=!0}let U=G.events,K=[],H={},W,z,F=-1,B=J,V=0,O=0,N=[O];while(B){while(Z.get(++Y)[1]!==B);if(P(!z||B.previous===z,"expected previous to match"),P(!z||z.next===B,"expected next to match"),q.push(Y),!B._tokenizer){if(W=X.sliceStream(B),!B.next)W.push(L.eof);if(z)G.defineSkip(B.start);if(B._isInFirstContentOfListItem)G._gfmTasklistFirstContentOfListItem=!0;if(G.write(W),B._isInFirstContentOfListItem)G._gfmTasklistFirstContentOfListItem=void 0}z=B,B=B.next}B=J;while(++F<U.length)if(U[F][0]==="exit"&&U[F-1][0]==="enter"&&U[F][1].type===U[F-1][1].type&&U[F][1].start.line!==U[F][1].end.line)P(B,"expected a current token"),O=F+1,N.push(O),B._tokenizer=void 0,B.previous=void 0,B=B.next;if(G.events=[],B)B._tokenizer=void 0,B.previous=void 0,P(!B.next,"expected no next token");else N.pop();F=N.length;while(F--){let j=U.slice(N[F],N[F+1]),R=q.pop();P(R!==void 0,"expected a start position when splicing"),K.push([R,R+j.length-1]),Z.splice(R,2,j)}K.reverse(),F=-1;while(++F<K.length)H[V+K[F][0]]=V+K[F][1],V+=K[F][1]-K[F][0]-1;return H}var ZQ={resolve:O_,tokenize:N_},__={partial:!0,tokenize:j_};function O_(Z){return y7(Z),Z}function N_(Z,Q){let J;return X;function X(U){return P(U!==L.eof&&!v(U),"expected no eof or eol"),Z.enter(_.content),J=Z.enter(_.chunkContent,{contentType:k.contentTypeContent}),Y(U)}function Y(U){if(U===L.eof)return q(U);if(v(U))return Z.check(__,G,q)(U);return Z.consume(U),Y}function q(U){return Z.exit(_.chunkContent),Z.exit(_.content),Q(U)}function G(U){return P(v(U),"expected eol"),Z.consume(U),Z.exit(_.chunkContent),P(J,"expected previous token"),J.next=Z.enter(_.chunkContent,{contentType:k.contentTypeContent,previous:J}),J=J.next,Y}}function j_(Z,Q,J){let X=this;return Y;function Y(G){return P(v(G),"expected a line ending"),Z.exit(_.chunkContent),Z.enter(_.lineEnding),Z.consume(G),Z.exit(_.lineEnding),a(Z,q,_.linePrefix)}function q(G){if(G===L.eof||v(G))return J(G);P(X.parser.constructs.disable.null,"expected `disable.null` to be populated");let U=X.events[X.events.length-1];if(!X.parser.constructs.disable.null.includes("codeIndented")&&U&&U[1].type===_.linePrefix&&U[2].sliceSerialize(U[1],!0).length>=k.tabSize)return Q(G);return Z.interrupt(X.parser.constructs.flow,J,Q)(G)}}function S7(Z,Q,J,X,Y,q,G,U,K){let H=K||Number.POSITIVE_INFINITY,W=0;return z;function z(j){if(j===L.lessThan)return Z.enter(X),Z.enter(Y),Z.enter(q),Z.consume(j),Z.exit(q),F;if(j===L.eof||j===L.space||j===L.rightParenthesis||T4(j))return J(j);return Z.enter(X),Z.enter(G),Z.enter(U),Z.enter(_.chunkString,{contentType:k.contentTypeString}),O(j)}function F(j){if(j===L.greaterThan)return Z.enter(q),Z.consume(j),Z.exit(q),Z.exit(Y),Z.exit(X),Q;return Z.enter(U),Z.enter(_.chunkString,{contentType:k.contentTypeString}),B(j)}function B(j){if(j===L.greaterThan)return Z.exit(_.chunkString),Z.exit(U),F(j);if(j===L.eof||j===L.lessThan||v(j))return J(j);return Z.consume(j),j===L.backslash?V:B}function V(j){if(j===L.lessThan||j===L.greaterThan||j===L.backslash)return Z.consume(j),B;return B(j)}function O(j){if(!W&&(j===L.eof||j===L.rightParenthesis||H0(j)))return Z.exit(_.chunkString),Z.exit(U),Z.exit(G),Z.exit(X),Q(j);if(W<H&&j===L.leftParenthesis)return Z.consume(j),W++,O;if(j===L.rightParenthesis)return Z.consume(j),W--,O;if(j===L.eof||j===L.space||j===L.leftParenthesis||T4(j))return J(j);return Z.consume(j),j===L.backslash?N:O}function N(j){if(j===L.leftParenthesis||j===L.rightParenthesis||j===L.backslash)return Z.consume(j),O;return O(j)}}function w7(Z,Q,J,X,Y,q){let G=this,U=0,K;return H;function H(B){return P(B===L.leftSquareBracket,"expected `[`"),Z.enter(X),Z.enter(Y),Z.consume(B),Z.exit(Y),Z.enter(q),W}function W(B){if(U>k.linkReferenceSizeMax||B===L.eof||B===L.leftSquareBracket||B===L.rightSquareBracket&&!K||B===L.caret&&!U&&"_hiddenFootnoteSupport"in G.parser.constructs)return J(B);if(B===L.rightSquareBracket)return Z.exit(q),Z.enter(Y),Z.consume(B),Z.exit(Y),Z.exit(X),Q;if(v(B))return Z.enter(_.lineEnding),Z.consume(B),Z.exit(_.lineEnding),W;return Z.enter(_.chunkString,{contentType:k.contentTypeString}),z(B)}function z(B){if(B===L.eof||B===L.leftSquareBracket||B===L.rightSquareBracket||v(B)||U++>k.linkReferenceSizeMax)return Z.exit(_.chunkString),W(B);if(Z.consume(B),!K)K=!r(B);return B===L.backslash?F:z}function F(B){if(B===L.leftSquareBracket||B===L.backslash||B===L.rightSquareBracket)return Z.consume(B),U++,z;return z(B)}}function x7(Z,Q,J,X,Y,q){let G;return U;function U(F){if(F===L.quotationMark||F===L.apostrophe||F===L.leftParenthesis)return Z.enter(X),Z.enter(Y),Z.consume(F),Z.exit(Y),G=F===L.leftParenthesis?L.rightParenthesis:F,K;return J(F)}function K(F){if(F===G)return Z.enter(Y),Z.consume(F),Z.exit(Y),Z.exit(X),Q;return Z.enter(q),H(F)}function H(F){if(F===G)return Z.exit(q),K(G);if(F===L.eof)return J(F);if(v(F))return Z.enter(_.lineEnding),Z.consume(F),Z.exit(_.lineEnding),a(Z,H,_.linePrefix);return Z.enter(_.chunkString,{contentType:k.contentTypeString}),W(F)}function W(F){if(F===G||F===L.eof||v(F))return Z.exit(_.chunkString),H(F);return Z.consume(F),F===L.backslash?z:W}function z(F){if(F===G||F===L.backslash)return Z.consume(F),W;return W(F)}}function b4(Z,Q){let J;return X;function X(Y){if(v(Y))return Z.enter(_.lineEnding),Z.consume(Y),Z.exit(_.lineEnding),J=!0,X;if(r(Y))return a(Z,X,J?_.linePrefix:_.lineSuffix)(Y);return Q(Y)}}var QQ={name:"definition",tokenize:P_},A_={partial:!0,tokenize:R_};function P_(Z,Q,J){let X=this,Y;return q;function q(B){return Z.enter(_.definition),G(B)}function G(B){return P(B===L.leftSquareBracket,"expected `[`"),w7.call(X,Z,U,J,_.definitionLabel,_.definitionLabelMarker,_.definitionLabelString)(B)}function U(B){if(Y=G1(X.sliceSerialize(X.events[X.events.length-1][1]).slice(1,-1)),B===L.colon)return Z.enter(_.definitionMarker),Z.consume(B),Z.exit(_.definitionMarker),K;return J(B)}function K(B){return H0(B)?b4(Z,H)(B):H(B)}function H(B){return S7(Z,W,J,_.definitionDestination,_.definitionDestinationLiteral,_.definitionDestinationLiteralMarker,_.definitionDestinationRaw,_.definitionDestinationString)(B)}function W(B){return Z.attempt(A_,z,z)(B)}function z(B){return r(B)?a(Z,F,_.whitespace)(B):F(B)}function F(B){if(B===L.eof||v(B))return Z.exit(_.definition),X.parser.defined.push(Y),Q(B);return J(B)}}function R_(Z,Q,J){return X;function X(U){return H0(U)?b4(Z,Y)(U):J(U)}function Y(U){return x7(Z,q,J,_.definitionTitle,_.definitionTitleMarker,_.definitionTitleString)(U)}function q(U){return r(U)?a(Z,G,_.whitespace)(U):G(U)}function G(U){return U===L.eof||v(U)?Q(U):J(U)}}var JQ={name:"hardBreakEscape",tokenize:M_};function M_(Z,Q,J){return X;function X(q){return P(q===L.backslash,"expected `\\`"),Z.enter(_.hardBreakEscape),Z.consume(q),Y}function Y(q){if(v(q))return Z.exit(_.hardBreakEscape),Q(q);return J(q)}}var XQ={name:"headingAtx",resolve:D_,tokenize:I_};function D_(Z,Q){let J=Z.length-2,X=3,Y,q;if(Z[X][1].type===_.whitespace)X+=2;if(J-2>X&&Z[J][1].type===_.whitespace)J-=2;if(Z[J][1].type===_.atxHeadingSequence&&(X===J-1||J-4>X&&Z[J-2][1].type===_.whitespace))J-=X+1===J?2:4;if(J>X)Y={type:_.atxHeadingText,start:Z[X][1].start,end:Z[J][1].end},q={type:_.chunkText,start:Z[X][1].start,end:Z[J][1].end,contentType:k.contentTypeText},h0(Z,X,J-X+1,[["enter",Y,Q],["enter",q,Q],["exit",q,Q],["exit",Y,Q]]);return Z}function I_(Z,Q,J){let X=0;return Y;function Y(W){return Z.enter(_.atxHeading),q(W)}function q(W){return P(W===L.numberSign,"expected `#`"),Z.enter(_.atxHeadingSequence),G(W)}function G(W){if(W===L.numberSign&&X++<k.atxHeadingOpeningFenceSizeMax)return Z.consume(W),G;if(W===L.eof||H0(W))return Z.exit(_.atxHeadingSequence),U(W);return J(W)}function U(W){if(W===L.numberSign)return Z.enter(_.atxHeadingSequence),K(W);if(W===L.eof||v(W))return Z.exit(_.atxHeading),Q(W);if(r(W))return a(Z,U,_.whitespace)(W);return Z.enter(_.atxHeadingText),H(W)}function K(W){if(W===L.numberSign)return Z.consume(W),K;return Z.exit(_.atxHeadingSequence),U(W)}function H(W){if(W===L.eof||W===L.numberSign||H0(W))return Z.exit(_.atxHeadingText),U(W);return Z.consume(W),H}}var U3=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],YQ=["pre","script","style","textarea"];var qQ={concrete:!0,name:"htmlFlow",resolveTo:$_,tokenize:b_},E_={partial:!0,tokenize:y_},T_={partial:!0,tokenize:C_};function $_(Z){let Q=Z.length;while(Q--)if(Z[Q][0]==="enter"&&Z[Q][1].type===_.htmlFlow)break;if(Q>1&&Z[Q-2][1].type===_.linePrefix)Z[Q][1].start=Z[Q-2][1].start,Z[Q+1][1].start=Z[Q-2][1].start,Z.splice(Q-2,2);return Z}function b_(Z,Q,J){let X=this,Y,q,G,U,K;return H;function H(M){return W(M)}function W(M){return P(M===L.lessThan,"expected `<`"),Z.enter(_.htmlFlow),Z.enter(_.htmlFlowData),Z.consume(M),z}function z(M){if(M===L.exclamationMark)return Z.consume(M),F;if(M===L.slash)return Z.consume(M),q=!0,O;if(M===L.questionMark)return Z.consume(M),Y=k.htmlInstruction,X.interrupt?Q:D;if(r0(M))return P(M!==null),Z.consume(M),G=String.fromCharCode(M),N;return J(M)}function F(M){if(M===L.dash)return Z.consume(M),Y=k.htmlComment,B;if(M===L.leftSquareBracket)return Z.consume(M),Y=k.htmlCdata,U=0,V;if(r0(M))return Z.consume(M),Y=k.htmlDeclaration,X.interrupt?Q:D;return J(M)}function B(M){if(M===L.dash)return Z.consume(M),X.interrupt?Q:D;return J(M)}function V(M){let B0=k.cdataOpeningString;if(M===B0.charCodeAt(U++)){if(Z.consume(M),U===B0.length)return X.interrupt?Q:e;return V}return J(M)}function O(M){if(r0(M))return P(M!==null),Z.consume(M),G=String.fromCharCode(M),N;return J(M)}function N(M){if(M===L.eof||M===L.slash||M===L.greaterThan||H0(M)){let B0=M===L.slash,x1=G.toLowerCase();if(!B0&&!q&&YQ.includes(x1))return Y=k.htmlRaw,X.interrupt?Q(M):e(M);if(U3.includes(G.toLowerCase())){if(Y=k.htmlBasic,B0)return Z.consume(M),j;return X.interrupt?Q(M):e(M)}return Y=k.htmlComplete,X.interrupt&&!X.parser.lazy[X.now().line]?J(M):q?R(M):E(M)}if(M===L.dash||a0(M))return Z.consume(M),G+=String.fromCharCode(M),N;return J(M)}function j(M){if(M===L.greaterThan)return Z.consume(M),X.interrupt?Q:e;return J(M)}function R(M){if(r(M))return Z.consume(M),R;return T(M)}function E(M){if(M===L.slash)return Z.consume(M),T;if(M===L.colon||M===L.underscore||r0(M))return Z.consume(M),$;if(r(M))return Z.consume(M),E;return T(M)}function $(M){if(M===L.dash||M===L.dot||M===L.colon||M===L.underscore||a0(M))return Z.consume(M),$;return w(M)}function w(M){if(M===L.equalsTo)return Z.consume(M),I;if(r(M))return Z.consume(M),w;return E(M)}function I(M){if(M===L.eof||M===L.lessThan||M===L.equalsTo||M===L.greaterThan||M===L.graveAccent)return J(M);if(M===L.quotationMark||M===L.apostrophe)return Z.consume(M),K=M,g;if(r(M))return Z.consume(M),I;return S(M)}function g(M){if(M===K)return Z.consume(M),K=null,u;if(M===L.eof||v(M))return J(M);return Z.consume(M),g}function S(M){if(M===L.eof||M===L.quotationMark||M===L.apostrophe||M===L.slash||M===L.lessThan||M===L.equalsTo||M===L.greaterThan||M===L.graveAccent||H0(M))return w(M);return Z.consume(M),S}function u(M){if(M===L.slash||M===L.greaterThan||r(M))return E(M);return J(M)}function T(M){if(M===L.greaterThan)return Z.consume(M),F0;return J(M)}function F0(M){if(M===L.eof||v(M))return e(M);if(r(M))return Z.consume(M),F0;return J(M)}function e(M){if(M===L.dash&&Y===k.htmlComment)return Z.consume(M),V0;if(M===L.lessThan&&Y===k.htmlRaw)return Z.consume(M),p;if(M===L.greaterThan&&Y===k.htmlDeclaration)return Z.consume(M),d0;if(M===L.questionMark&&Y===k.htmlInstruction)return Z.consume(M),D;if(M===L.rightSquareBracket&&Y===k.htmlCdata)return Z.consume(M),T0;if(v(M)&&(Y===k.htmlBasic||Y===k.htmlComplete))return Z.exit(_.htmlFlowData),Z.check(E_,t0,m)(M);if(M===L.eof||v(M))return Z.exit(_.htmlFlowData),m(M);return Z.consume(M),e}function m(M){return Z.check(T_,c,t0)(M)}function c(M){return P(v(M)),Z.enter(_.lineEnding),Z.consume(M),Z.exit(_.lineEnding),o}function o(M){if(M===L.eof||v(M))return m(M);return Z.enter(_.htmlFlowData),e(M)}function V0(M){if(M===L.dash)return Z.consume(M),D;return e(M)}function p(M){if(M===L.slash)return Z.consume(M),G="",f;return e(M)}function f(M){if(M===L.greaterThan){let B0=G.toLowerCase();if(YQ.includes(B0))return Z.consume(M),d0;return e(M)}if(r0(M)&&G.length<k.htmlRawSizeMax)return P(M!==null),Z.consume(M),G+=String.fromCharCode(M),f;return e(M)}function T0(M){if(M===L.rightSquareBracket)return Z.consume(M),D;return e(M)}function D(M){if(M===L.greaterThan)return Z.consume(M),d0;if(M===L.dash&&Y===k.htmlComment)return Z.consume(M),D;return e(M)}function d0(M){if(M===L.eof||v(M))return Z.exit(_.htmlFlowData),t0(M);return Z.consume(M),d0}function t0(M){return Z.exit(_.htmlFlow),Q(M)}}function C_(Z,Q,J){let X=this;return Y;function Y(G){if(v(G))return Z.enter(_.lineEnding),Z.consume(G),Z.exit(_.lineEnding),q;return J(G)}function q(G){return X.parser.lazy[X.now().line]?J(G):Q(G)}}function y_(Z,Q,J){return X;function X(Y){return P(v(Y),"expected a line ending"),Z.enter(_.lineEnding),Z.consume(Y),Z.exit(_.lineEnding),Z.attempt(q5,Q,J)}}var GQ={name:"htmlText",tokenize:S_};function S_(Z,Q,J){let X=this,Y,q,G;return U;function U(D){return P(D===L.lessThan,"expected `<`"),Z.enter(_.htmlText),Z.enter(_.htmlTextData),Z.consume(D),K}function K(D){if(D===L.exclamationMark)return Z.consume(D),H;if(D===L.slash)return Z.consume(D),w;if(D===L.questionMark)return Z.consume(D),E;if(r0(D))return Z.consume(D),S;return J(D)}function H(D){if(D===L.dash)return Z.consume(D),W;if(D===L.leftSquareBracket)return Z.consume(D),q=0,V;if(r0(D))return Z.consume(D),R;return J(D)}function W(D){if(D===L.dash)return Z.consume(D),B;return J(D)}function z(D){if(D===L.eof)return J(D);if(D===L.dash)return Z.consume(D),F;if(v(D))return G=z,p(D);return Z.consume(D),z}function F(D){if(D===L.dash)return Z.consume(D),B;return z(D)}function B(D){return D===L.greaterThan?V0(D):D===L.dash?F(D):z(D)}function V(D){let d0=k.cdataOpeningString;if(D===d0.charCodeAt(q++))return Z.consume(D),q===d0.length?O:V;return J(D)}function O(D){if(D===L.eof)return J(D);if(D===L.rightSquareBracket)return Z.consume(D),N;if(v(D))return G=O,p(D);return Z.consume(D),O}function N(D){if(D===L.rightSquareBracket)return Z.consume(D),j;return O(D)}function j(D){if(D===L.greaterThan)return V0(D);if(D===L.rightSquareBracket)return Z.consume(D),j;return O(D)}function R(D){if(D===L.eof||D===L.greaterThan)return V0(D);if(v(D))return G=R,p(D);return Z.consume(D),R}function E(D){if(D===L.eof)return J(D);if(D===L.questionMark)return Z.consume(D),$;if(v(D))return G=E,p(D);return Z.consume(D),E}function $(D){return D===L.greaterThan?V0(D):E(D)}function w(D){if(r0(D))return Z.consume(D),I;return J(D)}function I(D){if(D===L.dash||a0(D))return Z.consume(D),I;return g(D)}function g(D){if(v(D))return G=g,p(D);if(r(D))return Z.consume(D),g;return V0(D)}function S(D){if(D===L.dash||a0(D))return Z.consume(D),S;if(D===L.slash||D===L.greaterThan||H0(D))return u(D);return J(D)}function u(D){if(D===L.slash)return Z.consume(D),V0;if(D===L.colon||D===L.underscore||r0(D))return Z.consume(D),T;if(v(D))return G=u,p(D);if(r(D))return Z.consume(D),u;return V0(D)}function T(D){if(D===L.dash||D===L.dot||D===L.colon||D===L.underscore||a0(D))return Z.consume(D),T;return F0(D)}function F0(D){if(D===L.equalsTo)return Z.consume(D),e;if(v(D))return G=F0,p(D);if(r(D))return Z.consume(D),F0;return u(D)}function e(D){if(D===L.eof||D===L.lessThan||D===L.equalsTo||D===L.greaterThan||D===L.graveAccent)return J(D);if(D===L.quotationMark||D===L.apostrophe)return Z.consume(D),Y=D,m;if(v(D))return G=e,p(D);if(r(D))return Z.consume(D),e;return Z.consume(D),c}function m(D){if(D===Y)return Z.consume(D),Y=void 0,o;if(D===L.eof)return J(D);if(v(D))return G=m,p(D);return Z.consume(D),m}function c(D){if(D===L.eof||D===L.quotationMark||D===L.apostrophe||D===L.lessThan||D===L.equalsTo||D===L.graveAccent)return J(D);if(D===L.slash||D===L.greaterThan||H0(D))return u(D);return Z.consume(D),c}function o(D){if(D===L.slash||D===L.greaterThan||H0(D))return u(D);return J(D)}function V0(D){if(D===L.greaterThan)return Z.consume(D),Z.exit(_.htmlTextData),Z.exit(_.htmlText),Q;return J(D)}function p(D){return P(G,"expected return state"),P(v(D),"expected eol"),Z.exit(_.htmlTextData),Z.enter(_.lineEnding),Z.consume(D),Z.exit(_.lineEnding),f}function f(D){return P(X.parser.constructs.disable.null,"expected `disable.null` to be populated"),r(D)?a(Z,T0,_.linePrefix,X.parser.constructs.disable.null.includes("codeIndented")?void 0:k.tabSize)(D):T0(D)}function T0(D){return Z.enter(_.htmlTextData),G(D)}}var C4={name:"labelEnd",resolveAll:g_,resolveTo:v_,tokenize:h_},w_={tokenize:u_},x_={tokenize:f_},k_={tokenize:m_};function g_(Z){let Q=-1,J=[];while(++Q<Z.length){let X=Z[Q][1];if(J.push(Z[Q]),X.type===_.labelImage||X.type===_.labelLink||X.type===_.labelEnd){let Y=X.type===_.labelImage?4:2;X.type=_.data,Q+=Y}}if(Z.length!==J.length)h0(Z,0,Z.length,J);return Z}function v_(Z,Q){let J=Z.length,X=0,Y,q,G,U;while(J--)if(Y=Z[J][1],q){if(Y.type===_.link||Y.type===_.labelLink&&Y._inactive)break;if(Z[J][0]==="enter"&&Y.type===_.labelLink)Y._inactive=!0}else if(G){if(Z[J][0]==="enter"&&(Y.type===_.labelImage||Y.type===_.labelLink)&&!Y._balanced){if(q=J,Y.type!==_.labelLink){X=2;break}}}else if(Y.type===_.labelEnd)G=J;P(q!==void 0,"`open` is supposed to be found"),P(G!==void 0,"`close` is supposed to be found");let K={type:Z[q][1].type===_.labelLink?_.link:_.image,start:{...Z[q][1].start},end:{...Z[Z.length-1][1].end}},H={type:_.label,start:{...Z[q][1].start},end:{...Z[G][1].end}},W={type:_.labelText,start:{...Z[q+X+2][1].end},end:{...Z[G-2][1].start}};return U=[["enter",K,Q],["enter",H,Q]],U=V1(U,Z.slice(q+1,q+X+3)),U=V1(U,[["enter",W,Q]]),P(Q.parser.constructs.insideSpan.null,"expected `insideSpan.null` to be populated"),U=V1(U,r5(Q.parser.constructs.insideSpan.null,Z.slice(q+X+4,G-3),Q)),U=V1(U,[["exit",W,Q],Z[G-2],Z[G-1],["exit",H,Q]]),U=V1(U,Z.slice(G+1)),U=V1(U,[["exit",K,Q]]),h0(Z,q,Z.length,U),Z}function h_(Z,Q,J){let X=this,Y=X.events.length,q,G;while(Y--)if((X.events[Y][1].type===_.labelImage||X.events[Y][1].type===_.labelLink)&&!X.events[Y][1]._balanced){q=X.events[Y][1];break}return U;function U(F){if(P(F===L.rightSquareBracket,"expected `]`"),!q)return J(F);if(q._inactive)return z(F);return G=X.parser.defined.includes(G1(X.sliceSerialize({start:q.end,end:X.now()}))),Z.enter(_.labelEnd),Z.enter(_.labelMarker),Z.consume(F),Z.exit(_.labelMarker),Z.exit(_.labelEnd),K}function K(F){if(F===L.leftParenthesis)return Z.attempt(w_,W,G?W:z)(F);if(F===L.leftSquareBracket)return Z.attempt(x_,W,G?H:z)(F);return G?W(F):z(F)}function H(F){return Z.attempt(k_,W,z)(F)}function W(F){return Q(F)}function z(F){return q._balanced=!0,J(F)}}function u_(Z,Q,J){return X;function X(z){return P(z===L.leftParenthesis,"expected left paren"),Z.enter(_.resource),Z.enter(_.resourceMarker),Z.consume(z),Z.exit(_.resourceMarker),Y}function Y(z){return H0(z)?b4(Z,q)(z):q(z)}function q(z){if(z===L.rightParenthesis)return W(z);return S7(Z,G,U,_.resourceDestination,_.resourceDestinationLiteral,_.resourceDestinationLiteralMarker,_.resourceDestinationRaw,_.resourceDestinationString,k.linkResourceDestinationBalanceMax)(z)}function G(z){return H0(z)?b4(Z,K)(z):W(z)}function U(z){return J(z)}function K(z){if(z===L.quotationMark||z===L.apostrophe||z===L.leftParenthesis)return x7(Z,H,J,_.resourceTitle,_.resourceTitleMarker,_.resourceTitleString)(z);return W(z)}function H(z){return H0(z)?b4(Z,W)(z):W(z)}function W(z){if(z===L.rightParenthesis)return Z.enter(_.resourceMarker),Z.consume(z),Z.exit(_.resourceMarker),Z.exit(_.resource),Q;return J(z)}}function f_(Z,Q,J){let X=this;return Y;function Y(U){return P(U===L.leftSquareBracket,"expected left bracket"),w7.call(X,Z,q,G,_.reference,_.referenceMarker,_.referenceString)(U)}function q(U){return X.parser.defined.includes(G1(X.sliceSerialize(X.events[X.events.length-1][1]).slice(1,-1)))?Q(U):J(U)}function G(U){return J(U)}}function m_(Z,Q,J){return X;function X(q){return P(q===L.leftSquareBracket,"expected left bracket"),Z.enter(_.reference),Z.enter(_.referenceMarker),Z.consume(q),Z.exit(_.referenceMarker),Y}function Y(q){if(q===L.rightSquareBracket)return Z.enter(_.referenceMarker),Z.consume(q),Z.exit(_.referenceMarker),Z.exit(_.reference),Q;return J(q)}}var UQ={name:"labelStartImage",resolveAll:C4.resolveAll,tokenize:p_};function p_(Z,Q,J){let X=this;return Y;function Y(U){return P(U===L.exclamationMark,"expected `!`"),Z.enter(_.labelImage),Z.enter(_.labelImageMarker),Z.consume(U),Z.exit(_.labelImageMarker),q}function q(U){if(U===L.leftSquareBracket)return Z.enter(_.labelMarker),Z.consume(U),Z.exit(_.labelMarker),Z.exit(_.labelImage),G;return J(U)}function G(U){return U===L.caret&&"_hiddenFootnoteSupport"in X.parser.constructs?J(U):Q(U)}}var KQ={name:"labelStartLink",resolveAll:C4.resolveAll,tokenize:l_};function l_(Z,Q,J){let X=this;return Y;function Y(G){return P(G===L.leftSquareBracket,"expected `[`"),Z.enter(_.labelLink),Z.enter(_.labelMarker),Z.consume(G),Z.exit(_.labelMarker),Z.exit(_.labelLink),q}function q(G){return G===L.caret&&"_hiddenFootnoteSupport"in X.parser.constructs?J(G):Q(G)}}var a2={name:"lineEnding",tokenize:i_};function i_(Z,Q){return J;function J(X){return P(v(X),"expected eol"),Z.enter(_.lineEnding),Z.consume(X),Z.exit(_.lineEnding),a(Z,Q,_.linePrefix)}}var y4={name:"thematicBreak",tokenize:d_};function d_(Z,Q,J){let X=0,Y;return q;function q(H){return Z.enter(_.thematicBreak),G(H)}function G(H){return P(H===L.asterisk||H===L.dash||H===L.underscore,"expected `*`, `-`, or `_`"),Y=H,U(H)}function U(H){if(H===Y)return Z.enter(_.thematicBreakSequence),K(H);if(X>=k.thematicBreakMarkerCountMin&&(H===L.eof||v(H)))return Z.exit(_.thematicBreak),Q(H);return J(H)}function K(H){if(H===Y)return Z.consume(H),X++,K;return Z.exit(_.thematicBreakSequence),r(H)?a(Z,U,_.whitespace)(H):U(H)}}var U1={continuation:{tokenize:n_},exit:o_,name:"list",tokenize:a_},c_={partial:!0,tokenize:t_},r_={partial:!0,tokenize:s_};function a_(Z,Q,J){let X=this,Y=X.events[X.events.length-1],q=Y&&Y[1].type===_.linePrefix?Y[2].sliceSerialize(Y[1],!0).length:0,G=0;return U;function U(B){P(X.containerState,"expected state");let V=X.containerState.type||(B===L.asterisk||B===L.plusSign||B===L.dash?_.listUnordered:_.listOrdered);if(V===_.listUnordered?!X.containerState.marker||B===X.containerState.marker:i2(B)){if(!X.containerState.type)X.containerState.type=V,Z.enter(V,{_container:!0});if(V===_.listUnordered)return Z.enter(_.listItemPrefix),B===L.asterisk||B===L.dash?Z.check(y4,J,H)(B):H(B);if(!X.interrupt||B===L.digit1)return Z.enter(_.listItemPrefix),Z.enter(_.listItemValue),K(B)}return J(B)}function K(B){if(P(X.containerState,"expected state"),i2(B)&&++G<k.listItemValueSizeMax)return Z.consume(B),K;if((!X.interrupt||G<2)&&(X.containerState.marker?B===X.containerState.marker:B===L.rightParenthesis||B===L.dot))return Z.exit(_.listItemValue),H(B);return J(B)}function H(B){return P(X.containerState,"expected state"),P(B!==L.eof,"eof (`null`) is not a marker"),Z.enter(_.listItemMarker),Z.consume(B),Z.exit(_.listItemMarker),X.containerState.marker=X.containerState.marker||B,Z.check(q5,X.interrupt?J:W,Z.attempt(c_,F,z))}function W(B){return P(X.containerState,"expected state"),X.containerState.initialBlankLine=!0,q++,F(B)}function z(B){if(r(B))return Z.enter(_.listItemPrefixWhitespace),Z.consume(B),Z.exit(_.listItemPrefixWhitespace),F;return J(B)}function F(B){return P(X.containerState,"expected state"),X.containerState.size=q+X.sliceSerialize(Z.exit(_.listItemPrefix),!0).length,Q(B)}}function n_(Z,Q,J){let X=this;return P(X.containerState,"expected state"),X.containerState._closeFlow=void 0,Z.check(q5,Y,q);function Y(U){return P(X.containerState,"expected state"),P(typeof X.containerState.size==="number","expected size"),X.containerState.furtherBlankLines=X.containerState.furtherBlankLines||X.containerState.initialBlankLine,a(Z,Q,_.listItemIndent,X.containerState.size+1)(U)}function q(U){if(P(X.containerState,"expected state"),X.containerState.furtherBlankLines||!r(U))return X.containerState.furtherBlankLines=void 0,X.containerState.initialBlankLine=void 0,G(U);return X.containerState.furtherBlankLines=void 0,X.containerState.initialBlankLine=void 0,Z.attempt(r_,Q,G)(U)}function G(U){return P(X.containerState,"expected state"),X.containerState._closeFlow=!0,X.interrupt=void 0,P(X.parser.constructs.disable.null,"expected `disable.null` to be populated"),a(Z,Z.attempt(U1,Q,J),_.linePrefix,X.parser.constructs.disable.null.includes("codeIndented")?void 0:k.tabSize)(U)}}function s_(Z,Q,J){let X=this;return P(X.containerState,"expected state"),P(typeof X.containerState.size==="number","expected size"),a(Z,Y,_.listItemIndent,X.containerState.size+1);function Y(q){P(X.containerState,"expected state");let G=X.events[X.events.length-1];return G&&G[1].type===_.listItemIndent&&G[2].sliceSerialize(G[1],!0).length===X.containerState.size?Q(q):J(q)}}function o_(Z){P(this.containerState,"expected state"),P(typeof this.containerState.type==="string","expected type"),Z.exit(this.containerState.type)}function t_(Z,Q,J){let X=this;return P(X.parser.constructs.disable.null,"expected `disable.null` to be populated"),a(Z,Y,_.listItemPrefixWhitespace,X.parser.constructs.disable.null.includes("codeIndented")?void 0:k.tabSize+1);function Y(q){let G=X.events[X.events.length-1];return!r(q)&&G&&G[1].type===_.listItemPrefixWhitespace?Q(q):J(q)}}var k7={name:"setextUnderline",resolveTo:e_,tokenize:ZO};function e_(Z,Q){let J=Z.length,X,Y,q;while(J--)if(Z[J][0]==="enter"){if(Z[J][1].type===_.content){X=J;break}if(Z[J][1].type===_.paragraph)Y=J}else{if(Z[J][1].type===_.content)Z.splice(J,1);if(!q&&Z[J][1].type===_.definition)q=J}P(Y!==void 0,"expected a `text` index to be found"),P(X!==void 0,"expected a `text` index to be found"),P(Z[X][2]===Q,"enter context should be same"),P(Z[Z.length-1][2]===Q,"enter context should be same");let G={type:_.setextHeading,start:{...Z[X][1].start},end:{...Z[Z.length-1][1].end}};if(Z[Y][1].type=_.setextHeadingText,q)Z.splice(Y,0,["enter",G,Q]),Z.splice(q+1,0,["exit",Z[X][1],Q]),Z[X][1].end={...Z[q][1].end};else Z[X][1]=G;return Z.push(["exit",G,Q]),Z}function ZO(Z,Q,J){let X=this,Y;return q;function q(H){let W=X.events.length,z;P(H===L.dash||H===L.equalsTo,"expected `=` or `-`");while(W--)if(X.events[W][1].type!==_.lineEnding&&X.events[W][1].type!==_.linePrefix&&X.events[W][1].type!==_.content){z=X.events[W][1].type===_.paragraph;break}if(!X.parser.lazy[X.now().line]&&(X.interrupt||z))return Z.enter(_.setextHeadingLine),Y=H,G(H);return J(H)}function G(H){return Z.enter(_.setextHeadingLineSequence),U(H)}function U(H){if(H===Y)return Z.consume(H),U;return Z.exit(_.setextHeadingLineSequence),r(H)?a(Z,K,_.lineSuffix)(H):K(H)}function K(H){if(H===L.eof||v(H))return Z.exit(_.setextHeadingLine),Q(H);return J(H)}}var K3={tokenize:QO};function QO(Z){let Q=this,J=Z.attempt(q5,X,Z.attempt(this.parser.constructs.flowInitial,Y,a(Z,Z.attempt(this.parser.constructs.flow,Y,Z.attempt(ZQ,Y)),_.linePrefix)));return J;function X(q){if(P(q===L.eof||v(q),"expected eol or eof"),q===L.eof){Z.consume(q);return}return Z.enter(_.lineEndingBlank),Z.consume(q),Z.exit(_.lineEndingBlank),Q.currentConstruct=void 0,J}function Y(q){if(P(q===L.eof||v(q),"expected eol or eof"),q===L.eof){Z.consume(q);return}return Z.enter(_.lineEnding),Z.consume(q),Z.exit(_.lineEnding),Q.currentConstruct=void 0,J}}var H3={resolveAll:B3()},W3=F3("string"),z3=F3("text");function F3(Z){return{resolveAll:B3(Z==="text"?JO:void 0),tokenize:Q};function Q(J){let X=this,Y=this.parser.constructs[Z],q=J.attempt(Y,G,U);return G;function G(W){return H(W)?q(W):U(W)}function U(W){if(W===L.eof){J.consume(W);return}return J.enter(_.data),J.consume(W),K}function K(W){if(H(W))return J.exit(_.data),q(W);return J.consume(W),K}function H(W){if(W===L.eof)return!0;let z=Y[W],F=-1;if(z){P(Array.isArray(z),"expected `disable.null` to be populated");while(++F<z.length){let B=z[F];if(!B.previous||B.previous.call(X,X.previous))return!0}}return!1}}}function B3(Z){return Q;function Q(J,X){let Y=-1,q;while(++Y<=J.length)if(q===void 0){if(J[Y]&&J[Y][1].type===_.data)q=Y,Y++}else if(!J[Y]||J[Y][1].type!==_.data){if(Y!==q+2)J[q][1].end=J[Y-1][1].end,J.splice(q+2,Y-q-2),Y=q+2;q=void 0}return Z?Z(J,X):J}}function JO(Z,Q){let J=0;while(++J<=Z.length)if((J===Z.length||Z[J][1].type===_.lineEnding)&&Z[J-1][1].type===_.data){let X=Z[J-1][1],Y=Q.sliceStream(X),q=Y.length,G=-1,U=0,K;while(q--){let H=Y[q];if(typeof H==="string"){G=H.length;while(H.charCodeAt(G-1)===L.space)U++,G--;if(G)break;G=-1}else if(H===L.horizontalTab)K=!0,U++;else if(H===L.virtualSpace);else{q++;break}}if(Q._contentTypeTextTrailing&&J===Z.length)U=0;if(U){let H={type:J===Z.length||K||U<k.hardBreakPrefixSizeMin?_.lineSuffix:_.hardBreakTrailing,start:{_bufferIndex:q?G:X.start._bufferIndex+G,_index:X.start._index+q,line:X.end.line,column:X.end.column-U,offset:X.end.offset-U},end:{...X.end}};if(X.end={...H.start},X.start.offset===X.end.offset)Object.assign(X,H);else Z.splice(J,0,["enter",H,Q],["exit",H,Q]),J+=2}J++}return Z}var HQ={};Mq(HQ,{text:()=>KO,string:()=>UO,insideSpan:()=>HO,flowInitial:()=>qO,flow:()=>GO,document:()=>XO,disable:()=>zO,contentInitial:()=>YO,attentionMarkers:()=>WO});var XO={[L.asterisk]:U1,[L.plusSign]:U1,[L.dash]:U1,[L.digit0]:U1,[L.digit1]:U1,[L.digit2]:U1,[L.digit3]:U1,[L.digit4]:U1,[L.digit5]:U1,[L.digit6]:U1,[L.digit7]:U1,[L.digit8]:U1,[L.digit9]:U1,[L.greaterThan]:T7},YO={[L.leftSquareBracket]:QQ},qO={[L.horizontalTab]:c2,[L.virtualSpace]:c2,[L.space]:c2},GO={[L.numberSign]:XQ,[L.asterisk]:y4,[L.dash]:[k7,y4],[L.lessThan]:qQ,[L.equalsTo]:k7,[L.underscore]:y4,[L.graveAccent]:C7,[L.tilde]:C7},UO={[L.ampersand]:b7,[L.backslash]:$7},KO={[L.carriageReturn]:a2,[L.lineFeed]:a2,[L.carriageReturnLineFeed]:a2,[L.exclamationMark]:UQ,[L.ampersand]:b7,[L.asterisk]:d2,[L.lessThan]:[oZ,GQ],[L.leftSquareBracket]:KQ,[L.backslash]:[JQ,$7],[L.rightSquareBracket]:C4,[L.underscore]:d2,[L.graveAccent]:tZ},HO={null:[d2,H3]},WO={null:[L.asterisk,L.underscore]},zO={null:[]};var j3=Rq(N3(),1);var w4=j3.default("micromark");function A3(Z,Q,J){let X={_bufferIndex:-1,_index:0,line:J&&J.line||1,column:J&&J.column||1,offset:J&&J.offset||0},Y={},q=[],G=[],U=[],K=!0,H={attempt:u(g),check:u(S),consume:$,enter:w,exit:I,interrupt:u(S,{interrupt:!0})},W={code:L.eof,containerState:{},defineSkip:j,events:[],now:N,parser:Z,previous:L.eof,sliceSerialize:V,sliceStream:O,write:B},z=Q.tokenize.call(W,H),F;if(Q.resolveAll)q.push(Q);return W;function B(m){if(G=V1(G,m),R(),G[G.length-1]!==L.eof)return[];return T(Q,0),W.events=r5(q,W.events,W),W.events}function V(m,c){return IO(O(m),c)}function O(m){return DO(G,m)}function N(){let{_bufferIndex:m,_index:c,line:o,column:V0,offset:p}=X;return{_bufferIndex:m,_index:c,line:o,column:V0,offset:p}}function j(m){Y[m.line]=m.column,e(),w4("position: define skip: `%j`",X)}function R(){let m;while(X._index<G.length){let c=G[X._index];if(typeof c==="string"){if(m=X._index,X._bufferIndex<0)X._bufferIndex=0;while(X._index===m&&X._bufferIndex<c.length)E(c.charCodeAt(X._bufferIndex))}else E(c)}}function E(m){P(K===!0,"expected character to be consumed"),K=void 0,w4("main: passing `%s` to %s",m,z&&z.name),F=m,P(typeof z==="function","expected state"),z=z(m)}function $(m){if(P(m===F,"expected given code to equal expected code"),w4("consume: `%s`",m),P(K===void 0,"expected code to not have been consumed: this might be because `return x(code)` instead of `return x` was used"),P(m===null?W.events.length===0||W.events[W.events.length-1][0]==="exit":W.events[W.events.length-1][0]==="enter","expected last token to be open"),v(m))X.line++,X.column=1,X.offset+=m===L.carriageReturnLineFeed?2:1,e(),w4("position: after eol: `%j`",X);else if(m!==L.virtualSpace)X.column++,X.offset++;if(X._bufferIndex<0)X._index++;else if(X._bufferIndex++,X._bufferIndex===G[X._index].length)X._bufferIndex=-1,X._index++;W.previous=m,K=!0}function w(m,c){let o=c||{};return o.type=m,o.start=N(),P(typeof m==="string","expected string type"),P(m.length>0,"expected non-empty string"),w4("enter: `%s`",m),W.events.push(["enter",o,W]),U.push(o),o}function I(m){P(typeof m==="string","expected string type"),P(m.length>0,"expected non-empty string");let c=U.pop();return P(c,"cannot close w/o open tokens"),c.end=N(),P(m===c.type,"expected exit token to match current token"),P(!(c.start._index===c.end._index&&c.start._bufferIndex===c.end._bufferIndex),"expected non-empty token (`"+m+"`)"),w4("exit: `%s`",c.type),W.events.push(["exit",c,W]),c}function g(m,c){T(m,c.from)}function S(m,c){c.restore()}function u(m,c){return o;function o(V0,p,f){let T0,D,d0,t0;return Array.isArray(V0)?B0(V0):("tokenize"in V0)?B0([V0]):M(V0);function M(w0){return Z5;function Z5(A1){let l1=A1!==null&&w0[A1],i1=A1!==null&&w0.null,XZ=[...Array.isArray(l1)?l1:l1?[l1]:[],...Array.isArray(i1)?i1:i1?[i1]:[]];return B0(XZ)(A1)}}function B0(w0){if(T0=w0,D=0,w0.length===0)return P(f,"expected `bogusState` to be given"),f;return x1(w0[D])}function x1(w0){return Z5;function Z5(A1){if(t0=F0(),d0=w0,!w0.partial)W.currentConstruct=w0;if(P(W.parser.constructs.disable.null,"expected `disable.null` to be populated"),w0.name&&W.parser.constructs.disable.null.includes(w0.name))return b0(A1);return w0.tokenize.call(c?Object.assign(Object.create(W),c):W,H,z6,b0)(A1)}}function z6(w0){return P(w0===F,"expected code"),K=!0,m(d0,t0),p}function b0(w0){if(P(w0===F,"expected code"),K=!0,t0.restore(),++D<T0.length)return x1(T0[D]);return f}}}function T(m,c){if(m.resolveAll&&!q.includes(m))q.push(m);if(m.resolve)h0(W.events,c,W.events.length-c,m.resolve(W.events.slice(c),W));if(m.resolveTo)W.events=m.resolveTo(W.events,W);P(m.partial||W.events.length===0||W.events[W.events.length-1][0]==="exit","expected last token to end")}function F0(){let m=N(),c=W.previous,o=W.currentConstruct,V0=W.events.length,p=Array.from(U);return{from:V0,restore:f};function f(){X=m,W.previous=c,W.currentConstruct=o,W.events.length=V0,U=p,e(),w4("position: restore: `%j`",X)}}function e(){if(X.line in Y&&X.column<2)X.column=Y[X.line],X.offset+=Y[X.line]-1}}function DO(Z,Q){let J=Q.start._index,X=Q.start._bufferIndex,Y=Q.end._index,q=Q.end._bufferIndex,G;if(J===Y)P(q>-1,"expected non-negative end buffer index"),P(X>-1,"expected non-negative start buffer index"),G=[Z[J].slice(X,q)];else{if(G=Z.slice(J,Y),X>-1){let U=G[0];if(typeof U==="string")G[0]=U.slice(X);else P(X===0,"expected `startBufferIndex` to be `0`"),G.shift()}if(q>0)G.push(Z[Y].slice(0,q))}return G}function IO(Z,Q){let J=-1,X=[],Y;while(++J<Z.length){let q=Z[J],G;if(typeof q==="string")G=q;else switch(q){case L.carriageReturn:{G=b1.cr;break}case L.lineFeed:{G=b1.lf;break}case L.carriageReturnLineFeed:{G=b1.cr+b1.lf;break}case L.horizontalTab:{G=Q?b1.space:b1.ht;break}case L.virtualSpace:{if(!Q&&Y)continue;G=b1.space;break}default:P(typeof q==="number","expected number"),G=String.fromCharCode(q)}Y=q===L.horizontalTab,X.push(G)}return X.join("")}function WQ(Z){let X={constructs:I7([HQ,...(Z||{}).extensions||[]]),content:Y(Q3),defined:[],document:Y(X3),flow:Y(K3),lazy:{},string:Y(W3),text:Y(z3)};return X;function Y(q){return G;function G(U){return A3(X,q,U)}}}function zQ(Z){while(!y7(Z));return Z}var P3=/[\0\t\n\r]/g;function FQ(){let Z=1,Q="",J=!0,X;return Y;function Y(q,G,U){let K=[],H,W,z,F,B;if(q=Q+(typeof q==="string"?q.toString():new TextDecoder(G||void 0).decode(q)),z=0,Q="",J){if(q.charCodeAt(0)===L.byteOrderMarker)z++;J=void 0}while(z<q.length){if(P3.lastIndex=z,H=P3.exec(q),F=H&&H.index!==void 0?H.index:q.length,B=q.charCodeAt(F),!H){Q=q.slice(z);break}if(B===L.lf&&z===F&&X)K.push(L.carriageReturnLineFeed),X=void 0;else{if(X)K.push(L.carriageReturn),X=void 0;if(z<F)K.push(q.slice(z,F)),Z+=F-z;switch(B){case L.nul:{K.push(L.replacementCharacter),Z++;break}case L.ht:{W=Math.ceil(Z/k.tabSize)*k.tabSize,K.push(L.horizontalTab);while(Z++<W)K.push(L.virtualSpace);break}case L.lf:{K.push(L.lineFeed),Z=1;break}default:X=!0,Z=1}}z=F+1}if(U){if(X)K.push(L.carriageReturn);if(Q)K.push(Q);K.push(L.eof)}return K}}var EO=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function h7(Z){return Z.replace(EO,TO)}function TO(Z,Q,J){if(Q)return Q;if(J.charCodeAt(0)===L.numberSign){let Y=J.charCodeAt(1),q=Y===L.lowercaseX||Y===L.uppercaseX;return E7(J.slice(q?2:1),q?k.numericBaseHexadecimal:k.numericBaseDecimal)}return D6(J)||Z}function a5(Z){if(!Z||typeof Z!=="object")return"";if("position"in Z||"type"in Z)return R3(Z.position);if("start"in Z||"end"in Z)return R3(Z);if("line"in Z||"column"in Z)return BQ(Z);return""}function BQ(Z){return M3(Z&&Z.line)+":"+M3(Z&&Z.column)}function R3(Z){return BQ(Z&&Z.start)+"-"+BQ(Z&&Z.end)}function M3(Z){return Z&&typeof Z==="number"?Z:1}var I3={}.hasOwnProperty;function VQ(Z,Q,J){if(typeof Q!=="string")J=Q,Q=void 0;return $O(J)(zQ(WQ(J).document().write(FQ()(Z,Q,!0))))}function $O(Z){let Q={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:q(Oq),autolinkProtocol:u,autolinkEmail:u,atxHeading:q(Vq),blockQuote:q(A1),characterEscape:u,characterReference:u,codeFenced:q(l1),codeFencedFenceInfo:G,codeFencedFenceMeta:G,codeIndented:q(l1,G),codeText:q(i1,G),codeTextData:u,data:u,codeFlowValue:u,definition:q(XZ),definitionDestinationString:G,definitionLabelString:G,definitionTitleString:G,emphasis:q(qV),hardBreakEscape:q(Lq),hardBreakTrailing:q(Lq),htmlFlow:q(_q,G),htmlFlowData:u,htmlText:q(_q,G),htmlTextData:u,image:q(GV),label:G,link:q(Oq),listItem:q(UV),listItemValue:F,listOrdered:q(Nq,z),listUnordered:q(Nq),paragraph:q(KV),reference:M,referenceString:G,resourceDestinationString:G,resourceTitleString:G,setextHeading:q(Vq),strong:q(HV),thematicBreak:q(zV)},exit:{atxHeading:K(),atxHeadingSequence:w,autolink:K(),autolinkEmail:Z5,autolinkProtocol:w0,blockQuote:K(),characterEscapeValue:T,characterReferenceMarkerHexadecimal:x1,characterReferenceMarkerNumeric:x1,characterReferenceValue:z6,characterReference:b0,codeFenced:K(N),codeFencedFence:O,codeFencedFenceInfo:B,codeFencedFenceMeta:V,codeFlowValue:T,codeIndented:K(j),codeText:K(o),codeTextData:T,data:T,definition:K(),definitionDestinationString:$,definitionLabelString:R,definitionTitleString:E,emphasis:K(),hardBreakEscape:K(e),hardBreakTrailing:K(e),htmlFlow:K(m),htmlFlowData:T,htmlText:K(c),htmlTextData:T,image:K(p),label:T0,labelText:f,lineEnding:F0,link:K(V0),listItem:K(),listOrdered:K(),listUnordered:K(),paragraph:K(),referenceString:B0,resourceDestinationString:D,resourceTitleString:d0,resource:t0,setextHeading:K(S),setextHeadingLineSequence:g,setextHeadingText:I,strong:K(),thematicBreak:K()}};E3(Q,(Z||{}).mdastExtensions||[]);let J={};return X;function X(b){let C={type:"root",children:[]},l={stack:[C],tokenStack:[],config:Q,enter:U,exit:H,buffer:G,resume:W,data:J},G0=[],R0=-1;while(++R0<b.length)if(b[R0][1].type===_.listOrdered||b[R0][1].type===_.listUnordered)if(b[R0][0]==="enter")G0.push(R0);else{let P1=G0.pop();P(typeof P1==="number","expected list ot be open"),R0=Y(b,P1,R0)}R0=-1;while(++R0<b.length){let P1=Q[b[R0][0]];if(I3.call(P1,b[R0][1].type))P1[b[R0][1].type].call(Object.assign({sliceSerialize:b[R0][2].sliceSerialize},l),b[R0][1])}if(l.tokenStack.length>0){let P1=l.tokenStack[l.tokenStack.length-1];(P1[1]||D3).call(l,void 0,P1[0])}C.position={start:n5(b.length>0?b[0][1].start:{line:1,column:1,offset:0}),end:n5(b.length>0?b[b.length-2][1].end:{line:1,column:1,offset:0})},R0=-1;while(++R0<Q.transforms.length)C=Q.transforms[R0](C)||C;return C}function Y(b,C,l){let G0=C-1,R0=-1,P1=!1,V4,_5,M2,D2;while(++G0<=l){let E1=b[G0];switch(E1[1].type){case _.listUnordered:case _.listOrdered:case _.blockQuote:{if(E1[0]==="enter")R0++;else R0--;D2=void 0;break}case _.lineEndingBlank:{if(E1[0]==="enter"){if(V4&&!D2&&!R0&&!M2)M2=G0;D2=void 0}break}case _.linePrefix:case _.listItemValue:case _.listItemMarker:case _.listItemPrefix:case _.listItemPrefixWhitespace:break;default:D2=void 0}if(!R0&&E1[0]==="enter"&&E1[1].type===_.listItemPrefix||R0===-1&&E1[0]==="exit"&&(E1[1].type===_.listUnordered||E1[1].type===_.listOrdered)){if(V4){let F6=G0;_5=void 0;while(F6--){let O5=b[F6];if(O5[1].type===_.lineEnding||O5[1].type===_.lineEndingBlank){if(O5[0]==="exit")continue;if(_5)b[_5][1].type=_.lineEndingBlank,P1=!0;O5[1].type=_.lineEnding,_5=F6}else if(O5[1].type===_.linePrefix||O5[1].type===_.blockQuotePrefix||O5[1].type===_.blockQuotePrefixWhitespace||O5[1].type===_.blockQuoteMarker||O5[1].type===_.listItemIndent);else break}if(M2&&(!_5||M2<_5))V4._spread=!0;V4.end=Object.assign({},_5?b[_5][1].start:E1[1].end),b.splice(_5||G0,0,["exit",V4,E1[2]]),G0++,l++}if(E1[1].type===_.listItemPrefix){let F6={type:"listItem",_spread:!1,start:Object.assign({},E1[1].start),end:void 0};V4=F6,b.splice(G0,0,["enter",F6,E1[2]]),G0++,l++,M2=void 0,D2=!0}}}return b[C][1]._spread=P1,l}function q(b,C){return l;function l(G0){if(U.call(this,b(G0),G0),C)C.call(this,G0)}}function G(){this.stack.push({type:"fragment",children:[]})}function U(b,C,l){let G0=this.stack[this.stack.length-1];P(G0,"expected `parent`"),P("children"in G0,"expected `parent`"),G0.children.push(b),this.stack.push(b),this.tokenStack.push([C,l||void 0]),b.position={start:n5(C.start),end:void 0}}function K(b){return C;function C(l){if(b)b.call(this,l);H.call(this,l)}}function H(b,C){let l=this.stack.pop();P(l,"expected `node`");let G0=this.tokenStack.pop();if(!G0)throw Error("Cannot close `"+b.type+"` ("+a5({start:b.start,end:b.end})+"): it’s not open");else if(G0[0].type!==b.type)if(C)C.call(this,b,G0[0]);else(G0[1]||D3).call(this,b,G0[0]);P(l.type!=="fragment","unexpected fragment `exit`ed"),P(l.position,"expected `position` to be defined"),l.position.end=n5(b.end)}function W(){return E4(this.stack.pop())}function z(){this.data.expectingFirstListItemValue=!0}function F(b){if(this.data.expectingFirstListItemValue){let C=this.stack[this.stack.length-2];P(C,"expected nodes on stack"),P(C.type==="list","expected list on stack"),C.start=Number.parseInt(this.sliceSerialize(b),k.numericBaseDecimal),this.data.expectingFirstListItemValue=void 0}}function B(){let b=this.resume(),C=this.stack[this.stack.length-1];P(C,"expected node on stack"),P(C.type==="code","expected code on stack"),C.lang=b}function V(){let b=this.resume(),C=this.stack[this.stack.length-1];P(C,"expected node on stack"),P(C.type==="code","expected code on stack"),C.meta=b}function O(){if(this.data.flowCodeInside)return;this.buffer(),this.data.flowCodeInside=!0}function N(){let b=this.resume(),C=this.stack[this.stack.length-1];P(C,"expected node on stack"),P(C.type==="code","expected code on stack"),C.value=b.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function j(){let b=this.resume(),C=this.stack[this.stack.length-1];P(C,"expected node on stack"),P(C.type==="code","expected code on stack"),C.value=b.replace(/(\r?\n|\r)$/g,"")}function R(b){let C=this.resume(),l=this.stack[this.stack.length-1];P(l,"expected node on stack"),P(l.type==="definition","expected definition on stack"),l.label=C,l.identifier=G1(this.sliceSerialize(b)).toLowerCase()}function E(){let b=this.resume(),C=this.stack[this.stack.length-1];P(C,"expected node on stack"),P(C.type==="definition","expected definition on stack"),C.title=b}function $(){let b=this.resume(),C=this.stack[this.stack.length-1];P(C,"expected node on stack"),P(C.type==="definition","expected definition on stack"),C.url=b}function w(b){let C=this.stack[this.stack.length-1];if(P(C,"expected node on stack"),P(C.type==="heading","expected heading on stack"),!C.depth){let l=this.sliceSerialize(b).length;P(l===1||l===2||l===3||l===4||l===5||l===6,"expected `depth` between `1` and `6`"),C.depth=l}}function I(){this.data.setextHeadingSlurpLineEnding=!0}function g(b){let C=this.stack[this.stack.length-1];P(C,"expected node on stack"),P(C.type==="heading","expected heading on stack"),C.depth=this.sliceSerialize(b).codePointAt(0)===L.equalsTo?1:2}function S(){this.data.setextHeadingSlurpLineEnding=void 0}function u(b){let C=this.stack[this.stack.length-1];P(C,"expected node on stack"),P("children"in C,"expected parent on stack");let l=C.children,G0=l[l.length-1];if(!G0||G0.type!=="text")G0=WV(),G0.position={start:n5(b.start),end:void 0},l.push(G0);this.stack.push(G0)}function T(b){let C=this.stack.pop();P(C,"expected a `node` to be on the stack"),P("value"in C,"expected a `literal` to be on the stack"),P(C.position,"expected `node` to have an open position"),C.value+=this.sliceSerialize(b),C.position.end=n5(b.end)}function F0(b){let C=this.stack[this.stack.length-1];if(P(C,"expected `node`"),this.data.atHardBreak){P("children"in C,"expected `parent`");let l=C.children[C.children.length-1];P(l.position,"expected tail to have a starting position"),l.position.end=n5(b.end),this.data.atHardBreak=void 0;return}if(!this.data.setextHeadingSlurpLineEnding&&Q.canContainEols.includes(C.type))u.call(this,b),T.call(this,b)}function e(){this.data.atHardBreak=!0}function m(){let b=this.resume(),C=this.stack[this.stack.length-1];P(C,"expected node on stack"),P(C.type==="html","expected html on stack"),C.value=b}function c(){let b=this.resume(),C=this.stack[this.stack.length-1];P(C,"expected node on stack"),P(C.type==="html","expected html on stack"),C.value=b}function o(){let b=this.resume(),C=this.stack[this.stack.length-1];P(C,"expected node on stack"),P(C.type==="inlineCode","expected inline code on stack"),C.value=b}function V0(){let b=this.stack[this.stack.length-1];if(P(b,"expected node on stack"),P(b.type==="link","expected link on stack"),this.data.inReference){let C=this.data.referenceType||"shortcut";b.type+="Reference",b.referenceType=C,delete b.url,delete b.title}else delete b.identifier,delete b.label;this.data.referenceType=void 0}function p(){let b=this.stack[this.stack.length-1];if(P(b,"expected node on stack"),P(b.type==="image","expected image on stack"),this.data.inReference){let C=this.data.referenceType||"shortcut";b.type+="Reference",b.referenceType=C,delete b.url,delete b.title}else delete b.identifier,delete b.label;this.data.referenceType=void 0}function f(b){let C=this.sliceSerialize(b),l=this.stack[this.stack.length-2];P(l,"expected ancestor on stack"),P(l.type==="image"||l.type==="link","expected image or link on stack"),l.label=h7(C),l.identifier=G1(C).toLowerCase()}function T0(){let b=this.stack[this.stack.length-1];P(b,"expected node on stack"),P(b.type==="fragment","expected fragment on stack");let C=this.resume(),l=this.stack[this.stack.length-1];if(P(l,"expected node on stack"),P(l.type==="image"||l.type==="link","expected image or link on stack"),this.data.inReference=!0,l.type==="link"){let G0=b.children;l.children=G0}else l.alt=C}function D(){let b=this.resume(),C=this.stack[this.stack.length-1];P(C,"expected node on stack"),P(C.type==="image"||C.type==="link","expected image or link on stack"),C.url=b}function d0(){let b=this.resume(),C=this.stack[this.stack.length-1];P(C,"expected node on stack"),P(C.type==="image"||C.type==="link","expected image or link on stack"),C.title=b}function t0(){this.data.inReference=void 0}function M(){this.data.referenceType="collapsed"}function B0(b){let C=this.resume(),l=this.stack[this.stack.length-1];P(l,"expected node on stack"),P(l.type==="image"||l.type==="link","expected image reference or link reference on stack"),l.label=C,l.identifier=G1(this.sliceSerialize(b)).toLowerCase(),this.data.referenceType="full"}function x1(b){P(b.type==="characterReferenceMarkerNumeric"||b.type==="characterReferenceMarkerHexadecimal"),this.data.characterReferenceType=b.type}function z6(b){let C=this.sliceSerialize(b),l=this.data.characterReferenceType,G0;if(l)G0=E7(C,l===_.characterReferenceMarkerNumeric?k.numericBaseDecimal:k.numericBaseHexadecimal),this.data.characterReferenceType=void 0;else{let P1=D6(C);P(P1!==!1,"expected reference to decode"),G0=P1}let R0=this.stack[this.stack.length-1];P(R0,"expected `node`"),P("value"in R0,"expected `node.value`"),R0.value+=G0}function b0(b){let C=this.stack.pop();P(C,"expected `node`"),P(C.position,"expected `node.position`"),C.position.end=n5(b.end)}function w0(b){T.call(this,b);let C=this.stack[this.stack.length-1];P(C,"expected node on stack"),P(C.type==="link","expected link on stack"),C.url=this.sliceSerialize(b)}function Z5(b){T.call(this,b);let C=this.stack[this.stack.length-1];P(C,"expected node on stack"),P(C.type==="link","expected link on stack"),C.url="mailto:"+this.sliceSerialize(b)}function A1(){return{type:"blockquote",children:[]}}function l1(){return{type:"code",lang:null,meta:null,value:""}}function i1(){return{type:"inlineCode",value:""}}function XZ(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function qV(){return{type:"emphasis",children:[]}}function Vq(){return{type:"heading",depth:0,children:[]}}function Lq(){return{type:"break"}}function _q(){return{type:"html",value:""}}function GV(){return{type:"image",title:null,url:"",alt:null}}function Oq(){return{type:"link",title:null,url:"",children:[]}}function Nq(b){return{type:"list",ordered:b.type==="listOrdered",start:null,spread:b._spread,children:[]}}function UV(b){return{type:"listItem",spread:b._spread,checked:null,children:[]}}function KV(){return{type:"paragraph",children:[]}}function HV(){return{type:"strong",children:[]}}function WV(){return{type:"text",value:""}}function zV(){return{type:"thematicBreak"}}}function n5(Z){return{line:Z.line,column:Z.column,offset:Z.offset}}function E3(Z,Q){let J=-1;while(++J<Q.length){let X=Q[J];if(Array.isArray(X))E3(Z,X);else bO(Z,X)}}function bO(Z,Q){let J;for(J in Q)if(I3.call(Q,J))switch(J){case"canContainEols":{let X=Q[J];if(X)Z[J].push(...X);break}case"transforms":{let X=Q[J];if(X)Z[J].push(...X);break}case"enter":case"exit":{let X=Q[J];if(X)Object.assign(Z[J],X);break}}}function D3(Z,Q){if(Z)throw Error("Cannot close `"+Z.type+"` ("+a5({start:Z.start,end:Z.end})+"): a different token (`"+Q.type+"`, "+a5({start:Q.start,end:Q.end})+") is open");else throw Error("Cannot close document, a token (`"+Q.type+"`, "+a5({start:Q.start,end:Q.end})+") is still open")}function $6(Z){let Q=this;Q.parser=J;function J(X){return VQ(X,{...Q.data("settings"),...Z,extensions:Q.data("micromarkExtensions")||[],mdastExtensions:Q.data("fromMarkdownExtensions")||[]})}}var T3={}.hasOwnProperty;function $3(Z,Q){let J=Q||{};function X(Y,...q){let{invalid:G,handlers:U}=X;if(Y&&T3.call(Y,Z)){let K=String(Y[Z]);G=T3.call(U,K)?U[K]:X.unknown}if(G)return G.call(this,Y,...q)}return X.handlers=J.handlers||{},X.invalid=J.invalid,X.unknown=J.unknown,X}var CO={}.hasOwnProperty;function LQ(Z,Q){let J=-1,X;if(Q.extensions)while(++J<Q.extensions.length)LQ(Z,Q.extensions[J]);for(X in Q)if(CO.call(Q,X))switch(X){case"extensions":break;case"unsafe":{b3(Z[X],Q[X]);break}case"join":{b3(Z[X],Q[X]);break}case"handlers":{yO(Z[X],Q[X]);break}default:Z.options[X]=Q[X]}return Z}function b3(Z,Q){if(Q)Z.push(...Q)}function yO(Z,Q){if(Q)Object.assign(Z,Q)}function C3(Z,Q,J,X){let Y=J.enter("blockquote"),q=J.createTracker(X);q.move("> "),q.shift(2);let G=J.indentLines(J.containerFlow(Z,q.current()),SO);return Y(),G}function SO(Z,Q,J){return">"+(J?"":" ")+Z}function u7(Z,Q){return y3(Z,Q.inConstruct,!0)&&!y3(Z,Q.notInConstruct,!1)}function y3(Z,Q,J){if(typeof Q==="string")Q=[Q];if(!Q||Q.length===0)return J;let X=-1;while(++X<Q.length)if(Z.includes(Q[X]))return!0;return!1}function _Q(Z,Q,J,X){let Y=-1;while(++Y<J.unsafe.length)if(J.unsafe[Y].character===`
`&&u7(J.stack,J.unsafe[Y]))return/[ \t]/.test(X.before)?"":" ";return"\\\n"}function S3(Z,Q){let J=String(Z),X=J.indexOf(Q),Y=X,q=0,G=0;if(typeof Q!=="string")throw TypeError("Expected substring");while(X!==-1){if(X===Y){if(++q>G)G=q}else q=1;Y=X+Q.length,X=J.indexOf(Q,Y)}return G}function n2(Z,Q){return Boolean(Q.options.fences===!1&&Z.value&&!Z.lang&&/[^ \r\n]/.test(Z.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(Z.value))}function w3(Z){let Q=Z.options.fence||"`";if(Q!=="`"&&Q!=="~")throw Error("Cannot serialize code with `"+Q+"` for `options.fence`, expected `` ` `` or `~`");return Q}function x3(Z,Q,J,X){let Y=w3(J),q=Z.value||"",G=Y==="`"?"GraveAccent":"Tilde";if(n2(Z,J)){let z=J.enter("codeIndented"),F=J.indentLines(q,wO);return z(),F}let U=J.createTracker(X),K=Y.repeat(Math.max(S3(q,Y)+1,3)),H=J.enter("codeFenced"),W=U.move(K);if(Z.lang){let z=J.enter(`codeFencedLang${G}`);W+=U.move(J.safe(Z.lang,{before:W,after:" ",encode:["`"],...U.current()})),z()}if(Z.lang&&Z.meta){let z=J.enter(`codeFencedMeta${G}`);W+=U.move(" "),W+=U.move(J.safe(Z.meta,{before:W,after:`
`,encode:["`"],...U.current()})),z()}if(W+=U.move(`
`),q)W+=U.move(q+`
`);return W+=U.move(K),H(),W}function wO(Z,Q,J){return(J?"":"    ")+Z}function b6(Z){let Q=Z.options.quote||'"';if(Q!=='"'&&Q!=="'")throw Error("Cannot serialize title with `"+Q+"` for `options.quote`, expected `\"`, or `'`");return Q}function k3(Z,Q,J,X){let Y=b6(J),q=Y==='"'?"Quote":"Apostrophe",G=J.enter("definition"),U=J.enter("label"),K=J.createTracker(X),H=K.move("[");if(H+=K.move(J.safe(J.associationId(Z),{before:H,after:"]",...K.current()})),H+=K.move("]: "),U(),!Z.url||/[\0- \u007F]/.test(Z.url))U=J.enter("destinationLiteral"),H+=K.move("<"),H+=K.move(J.safe(Z.url,{before:H,after:">",...K.current()})),H+=K.move(">");else U=J.enter("destinationRaw"),H+=K.move(J.safe(Z.url,{before:H,after:Z.title?" ":`
`,...K.current()}));if(U(),Z.title)U=J.enter(`title${q}`),H+=K.move(" "+Y),H+=K.move(J.safe(Z.title,{before:H,after:Y,...K.current()})),H+=K.move(Y),U();return G(),H}function g3(Z){let Q=Z.options.emphasis||"*";if(Q!=="*"&&Q!=="_")throw Error("Cannot serialize emphasis with `"+Q+"` for `options.emphasis`, expected `*`, or `_`");return Q}function C1(Z){return"&#x"+Z.toString(16).toUpperCase()+";"}function C6(Z,Q,J){let X=D5(Z),Y=D5(Q);if(X===void 0)return Y===void 0?J==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:Y===1?{inside:!0,outside:!0}:{inside:!1,outside:!0};if(X===1)return Y===void 0?{inside:!1,outside:!1}:Y===1?{inside:!0,outside:!0}:{inside:!1,outside:!1};return Y===void 0?{inside:!1,outside:!1}:Y===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}OQ.peek=xO;function OQ(Z,Q,J,X){let Y=g3(J),q=J.enter("emphasis"),G=J.createTracker(X),U=G.move(Y),K=G.move(J.containerPhrasing(Z,{after:Y,before:U,...G.current()})),H=K.charCodeAt(0),W=C6(X.before.charCodeAt(X.before.length-1),H,Y);if(W.inside)K=C1(H)+K.slice(1);let z=K.charCodeAt(K.length-1),F=C6(X.after.charCodeAt(0),z,Y);if(F.inside)K=K.slice(0,-1)+C1(z);let B=G.move(Y);return q(),J.attentionEncodeSurroundingInfo={after:F.outside,before:W.outside},U+K+B}function xO(Z,Q,J){return J.options.emphasis||"*"}var s5=function(Z){if(Z===null||Z===void 0)return hO;if(typeof Z==="function")return f7(Z);if(typeof Z==="object")return Array.isArray(Z)?kO(Z):gO(Z);if(typeof Z==="string")return vO(Z);throw Error("Expected function, string, or object as test")};function kO(Z){let Q=[],J=-1;while(++J<Z.length)Q[J]=s5(Z[J]);return f7(X);function X(...Y){let q=-1;while(++q<Q.length)if(Q[q].apply(this,Y))return!0;return!1}}function gO(Z){let Q=Z;return f7(J);function J(X){let Y=X,q;for(q in Z)if(Y[q]!==Q[q])return!1;return!0}}function vO(Z){return f7(Q);function Q(J){return J&&J.type===Z}}function f7(Z){return Q;function Q(J,X,Y){return Boolean(uO(J)&&Z.call(this,J,typeof X==="number"?X:void 0,Y||void 0))}}function hO(){return!0}function uO(Z){return Z!==null&&typeof Z==="object"&&"type"in Z}function v3(Z){return Z}var h3=[],m7=!0,x4=!1,k4="skip";function g4(Z,Q,J,X){let Y;if(typeof Q==="function"&&typeof J!=="function")X=J,J=Q;else Y=Q;let q=s5(Y),G=X?-1:1;U(Z,void 0,[])();function U(K,H,W){let z=K&&typeof K==="object"?K:{};if(typeof z.type==="string"){let B=typeof z.tagName==="string"?z.tagName:typeof z.name==="string"?z.name:void 0;Object.defineProperty(F,"name",{value:"node ("+v3(K.type+(B?"<"+B+">":""))+")"})}return F;function F(){let B=h3,V,O,N;if(!Q||q(K,H,W[W.length-1]||void 0)){if(B=fO(J(K,W)),B[0]===x4)return B}if("children"in K&&K.children){let j=K;if(j.children&&B[0]!==k4){O=(X?j.children.length:-1)+G,N=W.concat(j);while(O>-1&&O<j.children.length){let R=j.children[O];if(V=U(R,O,N)(),V[0]===x4)return V;O=typeof V[1]==="number"?V[1]:O+G}}}return B}}}function fO(Z){if(Array.isArray(Z))return Z;if(typeof Z==="number")return[m7,Z];return Z===null||Z===void 0?h3:[Z]}function a1(Z,Q,J,X){let Y,q,G;if(typeof Q==="function"&&typeof J!=="function")q=void 0,G=Q,Y=J;else q=Q,G=J,Y=X;g4(Z,q,U,Y);function U(K,H){let W=H[H.length-1],z=W?W.children.indexOf(K):void 0;return G(K,z,W)}}function p7(Z,Q){let J=!1;return a1(Z,function(X){if("value"in X&&/\r?\n|\r/.test(X.value)||X.type==="break")return J=!0,x4}),Boolean((!Z.depth||Z.depth<3)&&E4(Z)&&(Q.options.setext||J))}function u3(Z,Q,J,X){let Y=Math.max(Math.min(6,Z.depth||1),1),q=J.createTracker(X);if(p7(Z,J)){let W=J.enter("headingSetext"),z=J.enter("phrasing"),F=J.containerPhrasing(Z,{...q.current(),before:`
`,after:`
`});return z(),W(),F+`
`+(Y===1?"=":"-").repeat(F.length-(Math.max(F.lastIndexOf("\r"),F.lastIndexOf(`
`))+1))}let G="#".repeat(Y),U=J.enter("headingAtx"),K=J.enter("phrasing");q.move(G+" ");let H=J.containerPhrasing(Z,{before:"# ",after:`
`,...q.current()});if(/^[\t ]/.test(H))H=C1(H.charCodeAt(0))+H.slice(1);if(H=H?G+" "+H:G,J.options.closeAtx)H+=" "+G;return K(),U(),H}NQ.peek=mO;function NQ(Z){return Z.value||""}function mO(){return"<"}jQ.peek=pO;function jQ(Z,Q,J,X){let Y=b6(J),q=Y==='"'?"Quote":"Apostrophe",G=J.enter("image"),U=J.enter("label"),K=J.createTracker(X),H=K.move("![");if(H+=K.move(J.safe(Z.alt,{before:H,after:"]",...K.current()})),H+=K.move("]("),U(),!Z.url&&Z.title||/[\0- \u007F]/.test(Z.url))U=J.enter("destinationLiteral"),H+=K.move("<"),H+=K.move(J.safe(Z.url,{before:H,after:">",...K.current()})),H+=K.move(">");else U=J.enter("destinationRaw"),H+=K.move(J.safe(Z.url,{before:H,after:Z.title?" ":")",...K.current()}));if(U(),Z.title)U=J.enter(`title${q}`),H+=K.move(" "+Y),H+=K.move(J.safe(Z.title,{before:H,after:Y,...K.current()})),H+=K.move(Y),U();return H+=K.move(")"),G(),H}function pO(){return"!"}AQ.peek=lO;function AQ(Z,Q,J,X){let Y=Z.referenceType,q=J.enter("imageReference"),G=J.enter("label"),U=J.createTracker(X),K=U.move("!["),H=J.safe(Z.alt,{before:K,after:"]",...U.current()});K+=U.move(H+"]["),G();let W=J.stack;J.stack=[],G=J.enter("reference");let z=J.safe(J.associationId(Z),{before:K,after:"]",...U.current()});if(G(),J.stack=W,q(),Y==="full"||!H||H!==z)K+=U.move(z+"]");else if(Y==="shortcut")K=K.slice(0,-1);else K+=U.move("]");return K}function lO(){return"!"}PQ.peek=iO;function PQ(Z,Q,J){let X=Z.value||"",Y="`",q=-1;while(new RegExp("(^|[^`])"+Y+"([^`]|$)").test(X))Y+="`";if(/[^ \r\n]/.test(X)&&(/^[ \r\n]/.test(X)&&/[ \r\n]$/.test(X)||/^`|`$/.test(X)))X=" "+X+" ";while(++q<J.unsafe.length){let G=J.unsafe[q],U=J.compilePattern(G),K;if(!G.atBreak)continue;while(K=U.exec(X)){let H=K.index;if(X.charCodeAt(H)===10&&X.charCodeAt(H-1)===13)H--;X=X.slice(0,H)+" "+X.slice(K.index+1)}}return Y+X+Y}function iO(){return"`"}function RQ(Z,Q){let J=E4(Z);return Boolean(!Q.options.resourceLink&&Z.url&&!Z.title&&Z.children&&Z.children.length===1&&Z.children[0].type==="text"&&(J===Z.url||"mailto:"+J===Z.url)&&/^[a-z][a-z+.-]+:/i.test(Z.url)&&!/[\0- <>\u007F]/.test(Z.url))}MQ.peek=dO;function MQ(Z,Q,J,X){let Y=b6(J),q=Y==='"'?"Quote":"Apostrophe",G=J.createTracker(X),U,K;if(RQ(Z,J)){let W=J.stack;J.stack=[],U=J.enter("autolink");let z=G.move("<");return z+=G.move(J.containerPhrasing(Z,{before:z,after:">",...G.current()})),z+=G.move(">"),U(),J.stack=W,z}U=J.enter("link"),K=J.enter("label");let H=G.move("[");if(H+=G.move(J.containerPhrasing(Z,{before:H,after:"](",...G.current()})),H+=G.move("]("),K(),!Z.url&&Z.title||/[\0- \u007F]/.test(Z.url))K=J.enter("destinationLiteral"),H+=G.move("<"),H+=G.move(J.safe(Z.url,{before:H,after:">",...G.current()})),H+=G.move(">");else K=J.enter("destinationRaw"),H+=G.move(J.safe(Z.url,{before:H,after:Z.title?" ":")",...G.current()}));if(K(),Z.title)K=J.enter(`title${q}`),H+=G.move(" "+Y),H+=G.move(J.safe(Z.title,{before:H,after:Y,...G.current()})),H+=G.move(Y),K();return H+=G.move(")"),U(),H}function dO(Z,Q,J){return RQ(Z,J)?"<":"["}DQ.peek=cO;function DQ(Z,Q,J,X){let Y=Z.referenceType,q=J.enter("linkReference"),G=J.enter("label"),U=J.createTracker(X),K=U.move("["),H=J.containerPhrasing(Z,{before:K,after:"]",...U.current()});K+=U.move(H+"]["),G();let W=J.stack;J.stack=[],G=J.enter("reference");let z=J.safe(J.associationId(Z),{before:K,after:"]",...U.current()});if(G(),J.stack=W,q(),Y==="full"||!H||H!==z)K+=U.move(z+"]");else if(Y==="shortcut")K=K.slice(0,-1);else K+=U.move("]");return K}function cO(){return"["}function y6(Z){let Q=Z.options.bullet||"*";if(Q!=="*"&&Q!=="+"&&Q!=="-")throw Error("Cannot serialize items with `"+Q+"` for `options.bullet`, expected `*`, `+`, or `-`");return Q}function f3(Z){let Q=y6(Z),J=Z.options.bulletOther;if(!J)return Q==="*"?"-":"*";if(J!=="*"&&J!=="+"&&J!=="-")throw Error("Cannot serialize items with `"+J+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(J===Q)throw Error("Expected `bullet` (`"+Q+"`) and `bulletOther` (`"+J+"`) to be different");return J}function m3(Z){let Q=Z.options.bulletOrdered||".";if(Q!=="."&&Q!==")")throw Error("Cannot serialize items with `"+Q+"` for `options.bulletOrdered`, expected `.` or `)`");return Q}function l7(Z){let Q=Z.options.rule||"*";if(Q!=="*"&&Q!=="-"&&Q!=="_")throw Error("Cannot serialize rules with `"+Q+"` for `options.rule`, expected `*`, `-`, or `_`");return Q}function p3(Z,Q,J,X){let Y=J.enter("list"),q=J.bulletCurrent,G=Z.ordered?m3(J):y6(J),U=Z.ordered?G==="."?")":".":f3(J),K=Q&&J.bulletLastUsed?G===J.bulletLastUsed:!1;if(!Z.ordered){let W=Z.children?Z.children[0]:void 0;if((G==="*"||G==="-")&&W&&(!W.children||!W.children[0])&&J.stack[J.stack.length-1]==="list"&&J.stack[J.stack.length-2]==="listItem"&&J.stack[J.stack.length-3]==="list"&&J.stack[J.stack.length-4]==="listItem"&&J.indexStack[J.indexStack.length-1]===0&&J.indexStack[J.indexStack.length-2]===0&&J.indexStack[J.indexStack.length-3]===0)K=!0;if(l7(J)===G&&W){let z=-1;while(++z<Z.children.length){let F=Z.children[z];if(F&&F.type==="listItem"&&F.children&&F.children[0]&&F.children[0].type==="thematicBreak"){K=!0;break}}}}if(K)G=U;J.bulletCurrent=G;let H=J.containerFlow(Z,X);return J.bulletLastUsed=G,J.bulletCurrent=q,Y(),H}function l3(Z){let Q=Z.options.listItemIndent||"one";if(Q!=="tab"&&Q!=="one"&&Q!=="mixed")throw Error("Cannot serialize items with `"+Q+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return Q}function i3(Z,Q,J,X){let Y=l3(J),q=J.bulletCurrent||y6(J);if(Q&&Q.type==="list"&&Q.ordered)q=(typeof Q.start==="number"&&Q.start>-1?Q.start:1)+(J.options.incrementListMarker===!1?0:Q.children.indexOf(Z))+q;let G=q.length+1;if(Y==="tab"||Y==="mixed"&&(Q&&Q.type==="list"&&Q.spread||Z.spread))G=Math.ceil(G/4)*4;let U=J.createTracker(X);U.move(q+" ".repeat(G-q.length)),U.shift(G);let K=J.enter("listItem"),H=J.indentLines(J.containerFlow(Z,U.current()),W);return K(),H;function W(z,F,B){if(F)return(B?"":" ".repeat(G))+z;return(B?q:q+" ".repeat(G-q.length))+z}}function d3(Z,Q,J,X){let Y=J.enter("paragraph"),q=J.enter("phrasing"),G=J.containerPhrasing(Z,X);return q(),Y(),G}var IQ=s5(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function c3(Z,Q,J,X){return(Z.children.some(function(G){return IQ(G)})?J.containerPhrasing:J.containerFlow).call(J,Z,X)}function r3(Z){let Q=Z.options.strong||"*";if(Q!=="*"&&Q!=="_")throw Error("Cannot serialize strong with `"+Q+"` for `options.strong`, expected `*`, or `_`");return Q}EQ.peek=rO;function EQ(Z,Q,J,X){let Y=r3(J),q=J.enter("strong"),G=J.createTracker(X),U=G.move(Y+Y),K=G.move(J.containerPhrasing(Z,{after:Y,before:U,...G.current()})),H=K.charCodeAt(0),W=C6(X.before.charCodeAt(X.before.length-1),H,Y);if(W.inside)K=C1(H)+K.slice(1);let z=K.charCodeAt(K.length-1),F=C6(X.after.charCodeAt(0),z,Y);if(F.inside)K=K.slice(0,-1)+C1(z);let B=G.move(Y+Y);return q(),J.attentionEncodeSurroundingInfo={after:F.outside,before:W.outside},U+K+B}function rO(Z,Q,J){return J.options.strong||"*"}function a3(Z,Q,J,X){return J.safe(Z.value,X)}function n3(Z){let Q=Z.options.ruleRepetition||3;if(Q<3)throw Error("Cannot serialize rules with repetition `"+Q+"` for `options.ruleRepetition`, expected `3` or more");return Q}function s3(Z,Q,J){let X=(l7(J)+(J.options.ruleSpaces?" ":"")).repeat(n3(J));return J.options.ruleSpaces?X.slice(0,-1):X}var v4={blockquote:C3,break:_Q,code:x3,definition:k3,emphasis:OQ,hardBreak:_Q,heading:u3,html:NQ,image:jQ,imageReference:AQ,inlineCode:PQ,link:MQ,linkReference:DQ,list:p3,listItem:i3,paragraph:d3,root:c3,strong:EQ,text:a3,thematicBreak:s3};var o3=[aO];function aO(Z,Q,J,X){if(Q.type==="code"&&n2(Q,X)&&(Z.type==="list"||Z.type===Q.type&&n2(Z,X)))return!1;if("spread"in J&&typeof J.spread==="boolean"){if(Z.type==="paragraph"&&(Z.type===Q.type||Q.type==="definition"||Q.type==="heading"&&p7(Q,X)))return;return J.spread?1:0}}var h4=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"],t3=[{character:"\t",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"\t",before:"[\\r\\n]",inConstruct:"phrasing"},{character:"\t",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"\r",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:`
`,inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:" ",after:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",before:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"!",after:"\\[",inConstruct:"phrasing",notInConstruct:h4},{character:'"',inConstruct:"titleQuote"},{atBreak:!0,character:"#"},{character:"#",inConstruct:"headingAtx",after:`(?:[\r
]|$)`},{character:"&",after:"[#A-Za-z]",inConstruct:"phrasing"},{character:"'",inConstruct:"titleApostrophe"},{character:"(",inConstruct:"destinationRaw"},{before:"\\]",character:"(",inConstruct:"phrasing",notInConstruct:h4},{atBreak:!0,before:"\\d+",character:")"},{character:")",inConstruct:"destinationRaw"},{atBreak:!0,character:"*",after:`(?:[ 	\r
*])`},{character:"*",inConstruct:"phrasing",notInConstruct:h4},{atBreak:!0,character:"+",after:`(?:[ 	\r
])`},{atBreak:!0,character:"-",after:`(?:[ 	\r
-])`},{atBreak:!0,before:"\\d+",character:".",after:`(?:[ 	\r
]|$)`},{atBreak:!0,character:"<",after:"[!/?A-Za-z]"},{character:"<",after:"[!/?A-Za-z]",inConstruct:"phrasing",notInConstruct:h4},{character:"<",inConstruct:"destinationLiteral"},{atBreak:!0,character:"="},{atBreak:!0,character:">"},{character:">",inConstruct:"destinationLiteral"},{atBreak:!0,character:"["},{character:"[",inConstruct:"phrasing",notInConstruct:h4},{character:"[",inConstruct:["label","reference"]},{character:"\\",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"]",inConstruct:["label","reference"]},{atBreak:!0,character:"_"},{character:"_",inConstruct:"phrasing",notInConstruct:h4},{atBreak:!0,character:"`"},{character:"`",inConstruct:["codeFencedLangGraveAccent","codeFencedMetaGraveAccent"]},{character:"`",inConstruct:"phrasing",notInConstruct:h4},{atBreak:!0,character:"~"}];function e3(Z){if(Z.label||!Z.identifier)return Z.label||"";return h7(Z.identifier)}function ZK(Z){if(!Z._compiled){let Q=(Z.atBreak?"[\\r\\n][\\t ]*":"")+(Z.before?"(?:"+Z.before+")":"");Z._compiled=new RegExp((Q?"("+Q+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(Z.character)?"\\":"")+Z.character+(Z.after?"(?:"+Z.after+")":""),"g")}return Z._compiled}function QK(Z,Q,J){let X=Q.indexStack,Y=Z.children||[],q=[],G=-1,U=J.before,K;X.push(-1);let H=Q.createTracker(J);while(++G<Y.length){let W=Y[G],z;if(X[X.length-1]=G,G+1<Y.length){let V=Q.handle.handlers[Y[G+1].type];if(V&&V.peek)V=V.peek;z=V?V(Y[G+1],Z,Q,{before:"",after:"",...H.current()}).charAt(0):""}else z=J.after;if(q.length>0&&(U==="\r"||U===`
`)&&W.type==="html")q[q.length-1]=q[q.length-1].replace(/(\r?\n|\r)$/," "),U=" ",H=Q.createTracker(J),H.move(q.join(""));let F=Q.handle(W,Z,Q,{...H.current(),after:z,before:U});if(K&&K===F.slice(0,1))F=C1(K.charCodeAt(0))+F.slice(1);let B=Q.attentionEncodeSurroundingInfo;if(Q.attentionEncodeSurroundingInfo=void 0,K=void 0,B){if(q.length>0&&B.before&&U===q[q.length-1].slice(-1))q[q.length-1]=q[q.length-1].slice(0,-1)+C1(U.charCodeAt(0));if(B.after)K=z}H.move(F),q.push(F),U=F.slice(-1)}return X.pop(),q.join("")}function JK(Z,Q,J){let X=Q.indexStack,Y=Z.children||[],q=Q.createTracker(J),G=[],U=-1;X.push(-1);while(++U<Y.length){let K=Y[U];if(X[X.length-1]=U,G.push(q.move(Q.handle(K,Z,Q,{before:`
`,after:`
`,...q.current()}))),K.type!=="list")Q.bulletLastUsed=void 0;if(U<Y.length-1)G.push(q.move(nO(K,Y[U+1],Z,Q)))}return X.pop(),G.join("")}function nO(Z,Q,J,X){let Y=X.join.length;while(Y--){let q=X.join[Y](Z,Q,J,X);if(q===!0||q===1)break;if(typeof q==="number")return`
`.repeat(1+q);if(q===!1)return`

<!---->

`}return`

`}var sO=/\r?\n|\r/g;function XK(Z,Q){let J=[],X=0,Y=0,q;while(q=sO.exec(Z))G(Z.slice(X,q.index)),J.push(q[0]),X=q.index+q[0].length,Y++;return G(Z.slice(X)),J.join("");function G(U){J.push(Q(U,Y,!U))}}function qK(Z,Q,J){let X=(J.before||"")+(Q||"")+(J.after||""),Y=[],q=[],G={},U=-1;while(++U<Z.unsafe.length){let W=Z.unsafe[U];if(!u7(Z.stack,W))continue;let z=Z.compilePattern(W),F;while(F=z.exec(X)){let B="before"in W||Boolean(W.atBreak),V="after"in W,O=F.index+(B?F[1].length:0);if(Y.includes(O)){if(G[O].before&&!B)G[O].before=!1;if(G[O].after&&!V)G[O].after=!1}else Y.push(O),G[O]={before:B,after:V}}}Y.sort(oO);let K=J.before?J.before.length:0,H=X.length-(J.after?J.after.length:0);U=-1;while(++U<Y.length){let W=Y[U];if(W<K||W>=H)continue;if(W+1<H&&Y[U+1]===W+1&&G[W].after&&!G[W+1].before&&!G[W+1].after||Y[U-1]===W-1&&G[W].before&&!G[W-1].before&&!G[W-1].after)continue;if(K!==W)q.push(YK(X.slice(K,W),"\\"));if(K=W,/[!-/:-@[-`{-~]/.test(X.charAt(W))&&(!J.encode||!J.encode.includes(X.charAt(W))))q.push("\\");else q.push(C1(X.charCodeAt(W))),K++}return q.push(YK(X.slice(K,H),J.after)),q.join("")}function oO(Z,Q){return Z-Q}function YK(Z,Q){let J=/\\(?=[!-/:-@[-`{-~])/g,X=[],Y=[],q=Z+Q,G=-1,U=0,K;while(K=J.exec(q))X.push(K.index);while(++G<X.length){if(U!==X[G])Y.push(Z.slice(U,X[G]));Y.push("\\"),U=X[G]}return Y.push(Z.slice(U)),Y.join("")}function GK(Z){let Q=Z||{},J=Q.now||{},X=Q.lineShift||0,Y=J.line||1,q=J.column||1;return{move:K,current:G,shift:U};function G(){return{now:{line:Y,column:q},lineShift:X}}function U(H){X+=H}function K(H){let W=H||"",z=W.split(/\r?\n|\r/g),F=z[z.length-1];return Y+=z.length-1,q=z.length===1?q+F.length:1+F.length+X,W}}function TQ(Z,Q){let J=Q||{},X={associationId:e3,containerPhrasing:QN,containerFlow:JN,createTracker:GK,compilePattern:ZK,enter:q,handlers:{...v4},handle:void 0,indentLines:XK,indexStack:[],join:[...o3],options:{},safe:XN,stack:[],unsafe:[...t3]};if(LQ(X,J),X.options.tightDefinitions)X.join.push(ZN);X.handle=$3("type",{invalid:tO,unknown:eO,handlers:X.handlers});let Y=X.handle(Z,void 0,X,{before:`
`,after:`
`,now:{line:1,column:1},lineShift:0});if(Y&&Y.charCodeAt(Y.length-1)!==10&&Y.charCodeAt(Y.length-1)!==13)Y+=`
`;return Y;function q(G){return X.stack.push(G),U;function U(){X.stack.pop()}}}function tO(Z){throw Error("Cannot handle value `"+Z+"`, expected node")}function eO(Z){throw Error("Cannot handle unknown node `"+Z.type+"`")}function ZN(Z,Q){if(Z.type==="definition"&&Z.type===Q.type)return 0}function QN(Z,Q){return QK(Z,this,Q)}function JN(Z,Q){return JK(Z,this,Q)}function XN(Z,Q){return qK(this,Z,Q)}function S6(Z){let Q=this;Q.compiler=J;function J(X){return TQ(X,{...Q.data("settings"),...Z,extensions:Q.data("toMarkdownExtensions")||[]})}}function $Q(Z){if(Z)throw Z}var r7=Rq(LK(),1);function s2(Z){if(typeof Z!=="object"||Z===null)return!1;let Q=Object.getPrototypeOf(Z);return(Q===null||Q===Object.prototype||Object.getPrototypeOf(Q)===null)&&!(Symbol.toStringTag in Z)&&!(Symbol.iterator in Z)}function bQ(){let Z=[],Q={run:J,use:X};return Q;function J(...Y){let q=-1,G=Y.pop();if(typeof G!=="function")throw TypeError("Expected function as last argument, not "+G);U(null,...Y);function U(K,...H){let W=Z[++q],z=-1;if(K){G(K);return}while(++z<Y.length)if(H[z]===null||H[z]===void 0)H[z]=Y[z];if(Y=H,W)_K(W,U)(...H);else G(null,...H)}}function X(Y){if(typeof Y!=="function")throw TypeError("Expected `middelware` to be a function, not "+Y);return Z.push(Y),Q}}function _K(Z,Q){let J;return X;function X(...G){let U=Z.length>G.length,K;if(U)G.push(Y);try{K=Z.apply(this,G)}catch(H){let W=H;if(U&&J)throw W;return Y(W)}if(!U)if(K&&K.then&&typeof K.then==="function")K.then(q,Y);else if(K instanceof Error)Y(K);else q(K)}function Y(G,...U){if(!J)J=!0,Q(G,...U)}function q(G){Y(null,G)}}class e0 extends Error{constructor(Z,Q,J){super();if(typeof Q==="string")J=Q,Q=void 0;let X="",Y={},q=!1;if(Q)if("line"in Q&&"column"in Q)Y={place:Q};else if("start"in Q&&"end"in Q)Y={place:Q};else if("type"in Q)Y={ancestors:[Q],place:Q.position};else Y={...Q};if(typeof Z==="string")X=Z;else if(!Y.cause&&Z)q=!0,X=Z.message,Y.cause=Z;if(!Y.ruleId&&!Y.source&&typeof J==="string"){let U=J.indexOf(":");if(U===-1)Y.ruleId=J;else Y.source=J.slice(0,U),Y.ruleId=J.slice(U+1)}if(!Y.place&&Y.ancestors&&Y.ancestors){let U=Y.ancestors[Y.ancestors.length-1];if(U)Y.place=U.position}let G=Y.place&&"start"in Y.place?Y.place.start:Y.place;this.ancestors=Y.ancestors||void 0,this.cause=Y.cause||void 0,this.column=G?G.column:void 0,this.fatal=void 0,this.file="",this.message=X,this.line=G?G.line:void 0,this.name=a5(Y.place)||"1:1",this.place=Y.place||void 0,this.reason=this.message,this.ruleId=Y.ruleId||void 0,this.source=Y.source||void 0,this.stack=q&&Y.cause&&typeof Y.cause.stack==="string"?Y.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}e0.prototype.file="";e0.prototype.name="";e0.prototype.reason="";e0.prototype.message="";e0.prototype.stack="";e0.prototype.column=void 0;e0.prototype.line=void 0;e0.prototype.ancestors=void 0;e0.prototype.cause=void 0;e0.prototype.fatal=void 0;e0.prototype.place=void 0;e0.prototype.ruleId=void 0;e0.prototype.source=void 0;var n1={basename:YN,dirname:qN,extname:GN,join:UN,sep:"/"};function YN(Z,Q){if(Q!==void 0&&typeof Q!=="string")throw TypeError('"ext" argument must be a string');o2(Z);let J=0,X=-1,Y=Z.length,q;if(Q===void 0||Q.length===0||Q.length>Z.length){while(Y--)if(Z.codePointAt(Y)===47){if(q){J=Y+1;break}}else if(X<0)q=!0,X=Y+1;return X<0?"":Z.slice(J,X)}if(Q===Z)return"";let G=-1,U=Q.length-1;while(Y--)if(Z.codePointAt(Y)===47){if(q){J=Y+1;break}}else{if(G<0)q=!0,G=Y+1;if(U>-1)if(Z.codePointAt(Y)===Q.codePointAt(U--)){if(U<0)X=Y}else U=-1,X=G}if(J===X)X=G;else if(X<0)X=Z.length;return Z.slice(J,X)}function qN(Z){if(o2(Z),Z.length===0)return".";let Q=-1,J=Z.length,X;while(--J)if(Z.codePointAt(J)===47){if(X){Q=J;break}}else if(!X)X=!0;return Q<0?Z.codePointAt(0)===47?"/":".":Q===1&&Z.codePointAt(0)===47?"//":Z.slice(0,Q)}function GN(Z){o2(Z);let Q=Z.length,J=-1,X=0,Y=-1,q=0,G;while(Q--){let U=Z.codePointAt(Q);if(U===47){if(G){X=Q+1;break}continue}if(J<0)G=!0,J=Q+1;if(U===46){if(Y<0)Y=Q;else if(q!==1)q=1}else if(Y>-1)q=-1}if(Y<0||J<0||q===0||q===1&&Y===J-1&&Y===X+1)return"";return Z.slice(Y,J)}function UN(...Z){let Q=-1,J;while(++Q<Z.length)if(o2(Z[Q]),Z[Q])J=J===void 0?Z[Q]:J+"/"+Z[Q];return J===void 0?".":KN(J)}function KN(Z){o2(Z);let Q=Z.codePointAt(0)===47,J=HN(Z,!Q);if(J.length===0&&!Q)J=".";if(J.length>0&&Z.codePointAt(Z.length-1)===47)J+="/";return Q?"/"+J:J}function HN(Z,Q){let J="",X=0,Y=-1,q=0,G=-1,U,K;while(++G<=Z.length){if(G<Z.length)U=Z.codePointAt(G);else if(U===47)break;else U=47;if(U===47){if(Y===G-1||q===1);else if(Y!==G-1&&q===2){if(J.length<2||X!==2||J.codePointAt(J.length-1)!==46||J.codePointAt(J.length-2)!==46){if(J.length>2){if(K=J.lastIndexOf("/"),K!==J.length-1){if(K<0)J="",X=0;else J=J.slice(0,K),X=J.length-1-J.lastIndexOf("/");Y=G,q=0;continue}}else if(J.length>0){J="",X=0,Y=G,q=0;continue}}if(Q)J=J.length>0?J+"/..":"..",X=2}else{if(J.length>0)J+="/"+Z.slice(Y+1,G);else J=Z.slice(Y+1,G);X=G-Y-1}Y=G,q=0}else if(U===46&&q>-1)q++;else q=-1}return J}function o2(Z){if(typeof Z!=="string")throw TypeError("Path must be a string. Received "+JSON.stringify(Z))}var OK={cwd:WN};function WN(){return"/"}function w6(Z){return Boolean(Z!==null&&typeof Z==="object"&&"href"in Z&&Z.href&&"protocol"in Z&&Z.protocol&&Z.auth===void 0)}function NK(Z){if(typeof Z==="string")Z=new URL(Z);else if(!w6(Z)){let Q=TypeError('The "path" argument must be of type string or an instance of URL. Received `'+Z+"`");throw Q.code="ERR_INVALID_ARG_TYPE",Q}if(Z.protocol!=="file:"){let Q=TypeError("The URL must be of scheme file");throw Q.code="ERR_INVALID_URL_SCHEME",Q}return zN(Z)}function zN(Z){if(Z.hostname!==""){let X=TypeError('File URL host must be "localhost" or empty on darwin');throw X.code="ERR_INVALID_FILE_URL_HOST",X}let Q=Z.pathname,J=-1;while(++J<Q.length)if(Q.codePointAt(J)===37&&Q.codePointAt(J+1)===50){let X=Q.codePointAt(J+2);if(X===70||X===102){let Y=TypeError("File URL path must not include encoded / characters");throw Y.code="ERR_INVALID_FILE_URL_PATH",Y}}return decodeURIComponent(Q)}var CQ=["history","path","basename","stem","extname","dirname"];class d7{constructor(Z){let Q;if(!Z)Q={};else if(w6(Z))Q={path:Z};else if(typeof Z==="string"||FN(Z))Q={value:Z};else Q=Z;this.cwd="cwd"in Q?"":OK.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let J=-1;while(++J<CQ.length){let Y=CQ[J];if(Y in Q&&Q[Y]!==void 0&&Q[Y]!==null)this[Y]=Y==="history"?[...Q[Y]]:Q[Y]}let X;for(X in Q)if(!CQ.includes(X))this[X]=Q[X]}get basename(){return typeof this.path==="string"?n1.basename(this.path):void 0}set basename(Z){SQ(Z,"basename"),yQ(Z,"basename"),this.path=n1.join(this.dirname||"",Z)}get dirname(){return typeof this.path==="string"?n1.dirname(this.path):void 0}set dirname(Z){jK(this.basename,"dirname"),this.path=n1.join(Z||"",this.basename)}get extname(){return typeof this.path==="string"?n1.extname(this.path):void 0}set extname(Z){if(yQ(Z,"extname"),jK(this.dirname,"extname"),Z){if(Z.codePointAt(0)!==46)throw Error("`extname` must start with `.`");if(Z.includes(".",1))throw Error("`extname` cannot contain multiple dots")}this.path=n1.join(this.dirname,this.stem+(Z||""))}get path(){return this.history[this.history.length-1]}set path(Z){if(w6(Z))Z=NK(Z);if(SQ(Z,"path"),this.path!==Z)this.history.push(Z)}get stem(){return typeof this.path==="string"?n1.basename(this.path,this.extname):void 0}set stem(Z){SQ(Z,"stem"),yQ(Z,"stem"),this.path=n1.join(this.dirname||"",Z+(this.extname||""))}fail(Z,Q,J){let X=this.message(Z,Q,J);throw X.fatal=!0,X}info(Z,Q,J){let X=this.message(Z,Q,J);return X.fatal=void 0,X}message(Z,Q,J){let X=new e0(Z,Q,J);if(this.path)X.name=this.path+":"+X.name,X.file=this.path;return X.fatal=!1,this.messages.push(X),X}toString(Z){if(this.value===void 0)return"";if(typeof this.value==="string")return this.value;return new TextDecoder(Z||void 0).decode(this.value)}}function yQ(Z,Q){if(Z&&Z.includes(n1.sep))throw Error("`"+Q+"` cannot be a path: did not expect `"+n1.sep+"`")}function SQ(Z,Q){if(!Z)throw Error("`"+Q+"` cannot be empty")}function jK(Z,Q){if(!Z)throw Error("Setting `"+Q+"` requires `path` to be set too")}function FN(Z){return Boolean(Z&&typeof Z==="object"&&"byteLength"in Z&&"byteOffset"in Z)}var AK=function(Z){let X=this.constructor.prototype,Y=X[Z],q=function(){return Y.apply(q,arguments)};return Object.setPrototypeOf(q,X),q};var BN={}.hasOwnProperty;class gQ extends AK{constructor(){super("copy");this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=bQ()}copy(){let Z=new gQ,Q=-1;while(++Q<this.attachers.length){let J=this.attachers[Q];Z.use(...J)}return Z.data(r7.default(!0,{},this.namespace)),Z}data(Z,Q){if(typeof Z==="string"){if(arguments.length===2)return kQ("data",this.frozen),this.namespace[Z]=Q,this;return BN.call(this.namespace,Z)&&this.namespace[Z]||void 0}if(Z)return kQ("data",this.frozen),this.namespace=Z,this;return this.namespace}freeze(){if(this.frozen)return this;let Z=this;while(++this.freezeIndex<this.attachers.length){let[Q,...J]=this.attachers[this.freezeIndex];if(J[0]===!1)continue;if(J[0]===!0)J[0]=void 0;let X=Q.call(Z,...J);if(typeof X==="function")this.transformers.use(X)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(Z){this.freeze();let Q=c7(Z),J=this.parser||this.Parser;return wQ("parse",J),J(String(Q),Q)}process(Z,Q){let J=this;return this.freeze(),wQ("process",this.parser||this.Parser),xQ("process",this.compiler||this.Compiler),Q?X(void 0,Q):new Promise(X);function X(Y,q){let G=c7(Z),U=J.parse(G);J.run(U,G,function(H,W,z){if(H||!W||!z)return K(H);let F=W,B=J.stringify(F,z);if(LN(B))z.value=B;else z.result=B;K(H,z)});function K(H,W){if(H||!W)q(H);else if(Y)Y(W);else P(Q,"`done` is defined if `resolve` is not"),Q(void 0,W)}}}processSync(Z){let Q=!1,J;return this.freeze(),wQ("processSync",this.parser||this.Parser),xQ("processSync",this.compiler||this.Compiler),this.process(Z,X),RK("processSync","process",Q),P(J,"we either bailed on an error or have a tree"),J;function X(Y,q){Q=!0,$Q(Y),J=q}}run(Z,Q,J){PK(Z),this.freeze();let X=this.transformers;if(!J&&typeof Q==="function")J=Q,Q=void 0;return J?Y(void 0,J):new Promise(Y);function Y(q,G){P(typeof Q!=="function","`file` can’t be a `done` anymore, we checked");let U=c7(Q);X.run(Z,U,K);function K(H,W,z){let F=W||Z;if(H)G(H);else if(q)q(F);else P(J,"`done` is defined if `resolve` is not"),J(void 0,F,z)}}}runSync(Z,Q){let J=!1,X;return this.run(Z,Q,Y),RK("runSync","run",J),P(X,"we either bailed on an error or have a tree"),X;function Y(q,G){$Q(q),X=G,J=!0}}stringify(Z,Q){this.freeze();let J=c7(Q),X=this.compiler||this.Compiler;return xQ("stringify",X),PK(Z),X(Z,J)}use(Z,...Q){let J=this.attachers,X=this.namespace;if(kQ("use",this.frozen),Z===null||Z===void 0);else if(typeof Z==="function")U(Z,Q);else if(typeof Z==="object")if(Array.isArray(Z))G(Z);else q(Z);else throw TypeError("Expected usable value, not `"+Z+"`");return this;function Y(K){if(typeof K==="function")U(K,[]);else if(typeof K==="object")if(Array.isArray(K)){let[H,...W]=K;U(H,W)}else q(K);else throw TypeError("Expected usable value, not `"+K+"`")}function q(K){if(!("plugins"in K)&&!("settings"in K))throw Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");if(G(K.plugins),K.settings)X.settings=r7.default(!0,X.settings,K.settings)}function G(K){let H=-1;if(K===null||K===void 0);else if(Array.isArray(K))while(++H<K.length){let W=K[H];Y(W)}else throw TypeError("Expected a list of plugins, not `"+K+"`")}function U(K,H){let W=-1,z=-1;while(++W<J.length)if(J[W][0]===K){z=W;break}if(z===-1)J.push([K,...H]);else if(H.length>0){let[F,...B]=H,V=J[z][1];if(s2(V)&&s2(F))F=r7.default(!0,V,F);J[z]=[K,F,...B]}}}}var t2=new gQ().freeze();function wQ(Z,Q){if(typeof Q!=="function")throw TypeError("Cannot `"+Z+"` without `parser`")}function xQ(Z,Q){if(typeof Q!=="function")throw TypeError("Cannot `"+Z+"` without `compiler`")}function kQ(Z,Q){if(Q)throw Error("Cannot call `"+Z+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function PK(Z){if(!s2(Z)||typeof Z.type!=="string")throw TypeError("Expected node, got `"+Z+"`")}function RK(Z,Q,J){if(!J)throw Error("`"+Z+"` finished async. Use `"+Q+"` instead")}function c7(Z){return VN(Z)?Z:new d7(Z)}function VN(Z){return Boolean(Z&&typeof Z==="object"&&"message"in Z&&"messages"in Z)}function LN(Z){return typeof Z==="string"||_N(Z)}function _N(Z){return Boolean(Z&&typeof Z==="object"&&"byteLength"in Z&&"byteOffset"in Z)}var DK=(Z)=>{throw TypeError(Z)},IK=(Z,Q,J)=>Q.has(Z)||DK("Cannot "+J),W0=(Z,Q,J)=>(IK(Z,Q,"read from private field"),J?J.call(Z):Q.get(Z)),p0=(Z,Q,J)=>Q.has(Z)?DK("Cannot add the same private member more than once"):Q instanceof WeakSet?Q.add(Z):Q.set(Z,J),E0=(Z,Q,J,X)=>(IK(Z,Q,"write to private field"),X?X.call(Z,J):Q.set(Z,J),J),G5,e2,a7,n7,s7,Z8,Q8,I5,J8,o7,t7,X8,e7,Y8,Z9,Q9,x6,u4,J9,q8;class fQ{}class mQ{constructor(){this.elements=[],this.size=()=>{return this.elements.length},this.top=()=>{return this.elements.at(-1)},this.push=(Z)=>{this.top()?.push(Z)},this.open=(Z)=>{this.elements.push(Z)},this.close=()=>{let Z=this.elements.pop();if(!Z)throw pZ();return Z}}}class pQ extends fQ{constructor(Z,Q,J){super();this.type=Z,this.content=Q,this.attrs=J}push(Z,...Q){this.content.push(Z,...Q)}pop(){return this.content.pop()}static create(Z,Q,J){return new pQ(Z,Q,J)}}var vQ=class extends mQ{constructor(Q){super();p0(this,G5),p0(this,e2),p0(this,a7),p0(this,n7),p0(this,s7),p0(this,Z8),p0(this,Q8),E0(this,G5,K0.none),E0(this,e2,(J)=>J.isText),E0(this,a7,(J,X)=>{if(W0(this,e2).call(this,J)&&W0(this,e2).call(this,X)&&K0.sameSet(J.marks,X.marks))return this.schema.text(J.text+X.text,J.marks);return}),E0(this,n7,(J)=>{let X=Object.values({...this.schema.nodes,...this.schema.marks}).find((Y)=>{return Y.spec.parseMarkdown.match(J)});if(!X)throw WU(J);return X}),E0(this,s7,(J)=>{let X=W0(this,n7).call(this,J);X.spec.parseMarkdown.runner(this,J,X)}),this.injectRoot=(J,X,Y)=>{return this.openNode(X,Y),this.next(J.children),this},this.openNode=(J,X)=>{return this.open(pQ.create(J,[],X)),this},E0(this,Z8,()=>{E0(this,G5,K0.none);let J=this.close();return W0(this,Q8).call(this,J.type,J.attrs,J.content)}),this.closeNode=()=>{try{W0(this,Z8).call(this)}catch(J){console.error(J)}return this},E0(this,Q8,(J,X,Y)=>{let q=J.createAndFill(X,Y,W0(this,G5));if(!q)throw HU(J,X,Y);return this.push(q),q}),this.addNode=(J,X,Y)=>{try{W0(this,Q8).call(this,J,X,Y)}catch(q){console.error(q)}return this},this.openMark=(J,X)=>{let Y=J.create(X);return E0(this,G5,Y.addToSet(W0(this,G5))),this},this.closeMark=(J)=>{return E0(this,G5,J.removeFromSet(W0(this,G5))),this},this.addText=(J)=>{try{let X=this.top();if(!X)throw pZ();let Y=X.pop(),q=this.schema.text(J,W0(this,G5));if(!Y)return X.push(q),this;let G=W0(this,a7).call(this,Y,q);if(G)return X.push(G),this;return X.push(Y,q),this}catch(X){return console.error(X),this}},this.build=()=>{let J;do J=W0(this,Z8).call(this);while(this.size());return J},this.next=(J=[])=>{return[J].flat().forEach((X)=>W0(this,s7).call(this,X)),this},this.toDoc=()=>this.build(),this.run=(J,X)=>{let Y=J.runSync(J.parse(X),X);return this.next(Y),this},this.schema=Q}};G5=new WeakMap;e2=new WeakMap;a7=new WeakMap;n7=new WeakMap;s7=new WeakMap;Z8=new WeakMap;Q8=new WeakMap;vQ.create=(Z,Q)=>{let J=new vQ(Z);return(X)=>{return J.run(Q,X),J.toDoc()}};var EK=vQ,hQ=class extends fQ{constructor(Q,J,X,Y={}){super();this.type=Q,this.children=J,this.value=X,this.props=Y,this.push=(q,...G)=>{if(!this.children)this.children=[];this.children.push(q,...G)},this.pop=()=>this.children?.pop()}};hQ.create=(Z,Q,J,X={})=>new hQ(Z,Q,J,X);var MK=hQ,ON=(Z)=>Object.prototype.hasOwnProperty.call(Z,"size"),uQ=class extends mQ{constructor(Q){super();p0(this,I5),p0(this,J8),p0(this,o7),p0(this,t7),p0(this,X8),p0(this,e7),p0(this,Y8),p0(this,Z9),p0(this,Q9),p0(this,x6),p0(this,u4),p0(this,J9),p0(this,q8),E0(this,I5,K0.none),E0(this,J8,(J)=>{let X=Object.values({...this.schema.nodes,...this.schema.marks}).find((Y)=>{return Y.spec.toMarkdown.match(J)});if(!X)throw zU(J.type);return X}),E0(this,o7,(J)=>{return W0(this,J8).call(this,J).spec.toMarkdown.runner(this,J)}),E0(this,t7,(J,X)=>{return W0(this,J8).call(this,J).spec.toMarkdown.runner(this,J,X)}),E0(this,X8,(J)=>{let{marks:X}=J,Y=(U)=>U.type.spec.priority??50;if([...X].sort((U,K)=>Y(U)-Y(K)).every((U)=>!W0(this,t7).call(this,U,J)))W0(this,o7).call(this,J);X.forEach((U)=>W0(this,q8).call(this,U))}),E0(this,e7,(J,X)=>{if(J.type===X)return J;if(J.children?.length!==1)return J;let Y=(K)=>{if(K.type===X)return K;if(K.children?.length!==1)return null;let[H]=K.children;if(!H)return null;return Y(H)},q=Y(J);if(!q)return J;let G=q.children?[...q.children]:void 0,U={...J,children:G};return U.children=G,q.children=[U],q}),E0(this,Y8,(J)=>{let{children:X}=J;if(!X)return J;return J.children=X.reduce((Y,q,G)=>{if(G===0)return[q];let U=Y.at(-1);if(U&&U.isMark&&q.isMark){q=W0(this,e7).call(this,q,U.type);let{children:K,...H}=q,{children:W,...z}=U;if(q.type===U.type&&K&&W&&JSON.stringify(H)===JSON.stringify(z)){let F={...z,children:[...W,...K]};return Y.slice(0,-1).concat(W0(this,Y8).call(this,F))}}return Y.concat(q)},[]),J}),E0(this,Z9,(J)=>{let X={...J.props,type:J.type};if(J.children)X.children=J.children;if(J.value)X.value=J.value;return X}),this.openNode=(J,X,Y)=>{return this.open(MK.create(J,void 0,X,Y)),this},E0(this,Q9,(J,X)=>{let Y="",q="",G=J.children,U=-1,K=-1,H=(z)=>{if(!z)return;z.forEach((F,B)=>{if(F.type==="text"&&F.value){if(U<0)U=B;K=B}})};if(G){H(G);let z=G?.[K],F=G?.[U];if(z&&z.value.endsWith(" ")){let B=z.value,V=B.trimEnd();q=B.slice(V.length),z.value=V}if(F&&F.value.startsWith(" ")){let B=F.value,V=B.trimStart();Y=B.slice(0,B.length-V.length),F.value=V}}if(Y.length)W0(this,u4).call(this,"text",void 0,Y);let W=X();if(q.length)W0(this,u4).call(this,"text",void 0,q);return W}),E0(this,x6,(J=!1)=>{let X=this.close(),Y=()=>W0(this,u4).call(this,X.type,X.children,X.value,X.props);if(J)return W0(this,Q9).call(this,X,Y);return Y()}),this.closeNode=()=>{return W0(this,x6).call(this),this},E0(this,u4,(J,X,Y,q)=>{let G=MK.create(J,X,Y,q),U=W0(this,Y8).call(this,W0(this,Z9).call(this,G));return this.push(U),U}),this.addNode=(J,X,Y,q)=>{return W0(this,u4).call(this,J,X,Y,q),this},E0(this,J9,(J,X,Y,q)=>{if(J.isInSet(W0(this,I5)))return this;return E0(this,I5,J.addToSet(W0(this,I5))),this.openNode(X,Y,{...q,isMark:!0})}),E0(this,q8,(J)=>{if(!J.isInSet(W0(this,I5)))return;E0(this,I5,J.type.removeFromSet(W0(this,I5))),W0(this,x6).call(this,!0)}),this.withMark=(J,X,Y,q)=>{return W0(this,J9).call(this,J,X,Y,q),this},this.closeMark=(J)=>{return W0(this,q8).call(this,J),this},this.build=()=>{let J=null;do J=W0(this,x6).call(this);while(this.size());return J},this.next=(J)=>{if(ON(J))return J.forEach((X)=>{W0(this,X8).call(this,X)}),this;return W0(this,X8).call(this,J),this},this.toString=(J)=>J.stringify(this.build()),this.run=(J)=>{return this.next(J),this},this.schema=Q}};I5=new WeakMap;J8=new WeakMap;o7=new WeakMap;t7=new WeakMap;X8=new WeakMap;e7=new WeakMap;Y8=new WeakMap;Z9=new WeakMap;Q9=new WeakMap;x6=new WeakMap;u4=new WeakMap;J9=new WeakMap;q8=new WeakMap;uQ.create=(Z,Q)=>{let J=new uQ(Z);return(X)=>{return J.run(X),J.toString(Q)}};var TK=uQ;var CK=65535,yK=Math.pow(2,16);function NN(Z,Q){return Z+Q*yK}function $K(Z){return Z&CK}function jN(Z){return(Z-(Z&CK))/yK}var SK=1,wK=2,X9=4,xK=8;class Y9{constructor(Z,Q,J){this.pos=Z,this.delInfo=Q,this.recover=J}get deleted(){return(this.delInfo&xK)>0}get deletedBefore(){return(this.delInfo&(SK|X9))>0}get deletedAfter(){return(this.delInfo&(wK|X9))>0}get deletedAcross(){return(this.delInfo&X9)>0}}class y1{constructor(Z,Q=!1){if(this.ranges=Z,this.inverted=Q,!Z.length&&y1.empty)return y1.empty}recover(Z){let Q=0,J=$K(Z);if(!this.inverted)for(let X=0;X<J;X++)Q+=this.ranges[X*3+2]-this.ranges[X*3+1];return this.ranges[J*3]+Q+jN(Z)}mapResult(Z,Q=1){return this._map(Z,Q,!1)}map(Z,Q=1){return this._map(Z,Q,!0)}_map(Z,Q,J){let X=0,Y=this.inverted?2:1,q=this.inverted?1:2;for(let G=0;G<this.ranges.length;G+=3){let U=this.ranges[G]-(this.inverted?X:0);if(U>Z)break;let K=this.ranges[G+Y],H=this.ranges[G+q],W=U+K;if(Z<=W){let z=!K?Q:Z==U?-1:Z==W?1:Q,F=U+X+(z<0?0:H);if(J)return F;let B=Z==(Q<0?U:W)?null:NN(G/3,Z-U),V=Z==U?wK:Z==W?SK:X9;if(Q<0?Z!=U:Z!=W)V|=xK;return new Y9(F,V,B)}X+=H-K}return J?Z+X:new Y9(Z+X,0,null)}touches(Z,Q){let J=0,X=$K(Q),Y=this.inverted?2:1,q=this.inverted?1:2;for(let G=0;G<this.ranges.length;G+=3){let U=this.ranges[G]-(this.inverted?J:0);if(U>Z)break;let K=this.ranges[G+Y],H=U+K;if(Z<=H&&G==X*3)return!0;J+=this.ranges[G+q]-K}return!1}forEach(Z){let Q=this.inverted?2:1,J=this.inverted?1:2;for(let X=0,Y=0;X<this.ranges.length;X+=3){let q=this.ranges[X],G=q-(this.inverted?Y:0),U=q+(this.inverted?0:Y),K=this.ranges[X+Q],H=this.ranges[X+J];Z(G,G+K,U,U+H),Y+=H-K}}invert(){return new y1(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(Z){return Z==0?y1.empty:new y1(Z<0?[0,-Z,0]:[0,0,Z])}}y1.empty=new y1([]);class q9{constructor(Z,Q,J=0,X=Z?Z.length:0){this.mirror=Q,this.from=J,this.to=X,this._maps=Z||[],this.ownData=!(Z||Q)}get maps(){return this._maps}slice(Z=0,Q=this.maps.length){return new q9(this._maps,this.mirror,Z,Q)}appendMap(Z,Q){if(!this.ownData)this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0;if(this.to=this._maps.push(Z),Q!=null)this.setMirror(this._maps.length-1,Q)}appendMapping(Z){for(let Q=0,J=this._maps.length;Q<Z._maps.length;Q++){let X=Z.getMirror(Q);this.appendMap(Z._maps[Q],X!=null&&X<Q?J+X:void 0)}}getMirror(Z){if(this.mirror){for(let Q=0;Q<this.mirror.length;Q++)if(this.mirror[Q]==Z)return this.mirror[Q+(Q%2?-1:1)]}}setMirror(Z,Q){if(!this.mirror)this.mirror=[];this.mirror.push(Z,Q)}appendMappingInverted(Z){for(let Q=Z.maps.length-1,J=this._maps.length+Z._maps.length;Q>=0;Q--){let X=Z.getMirror(Q);this.appendMap(Z._maps[Q].invert(),X!=null&&X>Q?J-X-1:void 0)}}invert(){let Z=new q9;return Z.appendMappingInverted(this),Z}map(Z,Q=1){if(this.mirror)return this._map(Z,Q,!0);for(let J=this.from;J<this.to;J++)Z=this._maps[J].map(Z,Q);return Z}mapResult(Z,Q=1){return this._map(Z,Q,!1)}_map(Z,Q,J){let X=0;for(let Y=this.from;Y<this.to;Y++){let q=this._maps[Y],G=q.mapResult(Z,Q);if(G.recover!=null){let U=this.getMirror(Y);if(U!=null&&U>Y&&U<this.to){Y=U,Z=this._maps[U].recover(G.recover);continue}}X|=G.delInfo,Z=G.pos}return J?Z:new Y9(Z,X,null)}}var lQ=Object.create(null);class Z1{getMap(){return y1.empty}merge(Z){return null}static fromJSON(Z,Q){if(!Q||!Q.stepType)throw RangeError("Invalid input for Step.fromJSON");let J=lQ[Q.stepType];if(!J)throw RangeError(`No step type ${Q.stepType} defined`);return J.fromJSON(Z,Q)}static jsonID(Z,Q){if(Z in lQ)throw RangeError("Duplicate use of step JSON ID "+Z);return lQ[Z]=Q,Q.prototype.jsonID=Z,Q}}class l0{constructor(Z,Q){this.doc=Z,this.failed=Q}static ok(Z){return new l0(Z,null)}static fail(Z){return new l0(null,Z)}static fromReplace(Z,Q,J,X){try{return l0.ok(Z.replace(Q,J,X))}catch(Y){if(Y instanceof M6)return l0.fail(Y.message);throw Y}}}function rQ(Z,Q,J){let X=[];for(let Y=0;Y<Z.childCount;Y++){let q=Z.child(Y);if(q.content.size)q=q.copy(rQ(q.content,Q,q));if(q.isInline)q=Q(q,J,Y);X.push(q)}return x.fromArray(X)}class U5 extends Z1{constructor(Z,Q,J){super();this.from=Z,this.to=Q,this.mark=J}apply(Z){let Q=Z.slice(this.from,this.to),J=Z.resolve(this.from),X=J.node(J.sharedDepth(this.to)),Y=new h(rQ(Q.content,(q,G)=>{if(!q.isAtom||!G.type.allowsMarkType(this.mark.type))return q;return q.mark(this.mark.addToSet(q.marks))},X),Q.openStart,Q.openEnd);return l0.fromReplace(Z,this.from,this.to,Y)}invert(){return new K5(this.from,this.to,this.mark)}map(Z){let Q=Z.mapResult(this.from,1),J=Z.mapResult(this.to,-1);if(Q.deleted&&J.deleted||Q.pos>=J.pos)return null;return new U5(Q.pos,J.pos,this.mark)}merge(Z){if(Z instanceof U5&&Z.mark.eq(this.mark)&&this.from<=Z.to&&this.to>=Z.from)return new U5(Math.min(this.from,Z.from),Math.max(this.to,Z.to),this.mark);return null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(Z,Q){if(typeof Q.from!="number"||typeof Q.to!="number")throw RangeError("Invalid input for AddMarkStep.fromJSON");return new U5(Q.from,Q.to,Z.markFromJSON(Q.mark))}}Z1.jsonID("addMark",U5);class K5 extends Z1{constructor(Z,Q,J){super();this.from=Z,this.to=Q,this.mark=J}apply(Z){let Q=Z.slice(this.from,this.to),J=new h(rQ(Q.content,(X)=>{return X.mark(this.mark.removeFromSet(X.marks))},Z),Q.openStart,Q.openEnd);return l0.fromReplace(Z,this.from,this.to,J)}invert(){return new U5(this.from,this.to,this.mark)}map(Z){let Q=Z.mapResult(this.from,1),J=Z.mapResult(this.to,-1);if(Q.deleted&&J.deleted||Q.pos>=J.pos)return null;return new K5(Q.pos,J.pos,this.mark)}merge(Z){if(Z instanceof K5&&Z.mark.eq(this.mark)&&this.from<=Z.to&&this.to>=Z.from)return new K5(Math.min(this.from,Z.from),Math.max(this.to,Z.to),this.mark);return null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(Z,Q){if(typeof Q.from!="number"||typeof Q.to!="number")throw RangeError("Invalid input for RemoveMarkStep.fromJSON");return new K5(Q.from,Q.to,Z.markFromJSON(Q.mark))}}Z1.jsonID("removeMark",K5);class o5 extends Z1{constructor(Z,Q){super();this.pos=Z,this.mark=Q}apply(Z){let Q=Z.nodeAt(this.pos);if(!Q)return l0.fail("No node at mark step's position");let J=Q.type.create(Q.attrs,null,this.mark.addToSet(Q.marks));return l0.fromReplace(Z,this.pos,this.pos+1,new h(x.from(J),0,Q.isLeaf?0:1))}invert(Z){let Q=Z.nodeAt(this.pos);if(Q){let J=this.mark.addToSet(Q.marks);if(J.length==Q.marks.length){for(let X=0;X<Q.marks.length;X++)if(!Q.marks[X].isInSet(J))return new o5(this.pos,Q.marks[X]);return new o5(this.pos,this.mark)}}return new f4(this.pos,this.mark)}map(Z){let Q=Z.mapResult(this.pos,1);return Q.deletedAfter?null:new o5(Q.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(Z,Q){if(typeof Q.pos!="number")throw RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new o5(Q.pos,Z.markFromJSON(Q.mark))}}Z1.jsonID("addNodeMark",o5);class f4 extends Z1{constructor(Z,Q){super();this.pos=Z,this.mark=Q}apply(Z){let Q=Z.nodeAt(this.pos);if(!Q)return l0.fail("No node at mark step's position");let J=Q.type.create(Q.attrs,null,this.mark.removeFromSet(Q.marks));return l0.fromReplace(Z,this.pos,this.pos+1,new h(x.from(J),0,Q.isLeaf?0:1))}invert(Z){let Q=Z.nodeAt(this.pos);if(!Q||!this.mark.isInSet(Q.marks))return this;return new o5(this.pos,this.mark)}map(Z){let Q=Z.mapResult(this.pos,1);return Q.deletedAfter?null:new f4(Q.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(Z,Q){if(typeof Q.pos!="number")throw RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new f4(Q.pos,Z.markFromJSON(Q.mark))}}Z1.jsonID("removeNodeMark",f4);class u0 extends Z1{constructor(Z,Q,J,X=!1){super();this.from=Z,this.to=Q,this.slice=J,this.structure=X}apply(Z){if(this.structure&&cQ(Z,this.from,this.to))return l0.fail("Structure replace would overwrite content");return l0.fromReplace(Z,this.from,this.to,this.slice)}getMap(){return new y1([this.from,this.to-this.from,this.slice.size])}invert(Z){return new u0(this.from,this.from+this.slice.size,Z.slice(this.from,this.to))}map(Z){let Q=Z.mapResult(this.from,1),J=Z.mapResult(this.to,-1);if(Q.deletedAcross&&J.deletedAcross)return null;return new u0(Q.pos,Math.max(Q.pos,J.pos),this.slice,this.structure)}merge(Z){if(!(Z instanceof u0)||Z.structure||this.structure)return null;if(this.from+this.slice.size==Z.from&&!this.slice.openEnd&&!Z.slice.openStart){let Q=this.slice.size+Z.slice.size==0?h.empty:new h(this.slice.content.append(Z.slice.content),this.slice.openStart,Z.slice.openEnd);return new u0(this.from,this.to+(Z.to-Z.from),Q,this.structure)}else if(Z.to==this.from&&!this.slice.openStart&&!Z.slice.openEnd){let Q=this.slice.size+Z.slice.size==0?h.empty:new h(Z.slice.content.append(this.slice.content),Z.slice.openStart,this.slice.openEnd);return new u0(Z.from,this.to,Q,this.structure)}else return null}toJSON(){let Z={stepType:"replace",from:this.from,to:this.to};if(this.slice.size)Z.slice=this.slice.toJSON();if(this.structure)Z.structure=!0;return Z}static fromJSON(Z,Q){if(typeof Q.from!="number"||typeof Q.to!="number")throw RangeError("Invalid input for ReplaceStep.fromJSON");return new u0(Q.from,Q.to,h.fromJSON(Z,Q.slice),!!Q.structure)}}Z1.jsonID("replace",u0);class n0 extends Z1{constructor(Z,Q,J,X,Y,q,G=!1){super();this.from=Z,this.to=Q,this.gapFrom=J,this.gapTo=X,this.slice=Y,this.insert=q,this.structure=G}apply(Z){if(this.structure&&(cQ(Z,this.from,this.gapFrom)||cQ(Z,this.gapTo,this.to)))return l0.fail("Structure gap-replace would overwrite content");let Q=Z.slice(this.gapFrom,this.gapTo);if(Q.openStart||Q.openEnd)return l0.fail("Gap is not a flat range");let J=this.slice.insertAt(this.insert,Q.content);if(!J)return l0.fail("Content does not fit in gap");return l0.fromReplace(Z,this.from,this.to,J)}getMap(){return new y1([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(Z){let Q=this.gapTo-this.gapFrom;return new n0(this.from,this.from+this.slice.size+Q,this.from+this.insert,this.from+this.insert+Q,Z.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(Z){let Q=Z.mapResult(this.from,1),J=Z.mapResult(this.to,-1),X=this.from==this.gapFrom?Q.pos:Z.map(this.gapFrom,-1),Y=this.to==this.gapTo?J.pos:Z.map(this.gapTo,1);if(Q.deletedAcross&&J.deletedAcross||X<Q.pos||Y>J.pos)return null;return new n0(Q.pos,J.pos,X,Y,this.slice,this.insert,this.structure)}toJSON(){let Z={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};if(this.slice.size)Z.slice=this.slice.toJSON();if(this.structure)Z.structure=!0;return Z}static fromJSON(Z,Q){if(typeof Q.from!="number"||typeof Q.to!="number"||typeof Q.gapFrom!="number"||typeof Q.gapTo!="number"||typeof Q.insert!="number")throw RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new n0(Q.from,Q.to,Q.gapFrom,Q.gapTo,h.fromJSON(Z,Q.slice),Q.insert,!!Q.structure)}}Z1.jsonID("replaceAround",n0);function cQ(Z,Q,J){let X=Z.resolve(Q),Y=J-Q,q=X.depth;while(Y>0&&q>0&&X.indexAfter(q)==X.node(q).childCount)q--,Y--;if(Y>0){let G=X.node(q).maybeChild(X.indexAfter(q));while(Y>0){if(!G||G.isLeaf)return!0;G=G.firstChild,Y--}}return!1}function AN(Z,Q,J,X){let Y=[],q=[],G,U;Z.doc.nodesBetween(Q,J,(K,H,W)=>{if(!K.isInline)return;let z=K.marks;if(!X.isInSet(z)&&W.type.allowsMarkType(X.type)){let F=Math.max(H,Q),B=Math.min(H+K.nodeSize,J),V=X.addToSet(z);for(let O=0;O<z.length;O++)if(!z[O].isInSet(V))if(G&&G.to==F&&G.mark.eq(z[O]))G.to=B;else Y.push(G=new K5(F,B,z[O]));if(U&&U.to==F)U.to=B;else q.push(U=new U5(F,B,X))}}),Y.forEach((K)=>Z.step(K)),q.forEach((K)=>Z.step(K))}function PN(Z,Q,J,X){let Y=[],q=0;Z.doc.nodesBetween(Q,J,(G,U)=>{if(!G.isInline)return;q++;let K=null;if(X instanceof l2){let H=G.marks,W;while(W=X.isInSet(H))(K||(K=[])).push(W),H=W.removeFromSet(H)}else if(X){if(X.isInSet(G.marks))K=[X]}else K=G.marks;if(K&&K.length){let H=Math.min(U+G.nodeSize,J);for(let W=0;W<K.length;W++){let z=K[W],F;for(let B=0;B<Y.length;B++){let V=Y[B];if(V.step==q-1&&z.eq(Y[B].style))F=V}if(F)F.to=H,F.step=q;else Y.push({style:z,from:Math.max(U,Q),to:H,step:q})}}}),Y.forEach((G)=>Z.step(new K5(G.from,G.to,G.style)))}function aQ(Z,Q,J,X=J.contentMatch,Y=!0){let q=Z.doc.nodeAt(Q),G=[],U=Q+1;for(let K=0;K<q.childCount;K++){let H=q.child(K),W=U+H.nodeSize,z=X.matchType(H.type);if(!z)G.push(new u0(U,W,h.empty));else{X=z;for(let F=0;F<H.marks.length;F++)if(!J.allowsMarkType(H.marks[F].type))Z.step(new K5(U,W,H.marks[F]));if(Y&&H.isText&&J.whitespace!="pre"){let F,B=/\r?\n|\r/g,V;while(F=B.exec(H.text)){if(!V)V=new h(x.from(J.schema.text(" ",J.allowedMarks(H.marks))),0,0);G.push(new u0(U+F.index,U+F.index+F[0].length,V))}}}U=W}if(!X.validEnd){let K=X.fillBefore(x.empty,!0);Z.replace(U,U,new h(K,0,0))}for(let K=G.length-1;K>=0;K--)Z.step(G[K])}function RN(Z,Q,J){return(Q==0||Z.canReplace(Q,Z.childCount))&&(J==Z.childCount||Z.canReplace(0,J))}function v6(Z){let J=Z.parent.content.cutByIndex(Z.startIndex,Z.endIndex);for(let X=Z.depth,Y=0,q=0;;--X){let G=Z.$from.node(X),U=Z.$from.index(X)+Y,K=Z.$to.indexAfter(X)-q;if(X<Z.depth&&G.canReplace(U,K,J))return X;if(X==0||G.type.spec.isolating||!RN(G,U,K))break;if(U)Y=1;if(K<G.childCount)q=1}return null}function MN(Z,Q,J){let{$from:X,$to:Y,depth:q}=Q,G=X.before(q+1),U=Y.after(q+1),K=G,H=U,W=x.empty,z=0;for(let V=q,O=!1;V>J;V--)if(O||X.index(V)>0)O=!0,W=x.from(X.node(V).copy(W)),z++;else K--;let F=x.empty,B=0;for(let V=q,O=!1;V>J;V--)if(O||Y.after(V+1)<Y.end(V))O=!0,F=x.from(Y.node(V).copy(F)),B++;else H++;Z.step(new n0(K,H,G,U,new h(W.append(F),z,B),W.size-z,!0))}function m4(Z,Q,J=null,X=Z){let Y=DN(Z,Q),q=Y&&IN(X,Q);if(!q)return null;return Y.map(bK).concat({type:Q,attrs:J}).concat(q.map(bK))}function bK(Z){return{type:Z,attrs:null}}function DN(Z,Q){let{parent:J,startIndex:X,endIndex:Y}=Z,q=J.contentMatchAt(X).findWrapping(Q);if(!q)return null;let G=q.length?q[0]:Q;return J.canReplaceWith(X,Y,G)?q:null}function IN(Z,Q){let{parent:J,startIndex:X,endIndex:Y}=Z,q=J.child(X),G=Q.contentMatch.findWrapping(q.type);if(!G)return null;let K=(G.length?G[G.length-1]:Q).contentMatch;for(let H=X;K&&H<Y;H++)K=K.matchType(J.child(H).type);if(!K||!K.validEnd)return null;return G}function EN(Z,Q,J){let X=x.empty;for(let G=J.length-1;G>=0;G--){if(X.size){let U=J[G].type.contentMatch.matchFragment(X);if(!U||!U.validEnd)throw RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}X=x.from(J[G].type.create(J[G].attrs,X))}let{start:Y,end:q}=Q;Z.step(new n0(Y,q,Y,q,new h(X,0,0),J.length,!0))}function TN(Z,Q,J,X,Y){if(!X.isTextblock)throw RangeError("Type given to setBlockType should be a textblock");let q=Z.steps.length;Z.doc.nodesBetween(Q,J,(G,U)=>{let K=typeof Y=="function"?Y(G):Y;if(G.isTextblock&&!G.hasMarkup(X,K)&&$N(Z.doc,Z.mapping.slice(q).map(U),X)){let H=null;if(X.schema.linebreakReplacement){let B=X.whitespace=="pre",V=!!X.contentMatch.matchType(X.schema.linebreakReplacement);if(B&&!V)H=!1;else if(!B&&V)H=!0}if(H===!1)gK(Z,G,U,q);aQ(Z,Z.mapping.slice(q).map(U,1),X,void 0,H===null);let W=Z.mapping.slice(q),z=W.map(U,1),F=W.map(U+G.nodeSize,1);if(Z.step(new n0(z,F,z+1,F-1,new h(x.from(X.create(K,null,G.marks)),0,0),1,!0)),H===!0)kK(Z,G,U,q);return!1}})}function kK(Z,Q,J,X){Q.forEach((Y,q)=>{if(Y.isText){let G,U=/\r?\n|\r/g;while(G=U.exec(Y.text)){let K=Z.mapping.slice(X).map(J+1+q+G.index);Z.replaceWith(K,K+1,Q.type.schema.linebreakReplacement.create())}}})}function gK(Z,Q,J,X){Q.forEach((Y,q)=>{if(Y.type==Y.type.schema.linebreakReplacement){let G=Z.mapping.slice(X).map(J+1+q);Z.replaceWith(G,G+1,Q.type.schema.text(`
`))}})}function $N(Z,Q,J){let X=Z.resolve(Q),Y=X.index();return X.parent.canReplaceWith(Y,Y+1,J)}function bN(Z,Q,J,X,Y){let q=Z.doc.nodeAt(Q);if(!q)throw RangeError("No node at given position");if(!J)J=q.type;let G=J.create(X,null,Y||q.marks);if(q.isLeaf)return Z.replaceWith(Q,Q+q.nodeSize,G);if(!J.validContent(q.content))throw RangeError("Invalid content for node type "+J.name);Z.step(new n0(Q,Q+q.nodeSize,Q+1,Q+q.nodeSize-1,new h(x.from(G),0,0),1,!0))}function p4(Z,Q,J=1,X){let Y=Z.resolve(Q),q=Y.depth-J,G=X&&X[X.length-1]||Y.parent;if(q<0||Y.parent.type.spec.isolating||!Y.parent.canReplace(Y.index(),Y.parent.childCount)||!G.type.validContent(Y.parent.content.cutByIndex(Y.index(),Y.parent.childCount)))return!1;for(let H=Y.depth-1,W=J-2;H>q;H--,W--){let z=Y.node(H),F=Y.index(H);if(z.type.spec.isolating)return!1;let B=z.content.cutByIndex(F,z.childCount),V=X&&X[W+1];if(V)B=B.replaceChild(0,V.type.create(V.attrs));let O=X&&X[W]||z;if(!z.canReplace(F+1,z.childCount)||!O.type.validContent(B))return!1}let U=Y.indexAfter(q),K=X&&X[0];return Y.node(q).canReplaceWith(U,U,K?K.type:Y.node(q+1).type)}function CN(Z,Q,J=1,X){let Y=Z.doc.resolve(Q),q=x.empty,G=x.empty;for(let U=Y.depth,K=Y.depth-J,H=J-1;U>K;U--,H--){q=x.from(Y.node(U).copy(q));let W=X&&X[H];G=x.from(W?W.type.create(W.attrs,G):Y.node(U).copy(G))}Z.step(new u0(Q,Q,new h(q.append(G),J,J),!0))}function l4(Z,Q){let J=Z.resolve(Q),X=J.index();return SN(J.nodeBefore,J.nodeAfter)&&J.parent.canReplace(X,X+1)}function yN(Z,Q){if(!Q.content.size)Z.type.compatibleContent(Q.type);let J=Z.contentMatchAt(Z.childCount),{linebreakReplacement:X}=Z.type.schema;for(let Y=0;Y<Q.childCount;Y++){let q=Q.child(Y),G=q.type==X?Z.type.schema.nodes.text:q.type;if(J=J.matchType(G),!J)return!1;if(!Z.type.allowsMarks(q.marks))return!1}return J.validEnd}function SN(Z,Q){return!!(Z&&Q&&!Z.isLeaf&&yN(Z,Q))}function wN(Z,Q,J){let X=null,{linebreakReplacement:Y}=Z.doc.type.schema,q=Z.doc.resolve(Q-J),G=q.node().type;if(Y&&G.inlineContent){let W=G.whitespace=="pre",z=!!G.contentMatch.matchType(Y);if(W&&!z)X=!1;else if(!W&&z)X=!0}let U=Z.steps.length;if(X===!1){let W=Z.doc.resolve(Q+J);gK(Z,W.node(),W.before(),U)}if(G.inlineContent)aQ(Z,Q+J-1,G,q.node().contentMatchAt(q.index()),X==null);let K=Z.mapping.slice(U),H=K.map(Q-J);if(Z.step(new u0(H,K.map(Q+J,-1),h.empty,!0)),X===!0){let W=Z.doc.resolve(H);kK(Z,W.node(),W.before(),Z.steps.length)}return Z}function xN(Z,Q,J){let X=Z.resolve(Q);if(X.parent.canReplaceWith(X.index(),X.index(),J))return Q;if(X.parentOffset==0)for(let Y=X.depth-1;Y>=0;Y--){let q=X.index(Y);if(X.node(Y).canReplaceWith(q,q,J))return X.before(Y+1);if(q>0)return null}if(X.parentOffset==X.parent.content.size)for(let Y=X.depth-1;Y>=0;Y--){let q=X.indexAfter(Y);if(X.node(Y).canReplaceWith(q,q,J))return X.after(Y+1);if(q<X.node(Y).childCount)return null}return null}function vK(Z,Q,J){let X=Z.resolve(Q);if(!J.content.size)return Q;let Y=J.content;for(let q=0;q<J.openStart;q++)Y=Y.firstChild.content;for(let q=1;q<=(J.openStart==0&&J.size?2:1);q++)for(let G=X.depth;G>=0;G--){let U=G==X.depth?0:X.pos<=(X.start(G+1)+X.end(G+1))/2?-1:1,K=X.index(G)+(U>0?1:0),H=X.node(G),W=!1;if(q==1)W=H.canReplace(K,K,Y);else{let z=H.contentMatchAt(K).findWrapping(Y.firstChild.type);W=z&&H.canReplaceWith(K,K,z[0])}if(W)return U==0?X.pos:U<0?X.before(G+1):X.after(G+1)}return null}function H8(Z,Q,J=Q,X=h.empty){if(Q==J&&!X.size)return null;let Y=Z.resolve(Q),q=Z.resolve(J);if(hK(Y,q,X))return new u0(Q,J,X);return new uK(Y,q,X).fit()}function hK(Z,Q,J){return!J.openStart&&!J.openEnd&&Z.start()==Q.start()&&Z.parent.canReplace(Z.index(),Q.index(),J.content)}class uK{constructor(Z,Q,J){this.$from=Z,this.$to=Q,this.unplaced=J,this.frontier=[],this.placed=x.empty;for(let X=0;X<=Z.depth;X++){let Y=Z.node(X);this.frontier.push({type:Y.type,match:Y.contentMatchAt(Z.indexAfter(X))})}for(let X=Z.depth;X>0;X--)this.placed=x.from(Z.node(X).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){while(this.unplaced.size){let K=this.findFittable();if(K)this.placeNodes(K);else this.openMore()||this.dropNode()}let Z=this.mustMoveInline(),Q=this.placed.size-this.depth-this.$from.depth,J=this.$from,X=this.close(Z<0?this.$to:J.doc.resolve(Z));if(!X)return null;let Y=this.placed,q=J.depth,G=X.depth;while(q&&G&&Y.childCount==1)Y=Y.firstChild.content,q--,G--;let U=new h(Y,q,G);if(Z>-1)return new n0(J.pos,Z,this.$to.pos,this.$to.end(),U,Q);if(U.size||J.pos!=this.$to.pos)return new u0(J.pos,X.pos,U);return null}findFittable(){let Z=this.unplaced.openStart;for(let Q=this.unplaced.content,J=0,X=this.unplaced.openEnd;J<Z;J++){let Y=Q.firstChild;if(Q.childCount>1)X=0;if(Y.type.spec.isolating&&X<=J){Z=J;break}Q=Y.content}for(let Q=1;Q<=2;Q++)for(let J=Q==1?Z:this.unplaced.openStart;J>=0;J--){let X,Y=null;if(J)Y=iQ(this.unplaced.content,J-1).firstChild,X=Y.content;else X=this.unplaced.content;let q=X.firstChild;for(let G=this.depth;G>=0;G--){let{type:U,match:K}=this.frontier[G],H,W=null;if(Q==1&&(q?K.matchType(q.type)||(W=K.fillBefore(x.from(q),!1)):Y&&U.compatibleContent(Y.type)))return{sliceDepth:J,frontierDepth:G,parent:Y,inject:W};else if(Q==2&&q&&(H=K.findWrapping(q.type)))return{sliceDepth:J,frontierDepth:G,parent:Y,wrap:H};if(Y&&K.matchType(Y.type))break}}}openMore(){let{content:Z,openStart:Q,openEnd:J}=this.unplaced,X=iQ(Z,Q);if(!X.childCount||X.firstChild.isLeaf)return!1;return this.unplaced=new h(Z,Q+1,Math.max(J,X.size+Q>=Z.size-J?Q+1:0)),!0}dropNode(){let{content:Z,openStart:Q,openEnd:J}=this.unplaced,X=iQ(Z,Q);if(X.childCount<=1&&Q>0){let Y=Z.size-Q<=Q+X.size;this.unplaced=new h(G8(Z,Q-1,1),Q-1,Y?Q-1:J)}else this.unplaced=new h(G8(Z,Q,1),Q,J)}placeNodes({sliceDepth:Z,frontierDepth:Q,parent:J,inject:X,wrap:Y}){while(this.depth>Q)this.closeFrontierNode();if(Y)for(let V=0;V<Y.length;V++)this.openFrontierNode(Y[V]);let q=this.unplaced,G=J?J.content:q.content,U=q.openStart-Z,K=0,H=[],{match:W,type:z}=this.frontier[Q];if(X){for(let V=0;V<X.childCount;V++)H.push(X.child(V));W=W.matchFragment(X)}let F=G.size+Z-(q.content.size-q.openEnd);while(K<G.childCount){let V=G.child(K),O=W.matchType(V.type);if(!O)break;if(K++,K>1||U==0||V.content.size)W=O,H.push(fK(V.mark(z.allowedMarks(V.marks)),K==1?U:0,K==G.childCount?F:-1))}let B=K==G.childCount;if(!B)F=-1;if(this.placed=U8(this.placed,Q,x.from(H)),this.frontier[Q].match=W,B&&F<0&&J&&J.type==this.frontier[this.depth].type&&this.frontier.length>1)this.closeFrontierNode();for(let V=0,O=G;V<F;V++){let N=O.lastChild;this.frontier.push({type:N.type,match:N.contentMatchAt(N.childCount)}),O=N.content}this.unplaced=!B?new h(G8(q.content,Z,K),q.openStart,q.openEnd):Z==0?h.empty:new h(G8(q.content,Z-1,1),Z-1,F<0?q.openEnd:Z-1)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let Z=this.frontier[this.depth],Q;if(!Z.type.isTextblock||!dQ(this.$to,this.$to.depth,Z.type,Z.match,!1)||this.$to.depth==this.depth&&(Q=this.findCloseLevel(this.$to))&&Q.depth==this.depth)return-1;let{depth:J}=this.$to,X=this.$to.after(J);while(J>1&&X==this.$to.end(--J))++X;return X}findCloseLevel(Z){Z:for(let Q=Math.min(this.depth,Z.depth);Q>=0;Q--){let{match:J,type:X}=this.frontier[Q],Y=Q<Z.depth&&Z.end(Q+1)==Z.pos+(Z.depth-(Q+1)),q=dQ(Z,Q,X,J,Y);if(!q)continue;for(let G=Q-1;G>=0;G--){let{match:U,type:K}=this.frontier[G],H=dQ(Z,G,K,U,!0);if(!H||H.childCount)continue Z}return{depth:Q,fit:q,move:Y?Z.doc.resolve(Z.after(Q+1)):Z}}}close(Z){let Q=this.findCloseLevel(Z);if(!Q)return null;while(this.depth>Q.depth)this.closeFrontierNode();if(Q.fit.childCount)this.placed=U8(this.placed,Q.depth,Q.fit);Z=Q.move;for(let J=Q.depth+1;J<=Z.depth;J++){let X=Z.node(J),Y=X.type.contentMatch.fillBefore(X.content,!0,Z.index(J));this.openFrontierNode(X.type,X.attrs,Y)}return Z}openFrontierNode(Z,Q=null,J){let X=this.frontier[this.depth];X.match=X.match.matchType(Z),this.placed=U8(this.placed,this.depth,x.from(Z.create(Q,J))),this.frontier.push({type:Z,match:Z.contentMatch})}closeFrontierNode(){let Q=this.frontier.pop().match.fillBefore(x.empty,!0);if(Q.childCount)this.placed=U8(this.placed,this.frontier.length,Q)}}function G8(Z,Q,J){if(Q==0)return Z.cutByIndex(J,Z.childCount);return Z.replaceChild(0,Z.firstChild.copy(G8(Z.firstChild.content,Q-1,J)))}function U8(Z,Q,J){if(Q==0)return Z.append(J);return Z.replaceChild(Z.childCount-1,Z.lastChild.copy(U8(Z.lastChild.content,Q-1,J)))}function iQ(Z,Q){for(let J=0;J<Q;J++)Z=Z.firstChild.content;return Z}function fK(Z,Q,J){if(Q<=0)return Z;let X=Z.content;if(Q>1)X=X.replaceChild(0,fK(X.firstChild,Q-1,X.childCount==1?J-1:0));if(Q>0){if(X=Z.type.contentMatch.fillBefore(X).append(X),J<=0)X=X.append(Z.type.contentMatch.matchFragment(X).fillBefore(x.empty,!0))}return Z.copy(X)}function dQ(Z,Q,J,X,Y){let q=Z.node(Q),G=Y?Z.indexAfter(Q):Z.index(Q);if(G==q.childCount&&!J.compatibleContent(q.type))return null;let U=X.fillBefore(q.content,!0,G);return U&&!kN(J,q.content,G)?U:null}function kN(Z,Q,J){for(let X=J;X<Q.childCount;X++)if(!Z.allowsMarks(Q.child(X).marks))return!0;return!1}function gN(Z){return Z.spec.defining||Z.spec.definingForContent}function vN(Z,Q,J,X){if(!X.size)return Z.deleteRange(Q,J);let Y=Z.doc.resolve(Q),q=Z.doc.resolve(J);if(hK(Y,q,X))return Z.step(new u0(Q,J,X));let G=pK(Y,q);if(G[G.length-1]==0)G.pop();let U=-(Y.depth+1);G.unshift(U);for(let F=Y.depth,B=Y.pos-1;F>0;F--,B--){let V=Y.node(F).type.spec;if(V.defining||V.definingAsContext||V.isolating)break;if(G.indexOf(F)>-1)U=F;else if(Y.before(F)==B)G.splice(1,0,-F)}let K=G.indexOf(U),H=[],W=X.openStart;for(let F=X.content,B=0;;B++){let V=F.firstChild;if(H.push(V),B==X.openStart)break;F=V.content}for(let F=W-1;F>=0;F--){let B=H[F],V=gN(B.type);if(V&&!B.sameMarkup(Y.node(Math.abs(U)-1)))W=F;else if(V||!B.type.isTextblock)break}for(let F=X.openStart;F>=0;F--){let B=(F+W+1)%(X.openStart+1),V=H[B];if(!V)continue;for(let O=0;O<G.length;O++){let N=G[(O+K)%G.length],j=!0;if(N<0)j=!1,N=-N;let R=Y.node(N-1),E=Y.index(N-1);if(R.canReplaceWith(E,E,V.type,V.marks))return Z.replace(Y.before(N),j?q.after(N):J,new h(mK(X.content,0,X.openStart,B),B,X.openEnd))}}let z=Z.steps.length;for(let F=G.length-1;F>=0;F--){if(Z.replace(Q,J,X),Z.steps.length>z)break;let B=G[F];if(B<0)continue;Q=Y.before(B),J=q.after(B)}}function mK(Z,Q,J,X,Y){if(Q<J){let q=Z.firstChild;Z=Z.replaceChild(0,q.copy(mK(q.content,Q+1,J,X,q)))}if(Q>X){let q=Y.contentMatchAt(0),G=q.fillBefore(Z).append(Z);Z=G.append(q.matchFragment(G).fillBefore(x.empty,!0))}return Z}function hN(Z,Q,J,X){if(!X.isInline&&Q==J&&Z.doc.resolve(Q).parent.content.size){let Y=xN(Z.doc,Q,X.type);if(Y!=null)Q=J=Y}Z.replaceRange(Q,J,new h(x.from(X),0,0))}function uN(Z,Q,J){let X=Z.doc.resolve(Q),Y=Z.doc.resolve(J),q=pK(X,Y);for(let G=0;G<q.length;G++){let U=q[G],K=G==q.length-1;if(K&&U==0||X.node(U).type.contentMatch.validEnd)return Z.delete(X.start(U),Y.end(U));if(U>0&&(K||X.node(U-1).canReplace(X.index(U-1),Y.indexAfter(U-1))))return Z.delete(X.before(U),Y.after(U))}for(let G=1;G<=X.depth&&G<=Y.depth;G++)if(Q-X.start(G)==X.depth-G&&J>X.end(G)&&Y.end(G)-J!=Y.depth-G&&X.start(G-1)==Y.start(G-1)&&X.node(G-1).canReplace(X.index(G-1),Y.index(G-1)))return Z.delete(X.before(G),J);Z.delete(Q,J)}function pK(Z,Q){let J=[],X=Math.min(Z.depth,Q.depth);for(let Y=X;Y>=0;Y--){let q=Z.start(Y);if(q<Z.pos-(Z.depth-Y)||Q.end(Y)>Q.pos+(Q.depth-Y)||Z.node(Y).type.spec.isolating||Q.node(Y).type.spec.isolating)break;if(q==Q.start(Y)||Y==Z.depth&&Y==Q.depth&&Z.parent.inlineContent&&Q.parent.inlineContent&&Y&&Q.start(Y-1)==q-1)J.push(Y)}return J}class k6 extends Z1{constructor(Z,Q,J){super();this.pos=Z,this.attr=Q,this.value=J}apply(Z){let Q=Z.nodeAt(this.pos);if(!Q)return l0.fail("No node at attribute step's position");let J=Object.create(null);for(let Y in Q.attrs)J[Y]=Q.attrs[Y];J[this.attr]=this.value;let X=Q.type.create(J,null,Q.marks);return l0.fromReplace(Z,this.pos,this.pos+1,new h(x.from(X),0,Q.isLeaf?0:1))}getMap(){return y1.empty}invert(Z){return new k6(this.pos,this.attr,Z.nodeAt(this.pos).attrs[this.attr])}map(Z){let Q=Z.mapResult(this.pos,1);return Q.deletedAfter?null:new k6(Q.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(Z,Q){if(typeof Q.pos!="number"||typeof Q.attr!="string")throw RangeError("Invalid input for AttrStep.fromJSON");return new k6(Q.pos,Q.attr,Q.value)}}Z1.jsonID("attr",k6);class K8 extends Z1{constructor(Z,Q){super();this.attr=Z,this.value=Q}apply(Z){let Q=Object.create(null);for(let X in Z.attrs)Q[X]=Z.attrs[X];Q[this.attr]=this.value;let J=Z.type.create(Q,Z.content,Z.marks);return l0.ok(J)}getMap(){return y1.empty}invert(Z){return new K8(this.attr,Z.attrs[this.attr])}map(Z){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(Z,Q){if(typeof Q.attr!="string")throw RangeError("Invalid input for DocAttrStep.fromJSON");return new K8(Q.attr,Q.value)}}Z1.jsonID("docAttr",K8);var g6=class extends Error{};g6=function Z(Q){let J=Error.call(this,Q);return J.__proto__=Z.prototype,J};g6.prototype=Object.create(Error.prototype);g6.prototype.constructor=g6;g6.prototype.name="TransformError";class W8{constructor(Z){this.doc=Z,this.steps=[],this.docs=[],this.mapping=new q9}get before(){return this.docs.length?this.docs[0]:this.doc}step(Z){let Q=this.maybeStep(Z);if(Q.failed)throw new g6(Q.failed);return this}maybeStep(Z){let Q=Z.apply(this.doc);if(!Q.failed)this.addStep(Z,Q.doc);return Q}get docChanged(){return this.steps.length>0}addStep(Z,Q){this.docs.push(this.doc),this.steps.push(Z),this.mapping.appendMap(Z.getMap()),this.doc=Q}replace(Z,Q=Z,J=h.empty){let X=H8(this.doc,Z,Q,J);if(X)this.step(X);return this}replaceWith(Z,Q,J){return this.replace(Z,Q,new h(x.from(J),0,0))}delete(Z,Q){return this.replace(Z,Q,h.empty)}insert(Z,Q){return this.replaceWith(Z,Z,Q)}replaceRange(Z,Q,J){return vN(this,Z,Q,J),this}replaceRangeWith(Z,Q,J){return hN(this,Z,Q,J),this}deleteRange(Z,Q){return uN(this,Z,Q),this}lift(Z,Q){return MN(this,Z,Q),this}join(Z,Q=1){return wN(this,Z,Q),this}wrap(Z,Q){return EN(this,Z,Q),this}setBlockType(Z,Q=Z,J,X=null){return TN(this,Z,Q,J,X),this}setNodeMarkup(Z,Q,J=null,X){return bN(this,Z,Q,J,X),this}setNodeAttribute(Z,Q,J){return this.step(new k6(Z,Q,J)),this}setDocAttribute(Z,Q){return this.step(new K8(Z,Q)),this}addNodeMark(Z,Q){return this.step(new o5(Z,Q)),this}removeNodeMark(Z,Q){let J=this.doc.nodeAt(Z);if(!J)throw RangeError("No node at position "+Z);if(Q instanceof K0){if(Q.isInSet(J.marks))this.step(new f4(Z,Q))}else{let X=J.marks,Y,q=[];while(Y=Q.isInSet(X))q.push(new f4(Z,Y)),X=Y.removeFromSet(X);for(let G=q.length-1;G>=0;G--)this.step(q[G])}return this}split(Z,Q=1,J){return CN(this,Z,Q,J),this}addMark(Z,Q,J){return AN(this,Z,Q,J),this}removeMark(Z,Q,J){return PN(this,Z,Q,J),this}clearIncompatible(Z,Q,J){return aQ(this,Z,Q,J),this}}var nQ=Object.create(null);class n{constructor(Z,Q,J){this.$anchor=Z,this.$head=Q,this.ranges=J||[new d4(Z.min(Q),Z.max(Q))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let Z=this.ranges;for(let Q=0;Q<Z.length;Q++)if(Z[Q].$from.pos!=Z[Q].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(Z,Q=h.empty){let J=Q.content.lastChild,X=null;for(let G=0;G<Q.openEnd;G++)X=J,J=J.lastChild;let Y=Z.steps.length,q=this.ranges;for(let G=0;G<q.length;G++){let{$from:U,$to:K}=q[G],H=Z.mapping.slice(Y);if(Z.replaceRange(H.map(U.pos),H.map(K.pos),G?h.empty:Q),G==0)dK(Z,Y,(J?J.isInline:X&&X.isTextblock)?-1:1)}}replaceWith(Z,Q){let J=Z.steps.length,X=this.ranges;for(let Y=0;Y<X.length;Y++){let{$from:q,$to:G}=X[Y],U=Z.mapping.slice(J),K=U.map(q.pos),H=U.map(G.pos);if(Y)Z.deleteRange(K,H);else Z.replaceRangeWith(K,H,Q),dK(Z,J,Q.isInline?-1:1)}}static findFrom(Z,Q,J=!1){let X=Z.parent.inlineContent?new Z0(Z):h6(Z.node(0),Z.parent,Z.pos,Z.index(),Q,J);if(X)return X;for(let Y=Z.depth-1;Y>=0;Y--){let q=Q<0?h6(Z.node(0),Z.node(Y),Z.before(Y+1),Z.index(Y),Q,J):h6(Z.node(0),Z.node(Y),Z.after(Y+1),Z.index(Y)+1,Q,J);if(q)return q}return null}static near(Z,Q=1){return this.findFrom(Z,Q)||this.findFrom(Z,-Q)||new L1(Z.node(0))}static atStart(Z){return h6(Z,Z,0,0,1)||new L1(Z)}static atEnd(Z){return h6(Z,Z,Z.content.size,Z.childCount,-1)||new L1(Z)}static fromJSON(Z,Q){if(!Q||!Q.type)throw RangeError("Invalid input for Selection.fromJSON");let J=nQ[Q.type];if(!J)throw RangeError(`No selection type ${Q.type} defined`);return J.fromJSON(Z,Q)}static jsonID(Z,Q){if(Z in nQ)throw RangeError("Duplicate use of selection JSON ID "+Z);return nQ[Z]=Q,Q.prototype.jsonID=Z,Q}getBookmark(){return Z0.between(this.$anchor,this.$head).getBookmark()}}n.prototype.visible=!0;class d4{constructor(Z,Q){this.$from=Z,this.$to=Q}}var lK=!1;function iK(Z){if(!lK&&!Z.parent.inlineContent)lK=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+Z.parent.type.name+")")}class Z0 extends n{constructor(Z,Q=Z){iK(Z),iK(Q);super(Z,Q)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(Z,Q){let J=Z.resolve(Q.map(this.head));if(!J.parent.inlineContent)return n.near(J);let X=Z.resolve(Q.map(this.anchor));return new Z0(X.parent.inlineContent?X:J,J)}replace(Z,Q=h.empty){if(super.replace(Z,Q),Q==h.empty){let J=this.$from.marksAcross(this.$to);if(J)Z.ensureMarks(J)}}eq(Z){return Z instanceof Z0&&Z.anchor==this.anchor&&Z.head==this.head}getBookmark(){return new K9(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(Z,Q){if(typeof Q.anchor!="number"||typeof Q.head!="number")throw RangeError("Invalid input for TextSelection.fromJSON");return new Z0(Z.resolve(Q.anchor),Z.resolve(Q.head))}static create(Z,Q,J=Q){let X=Z.resolve(Q);return new this(X,J==Q?X:Z.resolve(J))}static between(Z,Q,J){let X=Z.pos-Q.pos;if(!J||X)J=X>=0?1:-1;if(!Q.parent.inlineContent){let Y=n.findFrom(Q,J,!0)||n.findFrom(Q,-J,!0);if(Y)Q=Y.$head;else return n.near(Q,J)}if(!Z.parent.inlineContent){if(X==0)Z=Q;else if(Z=(n.findFrom(Z,-J,!0)||n.findFrom(Z,J,!0)).$anchor,Z.pos<Q.pos!=X<0)Z=Q}return new Z0(Z,Q)}}n.jsonID("text",Z0);class K9{constructor(Z,Q){this.anchor=Z,this.head=Q}map(Z){return new K9(Z.map(this.anchor),Z.map(this.head))}resolve(Z){return Z0.between(Z.resolve(this.anchor),Z.resolve(this.head))}}class s extends n{constructor(Z){let Q=Z.nodeAfter,J=Z.node(0).resolve(Z.pos+Q.nodeSize);super(Z,J);this.node=Q}map(Z,Q){let{deleted:J,pos:X}=Q.mapResult(this.anchor),Y=Z.resolve(X);if(J)return n.near(Y);return new s(Y)}content(){return new h(x.from(this.node),0,0)}eq(Z){return Z instanceof s&&Z.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new oQ(this.anchor)}static fromJSON(Z,Q){if(typeof Q.anchor!="number")throw RangeError("Invalid input for NodeSelection.fromJSON");return new s(Z.resolve(Q.anchor))}static create(Z,Q){return new s(Z.resolve(Q))}static isSelectable(Z){return!Z.isText&&Z.type.spec.selectable!==!1}}s.prototype.visible=!1;n.jsonID("node",s);class oQ{constructor(Z){this.anchor=Z}map(Z){let{deleted:Q,pos:J}=Z.mapResult(this.anchor);return Q?new K9(J,J):new oQ(J)}resolve(Z){let Q=Z.resolve(this.anchor),J=Q.nodeAfter;if(J&&s.isSelectable(J))return new s(Q);return n.near(Q)}}class L1 extends n{constructor(Z){super(Z.resolve(0),Z.resolve(Z.content.size))}replace(Z,Q=h.empty){if(Q==h.empty){Z.delete(0,Z.doc.content.size);let J=n.atStart(Z.doc);if(!J.eq(Z.selection))Z.setSelection(J)}else super.replace(Z,Q)}toJSON(){return{type:"all"}}static fromJSON(Z){return new L1(Z)}map(Z){return new L1(Z)}eq(Z){return Z instanceof L1}getBookmark(){return fN}}n.jsonID("all",L1);var fN={map(){return this},resolve(Z){return new L1(Z)}};function h6(Z,Q,J,X,Y,q=!1){if(Q.inlineContent)return Z0.create(Z,J);for(let G=X-(Y>0?0:1);Y>0?G<Q.childCount:G>=0;G+=Y){let U=Q.child(G);if(!U.isAtom){let K=h6(Z,U,J+Y,Y<0?U.childCount:0,Y,q);if(K)return K}else if(!q&&s.isSelectable(U))return s.create(Z,J-(Y<0?U.nodeSize:0));J+=U.nodeSize*Y}return null}function dK(Z,Q,J){let X=Z.steps.length-1;if(X<Q)return;let Y=Z.steps[X];if(!(Y instanceof u0||Y instanceof n0))return;let q=Z.mapping.maps[X],G;q.forEach((U,K,H,W)=>{if(G==null)G=W}),Z.setSelection(n.near(Z.doc.resolve(G),J))}var cK=1,G9=2,rK=4;class nK extends W8{constructor(Z){super(Z.doc);this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=Z.selection,this.storedMarks=Z.storedMarks}get selection(){if(this.curSelectionFor<this.steps.length)this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length;return this.curSelection}setSelection(Z){if(Z.$from.doc!=this.doc)throw RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=Z,this.curSelectionFor=this.steps.length,this.updated=(this.updated|cK)&~G9,this.storedMarks=null,this}get selectionSet(){return(this.updated&cK)>0}setStoredMarks(Z){return this.storedMarks=Z,this.updated|=G9,this}ensureMarks(Z){if(!K0.sameSet(this.storedMarks||this.selection.$from.marks(),Z))this.setStoredMarks(Z);return this}addStoredMark(Z){return this.ensureMarks(Z.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(Z){return this.ensureMarks(Z.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&G9)>0}addStep(Z,Q){super.addStep(Z,Q),this.updated=this.updated&~G9,this.storedMarks=null}setTime(Z){return this.time=Z,this}replaceSelection(Z){return this.selection.replace(this,Z),this}replaceSelectionWith(Z,Q=!0){let J=this.selection;if(Q)Z=Z.mark(this.storedMarks||(J.empty?J.$from.marks():J.$from.marksAcross(J.$to)||K0.none));return J.replaceWith(this,Z),this}deleteSelection(){return this.selection.replace(this),this}insertText(Z,Q,J){let X=this.doc.type.schema;if(Q==null){if(!Z)return this.deleteSelection();return this.replaceSelectionWith(X.text(Z),!0)}else{if(J==null)J=Q;if(!Z)return this.deleteRange(Q,J);let Y=this.storedMarks;if(!Y){let q=this.doc.resolve(Q);Y=J==Q?q.marks():q.marksAcross(this.doc.resolve(J))}if(this.replaceRangeWith(Q,J,X.text(Z,Y)),!this.selection.empty&&this.selection.to==Q+Z.length)this.setSelection(n.near(this.selection.$to));return this}}setMeta(Z,Q){return this.meta[typeof Z=="string"?Z:Z.key]=Q,this}getMeta(Z){return this.meta[typeof Z=="string"?Z:Z.key]}get isGeneric(){for(let Z in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=rK,this}get scrolledIntoView(){return(this.updated&rK)>0}}function aK(Z,Q){return!Q||!Z?Z:Z.bind(Q)}class u6{constructor(Z,Q,J){this.name=Z,this.init=aK(Q.init,J),this.apply=aK(Q.apply,J)}}var mN=[new u6("doc",{init(Z){return Z.doc||Z.schema.topNodeType.createAndFill()},apply(Z){return Z.doc}}),new u6("selection",{init(Z,Q){return Z.selection||n.atStart(Q.doc)},apply(Z){return Z.selection}}),new u6("storedMarks",{init(Z){return Z.storedMarks||null},apply(Z,Q,J,X){return X.selection.$cursor?Z.storedMarks:null}}),new u6("scrollToSelection",{init(){return 0},apply(Z,Q){return Z.scrolledIntoView?Q+1:Q}})];class U9{constructor(Z,Q){if(this.schema=Z,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=mN.slice(),Q)Q.forEach((J)=>{if(this.pluginsByKey[J.key])throw RangeError("Adding different instances of a keyed plugin ("+J.key+")");if(this.plugins.push(J),this.pluginsByKey[J.key]=J,J.spec.state)this.fields.push(new u6(J.key,J.spec.state,J))})}}class i4{constructor(Z){this.config=Z}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(Z){return this.applyTransaction(Z).state}filterTransaction(Z,Q=-1){for(let J=0;J<this.config.plugins.length;J++)if(J!=Q){let X=this.config.plugins[J];if(X.spec.filterTransaction&&!X.spec.filterTransaction.call(X,Z,this))return!1}return!0}applyTransaction(Z){if(!this.filterTransaction(Z))return{state:this,transactions:[]};let Q=[Z],J=this.applyInner(Z),X=null;for(;;){let Y=!1;for(let q=0;q<this.config.plugins.length;q++){let G=this.config.plugins[q];if(G.spec.appendTransaction){let U=X?X[q].n:0,K=X?X[q].state:this,H=U<Q.length&&G.spec.appendTransaction.call(G,U?Q.slice(U):Q,K,J);if(H&&J.filterTransaction(H,q)){if(H.setMeta("appendedTransaction",Z),!X){X=[];for(let W=0;W<this.config.plugins.length;W++)X.push(W<q?{state:J,n:Q.length}:{state:this,n:0})}Q.push(H),J=J.applyInner(H),Y=!0}if(X)X[q]={state:J,n:Q.length}}}if(!Y)return{state:J,transactions:Q}}}applyInner(Z){if(!Z.before.eq(this.doc))throw RangeError("Applying a mismatched transaction");let Q=new i4(this.config),J=this.config.fields;for(let X=0;X<J.length;X++){let Y=J[X];Q[Y.name]=Y.apply(Z,this[Y.name],this,Q)}return Q}get tr(){return new nK(this)}static create(Z){let Q=new U9(Z.doc?Z.doc.type.schema:Z.schema,Z.plugins),J=new i4(Q);for(let X=0;X<Q.fields.length;X++)J[Q.fields[X].name]=Q.fields[X].init(Z,J);return J}reconfigure(Z){let Q=new U9(this.schema,Z.plugins),J=Q.fields,X=new i4(Q);for(let Y=0;Y<J.length;Y++){let q=J[Y].name;X[q]=this.hasOwnProperty(q)?this[q]:J[Y].init(Z,X)}return X}toJSON(Z){let Q={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks)Q.storedMarks=this.storedMarks.map((J)=>J.toJSON());if(Z&&typeof Z=="object")for(let J in Z){if(J=="doc"||J=="selection")throw RangeError("The JSON fields `doc` and `selection` are reserved");let X=Z[J],Y=X.spec.state;if(Y&&Y.toJSON)Q[J]=Y.toJSON.call(X,this[X.key])}return Q}static fromJSON(Z,Q,J){if(!Q)throw RangeError("Invalid input for EditorState.fromJSON");if(!Z.schema)throw RangeError("Required config field 'schema' missing");let X=new U9(Z.schema,Z.plugins),Y=new i4(X);return X.fields.forEach((q)=>{if(q.name=="doc")Y.doc=B1.fromJSON(Z.schema,Q.doc);else if(q.name=="selection")Y.selection=n.fromJSON(Y.doc,Q.selection);else if(q.name=="storedMarks"){if(Q.storedMarks)Y.storedMarks=Q.storedMarks.map(Z.schema.markFromJSON)}else{if(J)for(let G in J){let U=J[G],K=U.spec.state;if(U.key==q.name&&K&&K.fromJSON&&Object.prototype.hasOwnProperty.call(Q,G)){Y[q.name]=K.fromJSON.call(U,Z,Q[G],Y);return}}Y[q.name]=q.init(Z,Y)}}),Y}}function sK(Z,Q,J){for(let X in Z){let Y=Z[X];if(Y instanceof Function)Y=Y.bind(Q);else if(X=="handleDOMEvents")Y=sK(Y,Q,{});J[X]=Y}return J}class y0{constructor(Z){if(this.spec=Z,this.props={},Z.props)sK(Z.props,this,this.props);this.key=Z.key?Z.key.key:oK("plugin")}getState(Z){return Z[this.key]}}var sQ=Object.create(null);function oK(Z){if(Z in sQ)return Z+"$"+ ++sQ[Z];return sQ[Z]=0,Z+"$"}class k0{constructor(Z="key"){this.key=oK(Z)}get(Z){return Z.config.pluginsByKey[this.key]}getState(Z){return Z[this.key]}}var H9=(Z,Q)=>{if(Z.selection.empty)return!1;if(Q)Q(Z.tr.deleteSelection().scrollIntoView());return!0};function eK(Z,Q){let{$cursor:J}=Z.selection;if(!J||(Q?!Q.endOfTextblock("backward",Z):J.parentOffset>0))return null;return J}var eQ=(Z,Q,J)=>{let X=eK(Z,J);if(!X)return!1;let Y=QJ(X);if(!Y){let G=X.blockRange(),U=G&&v6(G);if(U==null)return!1;if(Q)Q(Z.tr.lift(G,U).scrollIntoView());return!0}let q=Y.nodeBefore;if(JH(Z,Y,Q,-1))return!0;if(X.parent.content.size==0&&(f6(q,"end")||s.isSelectable(q)))for(let G=X.depth;;G--){let U=H8(Z.doc,X.before(G),X.after(G),h.empty);if(U&&U.slice.size<U.to-U.from){if(Q){let K=Z.tr.step(U);K.setSelection(f6(q,"end")?n.findFrom(K.doc.resolve(K.mapping.map(Y.pos,-1)),-1):s.create(K.doc,Y.pos-q.nodeSize)),Q(K.scrollIntoView())}return!0}if(G==1||X.node(G-1).childCount>1)break}if(q.isAtom&&Y.depth==X.depth-1){if(Q)Q(Z.tr.delete(Y.pos-q.nodeSize,Y.pos).scrollIntoView());return!0}return!1},ZH=(Z,Q,J)=>{let X=eK(Z,J);if(!X)return!1;let Y=QJ(X);return Y?pN(Z,Y,Q):!1};function pN(Z,Q,J){let X=Q.nodeBefore,Y=X,q=Q.pos-1;for(;!Y.isTextblock;q--){if(Y.type.spec.isolating)return!1;let W=Y.lastChild;if(!W)return!1;Y=W}let G=Q.nodeAfter,U=G,K=Q.pos+1;for(;!U.isTextblock;K++){if(U.type.spec.isolating)return!1;let W=U.firstChild;if(!W)return!1;U=W}let H=H8(Z.doc,q,K,h.empty);if(!H||H.from!=q||H instanceof u0&&H.slice.size>=K-q)return!1;if(J){let W=Z.tr.step(H);W.setSelection(Z0.create(W.doc,q)),J(W.scrollIntoView())}return!0}function f6(Z,Q,J=!1){for(let X=Z;X;X=Q=="start"?X.firstChild:X.lastChild){if(X.isTextblock)return!0;if(J&&X.childCount!=1)return!1}return!1}var ZJ=(Z,Q,J)=>{let{$head:X,empty:Y}=Z.selection,q=X;if(!Y)return!1;if(X.parent.isTextblock){if(J?!J.endOfTextblock("backward",Z):X.parentOffset>0)return!1;q=QJ(X)}let G=q&&q.nodeBefore;if(!G||!s.isSelectable(G))return!1;if(Q)Q(Z.tr.setSelection(s.create(Z.doc,q.pos-G.nodeSize)).scrollIntoView());return!0};function QJ(Z){if(!Z.parent.type.spec.isolating)for(let Q=Z.depth-1;Q>=0;Q--){if(Z.index(Q)>0)return Z.doc.resolve(Z.before(Q+1));if(Z.node(Q).type.spec.isolating)break}return null}function lN(Z,Q){let{$cursor:J}=Z.selection;if(!J||(Q?!Q.endOfTextblock("forward",Z):J.parentOffset<J.parent.content.size))return null;return J}var iN=(Z,Q,J)=>{let X=lN(Z,J);if(!X)return!1;let Y=QH(X);if(!Y)return!1;let q=Y.nodeAfter;if(JH(Z,Y,Q,1))return!0;if(X.parent.content.size==0&&(f6(q,"start")||s.isSelectable(q))){let G=H8(Z.doc,X.before(),X.after(),h.empty);if(G&&G.slice.size<G.to-G.from){if(Q){let U=Z.tr.step(G);U.setSelection(f6(q,"start")?n.findFrom(U.doc.resolve(U.mapping.map(Y.pos)),1):s.create(U.doc,U.mapping.map(Y.pos))),Q(U.scrollIntoView())}return!0}}if(q.isAtom&&Y.depth==X.depth-1){if(Q)Q(Z.tr.delete(Y.pos,Y.pos+q.nodeSize).scrollIntoView());return!0}return!1},dN=(Z,Q,J)=>{let{$head:X,empty:Y}=Z.selection,q=X;if(!Y)return!1;if(X.parent.isTextblock){if(J?!J.endOfTextblock("forward",Z):X.parentOffset<X.parent.content.size)return!1;q=QH(X)}let G=q&&q.nodeAfter;if(!G||!s.isSelectable(G))return!1;if(Q)Q(Z.tr.setSelection(s.create(Z.doc,q.pos)).scrollIntoView());return!0};function QH(Z){if(!Z.parent.type.spec.isolating)for(let Q=Z.depth-1;Q>=0;Q--){let J=Z.node(Q);if(Z.index(Q)+1<J.childCount)return Z.doc.resolve(Z.after(Q+1));if(J.type.spec.isolating)break}return null}var cN=(Z,Q)=>{let{$head:J,$anchor:X}=Z.selection;if(!J.parent.type.spec.code||!J.sameParent(X))return!1;if(Q)Q(Z.tr.insertText(`
`).scrollIntoView());return!0};function JJ(Z){for(let Q=0;Q<Z.edgeCount;Q++){let{type:J}=Z.edge(Q);if(J.isTextblock&&!J.hasRequiredAttrs())return J}return null}var rN=(Z,Q)=>{let{$head:J,$anchor:X}=Z.selection;if(!J.parent.type.spec.code||!J.sameParent(X))return!1;let Y=J.node(-1),q=J.indexAfter(-1),G=JJ(Y.contentMatchAt(q));if(!G||!Y.canReplaceWith(q,q,G))return!1;if(Q){let U=J.after(),K=Z.tr.replaceWith(U,U,G.createAndFill());K.setSelection(n.near(K.doc.resolve(U),1)),Q(K.scrollIntoView())}return!0},aN=(Z,Q)=>{let J=Z.selection,{$from:X,$to:Y}=J;if(J instanceof L1||X.parent.inlineContent||Y.parent.inlineContent)return!1;let q=JJ(Y.parent.contentMatchAt(Y.indexAfter()));if(!q||!q.isTextblock)return!1;if(Q){let G=(!X.parentOffset&&Y.index()<Y.parent.childCount?X:Y).pos,U=Z.tr.insert(G,q.createAndFill());U.setSelection(Z0.create(U.doc,G+1)),Q(U.scrollIntoView())}return!0},nN=(Z,Q)=>{let{$cursor:J}=Z.selection;if(!J||J.parent.content.size)return!1;if(J.depth>1&&J.after()!=J.end(-1)){let q=J.before();if(p4(Z.doc,q)){if(Q)Q(Z.tr.split(q).scrollIntoView());return!0}}let X=J.blockRange(),Y=X&&v6(X);if(Y==null)return!1;if(Q)Q(Z.tr.lift(X,Y).scrollIntoView());return!0};function sN(Z){return(Q,J)=>{let{$from:X,$to:Y}=Q.selection;if(Q.selection instanceof s&&Q.selection.node.isBlock){if(!X.parentOffset||!p4(Q.doc,X.pos))return!1;if(J)J(Q.tr.split(X.pos).scrollIntoView());return!0}if(!X.depth)return!1;let q=[],G,U,K=!1,H=!1;for(let B=X.depth;;B--)if(X.node(B).isBlock){K=X.end(B)==X.pos+(X.depth-B),H=X.start(B)==X.pos-(X.depth-B),U=JJ(X.node(B-1).contentMatchAt(X.indexAfter(B-1)));let O=Z&&Z(Y.parent,K,X);q.unshift(O||(K&&U?{type:U}:null)),G=B;break}else{if(B==1)return!1;q.unshift(null)}let W=Q.tr;if(Q.selection instanceof Z0||Q.selection instanceof L1)W.deleteSelection();let z=W.mapping.map(X.pos),F=p4(W.doc,z,q.length,q);if(!F)q[0]=U?{type:U}:null,F=p4(W.doc,z,q.length,q);if(!F)return!1;if(W.split(z,q.length,q),!K&&H&&X.node(G).type!=U){let B=W.mapping.map(X.before(G)),V=W.doc.resolve(B);if(U&&X.node(G-1).canReplaceWith(V.index(),V.index()+1,U))W.setNodeMarkup(W.mapping.map(X.before(G)),U)}if(J)J(W.scrollIntoView());return!0}}var oN=sN();var tN=(Z,Q)=>{if(Q)Q(Z.tr.setSelection(new L1(Z.doc)));return!0};function eN(Z,Q,J){let{nodeBefore:X,nodeAfter:Y}=Q,q=Q.index();if(!X||!Y||!X.type.compatibleContent(Y.type))return!1;if(!X.content.size&&Q.parent.canReplace(q-1,q)){if(J)J(Z.tr.delete(Q.pos-X.nodeSize,Q.pos).scrollIntoView());return!0}if(!Q.parent.canReplace(q,q+1)||!(Y.isTextblock||l4(Z.doc,Q.pos)))return!1;if(J)J(Z.tr.join(Q.pos).scrollIntoView());return!0}function JH(Z,Q,J,X){let{nodeBefore:Y,nodeAfter:q}=Q,G,U,K=Y.type.spec.isolating||q.type.spec.isolating;if(!K&&eN(Z,Q,J))return!0;let H=!K&&Q.parent.canReplace(Q.index(),Q.index()+1);if(H&&(G=(U=Y.contentMatchAt(Y.childCount)).findWrapping(q.type))&&U.matchType(G[0]||q.type).validEnd){if(J){let B=Q.pos+q.nodeSize,V=x.empty;for(let j=G.length-1;j>=0;j--)V=x.from(G[j].create(null,V));V=x.from(Y.copy(V));let O=Z.tr.step(new n0(Q.pos-1,B,Q.pos,B,new h(V,1,0),G.length,!0)),N=O.doc.resolve(B+2*G.length);if(N.nodeAfter&&N.nodeAfter.type==Y.type&&l4(O.doc,N.pos))O.join(N.pos);J(O.scrollIntoView())}return!0}let W=q.type.spec.isolating||X>0&&K?null:n.findFrom(Q,1),z=W&&W.$from.blockRange(W.$to),F=z&&v6(z);if(F!=null&&F>=Q.depth){if(J)J(Z.tr.lift(z,F).scrollIntoView());return!0}if(H&&f6(q,"start",!0)&&f6(Y,"end")){let B=Y,V=[];for(;;){if(V.push(B),B.isTextblock)break;B=B.lastChild}let O=q,N=1;for(;!O.isTextblock;O=O.firstChild)N++;if(B.canReplace(B.childCount,B.childCount,O.content)){if(J){let j=x.empty;for(let E=V.length-1;E>=0;E--)j=x.from(V[E].copy(j));let R=Z.tr.step(new n0(Q.pos-V.length,Q.pos+q.nodeSize,Q.pos+N,Q.pos+q.nodeSize-N,new h(j,V.length,0),0,!0));J(R.scrollIntoView())}return!0}}return!1}function XH(Z){return function(Q,J){let X=Q.selection,Y=Z<0?X.$from:X.$to,q=Y.depth;while(Y.node(q).isInline){if(!q)return!1;q--}if(!Y.node(q).isTextblock)return!1;if(J)J(Q.tr.setSelection(Z0.create(Q.doc,Z<0?Y.start(q):Y.end(q))));return!0}}var Zj=XH(-1),Qj=XH(1);function W9(Z,Q=null){return function(J,X){let{$from:Y,$to:q}=J.selection,G=Y.blockRange(q),U=G&&m4(G,Z,Q);if(!U)return!1;if(X)X(J.tr.wrap(G,U).scrollIntoView());return!0}}function m6(Z,Q=null){return function(J,X){let Y=!1;for(let q=0;q<J.selection.ranges.length&&!Y;q++){let{$from:{pos:G},$to:{pos:U}}=J.selection.ranges[q];J.doc.nodesBetween(G,U,(K,H)=>{if(Y)return!1;if(!K.isTextblock||K.hasMarkup(Z,Q))return;if(K.type==Z)Y=!0;else{let W=J.doc.resolve(H),z=W.index();Y=W.parent.canReplaceWith(z,z+1,Z)}})}if(!Y)return!1;if(X){let q=J.tr;for(let G=0;G<J.selection.ranges.length;G++){let{$from:{pos:U},$to:{pos:K}}=J.selection.ranges[G];q.setBlockType(U,K,Z,Q)}X(q.scrollIntoView())}return!0}}function Jj(Z,Q,J,X){for(let Y=0;Y<Q.length;Y++){let{$from:q,$to:G}=Q[Y],U=q.depth==0?Z.inlineContent&&Z.type.allowsMarkType(J):!1;if(Z.nodesBetween(q.pos,G.pos,(K,H)=>{if(U||!X&&K.isAtom&&K.isInline&&H>=q.pos&&H+K.nodeSize<=G.pos)return!1;U=K.inlineContent&&K.type.allowsMarkType(J)}),U)return!0}return!1}function Xj(Z){let Q=[];for(let J=0;J<Z.length;J++){let{$from:X,$to:Y}=Z[J];if(X.doc.nodesBetween(X.pos,Y.pos,(q,G)=>{if(q.isAtom&&q.content.size&&q.isInline&&G>=X.pos&&G+q.nodeSize<=Y.pos){if(G+1>X.pos)Q.push(new d4(X,X.doc.resolve(G+1)));return X=X.doc.resolve(G+1+q.content.size),!1}}),X.pos<Y.pos)Q.push(new d4(X,Y))}return Q}function p6(Z,Q=null,J){let X=(J&&J.removeWhenPresent)!==!1,Y=(J&&J.enterInlineAtoms)!==!1,q=!(J&&J.includeWhitespace);return function(G,U){let{empty:K,$cursor:H,ranges:W}=G.selection;if(K&&!H||!Jj(G.doc,W,Z,Y))return!1;if(U)if(H)if(Z.isInSet(G.storedMarks||H.marks()))U(G.tr.removeStoredMark(Z));else U(G.tr.addStoredMark(Z.create(Q)));else{let z,F=G.tr;if(!Y)W=Xj(W);if(X)z=!W.some((B)=>G.doc.rangeHasMark(B.$from.pos,B.$to.pos,Z));else z=!W.every((B)=>{let V=!1;return F.doc.nodesBetween(B.$from.pos,B.$to.pos,(O,N,j)=>{if(V)return!1;V=!Z.isInSet(O.marks)&&!!j&&j.type.allowsMarkType(Z)&&!(O.isText&&/^\s*$/.test(O.textBetween(Math.max(0,B.$from.pos-N),Math.min(O.nodeSize,B.$to.pos-N))))}),!V});for(let B=0;B<W.length;B++){let{$from:V,$to:O}=W[B];if(!z)F.removeMark(V.pos,O.pos,Z);else{let N=V.pos,j=O.pos,R=V.nodeAfter,E=O.nodeBefore,$=q&&R&&R.isText?/^\s*/.exec(R.text)[0].length:0,w=q&&E&&E.isText?/\s*$/.exec(E.text)[0].length:0;if(N+$<j)N+=$,j-=w;F.addMark(N,j,Z.create(Q))}}U(F.scrollIntoView())}return!0}}function c4(...Z){return function(Q,J,X){for(let Y=0;Y<Z.length;Y++)if(Z[Y](Q,J,X))return!0;return!1}}var tQ=c4(H9,eQ,ZJ),tK=c4(H9,iN,dN),E5={Enter:c4(cN,aN,nN,oN),"Mod-Enter":rN,Backspace:tQ,"Mod-Backspace":tQ,"Shift-Backspace":tQ,Delete:tK,"Mod-Delete":tK,"Mod-a":tN},YH={"Ctrl-h":E5.Backspace,"Alt-Backspace":E5["Mod-Backspace"],"Ctrl-d":E5.Delete,"Ctrl-Alt-Backspace":E5["Mod-Delete"],"Alt-Delete":E5["Mod-Delete"],"Alt-d":E5["Mod-Delete"],"Ctrl-a":Zj,"Ctrl-e":Qj};for(let Z in E5)YH[Z]=E5[Z];var Yj=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform?os.platform()=="darwin":!1,qH=Yj?YH:E5;class Q1{constructor(Z,Q,J={}){this.match=Z,this.match=Z,this.handler=typeof Q=="string"?qj(Q):Q,this.undoable=J.undoable!==!1,this.inCode=J.inCode||!1,this.inCodeMark=J.inCodeMark!==!1}}function qj(Z){return function(Q,J,X,Y){let q=Z;if(J[1]){let G=J[0].lastIndexOf(J[1]);q+=J[0].slice(G+J[1].length),X+=G;let U=X-Y;if(U>0)q=J[0].slice(G-U,G)+q,X=Y}return Q.tr.insertText(q,X,Y)}}var GH=(Z,Q)=>{let J=Z.plugins;for(let X=0;X<J.length;X++){let Y=J[X],q;if(Y.spec.isInputRules&&(q=Y.getState(Z))){if(Q){let G=Z.tr,U=q.transform;for(let K=U.steps.length-1;K>=0;K--)G.step(U.steps[K].invert(U.docs[K]));if(q.text){let K=G.doc.resolve(q.from).marks();G.replaceWith(q.from,q.to,Z.schema.text(q.text,K))}else G.delete(q.from,q.to);Q(G)}return!0}}return!1},Nk=new Q1(/--$/,"—",{inCodeMark:!1}),jk=new Q1(/\.\.\.$/,"…",{inCodeMark:!1}),Ak=new Q1(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"“",{inCodeMark:!1}),Pk=new Q1(/"$/,"”",{inCodeMark:!1}),Rk=new Q1(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"‘",{inCodeMark:!1}),Mk=new Q1(/'$/,"’",{inCodeMark:!1});function z9(Z,Q,J=null,X){return new Q1(Z,(Y,q,G,U)=>{let K=J instanceof Function?J(q):J,H=Y.tr.delete(G,U),W=H.doc.resolve(G),z=W.blockRange(),F=z&&m4(z,Q,K);if(!F)return null;H.wrap(z,F);let B=H.doc.resolve(G-1).nodeBefore;if(B&&B.type==Q&&l4(H.doc,G-1)&&(!X||X(q,B)))H.join(G-1);return H})}function XJ(Z,Q,J=null){return new Q1(Z,(X,Y,q,G)=>{let U=X.doc.resolve(q),K=J instanceof Function?J(Y):J;if(!U.node(-1).canReplaceWith(U.index(-1),U.indexAfter(-1),Q))return null;return X.tr.delete(q,G).setBlockType(q,q,Q,K)})}var t5=typeof navigator<"u"?navigator:null,UH=typeof document<"u"?document:null,e5=t5&&t5.userAgent||"",qJ=/Edge\/(\d+)/.exec(e5),HH=/MSIE \d/.exec(e5),GJ=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(e5),UJ=!!(HH||GJ||qJ),Tk=HH?document.documentMode:GJ?+GJ[1]:qJ?+qJ[1]:0,Gj=!UJ&&/gecko\/(\d+)/i.test(e5),$k=Gj&&+(/Firefox\/(\d+)/.exec(e5)||[0,0])[1],KH=!UJ&&/Chrome\/(\d+)/.exec(e5);var bk=KH?+KH[1]:0,Uj=!UJ&&!!t5&&/Apple Computer/.test(t5.vendor),Kj=Uj&&(/Mobile\/\w+/.test(e5)||!!t5&&t5.maxTouchPoints>2),Ck=Kj||(t5?/Mac/.test(t5.platform):!1),yk=/Android \d/.test(e5),Hj=!!UH&&"webkitFontSmoothing"in UH.documentElement.style,Sk=Hj?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function YJ(Z,Q,J,X,Y,q){if(Z.composing)return!1;let G=Z.state,U=G.doc.resolve(Q);if(U.parent.type.spec.code)return!1;let K=U.parent.textBetween(Math.max(0,U.parentOffset-500),U.parentOffset,void 0,"￼")+X;for(let H of Y){let W=H,z=W.match.exec(K),F=z&&z[0]&&W.handler(G,z,Q-(z[0].length-X.length),J);if(!F)continue;if(W.undoable!==!1)F.setMeta(q,{transform:F,from:Q,to:J,text:X});return Z.dispatch(F),!0}return!1}var Wj=new k0("MILKDOWN_CUSTOM_INPUTRULES");function WH({rules:Z}){let Q=new y0({key:Wj,isInputRules:!0,state:{init(){return null},apply(J,X){let Y=J.getMeta(this);if(Y)return Y;return J.selectionSet||J.docChanged?null:X}},props:{handleTextInput(J,X,Y,q){return YJ(J,X,Y,q,Z,Q)},handleDOMEvents:{compositionend:(J)=>{return setTimeout(()=>{let{$cursor:X}=J.state.selection;if(X)YJ(J,X.pos,X.pos,"",Z,Q)}),!1}},handleKeyDown(J,X){if(X.key!=="Enter")return!1;let{$cursor:Y}=J.state.selection;if(Y)return YJ(J,Y.pos,Y.pos,`
`,Z,Q);return!1}}});return Q}function r4(Z,Q,J={}){return new Q1(Z,(X,Y,q,G)=>{var U,K,H,W;let{tr:z}=X,F=Y.length,B=Y[F-1],V=Y[0],O=[],N=G,j={group:B,fullMatch:V,start:q,end:G},R=(U=J.updateCaptured)==null?void 0:U.call(J,j);if(Object.assign(j,R),{group:B,fullMatch:V,start:q,end:G}=j,V===null)return null;if((B==null?void 0:B.trim())==="")return null;if(B){let E=V.search(/\S/),$=q+V.indexOf(B),w=$+B.length;if(O=(K=z.storedMarks)!=null?K:[],w<G)z.delete(w,G);if($>q)z.delete(q+E,$);N=q+E+B.length;let I=(H=J.getAttr)==null?void 0:H.call(J,Y);z.addMark(q,N,Q.create(I)),z.setStoredMarks(O),(W=J.beforeDispatch)==null||W.call(J,{match:Y,start:q,end:G,tr:z})}return z})}function KJ(Z){return Object.assign(Object.create(Z),Z).setTime(Date.now())}function zj(Z,Q){return Array.isArray(Z)&&Z.includes(Q.type)||Q.type===Z}function Fj(Z){return(Q)=>{for(let J=Q.depth;J>0;J-=1){let X=Q.node(J);if(Z(X)){let Y=Q.before(J),q=Q.after(J);return{from:Y,to:q,node:X}}}return}}function zH(Z,Q){return Fj((J)=>J.type===Q)(Z)}function FH(Z){return(Q)=>{for(let J=Q.depth;J>0;J--){let X=Q.node(J);if(Z(X))return{pos:J>0?Q.before(J):0,start:Q.start(J),depth:J,node:X}}return}}function BH(Z,Q){if(!(Z instanceof s))return;let{node:J,$from:X}=Z;if(zj(Q,J))return{node:J,pos:X.pos,start:X.start(X.depth),depth:X.depth};return}var VH=(Z,Q)=>{let{selection:J,doc:X}=Z;if(J instanceof s)return{hasNode:J.node.type===Q,pos:J.from,target:J.node};let{from:Y,to:q}=J,G=!1,U=-1,K=null;return X.nodesBetween(Y,q,(H,W)=>{if(K)return!1;if(H.type===Q)return G=!0,U=W,K=H,!1;return!0}),{hasNode:G,pos:U,target:K}};var T5={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},F9={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Bj=typeof navigator<"u"&&/Mac/.test(navigator.platform),Vj=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(S0=0;S0<10;S0++)T5[48+S0]=T5[96+S0]=String(S0);var S0;for(S0=1;S0<=24;S0++)T5[S0+111]="F"+S0;var S0;for(S0=65;S0<=90;S0++)T5[S0]=String.fromCharCode(S0+32),F9[S0]=String.fromCharCode(S0);var S0;for(z8 in T5)if(!F9.hasOwnProperty(z8))F9[z8]=T5[z8];var z8;function LH(Z){var Q=Bj&&Z.metaKey&&Z.shiftKey&&!Z.ctrlKey&&!Z.altKey||Vj&&Z.shiftKey&&Z.key&&Z.key.length==1||Z.key=="Unidentified",J=!Q&&Z.key||(Z.shiftKey?F9:T5)[Z.keyCode]||Z.key||"Unidentified";if(J=="Esc")J="Escape";if(J=="Del")J="Delete";if(J=="Left")J="ArrowLeft";if(J=="Up")J="ArrowUp";if(J=="Right")J="ArrowRight";if(J=="Down")J="ArrowDown";return J}var Lj=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),_j=typeof navigator<"u"&&/Win/.test(navigator.platform);function Oj(Z){let Q=Z.split(/-(?!$)/),J=Q[Q.length-1];if(J=="Space")J=" ";let X,Y,q,G;for(let U=0;U<Q.length-1;U++){let K=Q[U];if(/^(cmd|meta|m)$/i.test(K))G=!0;else if(/^a(lt)?$/i.test(K))X=!0;else if(/^(c|ctrl|control)$/i.test(K))Y=!0;else if(/^s(hift)?$/i.test(K))q=!0;else if(/^mod$/i.test(K))if(Lj)G=!0;else Y=!0;else throw Error("Unrecognized modifier name: "+K)}if(X)J="Alt-"+J;if(Y)J="Ctrl-"+J;if(G)J="Meta-"+J;if(q)J="Shift-"+J;return J}function Nj(Z){let Q=Object.create(null);for(let J in Z)Q[Oj(J)]=Z[J];return Q}function HJ(Z,Q,J=!0){if(Q.altKey)Z="Alt-"+Z;if(Q.ctrlKey)Z="Ctrl-"+Z;if(Q.metaKey)Z="Meta-"+Z;if(J&&Q.shiftKey)Z="Shift-"+Z;return Z}function _H(Z){return new y0({props:{handleKeyDown:WJ(Z)}})}function WJ(Z){let Q=Nj(Z);return function(J,X){let Y=LH(X),q,G=Q[HJ(Y,X)];if(G&&G(J.state,J.dispatch,J))return!0;if(Y.length==1&&Y!=" "){if(X.shiftKey){let U=Q[HJ(Y,X,!1)];if(U&&U(J.state,J.dispatch,J))return!0}if((X.altKey||X.metaKey||X.ctrlKey)&&!(_j&&X.ctrlKey&&X.altKey)&&(q=T5[X.keyCode])&&q!=Y){let U=Q[HJ(q,X)];if(U&&U(J.state,J.dispatch,J))return!0}}return!1}}var J1=function(Z){for(var Q=0;;Q++)if(Z=Z.previousSibling,!Z)return Q},r6=function(Z){let Q=Z.assignedSlot||Z.parentNode;return Q&&Q.nodeType==11?Q.host:Q},_J=null,b5=function(Z,Q,J){let X=_J||(_J=document.createRange());return X.setEnd(Z,J==null?Z.nodeValue.length:J),X.setStart(Z,Q||0),X},jj=function(){_J=null},e4=function(Z,Q,J,X){return J&&(OH(Z,Q,J,X,-1)||OH(Z,Q,J,X,1))},Aj=/^(img|br|input|textarea|hr)$/i;function OH(Z,Q,J,X,Y){var q;for(;;){if(Z==J&&Q==X)return!0;if(Q==(Y<0?0:h1(Z))){let G=Z.parentNode;if(!G||G.nodeType!=1||N8(Z)||Aj.test(Z.nodeName)||Z.contentEditable=="false")return!1;Q=J1(Z)+(Y<0?0:1),Z=G}else if(Z.nodeType==1){let G=Z.childNodes[Q+(Y<0?-1:0)];if(G.nodeType==1&&G.contentEditable=="false")if((q=G.pmViewDesc)===null||q===void 0?void 0:q.ignoreForSelection)Q+=Y;else return!1;else Z=G,Q=Y<0?h1(Z):0}else return!1}}function h1(Z){return Z.nodeType==3?Z.nodeValue.length:Z.childNodes.length}function Pj(Z,Q){for(;;){if(Z.nodeType==3&&Q)return Z;if(Z.nodeType==1&&Q>0){if(Z.contentEditable=="false")return null;Z=Z.childNodes[Q-1],Q=h1(Z)}else if(Z.parentNode&&!N8(Z))Q=J1(Z),Z=Z.parentNode;else return null}}function Rj(Z,Q){for(;;){if(Z.nodeType==3&&Q<Z.nodeValue.length)return Z;if(Z.nodeType==1&&Q<Z.childNodes.length){if(Z.contentEditable=="false")return null;Z=Z.childNodes[Q],Q=0}else if(Z.parentNode&&!N8(Z))Q=J1(Z)+1,Z=Z.parentNode;else return null}}function Mj(Z,Q,J){for(let X=Q==0,Y=Q==h1(Z);X||Y;){if(Z==J)return!0;let q=J1(Z);if(Z=Z.parentNode,!Z)return!1;X=X&&q==0,Y=Y&&q==h1(Z)}}function N8(Z){let Q;for(let J=Z;J;J=J.parentNode)if(Q=J.pmViewDesc)break;return Q&&Q.node&&Q.node.isBlock&&(Q.dom==Z||Q.contentDOM==Z)}var N9=function(Z){return Z.focusNode&&e4(Z.focusNode,Z.focusOffset,Z.anchorNode,Z.anchorOffset)};function a4(Z,Q){let J=document.createEvent("Event");return J.initEvent("keydown",!0,!0),J.keyCode=Z,J.key=J.code=Q,J}function Dj(Z){let Q=Z.activeElement;while(Q&&Q.shadowRoot)Q=Q.shadowRoot.activeElement;return Q}function Ij(Z,Q,J){if(Z.caretPositionFromPoint)try{let X=Z.caretPositionFromPoint(Q,J);if(X)return{node:X.offsetNode,offset:Math.min(h1(X.offsetNode),X.offset)}}catch(X){}if(Z.caretRangeFromPoint){let X=Z.caretRangeFromPoint(Q,J);if(X)return{node:X.startContainer,offset:Math.min(h1(X.startContainer),X.startOffset)}}}var H5=typeof navigator<"u"?navigator:null,NH=typeof document<"u"?document:null,U4=H5&&H5.userAgent||"",OJ=/Edge\/(\d+)/.exec(U4),sH=/MSIE \d/.exec(U4),NJ=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(U4),I1=!!(sH||NJ||OJ),Y4=sH?document.documentMode:NJ?+NJ[1]:OJ?+OJ[1]:0,u1=!I1&&/gecko\/(\d+)/i.test(U4);u1&&+(/Firefox\/(\d+)/.exec(U4)||[0,0])[1];var jJ=!I1&&/Chrome\/(\d+)/.exec(U4),o0=!!jJ,oH=jJ?+jJ[1]:0,H1=!I1&&!!H5&&/Apple Computer/.test(H5.vendor),a6=H1&&(/Mobile\/\w+/.test(U4)||!!H5&&H5.maxTouchPoints>2),v1=a6||(H5?/Mac/.test(H5.platform):!1),tH=H5?/Win/.test(H5.platform):!1,C5=/Android \d/.test(U4),j8=!!NH&&"webkitFontSmoothing"in NH.documentElement.style,Ej=j8?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Tj(Z){let Q=Z.defaultView&&Z.defaultView.visualViewport;if(Q)return{left:0,right:Q.width,top:0,bottom:Q.height};return{left:0,right:Z.documentElement.clientWidth,top:0,bottom:Z.documentElement.clientHeight}}function $5(Z,Q){return typeof Z=="number"?Z:Z[Q]}function $j(Z){let Q=Z.getBoundingClientRect(),J=Q.width/Z.offsetWidth||1,X=Q.height/Z.offsetHeight||1;return{left:Q.left,right:Q.left+Z.clientWidth*J,top:Q.top,bottom:Q.top+Z.clientHeight*X}}function jH(Z,Q,J){let X=Z.someProp("scrollThreshold")||0,Y=Z.someProp("scrollMargin")||5,q=Z.dom.ownerDocument;for(let G=J||Z.dom;;){if(!G)break;if(G.nodeType!=1){G=r6(G);continue}let U=G,K=U==q.body,H=K?Tj(q):$j(U),W=0,z=0;if(Q.top<H.top+$5(X,"top"))z=-(H.top-Q.top+$5(Y,"top"));else if(Q.bottom>H.bottom-$5(X,"bottom"))z=Q.bottom-Q.top>H.bottom-H.top?Q.top+$5(Y,"top")-H.top:Q.bottom-H.bottom+$5(Y,"bottom");if(Q.left<H.left+$5(X,"left"))W=-(H.left-Q.left+$5(Y,"left"));else if(Q.right>H.right-$5(X,"right"))W=Q.right-H.right+$5(Y,"right");if(W||z)if(K)q.defaultView.scrollBy(W,z);else{let{scrollLeft:B,scrollTop:V}=U;if(z)U.scrollTop+=z;if(W)U.scrollLeft+=W;let O=U.scrollLeft-B,N=U.scrollTop-V;Q={left:Q.left-O,top:Q.top-N,right:Q.right-O,bottom:Q.bottom-N}}let F=K?"fixed":getComputedStyle(G).position;if(/^(fixed|sticky)$/.test(F))break;G=F=="absolute"?G.offsetParent:r6(G)}}function bj(Z){let Q=Z.dom.getBoundingClientRect(),J=Math.max(0,Q.top),X,Y;for(let q=(Q.left+Q.right)/2,G=J+1;G<Math.min(innerHeight,Q.bottom);G+=5){let U=Z.root.elementFromPoint(q,G);if(!U||U==Z.dom||!Z.dom.contains(U))continue;let K=U.getBoundingClientRect();if(K.top>=J-20){X=U,Y=K.top;break}}return{refDOM:X,refTop:Y,stack:eH(Z.dom)}}function eH(Z){let Q=[],J=Z.ownerDocument;for(let X=Z;X;X=r6(X))if(Q.push({dom:X,top:X.scrollTop,left:X.scrollLeft}),Z==J)break;return Q}function Cj({refDOM:Z,refTop:Q,stack:J}){let X=Z?Z.getBoundingClientRect().top:0;ZW(J,X==0?0:X-Q)}function ZW(Z,Q){for(let J=0;J<Z.length;J++){let{dom:X,top:Y,left:q}=Z[J];if(X.scrollTop!=Y+Q)X.scrollTop=Y+Q;if(X.scrollLeft!=q)X.scrollLeft=q}}var l6=null;function yj(Z){if(Z.setActive)return Z.setActive();if(l6)return Z.focus(l6);let Q=eH(Z);if(Z.focus(l6==null?{get preventScroll(){return l6={preventScroll:!0},!0}}:void 0),!l6)l6=!1,ZW(Q,0)}function QW(Z,Q){let J,X=200000000,Y,q=0,G=Q.top,U=Q.top,K,H;for(let W=Z.firstChild,z=0;W;W=W.nextSibling,z++){let F;if(W.nodeType==1)F=W.getClientRects();else if(W.nodeType==3)F=b5(W).getClientRects();else continue;for(let B=0;B<F.length;B++){let V=F[B];if(V.top<=G&&V.bottom>=U){G=Math.max(V.bottom,G),U=Math.min(V.top,U);let O=V.left>Q.left?V.left-Q.left:V.right<Q.left?Q.left-V.right:0;if(O<X){if(J=W,X=O,Y=O&&J.nodeType==3?{left:V.right<Q.left?V.right:V.left,top:Q.top}:Q,W.nodeType==1&&O)q=z+(Q.left>=(V.left+V.right)/2?1:0);continue}}else if(V.top>Q.top&&!K&&V.left<=Q.left&&V.right>=Q.left)K=W,H={left:Math.max(V.left,Math.min(V.right,Q.left)),top:V.top};if(!J&&(Q.left>=V.right&&Q.top>=V.top||Q.left>=V.left&&Q.top>=V.bottom))q=z+1}}if(!J&&K)J=K,Y=H,X=0;if(J&&J.nodeType==3)return Sj(J,Y);if(!J||X&&J.nodeType==1)return{node:Z,offset:q};return QW(J,Y)}function Sj(Z,Q){let J=Z.nodeValue.length,X=document.createRange(),Y;for(let q=0;q<J;q++){X.setEnd(Z,q+1),X.setStart(Z,q);let G=Z4(X,1);if(G.top==G.bottom)continue;if(EJ(Q,G)){Y={node:Z,offset:q+(Q.left>=(G.left+G.right)/2?1:0)};break}}return X.detach(),Y||{node:Z,offset:0}}function EJ(Z,Q){return Z.left>=Q.left-1&&Z.left<=Q.right+1&&Z.top>=Q.top-1&&Z.top<=Q.bottom+1}function wj(Z,Q){let J=Z.parentNode;if(J&&/^li$/i.test(J.nodeName)&&Q.left<Z.getBoundingClientRect().left)return J;return Z}function xj(Z,Q,J){let{node:X,offset:Y}=QW(Q,J),q=-1;if(X.nodeType==1&&!X.firstChild){let G=X.getBoundingClientRect();q=G.left!=G.right&&J.left>(G.left+G.right)/2?1:-1}return Z.docView.posFromDOM(X,Y,q)}function kj(Z,Q,J,X){let Y=-1;for(let q=Q,G=!1;;){if(q==Z.dom)break;let U=Z.docView.nearestDesc(q,!0),K;if(!U)return null;if(U.dom.nodeType==1&&(U.node.isBlock&&U.parent||!U.contentDOM)&&((K=U.dom.getBoundingClientRect()).width||K.height)){if(U.node.isBlock&&U.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(U.dom.nodeName)){if(!G&&K.left>X.left||K.top>X.top)Y=U.posBefore;else if(!G&&K.right<X.left||K.bottom<X.top)Y=U.posAfter;G=!0}if(!U.contentDOM&&Y<0&&!U.node.isText)return(U.node.isBlock?X.top<(K.top+K.bottom)/2:X.left<(K.left+K.right)/2)?U.posBefore:U.posAfter}q=U.dom.parentNode}return Y>-1?Y:Z.docView.posFromDOM(Q,J,-1)}function JW(Z,Q,J){let X=Z.childNodes.length;if(X&&J.top<J.bottom)for(let Y=Math.max(0,Math.min(X-1,Math.floor(X*(Q.top-J.top)/(J.bottom-J.top))-2)),q=Y;;){let G=Z.childNodes[q];if(G.nodeType==1){let U=G.getClientRects();for(let K=0;K<U.length;K++){let H=U[K];if(EJ(Q,H))return JW(G,Q,H)}}if((q=(q+1)%X)==Y)break}return Z}function gj(Z,Q){let J=Z.dom.ownerDocument,X,Y=0,q=Ij(J,Q.left,Q.top);if(q)({node:X,offset:Y}=q);let G=(Z.root.elementFromPoint?Z.root:J).elementFromPoint(Q.left,Q.top),U;if(!G||!Z.dom.contains(G.nodeType!=1?G.parentNode:G)){let H=Z.dom.getBoundingClientRect();if(!EJ(Q,H))return null;if(G=JW(Z.dom,Q,H),!G)return null}if(H1){for(let H=G;X&&H;H=r6(H))if(H.draggable)X=void 0}if(G=wj(G,Q),X){if(u1&&X.nodeType==1){if(Y=Math.min(Y,X.childNodes.length),Y<X.childNodes.length){let W=X.childNodes[Y],z;if(W.nodeName=="IMG"&&(z=W.getBoundingClientRect()).right<=Q.left&&z.bottom>Q.top)Y++}}let H;if(j8&&Y&&X.nodeType==1&&(H=X.childNodes[Y-1]).nodeType==1&&H.contentEditable=="false"&&H.getBoundingClientRect().top>=Q.top)Y--;if(X==Z.dom&&Y==X.childNodes.length-1&&X.lastChild.nodeType==1&&Q.top>X.lastChild.getBoundingClientRect().bottom)U=Z.state.doc.content.size;else if(Y==0||X.nodeType!=1||X.childNodes[Y-1].nodeName!="BR")U=kj(Z,X,Y,Q)}if(U==null)U=xj(Z,G,Q);let K=Z.docView.nearestDesc(G,!0);return{pos:U,inside:K?K.posAtStart-K.border:-1}}function AH(Z){return Z.top<Z.bottom||Z.left<Z.right}function Z4(Z,Q){let J=Z.getClientRects();if(J.length){let X=J[Q<0?0:J.length-1];if(AH(X))return X}return Array.prototype.find.call(J,AH)||Z.getBoundingClientRect()}var vj=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function XW(Z,Q,J){let{node:X,offset:Y,atom:q}=Z.docView.domFromPos(Q,J<0?-1:1),G=j8||u1;if(X.nodeType==3)if(G&&(vj.test(X.nodeValue)||(J<0?!Y:Y==X.nodeValue.length))){let K=Z4(b5(X,Y,Y),J);if(u1&&Y&&/\s/.test(X.nodeValue[Y-1])&&Y<X.nodeValue.length){let H=Z4(b5(X,Y-1,Y-1),-1);if(H.top==K.top){let W=Z4(b5(X,Y,Y+1),-1);if(W.top!=K.top)return F8(W,W.left<H.left)}}return K}else{let K=Y,H=Y,W=J<0?1:-1;if(J<0&&!Y)H++,W=-1;else if(J>=0&&Y==X.nodeValue.length)K--,W=1;else if(J<0)K--;else H++;return F8(Z4(b5(X,K,H),W),W<0)}if(!Z.state.doc.resolve(Q-(q||0)).parent.inlineContent){if(q==null&&Y&&(J<0||Y==h1(X))){let K=X.childNodes[Y-1];if(K.nodeType==1)return zJ(K.getBoundingClientRect(),!1)}if(q==null&&Y<h1(X)){let K=X.childNodes[Y];if(K.nodeType==1)return zJ(K.getBoundingClientRect(),!0)}return zJ(X.getBoundingClientRect(),J>=0)}if(q==null&&Y&&(J<0||Y==h1(X))){let K=X.childNodes[Y-1],H=K.nodeType==3?b5(K,h1(K)-(G?0:1)):K.nodeType==1&&(K.nodeName!="BR"||!K.nextSibling)?K:null;if(H)return F8(Z4(H,1),!1)}if(q==null&&Y<h1(X)){let K=X.childNodes[Y];while(K.pmViewDesc&&K.pmViewDesc.ignoreForCoords)K=K.nextSibling;let H=!K?null:K.nodeType==3?b5(K,0,G?0:1):K.nodeType==1?K:null;if(H)return F8(Z4(H,-1),!0)}return F8(Z4(X.nodeType==3?b5(X):X,-J),J>=0)}function F8(Z,Q){if(Z.width==0)return Z;let J=Q?Z.left:Z.right;return{top:Z.top,bottom:Z.bottom,left:J,right:J}}function zJ(Z,Q){if(Z.height==0)return Z;let J=Q?Z.top:Z.bottom;return{top:J,bottom:J,left:Z.left,right:Z.right}}function YW(Z,Q,J){let X=Z.state,Y=Z.root.activeElement;if(X!=Q)Z.updateState(Q);if(Y!=Z.dom)Z.focus();try{return J()}finally{if(X!=Q)Z.updateState(X);if(Y!=Z.dom&&Y)Y.focus()}}function hj(Z,Q,J){let X=Q.selection,Y=J=="up"?X.$from:X.$to;return YW(Z,Q,()=>{let{node:q}=Z.docView.domFromPos(Y.pos,J=="up"?-1:1);for(;;){let U=Z.docView.nearestDesc(q,!0);if(!U)break;if(U.node.isBlock){q=U.contentDOM||U.dom;break}q=U.dom.parentNode}let G=XW(Z,Y.pos,1);for(let U=q.firstChild;U;U=U.nextSibling){let K;if(U.nodeType==1)K=U.getClientRects();else if(U.nodeType==3)K=b5(U,0,U.nodeValue.length).getClientRects();else continue;for(let H=0;H<K.length;H++){let W=K[H];if(W.bottom>W.top+1&&(J=="up"?G.top-W.top>(W.bottom-G.top)*2:W.bottom-G.bottom>(G.bottom-W.top)*2))return!1}}return!0})}var uj=/[\u0590-\u08ac]/;function fj(Z,Q,J){let{$head:X}=Q.selection;if(!X.parent.isTextblock)return!1;let Y=X.parentOffset,q=!Y,G=Y==X.parent.content.size,U=Z.domSelection();if(!U)return X.pos==X.start()||X.pos==X.end();if(!uj.test(X.parent.textContent)||!U.modify)return J=="left"||J=="backward"?q:G;return YW(Z,Q,()=>{let{focusNode:K,focusOffset:H,anchorNode:W,anchorOffset:z}=Z.domSelectionRange(),F=U.caretBidiLevel;U.modify("move",J,"character");let B=X.depth?Z.docView.domAfterPos(X.before()):Z.dom,{focusNode:V,focusOffset:O}=Z.domSelectionRange(),N=V&&!B.contains(V.nodeType==1?V:V.parentNode)||K==V&&H==O;try{if(U.collapse(W,z),K&&(K!=W||H!=z)&&U.extend)U.extend(K,H)}catch(j){}if(F!=null)U.caretBidiLevel=F;return N})}var PH=null,RH=null,MH=!1;function mj(Z,Q,J){if(PH==Q&&RH==J)return MH;return PH=Q,RH=J,MH=J=="up"||J=="down"?hj(Z,Q,J):fj(Z,Q,J)}var f1=0,DH=1,n4=2,W5=3;class n6{constructor(Z,Q,J,X){this.parent=Z,this.children=Q,this.dom=J,this.contentDOM=X,this.dirty=f1,J.pmViewDesc=this}matchesWidget(Z){return!1}matchesMark(Z){return!1}matchesNode(Z,Q,J){return!1}matchesHack(Z){return!1}parseRule(){return null}stopEvent(Z){return!1}get size(){let Z=0;for(let Q=0;Q<this.children.length;Q++)Z+=this.children[Q].size;return Z}get border(){return 0}destroy(){if(this.parent=void 0,this.dom.pmViewDesc==this)this.dom.pmViewDesc=void 0;for(let Z=0;Z<this.children.length;Z++)this.children[Z].destroy()}posBeforeChild(Z){for(let Q=0,J=this.posAtStart;;Q++){let X=this.children[Q];if(X==Z)return J;J+=X.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(Z,Q,J){if(this.contentDOM&&this.contentDOM.contains(Z.nodeType==1?Z:Z.parentNode))if(J<0){let Y,q;if(Z==this.contentDOM)Y=Z.childNodes[Q-1];else{while(Z.parentNode!=this.contentDOM)Z=Z.parentNode;Y=Z.previousSibling}while(Y&&!((q=Y.pmViewDesc)&&q.parent==this))Y=Y.previousSibling;return Y?this.posBeforeChild(q)+q.size:this.posAtStart}else{let Y,q;if(Z==this.contentDOM)Y=Z.childNodes[Q];else{while(Z.parentNode!=this.contentDOM)Z=Z.parentNode;Y=Z.nextSibling}while(Y&&!((q=Y.pmViewDesc)&&q.parent==this))Y=Y.nextSibling;return Y?this.posBeforeChild(q):this.posAtEnd}let X;if(Z==this.dom&&this.contentDOM)X=Q>J1(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))X=Z.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(Q==0)for(let Y=Z;;Y=Y.parentNode){if(Y==this.dom){X=!1;break}if(Y.previousSibling)break}if(X==null&&Q==Z.childNodes.length)for(let Y=Z;;Y=Y.parentNode){if(Y==this.dom){X=!0;break}if(Y.nextSibling)break}}return(X==null?J>0:X)?this.posAtEnd:this.posAtStart}nearestDesc(Z,Q=!1){for(let J=!0,X=Z;X;X=X.parentNode){let Y=this.getDesc(X),q;if(Y&&(!Q||Y.node))if(J&&(q=Y.nodeDOM)&&!(q.nodeType==1?q.contains(Z.nodeType==1?Z:Z.parentNode):q==Z))J=!1;else return Y}}getDesc(Z){let Q=Z.pmViewDesc;for(let J=Q;J;J=J.parent)if(J==this)return Q}posFromDOM(Z,Q,J){for(let X=Z;X;X=X.parentNode){let Y=this.getDesc(X);if(Y)return Y.localPosFromDOM(Z,Q,J)}return-1}descAt(Z){for(let Q=0,J=0;Q<this.children.length;Q++){let X=this.children[Q],Y=J+X.size;if(J==Z&&Y!=J){while(!X.border&&X.children.length)for(let q=0;q<X.children.length;q++){let G=X.children[q];if(G.size){X=G;break}}return X}if(Z<Y)return X.descAt(Z-J-X.border);J=Y}}domFromPos(Z,Q){if(!this.contentDOM)return{node:this.dom,offset:0,atom:Z+1};let J=0,X=0;for(let Y=0;J<this.children.length;J++){let q=this.children[J],G=Y+q.size;if(G>Z||q instanceof $J){X=Z-Y;break}Y=G}if(X)return this.children[J].domFromPos(X-this.children[J].border,Q);for(let Y;J&&!(Y=this.children[J-1]).size&&Y instanceof TJ&&Y.side>=0;J--);if(Q<=0){let Y,q=!0;for(;;J--,q=!1)if(Y=J?this.children[J-1]:null,!Y||Y.dom.parentNode==this.contentDOM)break;if(Y&&Q&&q&&!Y.border&&!Y.domAtom)return Y.domFromPos(Y.size,Q);return{node:this.contentDOM,offset:Y?J1(Y.dom)+1:0}}else{let Y,q=!0;for(;;J++,q=!1)if(Y=J<this.children.length?this.children[J]:null,!Y||Y.dom.parentNode==this.contentDOM)break;if(Y&&q&&!Y.border&&!Y.domAtom)return Y.domFromPos(0,Q);return{node:this.contentDOM,offset:Y?J1(Y.dom):this.contentDOM.childNodes.length}}}parseRange(Z,Q,J=0){if(this.children.length==0)return{node:this.contentDOM,from:Z,to:Q,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let X=-1,Y=-1;for(let q=J,G=0;;G++){let U=this.children[G],K=q+U.size;if(X==-1&&Z<=K){let H=q+U.border;if(Z>=H&&Q<=K-U.border&&U.node&&U.contentDOM&&this.contentDOM.contains(U.contentDOM))return U.parseRange(Z,Q,H);Z=q;for(let W=G;W>0;W--){let z=this.children[W-1];if(z.size&&z.dom.parentNode==this.contentDOM&&!z.emptyChildAt(1)){X=J1(z.dom)+1;break}Z-=z.size}if(X==-1)X=0}if(X>-1&&(K>Q||G==this.children.length-1)){Q=K;for(let H=G+1;H<this.children.length;H++){let W=this.children[H];if(W.size&&W.dom.parentNode==this.contentDOM&&!W.emptyChildAt(-1)){Y=J1(W.dom);break}Q+=W.size}if(Y==-1)Y=this.contentDOM.childNodes.length;break}q=K}return{node:this.contentDOM,from:Z,to:Q,fromOffset:X,toOffset:Y}}emptyChildAt(Z){if(this.border||!this.contentDOM||!this.children.length)return!1;let Q=this.children[Z<0?0:this.children.length-1];return Q.size==0||Q.emptyChildAt(Z)}domAfterPos(Z){let{node:Q,offset:J}=this.domFromPos(Z,0);if(Q.nodeType!=1||J==Q.childNodes.length)throw RangeError("No node after pos "+Z);return Q.childNodes[J]}setSelection(Z,Q,J,X=!1){let Y=Math.min(Z,Q),q=Math.max(Z,Q);for(let F=0,B=0;F<this.children.length;F++){let V=this.children[F],O=B+V.size;if(Y>B&&q<O)return V.setSelection(Z-B-V.border,Q-B-V.border,J,X);B=O}let G=this.domFromPos(Z,Z?-1:1),U=Q==Z?G:this.domFromPos(Q,Q?-1:1),K=J.root.getSelection(),H=J.domSelectionRange(),W=!1;if((u1||H1)&&Z==Q){let{node:F,offset:B}=G;if(F.nodeType==3){if(W=!!(B&&F.nodeValue[B-1]==`
`),W&&B==F.nodeValue.length)for(let V=F,O;V;V=V.parentNode){if(O=V.nextSibling){if(O.nodeName=="BR")G=U={node:O.parentNode,offset:J1(O)+1};break}let N=V.pmViewDesc;if(N&&N.node&&N.node.isBlock)break}}else{let V=F.childNodes[B-1];W=V&&(V.nodeName=="BR"||V.contentEditable=="false")}}if(u1&&H.focusNode&&H.focusNode!=U.node&&H.focusNode.nodeType==1){let F=H.focusNode.childNodes[H.focusOffset];if(F&&F.contentEditable=="false")X=!0}if(!(X||W&&H1)&&e4(G.node,G.offset,H.anchorNode,H.anchorOffset)&&e4(U.node,U.offset,H.focusNode,H.focusOffset))return;let z=!1;if((K.extend||Z==Q)&&!(W&&u1)){K.collapse(G.node,G.offset);try{if(Z!=Q)K.extend(U.node,U.offset);z=!0}catch(F){}}if(!z){if(Z>Q){let B=G;G=U,U=B}let F=document.createRange();F.setEnd(U.node,U.offset),F.setStart(G.node,G.offset),K.removeAllRanges(),K.addRange(F)}}ignoreMutation(Z){return!this.contentDOM&&Z.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(Z,Q){for(let J=0,X=0;X<this.children.length;X++){let Y=this.children[X],q=J+Y.size;if(J==q?Z<=q&&Q>=J:Z<q&&Q>J){let G=J+Y.border,U=q-Y.border;if(Z>=G&&Q<=U){if(this.dirty=Z==J||Q==q?n4:DH,Z==G&&Q==U&&(Y.contentLost||Y.dom.parentNode!=this.contentDOM))Y.dirty=W5;else Y.markDirty(Z-G,Q-G);return}else Y.dirty=Y.dom==Y.contentDOM&&Y.dom.parentNode==this.contentDOM&&!Y.children.length?n4:W5}J=q}this.dirty=n4}markParentsDirty(){let Z=1;for(let Q=this.parent;Q;Q=Q.parent,Z++){let J=Z==1?n4:DH;if(Q.dirty<J)Q.dirty=J}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(Z){return!1}}class TJ extends n6{constructor(Z,Q,J,X){let Y,q=Q.type.toDOM;if(typeof q=="function")q=q(J,()=>{if(!Y)return X;if(Y.parent)return Y.parent.posBeforeChild(Y)});if(!Q.type.spec.raw){if(q.nodeType!=1){let G=document.createElement("span");G.appendChild(q),q=G}q.contentEditable="false",q.classList.add("ProseMirror-widget")}super(Z,[],q,null);this.widget=Q,this.widget=Q,Y=this}matchesWidget(Z){return this.dirty==f1&&Z.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(Z){let Q=this.widget.spec.stopEvent;return Q?Q(Z):!1}ignoreMutation(Z){return Z.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class qW extends n6{constructor(Z,Q,J,X){super(Z,[],Q,null);this.textDOM=J,this.text=X}get size(){return this.text.length}localPosFromDOM(Z,Q){if(Z!=this.textDOM)return this.posAtStart+(Q?this.size:0);return this.posAtStart+Q}domFromPos(Z){return{node:this.textDOM,offset:Z}}ignoreMutation(Z){return Z.type==="characterData"&&Z.target.nodeValue==Z.oldValue}}class Z6 extends n6{constructor(Z,Q,J,X,Y){super(Z,[],J,X);this.mark=Q,this.spec=Y}static create(Z,Q,J,X){let Y=X.nodeViews[Q.type.name],q=Y&&Y(Q,X,J);if(!q||!q.dom)q=d5.renderSpec(document,Q.type.spec.toDOM(Q,J),null,Q.attrs);return new Z6(Z,Q,q.dom,q.contentDOM||q.dom,q)}parseRule(){if(this.dirty&W5||this.mark.type.spec.reparseInView)return null;return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(Z){return this.dirty!=W5&&this.mark.eq(Z)}markDirty(Z,Q){if(super.markDirty(Z,Q),this.dirty!=f1){let J=this.parent;while(!J.node)J=J.parent;if(J.dirty<this.dirty)J.dirty=this.dirty;this.dirty=f1}}slice(Z,Q,J){let X=Z6.create(this.parent,this.mark,!0,J),Y=this.children,q=this.size;if(Q<q)Y=PJ(Y,Q,q,J);if(Z>0)Y=PJ(Y,0,Z,J);for(let G=0;G<Y.length;G++)Y[G].parent=X;return X.children=Y,X}ignoreMutation(Z){return this.spec.ignoreMutation?this.spec.ignoreMutation(Z):super.ignoreMutation(Z)}destroy(){if(this.spec.destroy)this.spec.destroy();super.destroy()}}class q4 extends n6{constructor(Z,Q,J,X,Y,q,G,U,K){super(Z,[],Y,q);this.node=Q,this.outerDeco=J,this.innerDeco=X,this.nodeDOM=G}static create(Z,Q,J,X,Y,q){let G=Y.nodeViews[Q.type.name],U,K=G&&G(Q,Y,()=>{if(!U)return q;if(U.parent)return U.parent.posBeforeChild(U)},J,X),H=K&&K.dom,W=K&&K.contentDOM;if(Q.isText){if(!H)H=document.createTextNode(Q.text);else if(H.nodeType!=3)throw RangeError("Text must be rendered as a DOM text node")}else if(!H)({dom:H,contentDOM:W}=d5.renderSpec(document,Q.type.spec.toDOM(Q),null,Q.attrs));if(!W&&!Q.isText&&H.nodeName!="BR"){if(!H.hasAttribute("contenteditable"))H.contentEditable="false";if(Q.type.spec.draggable)H.draggable=!0}let z=H;if(H=HW(H,J,Q),K)return U=new GW(Z,Q,J,X,H,W||null,z,K,Y,q+1);else if(Q.isText)return new j9(Z,Q,J,X,H,z,Y);else return new q4(Z,Q,J,X,H,W||null,z,Y,q+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let Z={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre")Z.preserveWhitespace="full";if(!this.contentDOM)Z.getContent=()=>this.node.content;else if(!this.contentLost)Z.contentElement=this.contentDOM;else{for(let Q=this.children.length-1;Q>=0;Q--){let J=this.children[Q];if(this.dom.contains(J.dom.parentNode)){Z.contentElement=J.dom.parentNode;break}}if(!Z.contentElement)Z.getContent=()=>x.empty}return Z}matchesNode(Z,Q,J){return this.dirty==f1&&Z.eq(this.node)&&B9(Q,this.outerDeco)&&J.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(Z,Q){let J=this.node.inlineContent,X=Q,Y=Z.composing?this.localCompositionInfo(Z,Q):null,q=Y&&Y.pos>-1?Y:null,G=Y&&Y.pos<0,U=new WW(this,q&&q.node,Z);if(dj(this.node,this.innerDeco,(K,H,W)=>{if(K.spec.marks)U.syncToMarks(K.spec.marks,J,Z);else if(K.type.side>=0&&!W)U.syncToMarks(H==this.node.childCount?K0.none:this.node.child(H).marks,J,Z);U.placeWidget(K,Z,X)},(K,H,W,z)=>{U.syncToMarks(K.marks,J,Z);let F;if(U.findNodeMatch(K,H,W,z));else if(G&&Z.state.selection.from>X&&Z.state.selection.to<X+K.nodeSize&&(F=U.findIndexWithChild(Y.node))>-1&&U.updateNodeAt(K,H,W,F,Z));else if(U.updateNextNode(K,H,W,Z,z,X));else U.addNode(K,H,W,Z,X);X+=K.nodeSize}),U.syncToMarks([],J,Z),this.node.isTextblock)U.addTextblockHacks();if(U.destroyRest(),U.changed||this.dirty==n4){if(q)this.protectLocalComposition(Z,q);if(UW(this.contentDOM,this.children,Z),a6)cj(this.dom)}}localCompositionInfo(Z,Q){let{from:J,to:X}=Z.state.selection;if(!(Z.state.selection instanceof Z0)||J<Q||X>Q+this.node.content.size)return null;let Y=Z.input.compositionNode;if(!Y||!this.dom.contains(Y.parentNode))return null;if(this.node.inlineContent){let q=Y.nodeValue,G=rj(this.node.content,q,J-Q,X-Q);return G<0?null:{node:Y,pos:G,text:q}}else return{node:Y,pos:-1,text:""}}protectLocalComposition(Z,{node:Q,pos:J,text:X}){if(this.getDesc(Q))return;let Y=Q;for(;;Y=Y.parentNode){if(Y.parentNode==this.contentDOM)break;while(Y.previousSibling)Y.parentNode.removeChild(Y.previousSibling);while(Y.nextSibling)Y.parentNode.removeChild(Y.nextSibling);if(Y.pmViewDesc)Y.pmViewDesc=void 0}let q=new qW(this,Y,Q,X);Z.input.compositionNodes.push(q),this.children=PJ(this.children,J,J+X.length,Z,q)}update(Z,Q,J,X){if(this.dirty==W5||!Z.sameMarkup(this.node))return!1;return this.updateInner(Z,Q,J,X),!0}updateInner(Z,Q,J,X){if(this.updateOuterDeco(Q),this.node=Z,this.innerDeco=J,this.contentDOM)this.updateChildren(X,this.posAtStart);this.dirty=f1}updateOuterDeco(Z){if(B9(Z,this.outerDeco))return;let Q=this.nodeDOM.nodeType!=1,J=this.dom;if(this.dom=KW(this.dom,this.nodeDOM,AJ(this.outerDeco,this.node,Q),AJ(Z,this.node,Q)),this.dom!=J)J.pmViewDesc=void 0,this.dom.pmViewDesc=this;this.outerDeco=Z}selectNode(){if(this.nodeDOM.nodeType==1){if(this.nodeDOM.classList.add("ProseMirror-selectednode"),this.contentDOM||!this.node.type.spec.draggable)this.nodeDOM.draggable=!0}}deselectNode(){if(this.nodeDOM.nodeType==1){if(this.nodeDOM.classList.remove("ProseMirror-selectednode"),this.contentDOM||!this.node.type.spec.draggable)this.nodeDOM.removeAttribute("draggable")}}get domAtom(){return this.node.isAtom}}function IH(Z,Q,J,X,Y){HW(X,Q,Z);let q=new q4(void 0,Z,Q,J,X,X,X,Y,0);if(q.contentDOM)q.updateChildren(Y,0);return q}class j9 extends q4{constructor(Z,Q,J,X,Y,q,G){super(Z,Q,J,X,Y,null,q,G,0)}parseRule(){let Z=this.nodeDOM.parentNode;while(Z&&Z!=this.dom&&!Z.pmIsDeco)Z=Z.parentNode;return{skip:Z||!0}}update(Z,Q,J,X){if(this.dirty==W5||this.dirty!=f1&&!this.inParent()||!Z.sameMarkup(this.node))return!1;if(this.updateOuterDeco(Q),(this.dirty!=f1||Z.text!=this.node.text)&&Z.text!=this.nodeDOM.nodeValue){if(this.nodeDOM.nodeValue=Z.text,X.trackWrites==this.nodeDOM)X.trackWrites=null}return this.node=Z,this.dirty=f1,!0}inParent(){let Z=this.parent.contentDOM;for(let Q=this.nodeDOM;Q;Q=Q.parentNode)if(Q==Z)return!0;return!1}domFromPos(Z){return{node:this.nodeDOM,offset:Z}}localPosFromDOM(Z,Q,J){if(Z==this.nodeDOM)return this.posAtStart+Math.min(Q,this.node.text.length);return super.localPosFromDOM(Z,Q,J)}ignoreMutation(Z){return Z.type!="characterData"&&Z.type!="selection"}slice(Z,Q,J){let X=this.node.cut(Z,Q),Y=document.createTextNode(X.text);return new j9(this.parent,X,this.outerDeco,this.innerDeco,Y,Y,J)}markDirty(Z,Q){if(super.markDirty(Z,Q),this.dom!=this.nodeDOM&&(Z==0||Q==this.nodeDOM.nodeValue.length))this.dirty=W5}get domAtom(){return!1}isText(Z){return this.node.text==Z}}class $J extends n6{parseRule(){return{ignore:!0}}matchesHack(Z){return this.dirty==f1&&this.dom.nodeName==Z}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class GW extends q4{constructor(Z,Q,J,X,Y,q,G,U,K,H){super(Z,Q,J,X,Y,q,G,K,H);this.spec=U}update(Z,Q,J,X){if(this.dirty==W5)return!1;if(this.spec.update&&(this.node.type==Z.type||this.spec.multiType)){let Y=this.spec.update(Z,Q,J);if(Y)this.updateInner(Z,Q,J,X);return Y}else if(!this.contentDOM&&!Z.isLeaf)return!1;else return super.update(Z,Q,J,X)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(Z,Q,J,X){this.spec.setSelection?this.spec.setSelection(Z,Q,J.root):super.setSelection(Z,Q,J,X)}destroy(){if(this.spec.destroy)this.spec.destroy();super.destroy()}stopEvent(Z){return this.spec.stopEvent?this.spec.stopEvent(Z):!1}ignoreMutation(Z){return this.spec.ignoreMutation?this.spec.ignoreMutation(Z):super.ignoreMutation(Z)}}function UW(Z,Q,J){let X=Z.firstChild,Y=!1;for(let q=0;q<Q.length;q++){let G=Q[q],U=G.dom;if(U.parentNode==Z){while(U!=X)X=EH(X),Y=!0;X=X.nextSibling}else Y=!0,Z.insertBefore(U,X);if(G instanceof Z6){let K=X?X.previousSibling:Z.lastChild;UW(G.contentDOM,G.children,J),X=K?K.nextSibling:Z.firstChild}}while(X)X=EH(X),Y=!0;if(Y&&J.trackWrites==Z)J.trackWrites=null}var B8=function(Z){if(Z)this.nodeName=Z};B8.prototype=Object.create(null);var s4=[new B8];function AJ(Z,Q,J){if(Z.length==0)return s4;let X=J?s4[0]:new B8,Y=[X];for(let q=0;q<Z.length;q++){let G=Z[q].type.attrs;if(!G)continue;if(G.nodeName)Y.push(X=new B8(G.nodeName));for(let U in G){let K=G[U];if(K==null)continue;if(J&&Y.length==1)Y.push(X=new B8(Q.isInline?"span":"div"));if(U=="class")X.class=(X.class?X.class+" ":"")+K;else if(U=="style")X.style=(X.style?X.style+";":"")+K;else if(U!="nodeName")X[U]=K}}return Y}function KW(Z,Q,J,X){if(J==s4&&X==s4)return Q;let Y=Q;for(let q=0;q<X.length;q++){let G=X[q],U=J[q];if(q){let K;if(U&&U.nodeName==G.nodeName&&Y!=Z&&(K=Y.parentNode)&&K.nodeName.toLowerCase()==G.nodeName)Y=K;else K=document.createElement(G.nodeName),K.pmIsDeco=!0,K.appendChild(Y),U=s4[0],Y=K}pj(Y,U||s4[0],G)}return Y}function pj(Z,Q,J){for(let X in Q)if(X!="class"&&X!="style"&&X!="nodeName"&&!(X in J))Z.removeAttribute(X);for(let X in J)if(X!="class"&&X!="style"&&X!="nodeName"&&J[X]!=Q[X])Z.setAttribute(X,J[X]);if(Q.class!=J.class){let X=Q.class?Q.class.split(" ").filter(Boolean):[],Y=J.class?J.class.split(" ").filter(Boolean):[];for(let q=0;q<X.length;q++)if(Y.indexOf(X[q])==-1)Z.classList.remove(X[q]);for(let q=0;q<Y.length;q++)if(X.indexOf(Y[q])==-1)Z.classList.add(Y[q]);if(Z.classList.length==0)Z.removeAttribute("class")}if(Q.style!=J.style){if(Q.style){let X=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,Y;while(Y=X.exec(Q.style))Z.style.removeProperty(Y[1])}if(J.style)Z.style.cssText+=J.style}}function HW(Z,Q,J){return KW(Z,Z,s4,AJ(Q,J,Z.nodeType!=1))}function B9(Z,Q){if(Z.length!=Q.length)return!1;for(let J=0;J<Z.length;J++)if(!Z[J].type.eq(Q[J].type))return!1;return!0}function EH(Z){let Q=Z.nextSibling;return Z.parentNode.removeChild(Z),Q}class WW{constructor(Z,Q,J){this.lock=Q,this.view=J,this.index=0,this.stack=[],this.changed=!1,this.top=Z,this.preMatch=lj(Z.node.content,Z)}destroyBetween(Z,Q){if(Z==Q)return;for(let J=Z;J<Q;J++)this.top.children[J].destroy();this.top.children.splice(Z,Q-Z),this.changed=!0}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(Z,Q,J){let X=0,Y=this.stack.length>>1,q=Math.min(Y,Z.length);while(X<q&&(X==Y-1?this.top:this.stack[X+1<<1]).matchesMark(Z[X])&&Z[X].type.spec.spanning!==!1)X++;while(X<Y)this.destroyRest(),this.top.dirty=f1,this.index=this.stack.pop(),this.top=this.stack.pop(),Y--;while(Y<Z.length){this.stack.push(this.top,this.index+1);let G=-1;for(let U=this.index;U<Math.min(this.index+3,this.top.children.length);U++){let K=this.top.children[U];if(K.matchesMark(Z[Y])&&!this.isLocked(K.dom)){G=U;break}}if(G>-1){if(G>this.index)this.changed=!0,this.destroyBetween(this.index,G);this.top=this.top.children[this.index]}else{let U=Z6.create(this.top,Z[Y],Q,J);this.top.children.splice(this.index,0,U),this.top=U,this.changed=!0}this.index=0,Y++}}findNodeMatch(Z,Q,J,X){let Y=-1,q;if(X>=this.preMatch.index&&(q=this.preMatch.matches[X-this.preMatch.index]).parent==this.top&&q.matchesNode(Z,Q,J))Y=this.top.children.indexOf(q,this.index);else for(let G=this.index,U=Math.min(this.top.children.length,G+5);G<U;G++){let K=this.top.children[G];if(K.matchesNode(Z,Q,J)&&!this.preMatch.matched.has(K)){Y=G;break}}if(Y<0)return!1;return this.destroyBetween(this.index,Y),this.index++,!0}updateNodeAt(Z,Q,J,X,Y){let q=this.top.children[X];if(q.dirty==W5&&q.dom==q.contentDOM)q.dirty=n4;if(!q.update(Z,Q,J,Y))return!1;return this.destroyBetween(this.index,X),this.index++,!0}findIndexWithChild(Z){for(;;){let Q=Z.parentNode;if(!Q)return-1;if(Q==this.top.contentDOM){let J=Z.pmViewDesc;if(J){for(let X=this.index;X<this.top.children.length;X++)if(this.top.children[X]==J)return X}return-1}Z=Q}}updateNextNode(Z,Q,J,X,Y,q){for(let G=this.index;G<this.top.children.length;G++){let U=this.top.children[G];if(U instanceof q4){let K=this.preMatch.matched.get(U);if(K!=null&&K!=Y)return!1;let H=U.dom,W,z=this.isLocked(H)&&!(Z.isText&&U.node&&U.node.isText&&U.nodeDOM.nodeValue==Z.text&&U.dirty!=W5&&B9(Q,U.outerDeco));if(!z&&U.update(Z,Q,J,X)){if(this.destroyBetween(this.index,G),U.dom!=H)this.changed=!0;return this.index++,!0}else if(!z&&(W=this.recreateWrapper(U,Z,Q,J,X,q))){if(this.destroyBetween(this.index,G),this.top.children[this.index]=W,W.contentDOM)W.dirty=n4,W.updateChildren(X,q+1),W.dirty=f1;return this.changed=!0,this.index++,!0}break}}return!1}recreateWrapper(Z,Q,J,X,Y,q){if(Z.dirty||Q.isAtom||!Z.children.length||!Z.node.content.eq(Q.content)||!B9(J,Z.outerDeco)||!X.eq(Z.innerDeco))return null;let G=q4.create(this.top,Q,J,X,Y,q);if(G.contentDOM){G.children=Z.children,Z.children=[];for(let U of G.children)U.parent=G}return Z.destroy(),G}addNode(Z,Q,J,X,Y){let q=q4.create(this.top,Z,Q,J,X,Y);if(q.contentDOM)q.updateChildren(X,Y+1);this.top.children.splice(this.index++,0,q),this.changed=!0}placeWidget(Z,Q,J){let X=this.index<this.top.children.length?this.top.children[this.index]:null;if(X&&X.matchesWidget(Z)&&(Z==X.widget||!X.widget.type.toDOM.parentNode))this.index++;else{let Y=new TJ(this.top,Z,Q,J);this.top.children.splice(this.index++,0,Y),this.changed=!0}}addTextblockHacks(){let Z=this.top.children[this.index-1],Q=this.top;while(Z instanceof Z6)Q=Z,Z=Q.children[Q.children.length-1];if(!Z||!(Z instanceof j9)||/\n$/.test(Z.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(Z.node.text)){if((H1||o0)&&Z&&Z.dom.contentEditable=="false")this.addHackNode("IMG",Q);this.addHackNode("BR",this.top)}}addHackNode(Z,Q){if(Q==this.top&&this.index<Q.children.length&&Q.children[this.index].matchesHack(Z))this.index++;else{let J=document.createElement(Z);if(Z=="IMG")J.className="ProseMirror-separator",J.alt="";if(Z=="BR")J.className="ProseMirror-trailingBreak";let X=new $J(this.top,[],J,null);if(Q!=this.top)Q.children.push(X);else Q.children.splice(this.index++,0,X);this.changed=!0}}isLocked(Z){return this.lock&&(Z==this.lock||Z.nodeType==1&&Z.contains(this.lock.parentNode))}}function lj(Z,Q){let J=Q,X=J.children.length,Y=Z.childCount,q=new Map,G=[];Z:while(Y>0){let U;for(;;)if(X){let H=J.children[X-1];if(H instanceof Z6)J=H,X=H.children.length;else{U=H,X--;break}}else if(J==Q)break Z;else X=J.parent.children.indexOf(J),J=J.parent;let K=U.node;if(!K)continue;if(K!=Z.child(Y-1))break;--Y,q.set(U,Y),G.push(U)}return{index:Y,matched:q,matches:G.reverse()}}function ij(Z,Q){return Z.type.side-Q.type.side}function dj(Z,Q,J,X){let Y=Q.locals(Z),q=0;if(Y.length==0){for(let H=0;H<Z.childCount;H++){let W=Z.child(H);X(W,Y,Q.forChild(q,W),H),q+=W.nodeSize}return}let G=0,U=[],K=null;for(let H=0;;){let W,z;while(G<Y.length&&Y[G].to==q){let N=Y[G++];if(N.widget)if(!W)W=N;else(z||(z=[W])).push(N)}if(W)if(z){z.sort(ij);for(let N=0;N<z.length;N++)J(z[N],H,!!K)}else J(W,H,!!K);let F,B;if(K)B=-1,F=K,K=null;else if(H<Z.childCount)B=H,F=Z.child(H++);else break;for(let N=0;N<U.length;N++)if(U[N].to<=q)U.splice(N--,1);while(G<Y.length&&Y[G].from<=q&&Y[G].to>q)U.push(Y[G++]);let V=q+F.nodeSize;if(F.isText){let N=V;if(G<Y.length&&Y[G].from<N)N=Y[G].from;for(let j=0;j<U.length;j++)if(U[j].to<N)N=U[j].to;if(N<V)K=F.cut(N-q),F=F.cut(0,N-q),V=N,B=-1}else while(G<Y.length&&Y[G].to<V)G++;let O=F.isInline&&!F.isLeaf?U.filter((N)=>!N.inline):U.slice();X(F,O,Q.forChild(q,F),B),q=V}}function cj(Z){if(Z.nodeName=="UL"||Z.nodeName=="OL"){let Q=Z.style.cssText;Z.style.cssText=Q+"; list-style: square !important",window.getComputedStyle(Z).listStyle,Z.style.cssText=Q}}function rj(Z,Q,J,X){for(let Y=0,q=0;Y<Z.childCount&&q<=X;){let G=Z.child(Y++),U=q;if(q+=G.nodeSize,!G.isText)continue;let K=G.text;while(Y<Z.childCount){let H=Z.child(Y++);if(q+=H.nodeSize,!H.isText)break;K+=H.text}if(q>=J){if(q>=X&&K.slice(X-Q.length-U,X-U)==Q)return X-Q.length;let H=U<X?K.lastIndexOf(Q,X-U-1):-1;if(H>=0&&H+Q.length+U>=J)return U+H;if(J==X&&K.length>=X+Q.length-U&&K.slice(X-U,X-U+Q.length)==Q)return X}}return-1}function PJ(Z,Q,J,X,Y){let q=[];for(let G=0,U=0;G<Z.length;G++){let K=Z[G],H=U,W=U+=K.size;if(H>=J||W<=Q)q.push(K);else{if(H<Q)q.push(K.slice(0,Q-H,X));if(Y)q.push(Y),Y=void 0;if(W>J)q.push(K.slice(J-H,K.size,X))}}return q}function bJ(Z,Q=null){let J=Z.domSelectionRange(),X=Z.state.doc;if(!J.focusNode)return null;let Y=Z.docView.nearestDesc(J.focusNode),q=Y&&Y.size==0,G=Z.docView.posFromDOM(J.focusNode,J.focusOffset,1);if(G<0)return null;let U=X.resolve(G),K,H;if(N9(J)){K=G;while(Y&&!Y.node)Y=Y.parent;let z=Y.node;if(Y&&z.isAtom&&s.isSelectable(z)&&Y.parent&&!(z.isInline&&Mj(J.focusNode,J.focusOffset,Y.dom))){let F=Y.posBefore;H=new s(G==F?U:X.resolve(F))}}else{if(J instanceof Z.dom.ownerDocument.defaultView.Selection&&J.rangeCount>1){let z=G,F=G;for(let B=0;B<J.rangeCount;B++){let V=J.getRangeAt(B);z=Math.min(z,Z.docView.posFromDOM(V.startContainer,V.startOffset,1)),F=Math.max(F,Z.docView.posFromDOM(V.endContainer,V.endOffset,-1))}if(z<0)return null;[K,G]=F==Z.state.selection.anchor?[F,z]:[z,F],U=X.resolve(G)}else K=Z.docView.posFromDOM(J.anchorNode,J.anchorOffset,1);if(K<0)return null}let W=X.resolve(K);if(!H){let z=Q=="pointer"||Z.state.selection.head<U.pos&&!q?1:-1;H=CJ(Z,W,U,z)}return H}function zW(Z){return Z.editable?Z.hasFocus():BW(Z)&&document.activeElement&&document.activeElement.contains(Z.dom)}function y5(Z,Q=!1){let J=Z.state.selection;if(FW(Z,J),!zW(Z))return;if(!Q&&Z.input.mouseDown&&Z.input.mouseDown.allowDefault&&o0){let X=Z.domSelectionRange(),Y=Z.domObserver.currentSelection;if(X.anchorNode&&Y.anchorNode&&e4(X.anchorNode,X.anchorOffset,Y.anchorNode,Y.anchorOffset)){Z.input.mouseDown.delayedSelectionSync=!0,Z.domObserver.setCurSelection();return}}if(Z.domObserver.disconnectSelection(),Z.cursorWrapper)nj(Z);else{let{anchor:X,head:Y}=J,q,G;if(TH&&!(J instanceof Z0)){if(!J.$from.parent.inlineContent)q=$H(Z,J.from);if(!J.empty&&!J.$from.parent.inlineContent)G=$H(Z,J.to)}if(Z.docView.setSelection(X,Y,Z,Q),TH){if(q)bH(q);if(G)bH(G)}if(J.visible)Z.dom.classList.remove("ProseMirror-hideselection");else if(Z.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document)aj(Z)}Z.domObserver.setCurSelection(),Z.domObserver.connectSelection()}var TH=H1||o0&&oH<63;function $H(Z,Q){let{node:J,offset:X}=Z.docView.domFromPos(Q,0),Y=X<J.childNodes.length?J.childNodes[X]:null,q=X?J.childNodes[X-1]:null;if(H1&&Y&&Y.contentEditable=="false")return FJ(Y);if((!Y||Y.contentEditable=="false")&&(!q||q.contentEditable=="false")){if(Y)return FJ(Y);else if(q)return FJ(q)}}function FJ(Z){if(Z.contentEditable="true",H1&&Z.draggable)Z.draggable=!1,Z.wasDraggable=!0;return Z}function bH(Z){if(Z.contentEditable="false",Z.wasDraggable)Z.draggable=!0,Z.wasDraggable=null}function aj(Z){let Q=Z.dom.ownerDocument;Q.removeEventListener("selectionchange",Z.input.hideSelectionGuard);let J=Z.domSelectionRange(),X=J.anchorNode,Y=J.anchorOffset;Q.addEventListener("selectionchange",Z.input.hideSelectionGuard=()=>{if(J.anchorNode!=X||J.anchorOffset!=Y)Q.removeEventListener("selectionchange",Z.input.hideSelectionGuard),setTimeout(()=>{if(!zW(Z)||Z.state.selection.visible)Z.dom.classList.remove("ProseMirror-hideselection")},20)})}function nj(Z){let Q=Z.domSelection();if(!Q)return;let J=Z.cursorWrapper.dom,X=J.nodeName=="IMG";if(X)Q.collapse(J.parentNode,J1(J)+1);else Q.collapse(J,0);if(!X&&!Z.state.selection.visible&&I1&&Y4<=11)J.disabled=!0,J.disabled=!1}function FW(Z,Q){if(Q instanceof s){let J=Z.docView.descAt(Q.from);if(J!=Z.lastSelectedViewDesc){if(CH(Z),J)J.selectNode();Z.lastSelectedViewDesc=J}}else CH(Z)}function CH(Z){if(Z.lastSelectedViewDesc){if(Z.lastSelectedViewDesc.parent)Z.lastSelectedViewDesc.deselectNode();Z.lastSelectedViewDesc=void 0}}function CJ(Z,Q,J,X){return Z.someProp("createSelectionBetween",(Y)=>Y(Z,Q,J))||Z0.between(Q,J,X)}function yH(Z){if(Z.editable&&!Z.hasFocus())return!1;return BW(Z)}function BW(Z){let Q=Z.domSelectionRange();if(!Q.anchorNode)return!1;try{return Z.dom.contains(Q.anchorNode.nodeType==3?Q.anchorNode.parentNode:Q.anchorNode)&&(Z.editable||Z.dom.contains(Q.focusNode.nodeType==3?Q.focusNode.parentNode:Q.focusNode))}catch(J){return!1}}function sj(Z){let Q=Z.docView.domFromPos(Z.state.selection.anchor,0),J=Z.domSelectionRange();return e4(Q.node,Q.offset,J.anchorNode,J.anchorOffset)}function RJ(Z,Q){let{$anchor:J,$head:X}=Z.selection,Y=Q>0?J.max(X):J.min(X),q=!Y.parent.inlineContent?Y:Y.depth?Z.doc.resolve(Q>0?Y.after():Y.before()):null;return q&&n.findFrom(q,Q)}function Q4(Z,Q){return Z.dispatch(Z.state.tr.setSelection(Q).scrollIntoView()),!0}function SH(Z,Q,J){let X=Z.state.selection;if(X instanceof Z0){if(J.indexOf("s")>-1){let{$head:Y}=X,q=Y.textOffset?null:Q<0?Y.nodeBefore:Y.nodeAfter;if(!q||q.isText||!q.isLeaf)return!1;let G=Z.state.doc.resolve(Y.pos+q.nodeSize*(Q<0?-1:1));return Q4(Z,new Z0(X.$anchor,G))}else if(!X.empty)return!1;else if(Z.endOfTextblock(Q>0?"forward":"backward")){let Y=RJ(Z.state,Q);if(Y&&Y instanceof s)return Q4(Z,Y);return!1}else if(!(v1&&J.indexOf("m")>-1)){let Y=X.$head,q=Y.textOffset?null:Q<0?Y.nodeBefore:Y.nodeAfter,G;if(!q||q.isText)return!1;let U=Q<0?Y.pos-q.nodeSize:Y.pos;if(!(q.isAtom||(G=Z.docView.descAt(U))&&!G.contentDOM))return!1;if(s.isSelectable(q))return Q4(Z,new s(Q<0?Z.state.doc.resolve(Y.pos-q.nodeSize):Y));else if(j8)return Q4(Z,new Z0(Z.state.doc.resolve(Q<0?U:U+q.nodeSize)));else return!1}}else if(X instanceof s&&X.node.isInline)return Q4(Z,new Z0(Q>0?X.$to:X.$from));else{let Y=RJ(Z.state,Q);if(Y)return Q4(Z,Y);return!1}}function V9(Z){return Z.nodeType==3?Z.nodeValue.length:Z.childNodes.length}function V8(Z,Q){let J=Z.pmViewDesc;return J&&J.size==0&&(Q<0||Z.nextSibling||Z.nodeName!="BR")}function i6(Z,Q){return Q<0?oj(Z):tj(Z)}function oj(Z){let Q=Z.domSelectionRange(),J=Q.focusNode,X=Q.focusOffset;if(!J)return;let Y,q,G=!1;if(u1&&J.nodeType==1&&X<V9(J)&&V8(J.childNodes[X],-1))G=!0;for(;;)if(X>0)if(J.nodeType!=1)break;else{let U=J.childNodes[X-1];if(V8(U,-1))Y=J,q=--X;else if(U.nodeType==3)J=U,X=J.nodeValue.length;else break}else if(VW(J))break;else{let U=J.previousSibling;while(U&&V8(U,-1))Y=J.parentNode,q=J1(U),U=U.previousSibling;if(!U){if(J=J.parentNode,J==Z.dom)break;X=0}else J=U,X=V9(J)}if(G)MJ(Z,J,X);else if(Y)MJ(Z,Y,q)}function tj(Z){let Q=Z.domSelectionRange(),J=Q.focusNode,X=Q.focusOffset;if(!J)return;let Y=V9(J),q,G;for(;;)if(X<Y){if(J.nodeType!=1)break;let U=J.childNodes[X];if(V8(U,1))q=J,G=++X;else break}else if(VW(J))break;else{let U=J.nextSibling;while(U&&V8(U,1))q=U.parentNode,G=J1(U)+1,U=U.nextSibling;if(!U){if(J=J.parentNode,J==Z.dom)break;X=Y=0}else J=U,X=0,Y=V9(J)}if(q)MJ(Z,q,G)}function VW(Z){let Q=Z.pmViewDesc;return Q&&Q.node&&Q.node.isBlock}function ej(Z,Q){while(Z&&Q==Z.childNodes.length&&!N8(Z))Q=J1(Z)+1,Z=Z.parentNode;while(Z&&Q<Z.childNodes.length){let J=Z.childNodes[Q];if(J.nodeType==3)return J;if(J.nodeType==1&&J.contentEditable=="false")break;Z=J,Q=0}}function ZA(Z,Q){while(Z&&!Q&&!N8(Z))Q=J1(Z),Z=Z.parentNode;while(Z&&Q){let J=Z.childNodes[Q-1];if(J.nodeType==3)return J;if(J.nodeType==1&&J.contentEditable=="false")break;Z=J,Q=Z.childNodes.length}}function MJ(Z,Q,J){if(Q.nodeType!=3){let q,G;if(G=ej(Q,J))Q=G,J=0;else if(q=ZA(Q,J))Q=q,J=q.nodeValue.length}let X=Z.domSelection();if(!X)return;if(N9(X)){let q=document.createRange();q.setEnd(Q,J),q.setStart(Q,J),X.removeAllRanges(),X.addRange(q)}else if(X.extend)X.extend(Q,J);Z.domObserver.setCurSelection();let{state:Y}=Z;setTimeout(()=>{if(Z.state==Y)y5(Z)},50)}function wH(Z,Q){let J=Z.state.doc.resolve(Q);if(!(o0||tH)&&J.parent.inlineContent){let Y=Z.coordsAtPos(Q);if(Q>J.start()){let q=Z.coordsAtPos(Q-1),G=(q.top+q.bottom)/2;if(G>Y.top&&G<Y.bottom&&Math.abs(q.left-Y.left)>1)return q.left<Y.left?"ltr":"rtl"}if(Q<J.end()){let q=Z.coordsAtPos(Q+1),G=(q.top+q.bottom)/2;if(G>Y.top&&G<Y.bottom&&Math.abs(q.left-Y.left)>1)return q.left>Y.left?"ltr":"rtl"}}return getComputedStyle(Z.dom).direction=="rtl"?"rtl":"ltr"}function xH(Z,Q,J){let X=Z.state.selection;if(X instanceof Z0&&!X.empty||J.indexOf("s")>-1)return!1;if(v1&&J.indexOf("m")>-1)return!1;let{$from:Y,$to:q}=X;if(!Y.parent.inlineContent||Z.endOfTextblock(Q<0?"up":"down")){let G=RJ(Z.state,Q);if(G&&G instanceof s)return Q4(Z,G)}if(!Y.parent.inlineContent){let G=Q<0?Y:q,U=X instanceof L1?n.near(G,Q):n.findFrom(G,Q);return U?Q4(Z,U):!1}return!1}function kH(Z,Q){if(!(Z.state.selection instanceof Z0))return!0;let{$head:J,$anchor:X,empty:Y}=Z.state.selection;if(!J.sameParent(X))return!0;if(!Y)return!1;if(Z.endOfTextblock(Q>0?"forward":"backward"))return!0;let q=!J.textOffset&&(Q<0?J.nodeBefore:J.nodeAfter);if(q&&!q.isText){let G=Z.state.tr;if(Q<0)G.delete(J.pos-q.nodeSize,J.pos);else G.delete(J.pos,J.pos+q.nodeSize);return Z.dispatch(G),!0}return!1}function gH(Z,Q,J){Z.domObserver.stop(),Q.contentEditable=J,Z.domObserver.start()}function QA(Z){if(!H1||Z.state.selection.$head.parentOffset>0)return!1;let{focusNode:Q,focusOffset:J}=Z.domSelectionRange();if(Q&&Q.nodeType==1&&J==0&&Q.firstChild&&Q.firstChild.contentEditable=="false"){let X=Q.firstChild;gH(Z,X,"true"),setTimeout(()=>gH(Z,X,"false"),20)}return!1}function JA(Z){let Q="";if(Z.ctrlKey)Q+="c";if(Z.metaKey)Q+="m";if(Z.altKey)Q+="a";if(Z.shiftKey)Q+="s";return Q}function XA(Z,Q){let J=Q.keyCode,X=JA(Q);if(J==8||v1&&J==72&&X=="c")return kH(Z,-1)||i6(Z,-1);else if(J==46&&!Q.shiftKey||v1&&J==68&&X=="c")return kH(Z,1)||i6(Z,1);else if(J==13||J==27)return!0;else if(J==37||v1&&J==66&&X=="c"){let Y=J==37?wH(Z,Z.state.selection.from)=="ltr"?-1:1:-1;return SH(Z,Y,X)||i6(Z,Y)}else if(J==39||v1&&J==70&&X=="c"){let Y=J==39?wH(Z,Z.state.selection.from)=="ltr"?1:-1:1;return SH(Z,Y,X)||i6(Z,Y)}else if(J==38||v1&&J==80&&X=="c")return xH(Z,-1,X)||i6(Z,-1);else if(J==40||v1&&J==78&&X=="c")return QA(Z)||xH(Z,1,X)||i6(Z,1);else if(X==(v1?"m":"c")&&(J==66||J==73||J==89||J==90))return!0;return!1}function yJ(Z,Q){Z.someProp("transformCopied",(B)=>{Q=B(Q,Z)});let J=[],{content:X,openStart:Y,openEnd:q}=Q;while(Y>1&&q>1&&X.childCount==1&&X.firstChild.childCount==1){Y--,q--;let B=X.firstChild;J.push(B.type.name,B.attrs!=B.type.defaultAttrs?B.attrs:null),X=B.content}let G=Z.someProp("clipboardSerializer")||d5.fromSchema(Z.state.schema),U=AW(),K=U.createElement("div");K.appendChild(G.serializeFragment(X,{document:U}));let H=K.firstChild,W,z=0;while(H&&H.nodeType==1&&(W=jW[H.nodeName.toLowerCase()])){for(let B=W.length-1;B>=0;B--){let V=U.createElement(W[B]);while(K.firstChild)V.appendChild(K.firstChild);K.appendChild(V),z++}H=K.firstChild}if(H&&H.nodeType==1)H.setAttribute("data-pm-slice",`${Y} ${q}${z?` -${z}`:""} ${JSON.stringify(J)}`);let F=Z.someProp("clipboardTextSerializer",(B)=>B(Q,Z))||Q.content.textBetween(0,Q.content.size,`

`);return{dom:K,text:F,slice:Q}}function LW(Z,Q,J,X,Y){let q=Y.parent.type.spec.code,G,U;if(!J&&!Q)return null;let K=!!Q&&(X||q||!J);if(K){if(Z.someProp("transformPastedText",(F)=>{Q=F(Q,q||X,Z)}),q)return U=new h(x.from(Z.state.schema.text(Q.replace(/\r\n?/g,`
`))),0,0),Z.someProp("transformPasted",(F)=>{U=F(U,Z,!0)}),U;let z=Z.someProp("clipboardTextParser",(F)=>F(Q,Y,X,Z));if(z)U=z;else{let F=Y.marks(),{schema:B}=Z.state,V=d5.fromSchema(B);G=document.createElement("div"),Q.split(/(?:\r\n?|\n)+/).forEach((O)=>{let N=G.appendChild(document.createElement("p"));if(O)N.appendChild(V.serializeNode(B.text(O,F)))})}}else if(Z.someProp("transformPastedHTML",(z)=>{J=z(J,Z)}),G=UA(J),j8)KA(G);let H=G&&G.querySelector("[data-pm-slice]"),W=H&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(H.getAttribute("data-pm-slice")||"");if(W&&W[3])for(let z=+W[3];z>0;z--){let F=G.firstChild;while(F&&F.nodeType!=1)F=F.nextSibling;if(!F)break;G=F}if(!U)U=(Z.someProp("clipboardParser")||Z.someProp("domParser")||M5.fromSchema(Z.state.schema)).parseSlice(G,{preserveWhitespace:!!(K||W),context:Y,ruleFromNode(F){if(F.nodeName=="BR"&&!F.nextSibling&&F.parentNode&&!YA.test(F.parentNode.nodeName))return{ignore:!0};return null}});if(W)U=HA(vH(U,+W[1],+W[2]),W[4]);else if(U=h.maxOpen(qA(U.content,Y),!0),U.openStart||U.openEnd){let z=0,F=0;for(let B=U.content.firstChild;z<U.openStart&&!B.type.spec.isolating;z++,B=B.firstChild);for(let B=U.content.lastChild;F<U.openEnd&&!B.type.spec.isolating;F++,B=B.lastChild);U=vH(U,z,F)}return Z.someProp("transformPasted",(z)=>{U=z(U,Z,K)}),U}var YA=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function qA(Z,Q){if(Z.childCount<2)return Z;for(let J=Q.depth;J>=0;J--){let Y=Q.node(J).contentMatchAt(Q.index(J)),q,G=[];if(Z.forEach((U)=>{if(!G)return;let K=Y.findWrapping(U.type),H;if(!K)return G=null;if(H=G.length&&q.length&&OW(K,q,U,G[G.length-1],0))G[G.length-1]=H;else{if(G.length)G[G.length-1]=NW(G[G.length-1],q.length);let W=_W(U,K);G.push(W),Y=Y.matchType(W.type),q=K}}),G)return x.from(G)}return Z}function _W(Z,Q,J=0){for(let X=Q.length-1;X>=J;X--)Z=Q[X].create(null,x.from(Z));return Z}function OW(Z,Q,J,X,Y){if(Y<Z.length&&Y<Q.length&&Z[Y]==Q[Y]){let q=OW(Z,Q,J,X.lastChild,Y+1);if(q)return X.copy(X.content.replaceChild(X.childCount-1,q));if(X.contentMatchAt(X.childCount).matchType(Y==Z.length-1?J.type:Z[Y+1]))return X.copy(X.content.append(x.from(_W(J,Z,Y+1))))}}function NW(Z,Q){if(Q==0)return Z;let J=Z.content.replaceChild(Z.childCount-1,NW(Z.lastChild,Q-1)),X=Z.contentMatchAt(Z.childCount).fillBefore(x.empty,!0);return Z.copy(J.append(X))}function DJ(Z,Q,J,X,Y,q){let G=Q<0?Z.firstChild:Z.lastChild,U=G.content;if(Z.childCount>1)q=0;if(Y<X-1)U=DJ(U,Q,J,X,Y+1,q);if(Y>=J)U=Q<0?G.contentMatchAt(0).fillBefore(U,q<=Y).append(U):U.append(G.contentMatchAt(G.childCount).fillBefore(x.empty,!0));return Z.replaceChild(Q<0?0:Z.childCount-1,G.copy(U))}function vH(Z,Q,J){if(Q<Z.openStart)Z=new h(DJ(Z.content,-1,Q,Z.openStart,0,Z.openEnd),Q,Z.openEnd);if(J<Z.openEnd)Z=new h(DJ(Z.content,1,J,Z.openEnd,0,0),Z.openStart,J);return Z}var jW={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},hH=null;function AW(){return hH||(hH=document.implementation.createHTMLDocument("title"))}var BJ=null;function GA(Z){let Q=window.trustedTypes;if(!Q)return Z;if(!BJ)BJ=Q.defaultPolicy||Q.createPolicy("ProseMirrorClipboard",{createHTML:(J)=>J});return BJ.createHTML(Z)}function UA(Z){let Q=/^(\s*<meta [^>]*>)*/.exec(Z);if(Q)Z=Z.slice(Q[0].length);let J=AW().createElement("div"),X=/<([a-z][^>\s]+)/i.exec(Z),Y;if(Y=X&&jW[X[1].toLowerCase()])Z=Y.map((q)=>"<"+q+">").join("")+Z+Y.map((q)=>"</"+q+">").reverse().join("");if(J.innerHTML=GA(Z),Y)for(let q=0;q<Y.length;q++)J=J.querySelector(Y[q])||J;return J}function KA(Z){let Q=Z.querySelectorAll(o0?"span:not([class]):not([style])":"span.Apple-converted-space");for(let J=0;J<Q.length;J++){let X=Q[J];if(X.childNodes.length==1&&X.textContent==" "&&X.parentNode)X.parentNode.replaceChild(Z.ownerDocument.createTextNode(" "),X)}}function HA(Z,Q){if(!Z.size)return Z;let J=Z.content.firstChild.type.schema,X;try{X=JSON.parse(Q)}catch(U){return Z}let{content:Y,openStart:q,openEnd:G}=Z;for(let U=X.length-2;U>=0;U-=2){let K=J.nodes[X[U]];if(!K||K.hasRequiredAttrs())break;Y=x.from(K.create(X[U+1],Y)),q++,G++}return new h(Y,q,G)}var _1={},O1={},WA={touchstart:!0,touchmove:!0};class PW{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-200000000,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function zA(Z){for(let Q in _1){let J=_1[Q];Z.dom.addEventListener(Q,Z.input.eventHandlers[Q]=(X)=>{if(BA(Z,X)&&!SJ(Z,X)&&(Z.editable||!(X.type in O1)))J(Z,X)},WA[Q]?{passive:!0}:void 0)}if(H1)Z.dom.addEventListener("input",()=>null);IJ(Z)}function X4(Z,Q){Z.input.lastSelectionOrigin=Q,Z.input.lastSelectionTime=Date.now()}function FA(Z){Z.domObserver.stop();for(let Q in Z.input.eventHandlers)Z.dom.removeEventListener(Q,Z.input.eventHandlers[Q]);clearTimeout(Z.input.composingTimeout),clearTimeout(Z.input.lastIOSEnterFallbackTimeout)}function IJ(Z){Z.someProp("handleDOMEvents",(Q)=>{for(let J in Q)if(!Z.input.eventHandlers[J])Z.dom.addEventListener(J,Z.input.eventHandlers[J]=(X)=>SJ(Z,X))})}function SJ(Z,Q){return Z.someProp("handleDOMEvents",(J)=>{let X=J[Q.type];return X?X(Z,Q)||Q.defaultPrevented:!1})}function BA(Z,Q){if(!Q.bubbles)return!0;if(Q.defaultPrevented)return!1;for(let J=Q.target;J!=Z.dom;J=J.parentNode)if(!J||J.nodeType==11||J.pmViewDesc&&J.pmViewDesc.stopEvent(Q))return!1;return!0}function VA(Z,Q){if(!SJ(Z,Q)&&_1[Q.type]&&(Z.editable||!(Q.type in O1)))_1[Q.type](Z,Q)}O1.keydown=(Z,Q)=>{let J=Q;if(Z.input.shiftKey=J.keyCode==16||J.shiftKey,DW(Z,J))return;if(Z.input.lastKeyCode=J.keyCode,Z.input.lastKeyCodeTime=Date.now(),C5&&o0&&J.keyCode==13)return;if(J.keyCode!=229)Z.domObserver.forceFlush();if(a6&&J.keyCode==13&&!J.ctrlKey&&!J.altKey&&!J.metaKey){let X=Date.now();Z.input.lastIOSEnter=X,Z.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{if(Z.input.lastIOSEnter==X)Z.someProp("handleKeyDown",(Y)=>Y(Z,a4(13,"Enter"))),Z.input.lastIOSEnter=0},200)}else if(Z.someProp("handleKeyDown",(X)=>X(Z,J))||XA(Z,J))J.preventDefault();else X4(Z,"key")};O1.keyup=(Z,Q)=>{if(Q.keyCode==16)Z.input.shiftKey=!1};O1.keypress=(Z,Q)=>{let J=Q;if(DW(Z,J)||!J.charCode||J.ctrlKey&&!J.altKey||v1&&J.metaKey)return;if(Z.someProp("handleKeyPress",(Y)=>Y(Z,J))){J.preventDefault();return}let X=Z.state.selection;if(!(X instanceof Z0)||!X.$from.sameParent(X.$to)){let Y=String.fromCharCode(J.charCode),q=()=>Z.state.tr.insertText(Y).scrollIntoView();if(!/[\r\n]/.test(Y)&&!Z.someProp("handleTextInput",(G)=>G(Z,X.$from.pos,X.$to.pos,Y,q)))Z.dispatch(q());J.preventDefault()}};function A9(Z){return{left:Z.clientX,top:Z.clientY}}function LA(Z,Q){let J=Q.x-Z.clientX,X=Q.y-Z.clientY;return J*J+X*X<100}function wJ(Z,Q,J,X,Y){if(X==-1)return!1;let q=Z.state.doc.resolve(X);for(let G=q.depth+1;G>0;G--)if(Z.someProp(Q,(U)=>G>q.depth?U(Z,J,q.nodeAfter,q.before(G),Y,!0):U(Z,J,q.node(G),q.before(G),Y,!1)))return!0;return!1}function c6(Z,Q,J){if(!Z.focused)Z.focus();if(Z.state.selection.eq(Q))return;let X=Z.state.tr.setSelection(Q);if(J=="pointer")X.setMeta("pointer",!0);Z.dispatch(X)}function _A(Z,Q){if(Q==-1)return!1;let J=Z.state.doc.resolve(Q),X=J.nodeAfter;if(X&&X.isAtom&&s.isSelectable(X))return c6(Z,new s(J),"pointer"),!0;return!1}function OA(Z,Q){if(Q==-1)return!1;let J=Z.state.selection,X,Y;if(J instanceof s)X=J.node;let q=Z.state.doc.resolve(Q);for(let G=q.depth+1;G>0;G--){let U=G>q.depth?q.nodeAfter:q.node(G);if(s.isSelectable(U)){if(X&&J.$from.depth>0&&G>=J.$from.depth&&q.before(J.$from.depth+1)==J.$from.pos)Y=q.before(J.$from.depth);else Y=q.before(G);break}}if(Y!=null)return c6(Z,s.create(Z.state.doc,Y),"pointer"),!0;else return!1}function NA(Z,Q,J,X,Y){return wJ(Z,"handleClickOn",Q,J,X)||Z.someProp("handleClick",(q)=>q(Z,Q,X))||(Y?OA(Z,J):_A(Z,J))}function jA(Z,Q,J,X){return wJ(Z,"handleDoubleClickOn",Q,J,X)||Z.someProp("handleDoubleClick",(Y)=>Y(Z,Q,X))}function AA(Z,Q,J,X){return wJ(Z,"handleTripleClickOn",Q,J,X)||Z.someProp("handleTripleClick",(Y)=>Y(Z,Q,X))||PA(Z,J,X)}function PA(Z,Q,J){if(J.button!=0)return!1;let X=Z.state.doc;if(Q==-1){if(X.inlineContent)return c6(Z,Z0.create(X,0,X.content.size),"pointer"),!0;return!1}let Y=X.resolve(Q);for(let q=Y.depth+1;q>0;q--){let G=q>Y.depth?Y.nodeAfter:Y.node(q),U=Y.before(q);if(G.inlineContent)c6(Z,Z0.create(X,U+1,U+1+G.content.size),"pointer");else if(s.isSelectable(G))c6(Z,s.create(X,U),"pointer");else continue;return!0}}function xJ(Z){return L9(Z)}var RW=v1?"metaKey":"ctrlKey";_1.mousedown=(Z,Q)=>{let J=Q;Z.input.shiftKey=J.shiftKey;let X=xJ(Z),Y=Date.now(),q="singleClick";if(Y-Z.input.lastClick.time<500&&LA(J,Z.input.lastClick)&&!J[RW]&&Z.input.lastClick.button==J.button){if(Z.input.lastClick.type=="singleClick")q="doubleClick";else if(Z.input.lastClick.type=="doubleClick")q="tripleClick"}Z.input.lastClick={time:Y,x:J.clientX,y:J.clientY,type:q,button:J.button};let G=Z.posAtCoords(A9(J));if(!G)return;if(q=="singleClick"){if(Z.input.mouseDown)Z.input.mouseDown.done();Z.input.mouseDown=new MW(Z,G,J,!!X)}else if((q=="doubleClick"?jA:AA)(Z,G.pos,G.inside,J))J.preventDefault();else X4(Z,"pointer")};class MW{constructor(Z,Q,J,X){this.view=Z,this.pos=Q,this.event=J,this.flushed=X,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=Z.state.doc,this.selectNode=!!J[RW],this.allowDefault=J.shiftKey;let Y,q;if(Q.inside>-1)Y=Z.state.doc.nodeAt(Q.inside),q=Q.inside;else{let H=Z.state.doc.resolve(Q.pos);Y=H.parent,q=H.depth?H.before():0}let G=X?null:J.target,U=G?Z.docView.nearestDesc(G,!0):null;this.target=U&&U.nodeDOM.nodeType==1?U.nodeDOM:null;let{selection:K}=Z.state;if(J.button==0&&Y.type.spec.draggable&&Y.type.spec.selectable!==!1||K instanceof s&&K.from<=q&&K.to>q)this.mightDrag={node:Y,pos:q,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&u1&&!this.target.hasAttribute("contentEditable"))};if(this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)){if(this.view.domObserver.stop(),this.mightDrag.addAttr)this.target.draggable=!0;if(this.mightDrag.setUneditable)setTimeout(()=>{if(this.view.input.mouseDown==this)this.target.setAttribute("contentEditable","false")},20);this.view.domObserver.start()}Z.root.addEventListener("mouseup",this.up=this.up.bind(this)),Z.root.addEventListener("mousemove",this.move=this.move.bind(this)),X4(Z,"pointer")}done(){if(this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target){if(this.view.domObserver.stop(),this.mightDrag.addAttr)this.target.removeAttribute("draggable");if(this.mightDrag.setUneditable)this.target.removeAttribute("contentEditable");this.view.domObserver.start()}if(this.delayedSelectionSync)setTimeout(()=>y5(this.view));this.view.input.mouseDown=null}up(Z){if(this.done(),!this.view.dom.contains(Z.target))return;let Q=this.pos;if(this.view.state.doc!=this.startDoc)Q=this.view.posAtCoords(A9(Z));if(this.updateAllowDefault(Z),this.allowDefault||!Q)X4(this.view,"pointer");else if(NA(this.view,Q.pos,Q.inside,Z,this.selectNode))Z.preventDefault();else if(Z.button==0&&(this.flushed||H1&&this.mightDrag&&!this.mightDrag.node.isAtom||o0&&!this.view.state.selection.visible&&Math.min(Math.abs(Q.pos-this.view.state.selection.from),Math.abs(Q.pos-this.view.state.selection.to))<=2))c6(this.view,n.near(this.view.state.doc.resolve(Q.pos)),"pointer"),Z.preventDefault();else X4(this.view,"pointer")}move(Z){if(this.updateAllowDefault(Z),X4(this.view,"pointer"),Z.buttons==0)this.done()}updateAllowDefault(Z){if(!this.allowDefault&&(Math.abs(this.event.x-Z.clientX)>4||Math.abs(this.event.y-Z.clientY)>4))this.allowDefault=!0}}_1.touchstart=(Z)=>{Z.input.lastTouch=Date.now(),xJ(Z),X4(Z,"pointer")};_1.touchmove=(Z)=>{Z.input.lastTouch=Date.now(),X4(Z,"pointer")};_1.contextmenu=(Z)=>xJ(Z);function DW(Z,Q){if(Z.composing)return!0;if(H1&&Math.abs(Q.timeStamp-Z.input.compositionEndedAt)<500)return Z.input.compositionEndedAt=-200000000,!0;return!1}var RA=C5?5000:-1;O1.compositionstart=O1.compositionupdate=(Z)=>{if(!Z.composing){Z.domObserver.flush();let{state:Q}=Z,J=Q.selection.$to;if(Q.selection instanceof Z0&&(Q.storedMarks||!J.textOffset&&J.parentOffset&&J.nodeBefore.marks.some((X)=>X.type.spec.inclusive===!1)||o0&&tH&&MA(Z)))Z.markCursor=Z.state.storedMarks||J.marks(),L9(Z,!0),Z.markCursor=null;else if(L9(Z,!Q.selection.empty),u1&&Q.selection.empty&&J.parentOffset&&!J.textOffset&&J.nodeBefore.marks.length){let X=Z.domSelectionRange();for(let{focusNode:Y,focusOffset:q}=X;Y&&Y.nodeType==1&&q!=0;){let G=q<0?Y.lastChild:Y.childNodes[q-1];if(!G)break;if(G.nodeType==3){let U=Z.domSelection();if(U)U.collapse(G,G.nodeValue.length);break}else Y=G,q=-1}}Z.input.composing=!0}IW(Z,RA)};function MA(Z){let{focusNode:Q,focusOffset:J}=Z.domSelectionRange();if(!Q||Q.nodeType!=1||J>=Q.childNodes.length)return!1;let X=Q.childNodes[J];return X.nodeType==1&&X.contentEditable=="false"}O1.compositionend=(Z,Q)=>{if(Z.composing){if(Z.input.composing=!1,Z.input.compositionEndedAt=Q.timeStamp,Z.input.compositionPendingChanges=Z.domObserver.pendingRecords().length?Z.input.compositionID:0,Z.input.compositionNode=null,Z.input.compositionPendingChanges)Promise.resolve().then(()=>Z.domObserver.flush());Z.input.compositionID++,IW(Z,20)}};function IW(Z,Q){if(clearTimeout(Z.input.composingTimeout),Q>-1)Z.input.composingTimeout=setTimeout(()=>L9(Z),Q)}function EW(Z){if(Z.composing)Z.input.composing=!1,Z.input.compositionEndedAt=IA();while(Z.input.compositionNodes.length>0)Z.input.compositionNodes.pop().markParentsDirty()}function DA(Z){let Q=Z.domSelectionRange();if(!Q.focusNode)return null;let J=Pj(Q.focusNode,Q.focusOffset),X=Rj(Q.focusNode,Q.focusOffset);if(J&&X&&J!=X){let Y=X.pmViewDesc,q=Z.domObserver.lastChangedTextNode;if(J==q||X==q)return q;if(!Y||!Y.isText(X.nodeValue))return X;else if(Z.input.compositionNode==X){let G=J.pmViewDesc;if(!(!G||!G.isText(J.nodeValue)))return X}}return J||X}function IA(){let Z=document.createEvent("Event");return Z.initEvent("event",!0,!0),Z.timeStamp}function L9(Z,Q=!1){if(C5&&Z.domObserver.flushingSoon>=0)return;if(Z.domObserver.forceFlush(),EW(Z),Q||Z.docView&&Z.docView.dirty){let J=bJ(Z),X=Z.state.selection;if(J&&!J.eq(X))Z.dispatch(Z.state.tr.setSelection(J));else if((Z.markCursor||Q)&&!X.$from.node(X.$from.sharedDepth(X.to)).inlineContent)Z.dispatch(Z.state.tr.deleteSelection());else Z.updateState(Z.state);return!0}return!1}function EA(Z,Q){if(!Z.dom.parentNode)return;let J=Z.dom.parentNode.appendChild(document.createElement("div"));J.appendChild(Q),J.style.cssText="position: fixed; left: -10000px; top: 10px";let X=getSelection(),Y=document.createRange();Y.selectNodeContents(Q),Z.dom.blur(),X.removeAllRanges(),X.addRange(Y),setTimeout(()=>{if(J.parentNode)J.parentNode.removeChild(J);Z.focus()},50)}var L8=I1&&Y4<15||a6&&Ej<604;_1.copy=O1.cut=(Z,Q)=>{let J=Q,X=Z.state.selection,Y=J.type=="cut";if(X.empty)return;let q=L8?null:J.clipboardData,G=X.content(),{dom:U,text:K}=yJ(Z,G);if(q)J.preventDefault(),q.clearData(),q.setData("text/html",U.innerHTML),q.setData("text/plain",K);else EA(Z,U);if(Y)Z.dispatch(Z.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function TA(Z){return Z.openStart==0&&Z.openEnd==0&&Z.content.childCount==1?Z.content.firstChild:null}function $A(Z,Q){if(!Z.dom.parentNode)return;let J=Z.input.shiftKey||Z.state.selection.$from.parent.type.spec.code,X=Z.dom.parentNode.appendChild(document.createElement(J?"textarea":"div"));if(!J)X.contentEditable="true";X.style.cssText="position: fixed; left: -10000px; top: 10px",X.focus();let Y=Z.input.shiftKey&&Z.input.lastKeyCode!=45;setTimeout(()=>{if(Z.focus(),X.parentNode)X.parentNode.removeChild(X);if(J)_8(Z,X.value,null,Y,Q);else _8(Z,X.textContent,X.innerHTML,Y,Q)},50)}function _8(Z,Q,J,X,Y){let q=LW(Z,Q,J,X,Z.state.selection.$from);if(Z.someProp("handlePaste",(K)=>K(Z,Y,q||h.empty)))return!0;if(!q)return!1;let G=TA(q),U=G?Z.state.tr.replaceSelectionWith(G,X):Z.state.tr.replaceSelection(q);return Z.dispatch(U.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function TW(Z){let Q=Z.getData("text/plain")||Z.getData("Text");if(Q)return Q;let J=Z.getData("text/uri-list");return J?J.replace(/\r?\n/g," "):""}O1.paste=(Z,Q)=>{let J=Q;if(Z.composing&&!C5)return;let X=L8?null:J.clipboardData,Y=Z.input.shiftKey&&Z.input.lastKeyCode!=45;if(X&&_8(Z,TW(X),X.getData("text/html"),Y,J))J.preventDefault();else $A(Z,J)};class kJ{constructor(Z,Q,J){this.slice=Z,this.move=Q,this.node=J}}var bA=v1?"altKey":"ctrlKey";function $W(Z,Q){let J=Z.someProp("dragCopies",(X)=>!X(Q));return J!=null?J:!Q[bA]}_1.dragstart=(Z,Q)=>{let J=Q,X=Z.input.mouseDown;if(X)X.done();if(!J.dataTransfer)return;let Y=Z.state.selection,q=Y.empty?null:Z.posAtCoords(A9(J)),G;if(q&&q.pos>=Y.from&&q.pos<=(Y instanceof s?Y.to-1:Y.to));else if(X&&X.mightDrag)G=s.create(Z.state.doc,X.mightDrag.pos);else if(J.target&&J.target.nodeType==1){let z=Z.docView.nearestDesc(J.target,!0);if(z&&z.node.type.spec.draggable&&z!=Z.docView)G=s.create(Z.state.doc,z.posBefore)}let U=(G||Z.state.selection).content(),{dom:K,text:H,slice:W}=yJ(Z,U);if(!J.dataTransfer.files.length||!o0||oH>120)J.dataTransfer.clearData();if(J.dataTransfer.setData(L8?"Text":"text/html",K.innerHTML),J.dataTransfer.effectAllowed="copyMove",!L8)J.dataTransfer.setData("text/plain",H);Z.dragging=new kJ(W,$W(Z,J),G)};_1.dragend=(Z)=>{let Q=Z.dragging;window.setTimeout(()=>{if(Z.dragging==Q)Z.dragging=null},50)};O1.dragover=O1.dragenter=(Z,Q)=>Q.preventDefault();O1.drop=(Z,Q)=>{try{CA(Z,Q,Z.dragging)}finally{Z.dragging=null}};function CA(Z,Q,J){if(!Q.dataTransfer)return;let X=Z.posAtCoords(A9(Q));if(!X)return;let Y=Z.state.doc.resolve(X.pos),q=J&&J.slice;if(q)Z.someProp("transformPasted",(B)=>{q=B(q,Z,!1)});else q=LW(Z,TW(Q.dataTransfer),L8?null:Q.dataTransfer.getData("text/html"),!1,Y);let G=!!(J&&$W(Z,Q));if(Z.someProp("handleDrop",(B)=>B(Z,Q,q||h.empty,G))){Q.preventDefault();return}if(!q)return;Q.preventDefault();let U=q?vK(Z.state.doc,Y.pos,q):Y.pos;if(U==null)U=Y.pos;let K=Z.state.tr;if(G){let{node:B}=J;if(B)B.replace(K);else K.deleteSelection()}let H=K.mapping.map(U),W=q.openStart==0&&q.openEnd==0&&q.content.childCount==1,z=K.doc;if(W)K.replaceRangeWith(H,H,q.content.firstChild);else K.replaceRange(H,H,q);if(K.doc.eq(z))return;let F=K.doc.resolve(H);if(W&&s.isSelectable(q.content.firstChild)&&F.nodeAfter&&F.nodeAfter.sameMarkup(q.content.firstChild))K.setSelection(new s(F));else{let B=K.mapping.map(U);K.mapping.maps[K.mapping.maps.length-1].forEach((V,O,N,j)=>B=j),K.setSelection(CJ(Z,F,K.doc.resolve(B)))}Z.focus(),Z.dispatch(K.setMeta("uiEvent","drop"))}_1.focus=(Z)=>{if(Z.input.lastFocus=Date.now(),!Z.focused)Z.domObserver.stop(),Z.dom.classList.add("ProseMirror-focused"),Z.domObserver.start(),Z.focused=!0,setTimeout(()=>{if(Z.docView&&Z.hasFocus()&&!Z.domObserver.currentSelection.eq(Z.domSelectionRange()))y5(Z)},20)};_1.blur=(Z,Q)=>{let J=Q;if(Z.focused){if(Z.domObserver.stop(),Z.dom.classList.remove("ProseMirror-focused"),Z.domObserver.start(),J.relatedTarget&&Z.dom.contains(J.relatedTarget))Z.domObserver.currentSelection.clear();Z.focused=!1}};_1.beforeinput=(Z,Q)=>{if(o0&&C5&&Q.inputType=="deleteContentBackward"){Z.domObserver.flushSoon();let{domChangeCount:X}=Z.input;setTimeout(()=>{if(Z.input.domChangeCount!=X)return;if(Z.dom.blur(),Z.focus(),Z.someProp("handleKeyDown",(q)=>q(Z,a4(8,"Backspace"))))return;let{$cursor:Y}=Z.state.selection;if(Y&&Y.pos>0)Z.dispatch(Z.state.tr.delete(Y.pos-1,Y.pos).scrollIntoView())},50)}};for(let Z in O1)_1[Z]=O1[Z];function O8(Z,Q){if(Z==Q)return!0;for(let J in Z)if(Z[J]!==Q[J])return!1;for(let J in Q)if(!(J in Z))return!1;return!0}class _9{constructor(Z,Q){this.toDOM=Z,this.spec=Q||o4,this.side=this.spec.side||0}map(Z,Q,J,X){let{pos:Y,deleted:q}=Z.mapResult(Q.from+X,this.side<0?-1:1);return q?null:new i0(Y-J,Y-J,this)}valid(){return!0}eq(Z){return this==Z||Z instanceof _9&&(this.spec.key&&this.spec.key==Z.spec.key||this.toDOM==Z.toDOM&&O8(this.spec,Z.spec))}destroy(Z){if(this.spec.destroy)this.spec.destroy(Z)}}class G4{constructor(Z,Q){this.attrs=Z,this.spec=Q||o4}map(Z,Q,J,X){let Y=Z.map(Q.from+X,this.spec.inclusiveStart?-1:1)-J,q=Z.map(Q.to+X,this.spec.inclusiveEnd?1:-1)-J;return Y>=q?null:new i0(Y,q,this)}valid(Z,Q){return Q.from<Q.to}eq(Z){return this==Z||Z instanceof G4&&O8(this.attrs,Z.attrs)&&O8(this.spec,Z.spec)}static is(Z){return Z.type instanceof G4}destroy(){}}class gJ{constructor(Z,Q){this.attrs=Z,this.spec=Q||o4}map(Z,Q,J,X){let Y=Z.mapResult(Q.from+X,1);if(Y.deleted)return null;let q=Z.mapResult(Q.to+X,-1);if(q.deleted||q.pos<=Y.pos)return null;return new i0(Y.pos-J,q.pos-J,this)}valid(Z,Q){let{index:J,offset:X}=Z.content.findIndex(Q.from),Y;return X==Q.from&&!(Y=Z.child(J)).isText&&X+Y.nodeSize==Q.to}eq(Z){return this==Z||Z instanceof gJ&&O8(this.attrs,Z.attrs)&&O8(this.spec,Z.spec)}destroy(){}}class i0{constructor(Z,Q,J){this.from=Z,this.to=Q,this.type=J}copy(Z,Q){return new i0(Z,Q,this.type)}eq(Z,Q=0){return this.type.eq(Z.type)&&this.from+Q==Z.from&&this.to+Q==Z.to}map(Z,Q,J){return this.type.map(Z,this,Q,J)}static widget(Z,Q,J){return new i0(Z,Z,new _9(Q,J))}static inline(Z,Q,J,X){return new i0(Z,Q,new G4(J,X))}static node(Z,Q,J,X){return new i0(Z,Q,new gJ(J,X))}get spec(){return this.type.spec}get inline(){return this.type instanceof G4}get widget(){return this.type instanceof _9}}var d6=[],o4={};class M0{constructor(Z,Q){this.local=Z.length?Z:d6,this.children=Q.length?Q:d6}static create(Z,Q){return Q.length?O9(Q,Z,0,o4):K1}find(Z,Q,J){let X=[];return this.findInner(Z==null?0:Z,Q==null?1e9:Q,X,0,J),X}findInner(Z,Q,J,X,Y){for(let q=0;q<this.local.length;q++){let G=this.local[q];if(G.from<=Q&&G.to>=Z&&(!Y||Y(G.spec)))J.push(G.copy(G.from+X,G.to+X))}for(let q=0;q<this.children.length;q+=3)if(this.children[q]<Q&&this.children[q+1]>Z){let G=this.children[q]+1;this.children[q+2].findInner(Z-G,Q-G,J,X+G,Y)}}map(Z,Q,J){if(this==K1||Z.maps.length==0)return this;return this.mapInner(Z,Q,0,0,J||o4)}mapInner(Z,Q,J,X,Y){let q;for(let G=0;G<this.local.length;G++){let U=this.local[G].map(Z,J,X);if(U&&U.type.valid(Q,U))(q||(q=[])).push(U);else if(Y.onRemove)Y.onRemove(this.local[G].spec)}if(this.children.length)return yA(this.children,q||[],Z,Q,J,X,Y);else return q?new M0(q.sort(t4),d6):K1}add(Z,Q){if(!Q.length)return this;if(this==K1)return M0.create(Z,Q);return this.addInner(Z,Q,0)}addInner(Z,Q,J){let X,Y=0;Z.forEach((G,U)=>{let K=U+J,H;if(!(H=CW(Q,G,K)))return;if(!X)X=this.children.slice();while(Y<X.length&&X[Y]<U)Y+=3;if(X[Y]==U)X[Y+2]=X[Y+2].addInner(G,H,K+1);else X.splice(Y,0,U,U+G.nodeSize,O9(H,G,K+1,o4));Y+=3});let q=bW(Y?yW(Q):Q,-J);for(let G=0;G<q.length;G++)if(!q[G].type.valid(Z,q[G]))q.splice(G--,1);return new M0(q.length?this.local.concat(q).sort(t4):this.local,X||this.children)}remove(Z){if(Z.length==0||this==K1)return this;return this.removeInner(Z,0)}removeInner(Z,Q){let J=this.children,X=this.local;for(let Y=0;Y<J.length;Y+=3){let q,G=J[Y]+Q,U=J[Y+1]+Q;for(let H=0,W;H<Z.length;H++)if(W=Z[H]){if(W.from>G&&W.to<U)Z[H]=null,(q||(q=[])).push(W)}if(!q)continue;if(J==this.children)J=this.children.slice();let K=J[Y+2].removeInner(q,G+1);if(K!=K1)J[Y+2]=K;else J.splice(Y,3),Y-=3}if(X.length){for(let Y=0,q;Y<Z.length;Y++)if(q=Z[Y]){for(let G=0;G<X.length;G++)if(X[G].eq(q,Q)){if(X==this.local)X=this.local.slice();X.splice(G--,1)}}}if(J==this.children&&X==this.local)return this;return X.length||J.length?new M0(X,J):K1}forChild(Z,Q){if(this==K1)return this;if(Q.isLeaf)return M0.empty;let J,X;for(let G=0;G<this.children.length;G+=3)if(this.children[G]>=Z){if(this.children[G]==Z)J=this.children[G+2];break}let Y=Z+1,q=Y+Q.content.size;for(let G=0;G<this.local.length;G++){let U=this.local[G];if(U.from<q&&U.to>Y&&U.type instanceof G4){let K=Math.max(Y,U.from)-Y,H=Math.min(q,U.to)-Y;if(K<H)(X||(X=[])).push(U.copy(K,H))}}if(X){let G=new M0(X.sort(t4),d6);return J?new J4([G,J]):G}return J||K1}eq(Z){if(this==Z)return!0;if(!(Z instanceof M0)||this.local.length!=Z.local.length||this.children.length!=Z.children.length)return!1;for(let Q=0;Q<this.local.length;Q++)if(!this.local[Q].eq(Z.local[Q]))return!1;for(let Q=0;Q<this.children.length;Q+=3)if(this.children[Q]!=Z.children[Q]||this.children[Q+1]!=Z.children[Q+1]||!this.children[Q+2].eq(Z.children[Q+2]))return!1;return!0}locals(Z){return vJ(this.localsInner(Z))}localsInner(Z){if(this==K1)return d6;if(Z.inlineContent||!this.local.some(G4.is))return this.local;let Q=[];for(let J=0;J<this.local.length;J++)if(!(this.local[J].type instanceof G4))Q.push(this.local[J]);return Q}forEachSet(Z){Z(this)}}M0.empty=new M0([],[]);M0.removeOverlap=vJ;var K1=M0.empty;class J4{constructor(Z){this.members=Z}map(Z,Q){let J=this.members.map((X)=>X.map(Z,Q,o4));return J4.from(J)}forChild(Z,Q){if(Q.isLeaf)return M0.empty;let J=[];for(let X=0;X<this.members.length;X++){let Y=this.members[X].forChild(Z,Q);if(Y==K1)continue;if(Y instanceof J4)J=J.concat(Y.members);else J.push(Y)}return J4.from(J)}eq(Z){if(!(Z instanceof J4)||Z.members.length!=this.members.length)return!1;for(let Q=0;Q<this.members.length;Q++)if(!this.members[Q].eq(Z.members[Q]))return!1;return!0}locals(Z){let Q,J=!0;for(let X=0;X<this.members.length;X++){let Y=this.members[X].localsInner(Z);if(!Y.length)continue;if(!Q)Q=Y;else{if(J)Q=Q.slice(),J=!1;for(let q=0;q<Y.length;q++)Q.push(Y[q])}}return Q?vJ(J?Q:Q.sort(t4)):d6}static from(Z){switch(Z.length){case 0:return K1;case 1:return Z[0];default:return new J4(Z.every((Q)=>Q instanceof M0)?Z:Z.reduce((Q,J)=>Q.concat(J instanceof M0?J:J.members),[]))}}forEachSet(Z){for(let Q=0;Q<this.members.length;Q++)this.members[Q].forEachSet(Z)}}function yA(Z,Q,J,X,Y,q,G){let U=Z.slice();for(let H=0,W=q;H<J.maps.length;H++){let z=0;J.maps[H].forEach((F,B,V,O)=>{let N=O-V-(B-F);for(let j=0;j<U.length;j+=3){let R=U[j+1];if(R<0||F>R+W-z)continue;let E=U[j]+W-z;if(B>=E)U[j+1]=F<=E?-2:-1;else if(F>=W&&N)U[j]+=N,U[j+1]+=N}z+=N}),W=J.maps[H].map(W,-1)}let K=!1;for(let H=0;H<U.length;H+=3)if(U[H+1]<0){if(U[H+1]==-2){K=!0,U[H+1]=-1;continue}let W=J.map(Z[H]+q),z=W-Y;if(z<0||z>=X.content.size){K=!0;continue}let F=J.map(Z[H+1]+q,-1),B=F-Y,{index:V,offset:O}=X.content.findIndex(z),N=X.maybeChild(V);if(N&&O==z&&O+N.nodeSize==B){let j=U[H+2].mapInner(J,N,W+1,Z[H]+q+1,G);if(j!=K1)U[H]=z,U[H+1]=B,U[H+2]=j;else U[H+1]=-2,K=!0}else K=!0}if(K){let H=SA(U,Z,Q,J,Y,q,G),W=O9(H,X,0,G);Q=W.local;for(let z=0;z<U.length;z+=3)if(U[z+1]<0)U.splice(z,3),z-=3;for(let z=0,F=0;z<W.children.length;z+=3){let B=W.children[z];while(F<U.length&&U[F]<B)F+=3;U.splice(F,0,W.children[z],W.children[z+1],W.children[z+2])}}return new M0(Q.sort(t4),U)}function bW(Z,Q){if(!Q||!Z.length)return Z;let J=[];for(let X=0;X<Z.length;X++){let Y=Z[X];J.push(new i0(Y.from+Q,Y.to+Q,Y.type))}return J}function SA(Z,Q,J,X,Y,q,G){function U(K,H){for(let W=0;W<K.local.length;W++){let z=K.local[W].map(X,Y,H);if(z)J.push(z);else if(G.onRemove)G.onRemove(K.local[W].spec)}for(let W=0;W<K.children.length;W+=3)U(K.children[W+2],K.children[W]+H+1)}for(let K=0;K<Z.length;K+=3)if(Z[K+1]==-1)U(Z[K+2],Q[K]+q+1);return J}function CW(Z,Q,J){if(Q.isLeaf)return null;let X=J+Q.nodeSize,Y=null;for(let q=0,G;q<Z.length;q++)if((G=Z[q])&&G.from>J&&G.to<X)(Y||(Y=[])).push(G),Z[q]=null;return Y}function yW(Z){let Q=[];for(let J=0;J<Z.length;J++)if(Z[J]!=null)Q.push(Z[J]);return Q}function O9(Z,Q,J,X){let Y=[],q=!1;Q.forEach((U,K)=>{let H=CW(Z,U,K+J);if(H){q=!0;let W=O9(H,U,J+K+1,X);if(W!=K1)Y.push(K,K+U.nodeSize,W)}});let G=bW(q?yW(Z):Z,-J).sort(t4);for(let U=0;U<G.length;U++)if(!G[U].type.valid(Q,G[U])){if(X.onRemove)X.onRemove(G[U].spec);G.splice(U--,1)}return G.length||Y.length?new M0(G,Y):K1}function t4(Z,Q){return Z.from-Q.from||Z.to-Q.to}function vJ(Z){let Q=Z;for(let J=0;J<Q.length-1;J++){let X=Q[J];if(X.from!=X.to)for(let Y=J+1;Y<Q.length;Y++){let q=Q[Y];if(q.from==X.from){if(q.to!=X.to){if(Q==Z)Q=Z.slice();Q[Y]=q.copy(q.from,X.to),uH(Q,Y+1,q.copy(X.to,q.to))}continue}else{if(q.from<X.to){if(Q==Z)Q=Z.slice();Q[J]=X.copy(X.from,q.from),uH(Q,Y,X.copy(q.from,X.to))}break}}}return Q}function uH(Z,Q,J){while(Q<Z.length&&t4(J,Z[Q])>0)Q++;Z.splice(Q,0,J)}function VJ(Z){let Q=[];if(Z.someProp("decorations",(J)=>{let X=J(Z.state);if(X&&X!=K1)Q.push(X)}),Z.cursorWrapper)Q.push(M0.create(Z.state.doc,[Z.cursorWrapper.deco]));return J4.from(Q)}var wA={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},xA=I1&&Y4<=11;class SW{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(Z){this.anchorNode=Z.anchorNode,this.anchorOffset=Z.anchorOffset,this.focusNode=Z.focusNode,this.focusOffset=Z.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(Z){return Z.anchorNode==this.anchorNode&&Z.anchorOffset==this.anchorOffset&&Z.focusNode==this.focusNode&&Z.focusOffset==this.focusOffset}}class wW{constructor(Z,Q){if(this.view=Z,this.handleDOMChange=Q,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new SW,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver((J)=>{for(let X=0;X<J.length;X++)this.queue.push(J[X]);if(I1&&Y4<=11&&J.some((X)=>X.type=="childList"&&X.removedNodes.length||X.type=="characterData"&&X.oldValue.length>X.target.nodeValue.length))this.flushSoon();else this.flush()}),xA)this.onCharData=(J)=>{this.queue.push({target:J.target,type:"characterData",oldValue:J.prevValue}),this.flushSoon()};this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){if(this.flushingSoon<0)this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20)}forceFlush(){if(this.flushingSoon>-1)window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush()}start(){if(this.observer)this.observer.takeRecords(),this.observer.observe(this.view.dom,wA);if(this.onCharData)this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData);this.connectSelection()}stop(){if(this.observer){let Z=this.observer.takeRecords();if(Z.length){for(let Q=0;Q<Z.length;Q++)this.queue.push(Z[Q]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}if(this.onCharData)this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData);this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(!yH(this.view))return;if(this.suppressingSelectionUpdates)return y5(this.view);if(I1&&Y4<=11&&!this.view.state.selection.empty){let Z=this.view.domSelectionRange();if(Z.focusNode&&e4(Z.focusNode,Z.focusOffset,Z.anchorNode,Z.anchorOffset))return this.flushSoon()}this.flush()}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(Z){if(!Z.focusNode)return!0;let Q=new Set,J;for(let Y=Z.focusNode;Y;Y=r6(Y))Q.add(Y);for(let Y=Z.anchorNode;Y;Y=r6(Y))if(Q.has(Y)){J=Y;break}let X=J&&this.view.docView.nearestDesc(J);if(X&&X.ignoreMutation({type:"selection",target:J.nodeType==3?J.parentNode:J}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let Z of this.observer.takeRecords())this.queue.push(Z);return this.queue}flush(){let{view:Z}=this;if(!Z.docView||this.flushingSoon>-1)return;let Q=this.pendingRecords();if(Q.length)this.queue=[];let J=Z.domSelectionRange(),X=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(J)&&yH(Z)&&!this.ignoreSelectionChange(J),Y=-1,q=-1,G=!1,U=[];if(Z.editable)for(let H=0;H<Q.length;H++){let W=this.registerMutation(Q[H],U);if(W){if(Y=Y<0?W.from:Math.min(W.from,Y),q=q<0?W.to:Math.max(W.to,q),W.typeOver)G=!0}}if(u1&&U.length){let H=U.filter((W)=>W.nodeName=="BR");if(H.length==2){let[W,z]=H;if(W.parentNode&&W.parentNode.parentNode==z.parentNode)z.remove();else W.remove()}else{let{focusNode:W}=this.currentSelection;for(let z of H){let F=z.parentNode;if(F&&F.nodeName=="LI"&&(!W||vA(Z,W)!=F))z.remove()}}}else if((o0||H1)&&U.some((H)=>H.nodeName=="BR")&&(Z.input.lastKeyCode==8||Z.input.lastKeyCode==46)){for(let H of U)if(H.nodeName=="BR"&&H.parentNode){let W=H.nextSibling;if(W&&W.nodeType==1&&W.contentEditable=="false")H.parentNode.removeChild(H)}}let K=null;if(Y<0&&X&&Z.input.lastFocus>Date.now()-200&&Math.max(Z.input.lastTouch,Z.input.lastClick.time)<Date.now()-300&&N9(J)&&(K=bJ(Z))&&K.eq(n.near(Z.state.doc.resolve(0),1)))Z.input.lastFocus=0,y5(Z),this.currentSelection.set(J),Z.scrollToSelection();else if(Y>-1||X){if(Y>-1)Z.docView.markDirty(Y,q),kA(Z);if(this.handleDOMChange(Y,q,G,U),Z.docView&&Z.docView.dirty)Z.updateState(Z.state);else if(!this.currentSelection.eq(J))y5(Z);this.currentSelection.set(J)}}registerMutation(Z,Q){if(Q.indexOf(Z.target)>-1)return null;let J=this.view.docView.nearestDesc(Z.target);if(Z.type=="attributes"&&(J==this.view.docView||Z.attributeName=="contenteditable"||Z.attributeName=="style"&&!Z.oldValue&&!Z.target.getAttribute("style")))return null;if(!J||J.ignoreMutation(Z))return null;if(Z.type=="childList"){for(let H=0;H<Z.addedNodes.length;H++){let W=Z.addedNodes[H];if(Q.push(W),W.nodeType==3)this.lastChangedTextNode=W}if(J.contentDOM&&J.contentDOM!=J.dom&&!J.contentDOM.contains(Z.target))return{from:J.posBefore,to:J.posAfter};let{previousSibling:X,nextSibling:Y}=Z;if(I1&&Y4<=11&&Z.addedNodes.length)for(let H=0;H<Z.addedNodes.length;H++){let{previousSibling:W,nextSibling:z}=Z.addedNodes[H];if(!W||Array.prototype.indexOf.call(Z.addedNodes,W)<0)X=W;if(!z||Array.prototype.indexOf.call(Z.addedNodes,z)<0)Y=z}let q=X&&X.parentNode==Z.target?J1(X)+1:0,G=J.localPosFromDOM(Z.target,q,-1),U=Y&&Y.parentNode==Z.target?J1(Y):Z.target.childNodes.length,K=J.localPosFromDOM(Z.target,U,1);return{from:G,to:K}}else if(Z.type=="attributes")return{from:J.posAtStart-J.border,to:J.posAtEnd+J.border};else return this.lastChangedTextNode=Z.target,{from:J.posAtStart,to:J.posAtEnd,typeOver:Z.target.nodeValue==Z.oldValue}}}var fH=new WeakMap,mH=!1;function kA(Z){if(fH.has(Z))return;if(fH.set(Z,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(Z.dom).whiteSpace)!==-1){if(Z.requiresGeckoHackNode=u1,mH)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),mH=!0}}function pH(Z,Q){let{startContainer:J,startOffset:X,endContainer:Y,endOffset:q}=Q,G=Z.domAtPos(Z.state.selection.anchor);if(e4(G.node,G.offset,Y,q))[J,X,Y,q]=[Y,q,J,X];return{anchorNode:J,anchorOffset:X,focusNode:Y,focusOffset:q}}function gA(Z,Q){if(Q.getComposedRanges){let Y=Q.getComposedRanges(Z.root)[0];if(Y)return pH(Z,Y)}let J;function X(Y){Y.preventDefault(),Y.stopImmediatePropagation(),J=Y.getTargetRanges()[0]}return Z.dom.addEventListener("beforeinput",X,!0),document.execCommand("indent"),Z.dom.removeEventListener("beforeinput",X,!0),J?pH(Z,J):null}function vA(Z,Q){for(let J=Q.parentNode;J&&J!=Z.dom;J=J.parentNode){let X=Z.docView.nearestDesc(J,!0);if(X&&X.node.isBlock)return J}return null}function hA(Z,Q,J){let{node:X,fromOffset:Y,toOffset:q,from:G,to:U}=Z.docView.parseRange(Q,J),K=Z.domSelectionRange(),H,W=K.anchorNode;if(W&&Z.dom.contains(W.nodeType==1?W:W.parentNode)){if(H=[{node:W,offset:K.anchorOffset}],!N9(K))H.push({node:K.focusNode,offset:K.focusOffset})}if(o0&&Z.input.lastKeyCode===8)for(let N=q;N>Y;N--){let j=X.childNodes[N-1],R=j.pmViewDesc;if(j.nodeName=="BR"&&!R){q=N;break}if(!R||R.size)break}let z=Z.state.doc,F=Z.someProp("domParser")||M5.fromSchema(Z.state.schema),B=z.resolve(G),V=null,O=F.parse(X,{topNode:B.parent,topMatch:B.parent.contentMatchAt(B.index()),topOpen:!0,from:Y,to:q,preserveWhitespace:B.parent.type.whitespace=="pre"?"full":!0,findPositions:H,ruleFromNode:uA,context:B});if(H&&H[0].pos!=null){let N=H[0].pos,j=H[1]&&H[1].pos;if(j==null)j=N;V={anchor:N+G,head:j+G}}return{doc:O,sel:V,from:G,to:U}}function uA(Z){let Q=Z.pmViewDesc;if(Q)return Q.parseRule();else if(Z.nodeName=="BR"&&Z.parentNode){if(H1&&/^(ul|ol)$/i.test(Z.parentNode.nodeName)){let J=document.createElement("div");return J.appendChild(document.createElement("li")),{skip:J}}else if(Z.parentNode.lastChild==Z||H1&&/^(tr|table)$/i.test(Z.parentNode.nodeName))return{ignore:!0}}else if(Z.nodeName=="IMG"&&Z.getAttribute("mark-placeholder"))return{ignore:!0};return null}var fA=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function mA(Z,Q,J,X,Y){let q=Z.input.compositionPendingChanges||(Z.composing?Z.input.compositionID:0);if(Z.input.compositionPendingChanges=0,Q<0){let g=Z.input.lastSelectionTime>Date.now()-50?Z.input.lastSelectionOrigin:null,S=bJ(Z,g);if(S&&!Z.state.selection.eq(S)){if(o0&&C5&&Z.input.lastKeyCode===13&&Date.now()-100<Z.input.lastKeyCodeTime&&Z.someProp("handleKeyDown",(T)=>T(Z,a4(13,"Enter"))))return;let u=Z.state.tr.setSelection(S);if(g=="pointer")u.setMeta("pointer",!0);else if(g=="key")u.scrollIntoView();if(q)u.setMeta("composition",q);Z.dispatch(u)}return}let G=Z.state.doc.resolve(Q),U=G.sharedDepth(J);Q=G.before(U+1),J=Z.state.doc.resolve(J).after(U+1);let K=Z.state.selection,H=hA(Z,Q,J),W=Z.state.doc,z=W.slice(H.from,H.to),F,B;if(Z.input.lastKeyCode===8&&Date.now()-100<Z.input.lastKeyCodeTime)F=Z.state.selection.to,B="end";else F=Z.state.selection.from,B="start";Z.input.lastKeyCode=null;let V=iA(z.content,H.doc.content,H.from,F,B);if(V)Z.input.domChangeCount++;if((a6&&Z.input.lastIOSEnter>Date.now()-225||C5)&&Y.some((g)=>g.nodeType==1&&!fA.test(g.nodeName))&&(!V||V.endA>=V.endB)&&Z.someProp("handleKeyDown",(g)=>g(Z,a4(13,"Enter")))){Z.input.lastIOSEnter=0;return}if(!V)if(X&&K instanceof Z0&&!K.empty&&K.$head.sameParent(K.$anchor)&&!Z.composing&&!(H.sel&&H.sel.anchor!=H.sel.head))V={start:K.from,endA:K.to,endB:K.to};else{if(H.sel){let g=lH(Z,Z.state.doc,H.sel);if(g&&!g.eq(Z.state.selection)){let S=Z.state.tr.setSelection(g);if(q)S.setMeta("composition",q);Z.dispatch(S)}}return}if(Z.state.selection.from<Z.state.selection.to&&V.start==V.endB&&Z.state.selection instanceof Z0){if(V.start>Z.state.selection.from&&V.start<=Z.state.selection.from+2&&Z.state.selection.from>=H.from)V.start=Z.state.selection.from;else if(V.endA<Z.state.selection.to&&V.endA>=Z.state.selection.to-2&&Z.state.selection.to<=H.to)V.endB+=Z.state.selection.to-V.endA,V.endA=Z.state.selection.to}if(I1&&Y4<=11&&V.endB==V.start+1&&V.endA==V.start&&V.start>H.from&&H.doc.textBetween(V.start-H.from-1,V.start-H.from+1)=="  ")V.start--,V.endA--,V.endB--;let O=H.doc.resolveNoCache(V.start-H.from),N=H.doc.resolveNoCache(V.endB-H.from),j=W.resolve(V.start),R=O.sameParent(N)&&O.parent.inlineContent&&j.end()>=V.endA;if((a6&&Z.input.lastIOSEnter>Date.now()-225&&(!R||Y.some((g)=>g.nodeName=="DIV"||g.nodeName=="P"))||!R&&O.pos<H.doc.content.size&&(!O.sameParent(N)||!O.parent.inlineContent)&&O.pos<N.pos&&!/\S/.test(H.doc.textBetween(O.pos,N.pos,"","")))&&Z.someProp("handleKeyDown",(g)=>g(Z,a4(13,"Enter")))){Z.input.lastIOSEnter=0;return}if(Z.state.selection.anchor>V.start&&lA(W,V.start,V.endA,O,N)&&Z.someProp("handleKeyDown",(g)=>g(Z,a4(8,"Backspace")))){if(C5&&o0)Z.domObserver.suppressSelectionUpdates();return}if(o0&&V.endB==V.start)Z.input.lastChromeDelete=Date.now();if(C5&&!R&&O.start()!=N.start()&&N.parentOffset==0&&O.depth==N.depth&&H.sel&&H.sel.anchor==H.sel.head&&H.sel.head==V.endA)V.endB-=2,N=H.doc.resolveNoCache(V.endB-H.from),setTimeout(()=>{Z.someProp("handleKeyDown",function(g){return g(Z,a4(13,"Enter"))})},20);let{start:E,endA:$}=V,w=(g)=>{let S=g||Z.state.tr.replace(E,$,H.doc.slice(V.start-H.from,V.endB-H.from));if(H.sel){let u=lH(Z,S.doc,H.sel);if(u&&!(o0&&Z.composing&&u.empty&&(V.start!=V.endB||Z.input.lastChromeDelete<Date.now()-100)&&(u.head==E||u.head==S.mapping.map($)-1)||I1&&u.empty&&u.head==E))S.setSelection(u)}if(q)S.setMeta("composition",q);return S.scrollIntoView()},I;if(R)if(O.pos==N.pos){if(I1&&Y4<=11&&O.parentOffset==0)Z.domObserver.suppressSelectionUpdates(),setTimeout(()=>y5(Z),20);let g=w(Z.state.tr.delete(E,$)),S=W.resolve(V.start).marksAcross(W.resolve(V.endA));if(S)g.ensureMarks(S);Z.dispatch(g)}else if(V.endA==V.endB&&(I=pA(O.parent.content.cut(O.parentOffset,N.parentOffset),j.parent.content.cut(j.parentOffset,V.endA-j.start())))){let g=w(Z.state.tr);if(I.type=="add")g.addMark(E,$,I.mark);else g.removeMark(E,$,I.mark);Z.dispatch(g)}else if(O.parent.child(O.index()).isText&&O.index()==N.index()-(N.textOffset?0:1)){let g=O.parent.textBetween(O.parentOffset,N.parentOffset),S=()=>w(Z.state.tr.insertText(g,E,$));if(!Z.someProp("handleTextInput",(u)=>u(Z,E,$,g,S)))Z.dispatch(S())}else Z.dispatch(w());else Z.dispatch(w())}function lH(Z,Q,J){if(Math.max(J.anchor,J.head)>Q.content.size)return null;return CJ(Z,Q.resolve(J.anchor),Q.resolve(J.head))}function pA(Z,Q){let J=Z.firstChild.marks,X=Q.firstChild.marks,Y=J,q=X,G,U,K;for(let W=0;W<X.length;W++)Y=X[W].removeFromSet(Y);for(let W=0;W<J.length;W++)q=J[W].removeFromSet(q);if(Y.length==1&&q.length==0)U=Y[0],G="add",K=(W)=>W.mark(U.addToSet(W.marks));else if(Y.length==0&&q.length==1)U=q[0],G="remove",K=(W)=>W.mark(U.removeFromSet(W.marks));else return null;let H=[];for(let W=0;W<Q.childCount;W++)H.push(K(Q.child(W)));if(x.from(H).eq(Z))return{mark:U,type:G}}function lA(Z,Q,J,X,Y){if(J-Q<=Y.pos-X.pos||LJ(X,!0,!1)<Y.pos)return!1;let q=Z.resolve(Q);if(!X.parent.isTextblock){let U=q.nodeAfter;return U!=null&&J==Q+U.nodeSize}if(q.parentOffset<q.parent.content.size||!q.parent.isTextblock)return!1;let G=Z.resolve(LJ(q,!0,!0));if(!G.parent.isTextblock||G.pos>J||LJ(G,!0,!1)<J)return!1;return X.parent.content.cut(X.parentOffset).eq(G.parent.content)}function LJ(Z,Q,J){let X=Z.depth,Y=Q?Z.end():Z.pos;while(X>0&&(Q||Z.indexAfter(X)==Z.node(X).childCount))X--,Y++,Q=!1;if(J){let q=Z.node(X).maybeChild(Z.indexAfter(X));while(q&&!q.isLeaf)q=q.firstChild,Y++}return Y}function iA(Z,Q,J,X,Y){let q=Z.findDiffStart(Q,J);if(q==null)return null;let{a:G,b:U}=Z.findDiffEnd(Q,J+Z.size,J+Q.size);if(Y=="end"){let K=Math.max(0,q-Math.min(G,U));X-=G+K-q}if(G<q&&Z.size<Q.size){let K=X<=q&&X>=G?q-X:0;if(q-=K,q&&q<Q.size&&iH(Q.textBetween(q-1,q+1)))q+=K?1:-1;U=q+(U-G),G=q}else if(U<q){let K=X<=q&&X>=U?q-X:0;if(q-=K,q&&q<Z.size&&iH(Z.textBetween(q-1,q+1)))q+=K?1:-1;G=q+(G-U),U=q}return{start:q,endA:G,endB:U}}function iH(Z){if(Z.length!=2)return!1;let Q=Z.charCodeAt(0),J=Z.charCodeAt(1);return Q>=56320&&Q<=57343&&J>=55296&&J<=56319}class P9{constructor(Z,Q){if(this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new PW,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=Q,this.state=Q.state,this.directPlugins=Q.plugins||[],this.directPlugins.forEach(nH),this.dispatch=this.dispatch.bind(this),this.dom=Z&&Z.mount||document.createElement("div"),Z){if(Z.appendChild)Z.appendChild(this.dom);else if(typeof Z=="function")Z(this.dom);else if(Z.mount)this.mounted=!0}this.editable=rH(this),cH(this),this.nodeViews=aH(this),this.docView=IH(this.state.doc,dH(this),VJ(this),this.dom,this),this.domObserver=new wW(this,(J,X,Y,q)=>mA(this,J,X,Y,q)),this.domObserver.start(),zA(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let Z=this._props;this._props={};for(let Q in Z)this._props[Q]=Z[Q];this._props.state=this.state}return this._props}update(Z){if(Z.handleDOMEvents!=this._props.handleDOMEvents)IJ(this);let Q=this._props;if(this._props=Z,Z.plugins)Z.plugins.forEach(nH),this.directPlugins=Z.plugins;this.updateStateInner(Z.state,Q)}setProps(Z){let Q={};for(let J in this._props)Q[J]=this._props[J];Q.state=this.state;for(let J in Z)Q[J]=Z[J];this.update(Q)}updateState(Z){this.updateStateInner(Z,this._props)}updateStateInner(Z,Q){var J;let X=this.state,Y=!1,q=!1;if(Z.storedMarks&&this.composing)EW(this),q=!0;this.state=Z;let G=X.plugins!=Z.plugins||this._props.plugins!=Q.plugins;if(G||this._props.plugins!=Q.plugins||this._props.nodeViews!=Q.nodeViews){let F=aH(this);if(cA(F,this.nodeViews))this.nodeViews=F,Y=!0}if(G||Q.handleDOMEvents!=this._props.handleDOMEvents)IJ(this);this.editable=rH(this),cH(this);let U=VJ(this),K=dH(this),H=X.plugins!=Z.plugins&&!X.doc.eq(Z.doc)?"reset":Z.scrollToSelection>X.scrollToSelection?"to selection":"preserve",W=Y||!this.docView.matchesNode(Z.doc,K,U);if(W||!Z.selection.eq(X.selection))q=!0;let z=H=="preserve"&&q&&this.dom.style.overflowAnchor==null&&bj(this);if(q){this.domObserver.stop();let F=W&&(I1||o0)&&!this.composing&&!X.selection.empty&&!Z.selection.empty&&dA(X.selection,Z.selection);if(W){let B=o0?this.trackWrites=this.domSelectionRange().focusNode:null;if(this.composing)this.input.compositionNode=DA(this);if(Y||!this.docView.update(Z.doc,K,U,this))this.docView.updateOuterDeco(K),this.docView.destroy(),this.docView=IH(Z.doc,K,U,this.dom,this);if(B&&!this.trackWrites)F=!0}if(F||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&sj(this)))y5(this,F);else FW(this,Z.selection),this.domObserver.setCurSelection();this.domObserver.start()}if(this.updatePluginViews(X),((J=this.dragging)===null||J===void 0?void 0:J.node)&&!X.doc.eq(Z.doc))this.updateDraggedNode(this.dragging,X);if(H=="reset")this.dom.scrollTop=0;else if(H=="to selection")this.scrollToSelection();else if(z)Cj(z)}scrollToSelection(){let Z=this.domSelectionRange().focusNode;if(!Z||!this.dom.contains(Z.nodeType==1?Z:Z.parentNode));else if(this.someProp("handleScrollToSelection",(Q)=>Q(this)));else if(this.state.selection instanceof s){let Q=this.docView.domAfterPos(this.state.selection.from);if(Q.nodeType==1)jH(this,Q.getBoundingClientRect(),Z)}else jH(this,this.coordsAtPos(this.state.selection.head,1),Z)}destroyPluginViews(){let Z;while(Z=this.pluginViews.pop())if(Z.destroy)Z.destroy()}updatePluginViews(Z){if(!Z||Z.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let Q=0;Q<this.directPlugins.length;Q++){let J=this.directPlugins[Q];if(J.spec.view)this.pluginViews.push(J.spec.view(this))}for(let Q=0;Q<this.state.plugins.length;Q++){let J=this.state.plugins[Q];if(J.spec.view)this.pluginViews.push(J.spec.view(this))}}else for(let Q=0;Q<this.pluginViews.length;Q++){let J=this.pluginViews[Q];if(J.update)J.update(this,Z)}}updateDraggedNode(Z,Q){let J=Z.node,X=-1;if(this.state.doc.nodeAt(J.from)==J.node)X=J.from;else{let Y=J.from+(this.state.doc.content.size-Q.doc.content.size);if((Y>0&&this.state.doc.nodeAt(Y))==J.node)X=Y}this.dragging=new kJ(Z.slice,Z.move,X<0?void 0:s.create(this.state.doc,X))}someProp(Z,Q){let J=this._props&&this._props[Z],X;if(J!=null&&(X=Q?Q(J):J))return X;for(let q=0;q<this.directPlugins.length;q++){let G=this.directPlugins[q].props[Z];if(G!=null&&(X=Q?Q(G):G))return X}let Y=this.state.plugins;if(Y)for(let q=0;q<Y.length;q++){let G=Y[q].props[Z];if(G!=null&&(X=Q?Q(G):G))return X}}hasFocus(){if(I1){let Z=this.root.activeElement;if(Z==this.dom)return!0;if(!Z||!this.dom.contains(Z))return!1;while(Z&&this.dom!=Z&&this.dom.contains(Z)){if(Z.contentEditable=="false")return!1;Z=Z.parentElement}return!0}return this.root.activeElement==this.dom}focus(){if(this.domObserver.stop(),this.editable)yj(this.dom);y5(this),this.domObserver.start()}get root(){let Z=this._root;if(Z==null){for(let Q=this.dom.parentNode;Q;Q=Q.parentNode)if(Q.nodeType==9||Q.nodeType==11&&Q.host){if(!Q.getSelection)Object.getPrototypeOf(Q).getSelection=()=>Q.ownerDocument.getSelection();return this._root=Q}}return Z||document}updateRoot(){this._root=null}posAtCoords(Z){return gj(this,Z)}coordsAtPos(Z,Q=1){return XW(this,Z,Q)}domAtPos(Z,Q=0){return this.docView.domFromPos(Z,Q)}nodeDOM(Z){let Q=this.docView.descAt(Z);return Q?Q.nodeDOM:null}posAtDOM(Z,Q,J=-1){let X=this.docView.posFromDOM(Z,Q,J);if(X==null)throw RangeError("DOM position not inside the editor");return X}endOfTextblock(Z,Q){return mj(this,Q||this.state,Z)}pasteHTML(Z,Q){return _8(this,"",Z,!1,Q||new ClipboardEvent("paste"))}pasteText(Z,Q){return _8(this,Z,null,!0,Q||new ClipboardEvent("paste"))}serializeForClipboard(Z){return yJ(this,Z)}destroy(){if(!this.docView)return;if(FA(this),this.destroyPluginViews(),this.mounted)this.docView.update(this.state.doc,[],VJ(this),this),this.dom.textContent="";else if(this.dom.parentNode)this.dom.parentNode.removeChild(this.dom);this.docView.destroy(),this.docView=null,jj()}get isDestroyed(){return this.docView==null}dispatchEvent(Z){return VA(this,Z)}domSelectionRange(){let Z=this.domSelection();if(!Z)return{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0};return H1&&this.root.nodeType===11&&Dj(this.dom.ownerDocument)==this.dom&&gA(this,Z)||Z}domSelection(){return this.root.getSelection()}}P9.prototype.dispatch=function(Z){let Q=this._props.dispatchTransaction;if(Q)Q.call(this,Z);else this.updateState(this.state.apply(Z))};function dH(Z){let Q=Object.create(null);if(Q.class="ProseMirror",Q.contenteditable=String(Z.editable),Z.someProp("attributes",(J)=>{if(typeof J=="function")J=J(Z.state);if(J){for(let X in J)if(X=="class")Q.class+=" "+J[X];else if(X=="style")Q.style=(Q.style?Q.style+";":"")+J[X];else if(!Q[X]&&X!="contenteditable"&&X!="nodeName")Q[X]=String(J[X])}}),!Q.translate)Q.translate="no";return[i0.node(0,Z.state.doc.content.size,Q)]}function cH(Z){if(Z.markCursor){let Q=document.createElement("img");Q.className="ProseMirror-separator",Q.setAttribute("mark-placeholder","true"),Q.setAttribute("alt",""),Z.cursorWrapper={dom:Q,deco:i0.widget(Z.state.selection.from,Q,{raw:!0,marks:Z.markCursor})}}else Z.cursorWrapper=null}function rH(Z){return!Z.someProp("editable",(Q)=>Q(Z.state)===!1)}function dA(Z,Q){let J=Math.min(Z.$anchor.sharedDepth(Z.head),Q.$anchor.sharedDepth(Q.head));return Z.$anchor.start(J)!=Q.$anchor.start(J)}function aH(Z){let Q=Object.create(null);function J(X){for(let Y in X)if(!Object.prototype.hasOwnProperty.call(Q,Y))Q[Y]=X[Y]}return Z.someProp("nodeViews",J),Z.someProp("markViews",J),Q}function cA(Z,Q){let J=0,X=0;for(let Y in Z){if(Z[Y]!=Q[Y])return!0;J++}for(let Y in Q)X++;return J!=X}function nH(Z){if(Z.spec.state||Z.spec.filterTransaction||Z.spec.appendTransaction)throw RangeError("Plugins passed directly to the view must not have a state component")}function x5(Z,Q){return Z.meta={package:"@milkdown/core",group:"System",...Q},Z}var gW={text:(Z,Q,J,X)=>{let Y=Z.value;if(/^[^*_\\]*\s+$/.test(Y))return Y;return J.safe(Y,{...X,encode:[]})},strong:(Z,Q,J,X)=>{let Y=Z.marker||J.options.strong||"*",q=J.enter("strong"),G=J.createTracker(X),U=G.move(Y+Y);return U+=G.move(J.containerPhrasing(Z,{before:U,after:Y,...G.current()})),U+=G.move(Y+Y),q(),U},emphasis:(Z,Q,J,X)=>{let Y=Z.marker||J.options.emphasis||"*",q=J.enter("emphasis"),G=J.createTracker(X),U=G.move(Y);return U+=G.move(J.containerPhrasing(Z,{before:U,after:Y,...G.current()})),U+=G.move(Y),q(),U}},z5=Y0({},"editorView"),A8=Y0({},"editorState"),hJ=Y0([],"initTimer"),xW=Y0({},"editor"),X2=Y0([],"inputRules"),F5=Y0([],"prosePlugins"),Y2=Y0([],"remarkPlugins"),S9=Y0([],"nodeView"),w9=Y0([],"markView"),Q6=Y0(t2().use($6).use(S6),"remark"),s6=Y0({handlers:gW,encode:[]},"remarkStringifyOptions"),R9=g1("ConfigReady");function rA(Z){let Q=(J)=>{return J.record(R9),async()=>{return await Z(J),J.done(R9),()=>{J.clearTimer(R9)}}};return x5(Q,{displayName:"Config"}),Q}var S5=g1("InitReady");function aA(Z){let Q=(J)=>{return J.inject(xW,Z).inject(F5,[]).inject(Y2,[]).inject(X2,[]).inject(S9,[]).inject(w9,[]).inject(s6,{handlers:gW,encode:[]}).inject(Q6,t2().use($6).use(S6)).inject(hJ,[R9]).record(S5),async()=>{await J.waitTimers(hJ);let X=J.get(s6);return J.set(Q6,t2().use($6).use(S6,X)),J.done(S5),()=>{J.remove(xW).remove(F5).remove(Y2).remove(X2).remove(S9).remove(w9).remove(s6).remove(Q6).remove(hJ).clearTimer(S5)}}};return x5(Q,{displayName:"Init"}),Q}var N1=g1("SchemaReady"),M9=Y0([],"schemaTimer"),w5=Y0({},"schema"),o6=Y0([],"nodes"),t6=Y0([],"marks");function kW(Z){return{...Z,parseDOM:Z.parseDOM?.map((Q)=>({priority:Z.priority,...Q}))}}var vW=(Z)=>{return Z.inject(w5,{}).inject(o6,[]).inject(t6,[]).inject(M9,[S5]).record(N1),async()=>{await Z.waitTimers(M9);let Q=Z.get(Q6),X=Z.get(Y2).reduce((U,K)=>U.use(K.plugin,K.options),Q);Z.set(Q6,X);let Y=Object.fromEntries(Z.get(o6).map(([U,K])=>[U,kW(K)])),q=Object.fromEntries(Z.get(t6).map(([U,K])=>[U,kW(K)])),G=new sZ({nodes:Y,marks:q});return Z.set(w5,G),Z.done(N1),()=>{Z.remove(w5).remove(o6).remove(t6).remove(M9).clearTimer(N1)}}};x5(vW,{displayName:"Schema"});class dJ{constructor(){this.#Q=new _7,this.#Z=null,this.setCtx=(Z)=>{this.#Z=Z},this.chain=()=>{if(this.#Z==null)throw L7();let Z=this.#Z,Q=[],J=this.get.bind(this),X={run:()=>{let q=c4(...Q),G=Z.get(z5);return q(G.state,G.dispatch,G)},inline:(q)=>{return Q.push(q),X},pipe:Y.bind(this)};function Y(q,G){let U=J(q);return Q.push(U(G)),X}return X}}#Q;#Z;get ctx(){return this.#Z}create(Z,Q){let J=Z.create(this.#Q.sliceMap);return J.set(Q),J}get(Z){return this.#Q.get(Z).get()}remove(Z){return this.#Q.remove(Z)}call(Z,Q){if(this.#Z==null)throw L7();let X=this.get(Z)(Q),Y=this.#Z.get(z5);return X(Y.state,Y.dispatch,Y)}inline(Z){if(this.#Z==null)throw L7();let Q=this.#Z.get(z5);return Z(Q.state,Q.dispatch,Q)}}function hW(Z="cmdKey"){return Y0(()=>()=>!1,Z)}var _0=Y0(new dJ,"commands"),D9=Y0([N1],"commandsTimer"),e6=g1("CommandsReady"),uW=(Z)=>{let Q=new dJ;return Q.setCtx(Z),Z.inject(_0,Q).inject(D9,[N1]).record(e6),async()=>{return await Z.waitTimers(D9),Z.done(e6),()=>{Z.remove(_0).remove(D9).clearTimer(e6)}}};x5(uW,{displayName:"Commands"});function nA(Z){let Q=c4(GH,H9,ZH,ZJ);return Z.Backspace=Q,Z}class cJ{constructor(){this.#Q=null,this.#Z=[],this.setCtx=(Z)=>{this.#Q=Z},this.add=(Z)=>{return this.#Z.push(Z),()=>{this.#Z=this.#Z.filter((Q)=>Q!==Z)}},this.addObjectKeymap=(Z)=>{let Q=[];return Object.entries(Z).forEach(([J,X])=>{if(typeof X==="function"){let Y={key:J,onRun:()=>X};this.#Z.push(Y),Q.push(()=>{this.#Z=this.#Z.filter((q)=>q!==Y)})}else this.#Z.push(X),Q.push(()=>{this.#Z=this.#Z.filter((Y)=>Y!==X)})}),()=>{Q.forEach((J)=>J())}},this.addBaseKeymap=()=>{let Z=nA(qH);return this.addObjectKeymap(Z)},this.build=()=>{let Z={};return this.#Z.forEach((J)=>{Z[J.key]=[...Z[J.key]||[],J]}),Object.fromEntries(Object.entries(Z).map(([J,X])=>{let Y=X.sort((G,U)=>(U.priority??50)-(G.priority??50));return[J,(G,U,K)=>{let H=this.#Q;if(H==null)throw R6();let W=Y.map((F)=>F.onRun(H));return c4(...W)(G,U,K)}]}))}}#Q;#Z;get ctx(){return this.#Q}}var I8=Y0(new cJ,"keymap"),uJ=Y0([N1],"keymapTimer"),Z2=g1("KeymapReady"),sA=(Z)=>{let Q=new cJ;return Q.setCtx(Z),Z.inject(I8,Q).inject(uJ,[N1]).record(Z2),async()=>{return await Z.waitTimers(uJ),Z.done(Z2),()=>{Z.remove(I8).remove(uJ).clearTimer(Z2)}}},I9=g1("ParserReady"),fW=()=>{throw R6()},P8=Y0(fW,"parser"),fJ=Y0([],"parserTimer"),mW=(Z)=>{return Z.inject(P8,fW).inject(fJ,[N1]).record(I9),async()=>{await Z.waitTimers(fJ);let Q=Z.get(Q6),J=Z.get(w5);return Z.set(P8,EK.create(J,Q)),Z.done(I9),()=>{Z.remove(P8).remove(fJ).clearTimer(I9)}}};x5(mW,{displayName:"Parser"});var Q2=g1("SerializerReady"),mJ=Y0([],"serializerTimer"),pW=()=>{throw R6()},J2=Y0(pW,"serializer"),lW=(Z)=>{return Z.inject(J2,pW).inject(mJ,[N1]).record(Q2),async()=>{await Z.waitTimers(mJ);let Q=Z.get(Q6),J=Z.get(w5);return Z.set(J2,TK.create(J,Q)),Z.done(Q2),()=>{Z.remove(J2).remove(mJ).clearTimer(Q2)}}};x5(lW,{displayName:"Serializer"});var R8=Y0("","defaultValue"),E9=Y0((Z)=>Z,"stateOptions"),T9=Y0([],"editorStateTimer"),$9=g1("EditorStateReady");function oA(Z,Q,J){if(typeof Z==="string")return Q(Z);if(Z.type==="html")return M5.fromSchema(J).parse(Z.dom);if(Z.type==="json")return B1.fromJSON(J,Z.value);throw GU(Z)}var tA=new k0("MILKDOWN_STATE_TRACKER"),iW=(Z)=>{return Z.inject(R8,"").inject(A8,{}).inject(E9,(Q)=>Q).inject(T9,[I9,Q2,e6,Z2]).record($9),async()=>{await Z.waitTimers(T9);let Q=Z.get(w5),J=Z.get(P8),X=Z.get(X2),Y=Z.get(E9),q=Z.get(F5),G=Z.get(R8),U=oA(G,J,Q),K=Z.get(I8),H=K.addBaseKeymap(),W=[...q,new y0({key:tA,state:{init:()=>{},apply:(B,V,O,N)=>{Z.set(A8,N)}}}),WH({rules:X}),_H(K.build())];Z.set(F5,W);let z=Y({schema:Q,doc:U,plugins:W}),F=i4.create(z);return Z.set(A8,F),Z.done($9),()=>{H(),Z.remove(R8).remove(A8).remove(E9).remove(T9).clearTimer($9)}}};x5(iW,{displayName:"EditorState"});var q2=Y0([],"pasteRule"),b9=Y0([N1],"pasteRuleTimer"),C9=g1("PasteRuleReady"),dW=(Z)=>{return Z.inject(q2,[]).inject(b9,[N1]).record(C9),async()=>{return await Z.waitTimers(b9),Z.done(C9),()=>{Z.remove(q2).remove(b9).clearTimer(C9)}}};x5(dW,{displayName:"PasteRule"});var M8=g1("EditorViewReady"),y9=Y0([],"editorViewTimer"),pJ=Y0({},"editorViewOptions"),D8=Y0(null,"root"),lJ=Y0(null,"rootDOM"),iJ=Y0({},"rootAttrs");function eA(Z,Q){let J=document.createElement("div");J.className="milkdown",Z.appendChild(J),Q.set(lJ,J);let X=Q.get(iJ);return Object.entries(X).forEach(([Y,q])=>J.setAttribute(Y,q)),J}function ZP(Z){Z.classList.add("editor"),Z.setAttribute("role","textbox")}var QP=new k0("MILKDOWN_VIEW_CLEAR"),cW=(Z)=>{return Z.inject(D8,document.body).inject(z5,{}).inject(pJ,{}).inject(lJ,null).inject(iJ,{}).inject(y9,[$9,C9]).record(M8),async()=>{await Z.wait(S5);let Q=Z.get(D8)||document.body,J=typeof Q==="string"?document.querySelector(Q):Q;Z.update(F5,(K)=>[new y0({key:QP,view:(H)=>{let W=J?eA(J,Z):void 0;return(()=>{if(W&&J){let F=H.dom;J.replaceChild(W,F),W.appendChild(F)}})(),{destroy:()=>{if(W?.parentNode)W?.parentNode.replaceChild(H.dom,W);W?.remove()}}}}),...K]),await Z.waitTimers(y9);let X=Z.get(A8),Y=Z.get(pJ),q=Object.fromEntries(Z.get(S9)),G=Object.fromEntries(Z.get(w9)),U=new P9(J,{state:X,nodeViews:q,markViews:G,transformPasted:(K,H,W)=>{return Z.get(q2).sort((z,F)=>(F.priority??50)-(z.priority??50)).map((z)=>z.run).forEach((z)=>{K=z(K,H,W)}),K},...Y});return ZP(U.dom),Z.set(z5,U),Z.done(M8),()=>{U?.destroy(),Z.remove(D8).remove(z5).remove(pJ).remove(lJ).remove(iJ).remove(y9).clearTimer(M8)}}};x5(cW,{displayName:"EditorView"});class x9{constructor(){this.#Q=!1,this.#Z="Idle",this.#X=[],this.#J=()=>{return},this.#G=new _7,this.#q=new lZ,this.#Y=new Map,this.#U=new Map,this.#K=new O7(this.#G,this.#q),this.#B=()=>{let Z=rA(async(J)=>{await Promise.all(this.#X.map((X)=>Promise.resolve(X(J))))}),Q=[vW,mW,lW,uW,sA,dW,iW,cW,aA(this),Z];this.#W(Q,this.#U)},this.#W=(Z,Q)=>{Z.forEach((J)=>{let X=this.#K.produce(this.#Q?J.meta:void 0),Y=J(X);Q.set(J,{ctx:X,handler:Y,cleanup:void 0})})},this.#z=(Z,Q=!1)=>{return Promise.all([Z].flat().map(async(J)=>{let Y=this.#Y.get(J)?.cleanup;if(Q)this.#Y.delete(J);else this.#Y.set(J,{ctx:void 0,handler:void 0,cleanup:void 0});if(typeof Y==="function")return Y();return Y}))},this.#V=async()=>{await Promise.all([...this.#U.entries()].map(async([Z,{cleanup:Q}])=>{if(typeof Q==="function")return Q();return Q})),this.#U.clear()},this.#H=(Z)=>{this.#Z=Z,this.#J(Z)},this.#F=(Z)=>{return[...Z.entries()].map(async([Q,J])=>{let{ctx:X,handler:Y}=J;if(!Y)return;let q=await Y();Z.set(Q,{ctx:X,handler:Y,cleanup:q})})},this.enableInspector=(Z=!0)=>{return this.#Q=Z,this},this.onStatusChange=(Z)=>{return this.#J=Z,this},this.config=(Z)=>{return this.#X.push(Z),this},this.removeConfig=(Z)=>{return this.#X=this.#X.filter((Q)=>Q!==Z),this},this.use=(Z)=>{let Q=[Z].flat();if(Q.flat().forEach((J)=>{this.#Y.set(J,{ctx:void 0,handler:void 0,cleanup:void 0})}),this.#Z==="Created")this.#W(Q,this.#Y);return this},this.remove=async(Z)=>{if(this.#Z==="OnCreate")return console.warn("[Milkdown]: You are trying to remove plugins when the editor is creating, this is not recommended, please check your code."),new Promise((Q)=>{setTimeout(()=>{Q(this.remove(Z))},50)});return await this.#z([Z].flat(),!0),this},this.create=async()=>{if(this.#Z==="OnCreate")return this;if(this.#Z==="Created")await this.destroy();return this.#H("OnCreate"),this.#B(),this.#W([...this.#Y.keys()],this.#Y),await Promise.all([this.#F(this.#U),this.#F(this.#Y)].flat()),this.#H("Created"),this},this.destroy=async(Z=!1)=>{if(this.#Z==="Destroyed"||this.#Z==="OnDestroy")return this;if(this.#Z==="OnCreate")return new Promise((Q)=>{setTimeout(()=>{Q(this.destroy(Z))},50)});if(Z)this.#X=[];return this.#H("OnDestroy"),await this.#z([...this.#Y.keys()],Z),await this.#V(),this.#H("Destroyed"),this},this.action=(Z)=>Z(this.#K),this.inspect=()=>{if(!this.#Q)return console.warn("[Milkdown]: You are trying to collect inspection when inspector is disabled, please enable inspector by `editor.enableInspector()` first."),[];return[...this.#U.values(),...this.#Y.values()].map(({ctx:Z})=>Z?.inspector?.read()).filter((Z)=>Boolean(Z))}}static make(){return new x9}#Q;#Z;#X;#J;#G;#q;#Y;#U;#K;#B;#W;#z;#V;#H;#F;get ctx(){return this.#K}get status(){return this.#Z}}var JP=typeof global=="object"&&global&&global.Object===Object&&global,rW=JP;var XP=typeof self=="object"&&self&&self.Object===Object&&self,YP=rW||XP||Function("return this")(),k9=YP;var qP=k9.Symbol,G2=qP;var aW=Object.prototype,GP=aW.hasOwnProperty,UP=aW.toString,E8=G2?G2.toStringTag:void 0;function KP(Z){var Q=GP.call(Z,E8),J=Z[E8];try{Z[E8]=void 0;var X=!0}catch(q){}var Y=UP.call(Z);if(X)if(Q)Z[E8]=J;else delete Z[E8];return Y}var nW=KP;var HP=Object.prototype,WP=HP.toString;function zP(Z){return WP.call(Z)}var sW=zP;var FP="[object Null]",BP="[object Undefined]",oW=G2?G2.toStringTag:void 0;function VP(Z){if(Z==null)return Z===void 0?BP:FP;return oW&&oW in Object(Z)?nW(Z):sW(Z)}var tW=VP;function LP(Z){return Z!=null&&typeof Z=="object"}var eW=LP;var _P="[object Symbol]";function OP(Z){return typeof Z=="symbol"||eW(Z)&&tW(Z)==_P}var Zz=OP;var NP=/\s/;function jP(Z){var Q=Z.length;while(Q--&&NP.test(Z.charAt(Q)));return Q}var Qz=jP;var AP=/^\s+/;function PP(Z){return Z?Z.slice(0,Qz(Z)+1).replace(AP,""):Z}var Jz=PP;function RP(Z){var Q=typeof Z;return Z!=null&&(Q=="object"||Q=="function")}var T8=RP;var Xz=NaN,MP=/^[-+]0x[0-9a-f]+$/i,DP=/^0b[01]+$/i,IP=/^0o[0-7]+$/i,EP=parseInt;function TP(Z){if(typeof Z=="number")return Z;if(Zz(Z))return Xz;if(T8(Z)){var Q=typeof Z.valueOf=="function"?Z.valueOf():Z;Z=T8(Q)?Q+"":Q}if(typeof Z!="string")return Z===0?Z:+Z;Z=Jz(Z);var J=DP.test(Z);return J||IP.test(Z)?EP(Z.slice(2),J?2:8):MP.test(Z)?Xz:+Z}var rJ=TP;var $P=function(){return k9.Date.now()},g9=$P;var bP="Expected a function",CP=Math.max,yP=Math.min;function SP(Z,Q,J){var X,Y,q,G,U,K,H=0,W=!1,z=!1,F=!0;if(typeof Z!="function")throw TypeError(bP);if(Q=rJ(Q)||0,T8(J))W=!!J.leading,z="maxWait"in J,q=z?CP(rJ(J.maxWait)||0,Q):q,F="trailing"in J?!!J.trailing:F;function B(I){var g=X,S=Y;return X=Y=void 0,H=I,G=Z.apply(S,g),G}function V(I){return H=I,U=setTimeout(j,Q),W?B(I):G}function O(I){var g=I-K,S=I-H,u=Q-g;return z?yP(u,q-S):u}function N(I){var g=I-K,S=I-H;return K===void 0||g>=Q||g<0||z&&S>=q}function j(){var I=g9();if(N(I))return R(I);U=setTimeout(j,O(I))}function R(I){if(U=void 0,F&&X)return B(I);return X=Y=void 0,G}function E(){if(U!==void 0)clearTimeout(U);H=0,X=K=Y=U=void 0}function $(){return U===void 0?G:R(g9())}function w(){var I=g9(),g=N(I);if(X=arguments,Y=this,K=I,g){if(U===void 0)return V(K);if(z)return clearTimeout(U),U=setTimeout(j,Q),B(K)}if(U===void 0)U=setTimeout(j,Q);return G}return w.cancel=E,w.flush=$,w}var aJ=SP;class nJ{constructor(){this.beforeMountedListeners=[],this.mountedListeners=[],this.updatedListeners=[],this.selectionUpdatedListeners=[],this.markdownUpdatedListeners=[],this.blurListeners=[],this.focusListeners=[],this.destroyListeners=[],this.beforeMount=(Z)=>{return this.beforeMountedListeners.push(Z),this},this.mounted=(Z)=>{return this.mountedListeners.push(Z),this},this.updated=(Z)=>{return this.updatedListeners.push(Z),this}}get listeners(){return{beforeMount:this.beforeMountedListeners,mounted:this.mountedListeners,updated:this.updatedListeners,markdownUpdated:this.markdownUpdatedListeners,blur:this.blurListeners,focus:this.focusListeners,destroy:this.destroyListeners,selectionUpdated:this.selectionUpdatedListeners}}markdownUpdated(Z){return this.markdownUpdatedListeners.push(Z),this}blur(Z){return this.blurListeners.push(Z),this}focus(Z){return this.focusListeners.push(Z),this}destroy(Z){return this.destroyListeners.push(Z),this}selectionUpdated(Z){return this.selectionUpdatedListeners.push(Z),this}}var v9=Y0(new nJ,"listener"),wP=new k0("MILKDOWN_LISTENER"),sJ=(Z)=>{return Z.inject(v9,new nJ),async()=>{await Z.wait(S5);let Q=Z.get(v9),{listeners:J}=Q;J.beforeMount.forEach((K)=>K(Z)),await Z.wait(Q2);let X=Z.get(J2),Y=null,q=null,G=null,U=new y0({key:wP,view:()=>{return{destroy:()=>{J.destroy.forEach((K)=>K(Z))}}},props:{handleDOMEvents:{focus:()=>{return J.focus.forEach((K)=>K(Z)),!1},blur:()=>{return J.blur.forEach((K)=>K(Z)),!1}}},state:{init:(K,H)=>{Y=H.doc,q=X(H.doc)},apply:(K)=>{let H=K.selection;if(!G&&H||G&&!H.eq(G))J.selectionUpdated.forEach((z)=>{z(Z,H,G)}),G=H;if(!(K.docChanged||K.storedMarksSet)||K.getMeta("addToHistory")===!1)return;return aJ(()=>{let{doc:z}=K;if(J.updated.length>0&&Y&&!Y.eq(z))J.updated.forEach((F)=>{F(Z,z,Y)});if(J.markdownUpdated.length>0&&Y&&!Y.eq(z)){let F=X(z);J.markdownUpdated.forEach((B)=>{B(Z,F,q)}),q=F}Y=z},200)()}}});Z.update(F5,(K)=>K.concat(U)),await Z.wait(M8),J.mounted.forEach((K)=>K(Z))}};sJ.meta={package:"@milkdown/plugin-listener",displayName:"Listener"};var xP=(Z)=>crypto.getRandomValues(new Uint8Array(Z)),kP=(Z,Q,J)=>{let X=(2<<Math.log2(Z.length-1))-1,Y=-~(1.6*X*Q/Z.length);return(q=Q)=>{let G="";while(!0){let U=J(Y),K=Y|0;while(K--)if(G+=Z[U[K]&X]||"",G.length>=q)return G}}},Yz=(Z,Q=21)=>kP(Z,Q|0,xP);var ig=Yz("abcedfghicklmn",10);function Q0(Z,Q){let J=hW(Z),X=(Y)=>async()=>{X.key=J,await Y.wait(e6);let q=Q(Y);return Y.get(_0).create(J,q),X.run=(G)=>Y.get(_0).call(Z,G),()=>{Y.get(_0).remove(J)}};return X}function W1(Z){let Q=(J)=>async()=>{await J.wait(N1);let X=Z(J);return J.update(X2,(Y)=>[...Y,X]),Q.inputRule=X,()=>{J.update(X2,(Y)=>Y.filter((q)=>q!==X))}};return Q}function qz(Z){let Q=(J)=>async()=>{await J.wait(N1);let X=Z(J);return J.update(q2,(Y)=>[...Y,X]),Q.pasteRule=X,()=>{J.update(q2,(Y)=>Y.filter((q)=>q!==X))}};return Q}function gP(Z,Q){let J=(X)=>async()=>{let Y=Q(X);return X.update(t6,(q)=>[...q.filter((G)=>G[0]!==Z),[Z,Y]]),J.id=Z,J.schema=Y,()=>{X.update(t6,(q)=>q.filter(([G])=>G!==Z))}};return J.type=(X)=>{let Y=X.get(w5).marks[Z];if(!Y)throw BU(Z);return Y},J}function h9(Z,Q){let J=(X)=>async()=>{let Y=Q(X);return X.update(o6,(q)=>[...q.filter((G)=>G[0]!==Z),[Z,Y]]),J.id=Z,J.schema=Y,()=>{X.update(o6,(q)=>q.filter(([G])=>G!==Z))}};return J.type=(X)=>{let Y=X.get(w5).nodes[Z];if(!Y)throw FU(Z);return Y},J}function s1(Z){let Q,J=(X)=>async()=>{return await X.wait(N1),Q=Z(X),X.update(F5,(Y)=>[...Y,Q]),()=>{X.update(F5,(Y)=>Y.filter((q)=>q!==Q))}};return J.plugin=()=>Q,J.key=()=>Q.spec.key,J}function vP(Z){let Q=(J)=>async()=>{await J.wait(Z2);let X=J.get(I8),Y=Z(J),q=X.addObjectKeymap(Y);return Q.keymap=Y,()=>{q()}};return Q}function k5(Z,Q){let J=Y0(Z,Q),X=(Y)=>{return Y.inject(J),()=>{return()=>{Y.remove(J)}}};return X.key=J,X}function f0(Z,Q){let J=k5(Q,Z),X=h9(Z,(q)=>{return q.get(J.key)(q)}),Y=[J,X];return Y.id=X.id,Y.node=X,Y.type=(q)=>X.type(q),Y.ctx=J,Y.key=J.key,Y.extendSchema=(q)=>{let G=q(Q);return f0(Z,G)},Y}function K4(Z,Q){let J=k5(Q,Z),X=gP(Z,(q)=>{return q.get(J.key)(q)}),Y=[J,X];return Y.id=X.id,Y.mark=X,Y.type=(q)=>X.type(q),Y.ctx=J,Y.key=J.key,Y.extendSchema=(q)=>{let G=q(Q);return K4(Z,G)},Y}function j1(Z,Q){let J=Object.fromEntries(Object.entries(Q).map(([G,{shortcuts:U,priority:K}])=>{return[G,{shortcuts:U,priority:K}]})),X=k5(J,`${Z}Keymap`),Y=vP((G)=>{let U=G.get(X.key),K=Object.entries(Q).flatMap(([H,{command:W}])=>{let z=U[H],F=[z.shortcuts].flat(),B=z.priority;return F.map((V)=>[V,{key:V,onRun:W,priority:B}])});return Object.fromEntries(K)}),q=[X,Y];return q.ctx=X,q.shortcuts=Y,q.key=X.key,q.keymap=Y.keymap,q}var m1=(Z,Q=()=>({}))=>k5(Q,`${Z}Attr`),J6=(Z,Q=()=>({}))=>k5(Q,`${Z}Attr`);function g5(Z,Q,J){let X=k5(J??{},Z),Y=(G)=>async()=>{await G.wait(S5);let K={plugin:Q(G),options:G.get(X.key)};return G.update(Y2,(H)=>[...H,K]),()=>{G.update(Y2,(H)=>H.filter((W)=>W!==K))}},q=[X,Y];return q.id=Z,q.plugin=Y,q.options=X,q}function Gz(Z,Q){return function(J,X){let{$from:Y,$to:q,node:G}=J.selection;if(G&&G.isBlock||Y.depth<2||!Y.sameParent(q))return!1;let U=Y.node(-1);if(U.type!=Z)return!1;if(Y.parent.content.size==0&&Y.node(-1).childCount==Y.indexAfter(-1)){if(Y.depth==3||Y.node(-3).type!=Z||Y.index(-2)!=Y.node(-2).childCount-1)return!1;if(X){let z=x.empty,F=Y.index(-1)?1:Y.index(-2)?2:3;for(let j=Y.depth-F;j>=Y.depth-3;j--)z=x.from(Y.node(j).copy(z));let B=Y.indexAfter(-1)<Y.node(-2).childCount?1:Y.indexAfter(-2)<Y.node(-3).childCount?2:3;z=z.append(x.from(Z.createAndFill()));let V=Y.before(Y.depth-(F-1)),O=J.tr.replace(V,Y.after(-B),new h(z,4-F,0)),N=-1;if(O.doc.nodesBetween(V,O.doc.content.size,(j,R)=>{if(N>-1)return!1;if(j.isTextblock&&j.content.size==0)N=R+1}),N>-1)O.setSelection(n.near(O.doc.resolve(N)));X(O.scrollIntoView())}return!0}let K=q.pos==Y.end()?U.contentMatchAt(0).defaultType:null,H=J.tr.delete(Y.pos,q.pos),W=K?[Q?{type:Z,attrs:Q}:null,{type:K}]:void 0;if(!p4(H.doc,Y.pos,2,W))return!1;if(X)X(H.split(Y.pos,2,W).scrollIntoView());return!0}}function Uz(Z){return function(Q,J){let{$from:X,$to:Y}=Q.selection,q=X.blockRange(Y,(G)=>G.childCount>0&&G.firstChild.type==Z);if(!q)return!1;if(!J)return!0;if(X.node(q.depth-1).type==Z)return hP(Q,J,Z,q);else return uP(Q,J,q)}}function hP(Z,Q,J,X){let Y=Z.tr,q=X.end,G=X.$to.end(X.depth);if(q<G)Y.step(new n0(q-1,G,q,G,new h(x.from(J.create(null,X.parent.copy())),1,0),1,!0)),X=new D7(Y.doc.resolve(X.$from.pos),Y.doc.resolve(G),X.depth);let U=v6(X);if(U==null)return!1;Y.lift(X,U);let K=Y.doc.resolve(Y.mapping.map(q,-1)-1);if(l4(Y.doc,K.pos)&&K.nodeBefore.type==K.nodeAfter.type)Y.join(K.pos);return Q(Y.scrollIntoView()),!0}function uP(Z,Q,J){let X=Z.tr,Y=J.parent;for(let B=J.end,V=J.endIndex-1,O=J.startIndex;V>O;V--)B-=Y.child(V).nodeSize,X.delete(B-1,B+1);let q=X.doc.resolve(J.start),G=q.nodeAfter;if(X.mapping.map(J.end)!=J.start+q.nodeAfter.nodeSize)return!1;let U=J.startIndex==0,K=J.endIndex==Y.childCount,H=q.node(-1),W=q.index(-1);if(!H.canReplace(W+(U?0:1),W+1,G.content.append(K?x.empty:x.from(Y))))return!1;let z=q.pos,F=z+G.nodeSize;return X.step(new n0(z-(U?1:0),F+(K?1:0),z+1,F-1,new h((U?x.empty:x.from(Y.copy(x.empty))).append(K?x.empty:x.from(Y.copy(x.empty))),U?0:1,K?0:1),U?0:1)),Q(X.scrollIntoView()),!0}function Kz(Z){return function(Q,J){let{$from:X,$to:Y}=Q.selection,q=X.blockRange(Y,(H)=>H.childCount>0&&H.firstChild.type==Z);if(!q)return!1;let G=q.startIndex;if(G==0)return!1;let U=q.parent,K=U.child(G-1);if(K.type!=Z)return!1;if(J){let H=K.lastChild&&K.lastChild.type==U.type,W=x.from(H?Z.create():null),z=new h(x.from(Z.create(null,x.from(U.type.create(null,W)))),H?3:1,0),F=q.start,B=q.end;J(Q.tr.step(new n0(F-(H?3:1),B,F,B,z,1,!0)).scrollIntoView())}return!0}}function oJ(Z){let Q=new Map;if(!Z||!Z.type)throw Error("mdast-util-definitions expected node");return a1(Z,"definition",function(X){let Y=Hz(X.identifier);if(Y&&!Q.get(Y))Q.set(Y,X)}),J;function J(X){let Y=Hz(X);return Q.get(Y)}}function Hz(Z){return String(Z||"").toUpperCase()}function u9(){return function(Z){let Q=oJ(Z);a1(Z,function(J,X,Y){if(J.type==="definition"&&Y!==void 0&&typeof X==="number")return Y.children.splice(X,1),[k4,X];if(J.type==="imageReference"||J.type==="linkReference"){let q=Q(J.identifier);if(q&&Y&&typeof X==="number")return Y.children[X]=J.type==="imageReference"?{type:"image",url:q.url,title:q.title,alt:J.alt}:{type:"link",url:q.url,title:q.title,children:J.children},[k4,X]}})}}function Wz(Z,Q){if(!(Q.childCount>=1&&Q.lastChild?.type.name==="hardbreak")){Z.next(Q.content);return}let X=[];Q.content.forEach((Y,q,G)=>{if(G===Q.childCount-1)return;X.push(Y)}),Z.next(x.fromArray(X))}function y(Z,Q){return Object.assign(Z,{meta:{package:"@milkdown/preset-commonmark",...Q}}),Z}var tJ=J6("emphasis");y(tJ,{displayName:"Attr<emphasis>",group:"Emphasis"});var K2=K4("emphasis",(Z)=>({attrs:{marker:{default:Z.get(s6).emphasis||"*",validate:"string"}},parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style",getAttrs:(Q)=>Q==="italic"}],toDOM:(Q)=>["em",Z.get(tJ.key)(Q)],parseMarkdown:{match:(Q)=>Q.type==="emphasis",runner:(Q,J,X)=>{Q.openMark(X,{marker:J.marker}),Q.next(J.children),Q.closeMark(X)}},toMarkdown:{match:(Q)=>Q.type.name==="emphasis",runner:(Q,J)=>{Q.withMark(J,"emphasis",void 0,{marker:J.attrs.marker})}}}));y(K2.mark,{displayName:"MarkSchema<emphasis>",group:"Emphasis"});y(K2.ctx,{displayName:"MarkSchemaCtx<emphasis>",group:"Emphasis"});var eJ=Q0("ToggleEmphasis",(Z)=>()=>{return p6(K2.type(Z))});y(eJ,{displayName:"Command<toggleEmphasisCommand>",group:"Emphasis"});var zz=W1((Z)=>{return r4(/(?:^|[^*])\*([^*]+)\*$/,K2.type(Z),{getAttr:()=>({marker:"*"}),updateCaptured:({fullMatch:Q,start:J})=>!Q.startsWith("*")?{fullMatch:Q.slice(1),start:J+1}:{}})});y(zz,{displayName:"InputRule<emphasis>|Star",group:"Emphasis"});var Fz=W1((Z)=>{return r4(/\b_(?![_\s])(.*?[^_\s])_\b/,K2.type(Z),{getAttr:()=>({marker:"_"}),updateCaptured:({fullMatch:Q,start:J})=>!Q.startsWith("_")?{fullMatch:Q.slice(1),start:J+1}:{}})});y(Fz,{displayName:"InputRule<emphasis>|Underscore",group:"Emphasis"});var ZX=j1("emphasisKeymap",{ToggleEmphasis:{shortcuts:"Mod-i",command:(Z)=>{let Q=Z.get(_0);return()=>Q.call(eJ.key)}}});y(ZX.ctx,{displayName:"KeymapCtx<emphasis>",group:"Emphasis"});y(ZX.shortcuts,{displayName:"Keymap<emphasis>",group:"Emphasis"});var QX=J6("strong");y(QX,{displayName:"Attr<strong>",group:"Strong"});var $8=K4("strong",(Z)=>({attrs:{marker:{default:Z.get(s6).strong||"*",validate:"string"}},parseDOM:[{tag:"b",getAttrs:(Q)=>Q.style.fontWeight!="normal"&&null},{tag:"strong"},{style:"font-style",getAttrs:(Q)=>Q==="bold"},{style:"font-weight=400",clearMark:(Q)=>Q.type.name=="strong"},{style:"font-weight",getAttrs:(Q)=>/^(bold(er)?|[5-9]\d{2,})$/.test(Q)&&null}],toDOM:(Q)=>["strong",Z.get(QX.key)(Q)],parseMarkdown:{match:(Q)=>Q.type==="strong",runner:(Q,J,X)=>{Q.openMark(X,{marker:J.marker}),Q.next(J.children),Q.closeMark(X)}},toMarkdown:{match:(Q)=>Q.type.name==="strong",runner:(Q,J)=>{Q.withMark(J,"strong",void 0,{marker:J.attrs.marker})}}}));y($8.mark,{displayName:"MarkSchema<strong>",group:"Strong"});y($8.ctx,{displayName:"MarkSchemaCtx<strong>",group:"Strong"});var JX=Q0("ToggleStrong",(Z)=>()=>{return p6($8.type(Z))});y(JX,{displayName:"Command<toggleStrongCommand>",group:"Strong"});var Bz=W1((Z)=>{return r4(new RegExp("(?<![\\w:/])(?:\\*\\*|__)([^*_]+?)(?:\\*\\*|__)(?![\\w/])$"),$8.type(Z),{getAttr:(Q)=>{return{marker:Q[0].startsWith("*")?"*":"_"}}})});y(Bz,{displayName:"InputRule<strong>",group:"Strong"});var XX=j1("strongKeymap",{ToggleBold:{shortcuts:["Mod-b"],command:(Z)=>{let Q=Z.get(_0);return()=>Q.call(JX.key)}}});y(XX.ctx,{displayName:"KeymapCtx<strong>",group:"Strong"});y(XX.shortcuts,{displayName:"Keymap<strong>",group:"Strong"});var YX=J6("inlineCode");y(YX,{displayName:"Attr<inlineCode>",group:"InlineCode"});var W4=K4("inlineCode",(Z)=>({priority:100,code:!0,parseDOM:[{tag:"code"}],toDOM:(Q)=>["code",Z.get(YX.key)(Q)],parseMarkdown:{match:(Q)=>Q.type==="inlineCode",runner:(Q,J,X)=>{Q.openMark(X),Q.addText(J.value),Q.closeMark(X)}},toMarkdown:{match:(Q)=>Q.type.name==="inlineCode",runner:(Q,J,X)=>{Q.withMark(J,"inlineCode",X.text||"")}}}));y(W4.mark,{displayName:"MarkSchema<inlineCode>",group:"InlineCode"});y(W4.ctx,{displayName:"MarkSchemaCtx<inlineCode>",group:"InlineCode"});var qX=Q0("ToggleInlineCode",(Z)=>()=>(Q,J)=>{let{selection:X,tr:Y}=Q;if(X.empty)return!1;let{from:q,to:G}=X;if(Q.doc.rangeHasMark(q,G,W4.type(Z)))return J?.(Y.removeMark(q,G,W4.type(Z))),!0;return Object.keys(Q.schema.marks).filter((H)=>H!==W4.type.name).map((H)=>Q.schema.marks[H]).forEach((H)=>{Y.removeMark(q,G,H)}),J?.(Y.addMark(q,G,W4.type(Z).create())),!0});y(qX,{displayName:"Command<toggleInlineCodeCommand>",group:"InlineCode"});var Vz=W1((Z)=>{return r4(/(?:`)([^`]+)(?:`)$/,W4.type(Z))});y(Vz,{displayName:"InputRule<inlineCodeInputRule>",group:"InlineCode"});var GX=j1("inlineCodeKeymap",{ToggleInlineCode:{shortcuts:"Mod-e",command:(Z)=>{let Q=Z.get(_0);return()=>Q.call(qX.key)}}});y(GX.ctx,{displayName:"KeymapCtx<inlineCode>",group:"InlineCode"});y(GX.shortcuts,{displayName:"Keymap<inlineCode>",group:"InlineCode"});var UX=J6("link");y(UX,{displayName:"Attr<link>",group:"Link"});var U2=K4("link",(Z)=>({attrs:{href:{validate:"string"},title:{default:null,validate:"string|null"}},parseDOM:[{tag:"a[href]",getAttrs:(Q)=>{if(!(Q instanceof HTMLElement))throw k1(Q);return{href:Q.getAttribute("href"),title:Q.getAttribute("title")}}}],toDOM:(Q)=>["a",{...Z.get(UX.key)(Q),...Q.attrs}],parseMarkdown:{match:(Q)=>Q.type==="link",runner:(Q,J,X)=>{let{url:Y,title:q}=J;Q.openMark(X,{href:Y,title:q}),Q.next(J.children),Q.closeMark(X)}},toMarkdown:{match:(Q)=>Q.type.name==="link",runner:(Q,J)=>{Q.withMark(J,"link",void 0,{title:J.attrs.title,url:J.attrs.href})}}}));y(U2.mark,{displayName:"MarkSchema<link>",group:"Link"});var Lz=Q0("ToggleLink",(Z)=>(Q={})=>p6(U2.type(Z),Q));y(Lz,{displayName:"Command<toggleLinkCommand>",group:"Link"});var _z=Q0("UpdateLink",(Z)=>(Q={})=>(J,X)=>{if(!X)return!1;let Y,q=-1,{selection:G}=J,{from:U,to:K}=G;if(J.doc.nodesBetween(U,U===K?K+1:K,(V,O)=>{if(U2.type(Z).isInSet(V.marks))return Y=V,q=O,!1;return}),!Y)return!1;let H=Y.marks.find(({type:V})=>V===U2.type(Z));if(!H)return!1;let W=q,z=q+Y.nodeSize,{tr:F}=J,B=U2.type(Z).create({...H.attrs,...Q});if(!B)return!1;return X(F.removeMark(W,z,H).addMark(W,z,B).setSelection(new Z0(F.selection.$anchor)).scrollIntoView()),!0});y(_z,{displayName:"Command<updateLinkCommand>",group:"Link"});var Oz=h9("doc",()=>({content:"block+",parseMarkdown:{match:({type:Z})=>Z==="root",runner:(Z,Q,J)=>{Z.injectRoot(Q,J)}},toMarkdown:{match:(Z)=>Z.type.name==="doc",runner:(Z,Q)=>{Z.openNode("root"),Z.next(Q.content)}}}));y(Oz,{displayName:"NodeSchema<doc>",group:"Doc"});function fP(Z){return g4(Z,(Q)=>Q.type==="html"&&["<br />","<br>","<br >","<br/>"].includes(Q.value?.trim()),(Q,J)=>{if(!J.length)return;let X=J[J.length-1];if(!X)return;let Y=X.children.indexOf(Q);if(Y===-1)return;X.children.splice(Y,1)},!0)}var m9=g5("remark-preserve-empty-line",()=>()=>fP);y(m9.plugin,{displayName:"Remark<remarkPreserveEmptyLine>",group:"Remark"});y(m9.options,{displayName:"RemarkConfig<remarkPreserveEmptyLine>",group:"Remark"});var KX=m1("paragraph");y(KX,{displayName:"Attr<paragraph>",group:"Paragraph"});var B5=f0("paragraph",(Z)=>({content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM:(Q)=>["p",Z.get(KX.key)(Q),0],parseMarkdown:{match:(Q)=>Q.type==="paragraph",runner:(Q,J,X)=>{if(Q.openNode(X),J.children)Q.next(J.children);else Q.addText(J.value||"");Q.closeNode()}},toMarkdown:{match:(Q)=>Q.type.name==="paragraph",runner:(Q,J)=>{let Y=Z.get(z5).state?.doc.lastChild;if(Q.openNode("paragraph"),(!J.content||J.content.size===0)&&J!==Y&&mP(Z))Q.addNode("html",void 0,"<br />");else Wz(Q,J);Q.closeNode()}}}));function mP(Z){let Q=!1;try{Z.get(m9.id),Q=!0}catch{Q=!1}return Q}y(B5.node,{displayName:"NodeSchema<paragraph>",group:"Paragraph"});y(B5.ctx,{displayName:"NodeSchemaCtx<paragraph>",group:"Paragraph"});var HX=Q0("TurnIntoText",(Z)=>()=>m6(B5.type(Z)));y(HX,{displayName:"Command<turnIntoTextCommand>",group:"Paragraph"});var WX=j1("paragraphKeymap",{TurnIntoText:{shortcuts:"Mod-Alt-0",command:(Z)=>{let Q=Z.get(_0);return()=>Q.call(HX.key)}}});y(WX.ctx,{displayName:"KeymapCtx<paragraph>",group:"Paragraph"});y(WX.shortcuts,{displayName:"Keymap<paragraph>",group:"Paragraph"});var pP=Array(6).fill(0).map((Z,Q)=>Q+1);function lP(Z){return Z.textContent.toLowerCase().trim().replace(/\s+/g,"-")}var p9=k5(lP,"headingIdGenerator");y(p9,{displayName:"Ctx<HeadingIdGenerator>",group:"Heading"});var zX=m1("heading");y(zX,{displayName:"Attr<heading>",group:"Heading"});var Y6=f0("heading",(Z)=>{let Q=Z.get(p9.key);return{content:"inline*",group:"block",defining:!0,attrs:{id:{default:"",validate:"string"},level:{default:1,validate:"number"}},parseDOM:pP.map((J)=>({tag:`h${J}`,getAttrs:(X)=>{if(!(X instanceof HTMLElement))throw k1(X);return{level:J,id:X.id}}})),toDOM:(J)=>{return[`h${J.attrs.level}`,{...Z.get(zX.key)(J),id:J.attrs.id||Q(J)},0]},parseMarkdown:{match:({type:J})=>J==="heading",runner:(J,X,Y)=>{let q=X.depth;J.openNode(Y,{level:q}),J.next(X.children),J.closeNode()}},toMarkdown:{match:(J)=>J.type.name==="heading",runner:(J,X)=>{J.openNode("heading",void 0,{depth:X.attrs.level}),Wz(J,X),J.closeNode()}}}});y(Y6.node,{displayName:"NodeSchema<heading>",group:"Heading"});y(Y6.ctx,{displayName:"NodeSchemaCtx<heading>",group:"Heading"});var Nz=W1((Z)=>{return XJ(/^(?<hashes>#+)\s$/,Y6.type(Z),(Q)=>{let J=Q.groups?.hashes?.length||0,X=Z.get(z5),{$from:Y}=X.state.selection,q=Y.node();if(q.type.name==="heading"){let G=Number(q.attrs.level)+Number(J);if(G>6)G=6;return{level:G}}return{level:J}})});y(Nz,{displayName:"InputRule<wrapInHeadingInputRule>",group:"Heading"});var H4=Q0("WrapInHeading",(Z)=>{return(Q)=>{if(Q??=1,Q<1)return m6(B5.type(Z));return m6(Y6.type(Z),{level:Q})}});y(H4,{displayName:"Command<wrapInHeadingCommand>",group:"Heading"});var FX=Q0("DowngradeHeading",(Z)=>()=>(Q,J,X)=>{let{$from:Y}=Q.selection,q=Y.node();if(q.type!==Y6.type(Z)||!Q.selection.empty||Y.parentOffset!==0)return!1;let G=q.attrs.level-1;if(!G)return m6(B5.type(Z))(Q,J,X);return J?.(Q.tr.setNodeMarkup(Q.selection.$from.before(),void 0,{...q.attrs,level:G})),!0});y(FX,{displayName:"Command<downgradeHeadingCommand>",group:"Heading"});var BX=j1("headingKeymap",{TurnIntoH1:{shortcuts:"Mod-Alt-1",command:(Z)=>{let Q=Z.get(_0);return()=>Q.call(H4.key,1)}},TurnIntoH2:{shortcuts:"Mod-Alt-2",command:(Z)=>{let Q=Z.get(_0);return()=>Q.call(H4.key,2)}},TurnIntoH3:{shortcuts:"Mod-Alt-3",command:(Z)=>{let Q=Z.get(_0);return()=>Q.call(H4.key,3)}},TurnIntoH4:{shortcuts:"Mod-Alt-4",command:(Z)=>{let Q=Z.get(_0);return()=>Q.call(H4.key,4)}},TurnIntoH5:{shortcuts:"Mod-Alt-5",command:(Z)=>{let Q=Z.get(_0);return()=>Q.call(H4.key,5)}},TurnIntoH6:{shortcuts:"Mod-Alt-6",command:(Z)=>{let Q=Z.get(_0);return()=>Q.call(H4.key,6)}},DowngradeHeading:{shortcuts:["Delete","Backspace"],command:(Z)=>{let Q=Z.get(_0);return()=>Q.call(FX.key)}}});y(BX.ctx,{displayName:"KeymapCtx<heading>",group:"Heading"});y(BX.shortcuts,{displayName:"Keymap<heading>",group:"Heading"});var VX=m1("blockquote");y(VX,{displayName:"Attr<blockquote>",group:"Blockquote"});var b8=f0("blockquote",(Z)=>({content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM:(Q)=>["blockquote",Z.get(VX.key)(Q),0],parseMarkdown:{match:({type:Q})=>Q==="blockquote",runner:(Q,J,X)=>{Q.openNode(X).next(J.children).closeNode()}},toMarkdown:{match:(Q)=>Q.type.name==="blockquote",runner:(Q,J)=>{Q.openNode("blockquote").next(J.content).closeNode()}}}));y(b8.node,{displayName:"NodeSchema<blockquote>",group:"Blockquote"});y(b8.ctx,{displayName:"NodeSchemaCtx<blockquote>",group:"Blockquote"});var jz=W1((Z)=>z9(/^\s*>\s$/,b8.type(Z)));y(jz,{displayName:"InputRule<wrapInBlockquoteInputRule>",group:"Blockquote"});var LX=Q0("WrapInBlockquote",(Z)=>()=>W9(b8.type(Z)));y(LX,{displayName:"Command<wrapInBlockquoteCommand>",group:"Blockquote"});var _X=j1("blockquoteKeymap",{WrapInBlockquote:{shortcuts:"Mod-Shift-b",command:(Z)=>{let Q=Z.get(_0);return()=>Q.call(LX.key)}}});y(_X.ctx,{displayName:"KeymapCtx<blockquote>",group:"Blockquote"});y(_X.shortcuts,{displayName:"Keymap<blockquote>",group:"Blockquote"});var OX=m1("codeBlock",()=>({pre:{},code:{}}));y(OX,{displayName:"Attr<codeBlock>",group:"CodeBlock"});var C8=f0("code_block",(Z)=>{return{content:"text*",group:"block",marks:"",defining:!0,code:!0,attrs:{language:{default:"",validate:"string"}},parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:(Q)=>{if(!(Q instanceof HTMLElement))throw k1(Q);return{language:Q.dataset.language}}}],toDOM:(Q)=>{let J=Z.get(OX.key)(Q),X=Q.attrs.language,Y=X&&X.length>0?{"data-language":X}:void 0;return["pre",{...J.pre,...Y},["code",J.code,0]]},parseMarkdown:{match:({type:Q})=>Q==="code",runner:(Q,J,X)=>{let Y=J.lang??"",q=J.value;if(Q.openNode(X,{language:Y}),q)Q.addText(q);Q.closeNode()}},toMarkdown:{match:(Q)=>Q.type.name==="code_block",runner:(Q,J)=>{Q.addNode("code",void 0,J.content.firstChild?.text||"",{lang:J.attrs.language})}}}});y(C8.node,{displayName:"NodeSchema<codeBlock>",group:"CodeBlock"});y(C8.ctx,{displayName:"NodeSchemaCtx<codeBlock>",group:"CodeBlock"});var Az=W1((Z)=>XJ(/^```(?<language>[a-z]*)?[\s\n]$/,C8.type(Z),(Q)=>({language:Q.groups?.language??""})));y(Az,{displayName:"InputRule<createCodeBlockInputRule>",group:"CodeBlock"});var NX=Q0("CreateCodeBlock",(Z)=>(Q="")=>m6(C8.type(Z),{language:Q}));y(NX,{displayName:"Command<createCodeBlockCommand>",group:"CodeBlock"});var iP=Q0("UpdateCodeBlockLanguage",()=>({pos:Z,language:Q}={pos:-1,language:""})=>(J,X)=>{if(Z>=0)return X?.(J.tr.setNodeAttribute(Z,"language",Q)),!0;return!1});y(iP,{displayName:"Command<updateCodeBlockLanguageCommand>",group:"CodeBlock"});var jX=j1("codeBlockKeymap",{CreateCodeBlock:{shortcuts:"Mod-Alt-c",command:(Z)=>{let Q=Z.get(_0);return()=>Q.call(NX.key)}}});y(jX.ctx,{displayName:"KeymapCtx<codeBlock>",group:"CodeBlock"});y(jX.shortcuts,{displayName:"Keymap<codeBlock>",group:"CodeBlock"});var AX=m1("image");y(AX,{displayName:"Attr<image>",group:"Image"});var H2=f0("image",(Z)=>{return{inline:!0,group:"inline",selectable:!0,draggable:!0,marks:"",atom:!0,defining:!0,isolating:!0,attrs:{src:{default:"",validate:"string"},alt:{default:"",validate:"string"},title:{default:"",validate:"string"}},parseDOM:[{tag:"img[src]",getAttrs:(Q)=>{if(!(Q instanceof HTMLElement))throw k1(Q);return{src:Q.getAttribute("src")||"",alt:Q.getAttribute("alt")||"",title:Q.getAttribute("title")||Q.getAttribute("alt")||""}}}],toDOM:(Q)=>{return["img",{...Z.get(AX.key)(Q),...Q.attrs}]},parseMarkdown:{match:({type:Q})=>Q==="image",runner:(Q,J,X)=>{let{url:Y,alt:q,title:G}=J;Q.addNode(X,{src:Y,alt:q,title:G})}},toMarkdown:{match:(Q)=>Q.type.name==="image",runner:(Q,J)=>{Q.addNode("image",void 0,void 0,{title:J.attrs.title,url:J.attrs.src,alt:J.attrs.alt})}}}});y(H2.node,{displayName:"NodeSchema<image>",group:"Image"});y(H2.ctx,{displayName:"NodeSchemaCtx<image>",group:"Image"});var Pz=Q0("InsertImage",(Z)=>(Q={})=>(J,X)=>{if(!X)return!0;let{src:Y="",alt:q="",title:G=""}=Q,U=H2.type(Z).create({src:Y,alt:q,title:G});if(!U)return!0;return X(J.tr.replaceSelectionWith(U).scrollIntoView()),!0});y(Pz,{displayName:"Command<insertImageCommand>",group:"Image"});var Rz=Q0("UpdateImage",(Z)=>(Q={})=>(J,X)=>{let Y=BH(J.selection,H2.type(Z));if(!Y)return!1;let{node:q,pos:G}=Y,U={...q.attrs},{src:K,alt:H,title:W}=Q;if(K!==void 0)U.src=K;if(H!==void 0)U.alt=H;if(W!==void 0)U.title=W;return X?.(J.tr.setNodeMarkup(G,void 0,U).scrollIntoView()),!0});y(Rz,{displayName:"Command<updateImageCommand>",group:"Image"});var dP=W1((Z)=>new Q1(/!\[(?<alt>.*?)]\((?<filename>.*?)\s*(?="|\))"?(?<title>[^"]+)?"?\)/,(Q,J,X,Y)=>{let[q,G,U="",K]=J;if(q)return Q.tr.replaceWith(X,Y,H2.type(Z).create({src:U,alt:G,title:K}));return null}));y(dP,{displayName:"InputRule<insertImageInputRule>",group:"Image"});var f9=m1("hardbreak",(Z)=>{return{"data-type":"hardbreak","data-is-inline":Z.attrs.isInline}});y(f9,{displayName:"Attr<hardbreak>",group:"Hardbreak"});var X6=f0("hardbreak",(Z)=>({inline:!0,group:"inline",attrs:{isInline:{default:!1,validate:"boolean"}},selectable:!1,parseDOM:[{tag:"br"},{tag:'span[data-type="hardbreak"]',getAttrs:()=>({isInline:!0})}],toDOM:(Q)=>Q.attrs.isInline?["span",Z.get(f9.key)(Q)," "]:["br",Z.get(f9.key)(Q)],parseMarkdown:{match:({type:Q})=>Q==="break",runner:(Q,J,X)=>{Q.addNode(X,{isInline:Boolean(J.data?.isInline)})}},leafText:()=>`
`,toMarkdown:{match:(Q)=>Q.type.name==="hardbreak",runner:(Q,J)=>{if(J.attrs.isInline)Q.addNode("text",void 0,`
`);else Q.addNode("break")}}}));y(X6.node,{displayName:"NodeSchema<hardbreak>",group:"Hardbreak"});y(X6.ctx,{displayName:"NodeSchemaCtx<hardbreak>",group:"Hardbreak"});var PX=Q0("InsertHardbreak",(Z)=>()=>(Q,J)=>{let{selection:X,tr:Y}=Q;if(!(X instanceof Z0))return!1;if(X.empty){let q=X.$from.node();if(q.childCount>0&&q.lastChild?.type.name==="hardbreak")return J?.(Y.replaceRangeWith(X.to-1,X.to,Q.schema.node("paragraph")).setSelection(n.near(Y.doc.resolve(X.to))).scrollIntoView()),!0}return J?.(Y.setMeta("hardbreak",!0).replaceSelectionWith(X6.type(Z).create()).scrollIntoView()),!0});y(PX,{displayName:"Command<insertHardbreakCommand>",group:"Hardbreak"});var RX=j1("hardbreakKeymap",{InsertHardbreak:{shortcuts:"Shift-Enter",command:(Z)=>{let Q=Z.get(_0);return()=>Q.call(PX.key)}}});y(RX.ctx,{displayName:"KeymapCtx<hardbreak>",group:"Hardbreak"});y(RX.shortcuts,{displayName:"Keymap<hardbreak>",group:"Hardbreak"});var MX=m1("hr");y(MX,{displayName:"Attr<hr>",group:"Hr"});var y8=f0("hr",(Z)=>({group:"block",parseDOM:[{tag:"hr"}],toDOM:(Q)=>["hr",Z.get(MX.key)(Q)],parseMarkdown:{match:({type:Q})=>Q==="thematicBreak",runner:(Q,J,X)=>{Q.addNode(X)}},toMarkdown:{match:(Q)=>Q.type.name==="hr",runner:(Q)=>{Q.addNode("thematicBreak")}}}));y(y8.node,{displayName:"NodeSchema<hr>",group:"Hr"});y(y8.ctx,{displayName:"NodeSchemaCtx<hr>",group:"Hr"});var Mz=W1((Z)=>new Q1(/^(?:---|___\s|\*\*\*\s)$/,(Q,J,X,Y)=>{let{tr:q}=Q;if(J[0])q.replaceWith(X-1,Y,y8.type(Z).create());return q}));y(Mz,{displayName:"InputRule<insertHrInputRule>",group:"Hr"});var Dz=Q0("InsertHr",(Z)=>()=>(Q,J)=>{if(!J)return!0;let X=B5.node.type(Z).create(),{tr:Y,selection:q}=Q,{from:G}=q,U=y8.type(Z).create();if(!U)return!0;let K=Y.replaceSelectionWith(U).insert(G,X),H=n.findFrom(K.doc.resolve(G),1,!0);if(!H)return!0;return J(K.setSelection(H).scrollIntoView()),!0});y(Dz,{displayName:"Command<insertHrCommand>",group:"Hr"});var DX=m1("bulletList");y(DX,{displayName:"Attr<bulletList>",group:"BulletList"});var W2=f0("bullet_list",(Z)=>{return{content:"listItem+",group:"block",attrs:{spread:{default:!1,validate:"boolean"}},parseDOM:[{tag:"ul",getAttrs:(Q)=>{if(!(Q instanceof HTMLElement))throw k1(Q);return{spread:Q.dataset.spread==="true"}}}],toDOM:(Q)=>{return["ul",{...Z.get(DX.key)(Q),"data-spread":Q.attrs.spread},0]},parseMarkdown:{match:({type:Q,ordered:J})=>Q==="list"&&!J,runner:(Q,J,X)=>{let Y=J.spread!=null?`${J.spread}`:"false";Q.openNode(X,{spread:Y}).next(J.children).closeNode()}},toMarkdown:{match:(Q)=>Q.type.name==="bullet_list",runner:(Q,J)=>{Q.openNode("list",void 0,{ordered:!1,spread:J.attrs.spread}).next(J.content).closeNode()}}}});y(W2.node,{displayName:"NodeSchema<bulletList>",group:"BulletList"});y(W2.ctx,{displayName:"NodeSchemaCtx<bulletList>",group:"BulletList"});var Iz=W1((Z)=>z9(/^\s*([-+*])\s$/,W2.type(Z)));y(Iz,{displayName:"InputRule<wrapInBulletListInputRule>",group:"BulletList"});var IX=Q0("WrapInBulletList",(Z)=>()=>W9(W2.type(Z)));y(IX,{displayName:"Command<wrapInBulletListCommand>",group:"BulletList"});var EX=j1("bulletListKeymap",{WrapInBulletList:{shortcuts:"Mod-Alt-8",command:(Z)=>{let Q=Z.get(_0);return()=>Q.call(IX.key)}}});y(EX.ctx,{displayName:"KeymapCtx<bulletListKeymap>",group:"BulletList"});y(EX.shortcuts,{displayName:"Keymap<bulletListKeymap>",group:"BulletList"});var TX=m1("orderedList");y(TX,{displayName:"Attr<orderedList>",group:"OrderedList"});var z2=f0("ordered_list",(Z)=>({content:"listItem+",group:"block",attrs:{order:{default:1,validate:"number"},spread:{default:!1,validate:"boolean"}},parseDOM:[{tag:"ol",getAttrs:(Q)=>{if(!(Q instanceof HTMLElement))throw k1(Q);return{spread:Q.dataset.spread,order:Q.hasAttribute("start")?Number(Q.getAttribute("start")):1}}}],toDOM:(Q)=>["ol",{...Z.get(TX.key)(Q),...Q.attrs.order===1?{}:Q.attrs.order,"data-spread":Q.attrs.spread},0],parseMarkdown:{match:({type:Q,ordered:J})=>Q==="list"&&!!J,runner:(Q,J,X)=>{let Y=J.spread!=null?`${J.spread}`:"true";Q.openNode(X,{spread:Y}).next(J.children).closeNode()}},toMarkdown:{match:(Q)=>Q.type.name==="ordered_list",runner:(Q,J)=>{Q.openNode("list",void 0,{ordered:!0,start:1,spread:J.attrs.spread==="true"}),Q.next(J.content),Q.closeNode()}}}));y(z2.node,{displayName:"NodeSchema<orderedList>",group:"OrderedList"});y(z2.ctx,{displayName:"NodeSchemaCtx<orderedList>",group:"OrderedList"});var Ez=W1((Z)=>z9(/^\s*(\d+)\.\s$/,z2.type(Z),(Q)=>({order:Number(Q[1])}),(Q,J)=>J.childCount+J.attrs.order===Number(Q[1])));y(Ez,{displayName:"InputRule<wrapInOrderedListInputRule>",group:"OrderedList"});var $X=Q0("WrapInOrderedList",(Z)=>()=>W9(z2.type(Z)));y($X,{displayName:"Command<wrapInOrderedListCommand>",group:"OrderedList"});var bX=j1("orderedListKeymap",{WrapInOrderedList:{shortcuts:"Mod-Alt-7",command:(Z)=>{let Q=Z.get(_0);return()=>Q.call($X.key)}}});y(bX.ctx,{displayName:"KeymapCtx<orderedList>",group:"OrderedList"});y(bX.shortcuts,{displayName:"Keymap<orderedList>",group:"OrderedList"});var CX=m1("listItem");y(CX,{displayName:"Attr<listItem>",group:"ListItem"});var V5=f0("list_item",(Z)=>({group:"listItem",content:"paragraph block*",attrs:{label:{default:"•",validate:"string"},listType:{default:"bullet",validate:"string"},spread:{default:!0,validate:"boolean"}},defining:!0,parseDOM:[{tag:"li",getAttrs:(Q)=>{if(!(Q instanceof HTMLElement))throw k1(Q);return{label:Q.dataset.label,listType:Q.dataset.listType,spread:Q.dataset.spread==="true"}}}],toDOM:(Q)=>["li",{...Z.get(CX.key)(Q),"data-label":Q.attrs.label,"data-list-type":Q.attrs.listType,"data-spread":Q.attrs.spread},0],parseMarkdown:{match:({type:Q})=>Q==="listItem",runner:(Q,J,X)=>{let Y=J.label!=null?`${J.label}.`:"•",q=J.label!=null?"ordered":"bullet",G=J.spread!=null?`${J.spread}`:"true";Q.openNode(X,{label:Y,listType:q,spread:G}),Q.next(J.children),Q.closeNode()}},toMarkdown:{match:(Q)=>Q.type.name==="list_item",runner:(Q,J)=>{Q.openNode("listItem",void 0,{spread:J.attrs.spread}),Q.next(J.content),Q.closeNode()}}}));y(V5.node,{displayName:"NodeSchema<listItem>",group:"ListItem"});y(V5.ctx,{displayName:"NodeSchemaCtx<listItem>",group:"ListItem"});var yX=Q0("SinkListItem",(Z)=>()=>Kz(V5.type(Z)));y(yX,{displayName:"Command<sinkListItemCommand>",group:"ListItem"});var SX=Q0("LiftListItem",(Z)=>()=>Uz(V5.type(Z)));y(SX,{displayName:"Command<liftListItemCommand>",group:"ListItem"});var wX=Q0("SplitListItem",(Z)=>()=>Gz(V5.type(Z)));y(wX,{displayName:"Command<splitListItemCommand>",group:"ListItem"});function cP(Z){return(Q,J,X)=>{let{selection:Y}=Q;if(!(Y instanceof Z0))return!1;let{empty:q,$from:G}=Y;if(!q||G.parentOffset!==0)return!1;if(G.node(-1).type!==V5.type(Z))return!1;return eQ(Q,J,X)}}var xX=Q0("LiftFirstListItem",(Z)=>()=>cP(Z));y(xX,{displayName:"Command<liftFirstListItemCommand>",group:"ListItem"});var kX=j1("listItemKeymap",{NextListItem:{shortcuts:"Enter",command:(Z)=>{let Q=Z.get(_0);return()=>Q.call(wX.key)}},SinkListItem:{shortcuts:["Tab","Mod-]"],command:(Z)=>{let Q=Z.get(_0);return()=>Q.call(yX.key)}},LiftListItem:{shortcuts:["Shift-Tab","Mod-["],command:(Z)=>{let Q=Z.get(_0);return()=>Q.call(SX.key)}},LiftFirstListItem:{shortcuts:["Backspace","Delete"],command:(Z)=>{let Q=Z.get(_0);return()=>Q.call(xX.key)}}});y(kX.ctx,{displayName:"KeymapCtx<listItem>",group:"ListItem"});y(kX.shortcuts,{displayName:"Keymap<listItem>",group:"ListItem"});var Tz=h9("text",()=>({group:"inline",parseMarkdown:{match:({type:Z})=>Z==="text",runner:(Z,Q)=>{Z.addText(Q.value)}},toMarkdown:{match:(Z)=>Z.type.name==="text",runner:(Z,Q)=>{Z.addNode("text",void 0,Q.text)}}}));y(Tz,{displayName:"NodeSchema<text>",group:"Text"});var gX=m1("html");y(gX,{displayName:"Attr<html>",group:"Html"});var vX=f0("html",(Z)=>{return{atom:!0,group:"inline",inline:!0,attrs:{value:{default:"",validate:"string"}},toDOM:(Q)=>{let J=document.createElement("span"),X={...Z.get(gX.key)(Q),"data-value":Q.attrs.value,"data-type":"html"};return J.textContent=Q.attrs.value,["span",X,Q.attrs.value]},parseDOM:[{tag:'span[data-type="html"]',getAttrs:(Q)=>{return{value:Q.dataset.value??""}}}],parseMarkdown:{match:({type:Q})=>Boolean(Q==="html"),runner:(Q,J,X)=>{Q.addNode(X,{value:J.value})}},toMarkdown:{match:(Q)=>Q.type.name==="html",runner:(Q,J)=>{Q.addNode("html",void 0,J.attrs.value)}}}});y(vX.node,{displayName:"NodeSchema<html>",group:"Html"});y(vX.ctx,{displayName:"NodeSchemaCtx<html>",group:"Html"});var rP=[Oz,KX,B5,p9,zX,Y6,f9,X6,VX,b8,OX,C8,MX,y8,AX,H2,DX,W2,TX,z2,CX,V5,tJ,K2,QX,$8,YX,W4,UX,U2,gX,vX,Tz].flat(),aP=[jz,Iz,Ez,Az,Mz,Nz].flat(),nP=[zz,Fz,Vz,Bz],sP=Q0("IsMarkSelected",()=>(Z)=>(Q)=>{if(!Z)return!1;let{doc:J,selection:X}=Q;return J.rangeHasMark(X.from,X.to,Z)}),oP=Q0("IsNoteSelected",()=>(Z)=>(Q)=>{if(!Z)return!1;return VH(Q,Z).hasNode}),tP=Q0("ClearTextInCurrentBlock",()=>()=>(Z,Q)=>{let J=Z.tr,{$from:X,$to:Y}=J.selection,{pos:q}=X,{pos:G}=Y,U=q-X.node().content.size;if(U<0)return!1;return J=J.deleteRange(U,G),Q?.(J),!0}),eP=Q0("SetBlockType",()=>(Z)=>(Q,J)=>{let{nodeType:X,attrs:Y=null}=Z??{};if(!X)return!1;let q=Q.tr,{from:G,to:U}=q.selection;try{q.setBlockType(G,U,X,Y)}catch{return!1}return J?.(q),!0}),ZR=Q0("WrapInBlockType",()=>(Z)=>(Q,J)=>{let{nodeType:X,attrs:Y=null}=Z??{};if(!X)return!1;let q=Q.tr;try{let{$from:G,$to:U}=q.selection,K=G.blockRange(U),H=K&&m4(K,X,Y);if(!H)return!1;q=q.wrap(K,H)}catch{return!1}return J?.(q),!0}),QR=Q0("AddBlockType",()=>(Z)=>(Q,J)=>{let{nodeType:X,attrs:Y=null}=Z??{};if(!X)return!1;let q=Q.tr;try{let G=X instanceof B1?X:X.createAndFill(Y);if(!G)return!1;q.replaceSelectionWith(G)}catch{return!1}return J?.(q),!0}),JR=Q0("SelectTextNearPos",()=>(Z)=>(Q,J)=>{let{pos:X}=Z??{};if(X==null)return!1;let Y=(G,U,K)=>Math.min(Math.max(G,U),K),q=Q.tr;try{let G=Q.doc.resolve(Y(X,0,Q.doc.content.size));q.setSelection(Z0.near(G))}catch{return!1}return J?.(q.scrollIntoView()),!0}),XR=[HX,LX,H4,FX,NX,PX,Dz,Pz,Rz,$X,IX,yX,wX,SX,xX,eJ,qX,JX,Lz,_z,sP,oP,tP,eP,ZR,QR,JR],YR=[_X,jX,RX,BX,kX,bX,EX,WX,ZX,GX,XX].flat(),hX=g5("remarkAddOrderInList",()=>()=>(Z)=>{a1(Z,"list",(Q)=>{if(Q.ordered){let J=Q.start??1;Q.children.forEach((X,Y)=>{X.label=Y+J})}})});y(hX.plugin,{displayName:"Remark<remarkAddOrderInListPlugin>",group:"Remark"});y(hX.options,{displayName:"RemarkConfig<remarkAddOrderInListPlugin>",group:"Remark"});var uX=g5("remarkLineBreak",()=>()=>(Z)=>{let Q=/[\t ]*(?:\r?\n|\r)/g;a1(Z,"text",(J,X,Y)=>{if(!J.value||typeof J.value!=="string")return;let q=[],G=0;Q.lastIndex=0;let U=Q.exec(J.value);while(U){let H=U.index;if(G!==H)q.push({type:"text",value:J.value.slice(G,H)});q.push({type:"break",data:{isInline:!0}}),G=H+U[0].length,U=Q.exec(J.value)}if(!(q.length>0&&Y&&typeof X==="number"))return;if(G<J.value.length)q.push({type:"text",value:J.value.slice(G)});return Y.children.splice(X,1,...q),X+q.length})});y(uX.plugin,{displayName:"Remark<remarkLineBreak>",group:"Remark"});y(uX.options,{displayName:"RemarkConfig<remarkLineBreak>",group:"Remark"});var fX=g5("remarkInlineLink",()=>u9);y(fX.plugin,{displayName:"Remark<remarkInlineLinkPlugin>",group:"Remark"});y(fX.options,{displayName:"RemarkConfig<remarkInlineLinkPlugin>",group:"Remark"});var qR=(Z)=>!!Z.children,GR=(Z)=>Z.type==="html";function UR(Z,Q){return J(Z,0,null)[0];function J(X,Y,q){if(qR(X)){let G=[];for(let U=0,K=X.children.length;U<K;U++){let H=X.children[U];if(H){let W=J(H,U,X);if(W)for(let z=0,F=W.length;z<F;z++){let B=W[z];if(B)G.push(B)}}}X.children=G}return Q(X,Y,q)}}var KR=["root","blockquote","listItem"],mX=g5("remarkHTMLTransformer",()=>()=>(Z)=>{UR(Z,(Q,J,X)=>{if(!GR(Q))return[Q];if(X&&KR.includes(X.type))Q.children=[{...Q}],delete Q.value,Q.type="paragraph";return[Q]})});y(mX.plugin,{displayName:"Remark<remarkHtmlTransformer>",group:"Remark"});y(mX.options,{displayName:"RemarkConfig<remarkHtmlTransformer>",group:"Remark"});var pX=g5("remarkMarker",()=>()=>(Z,Q)=>{let J=(X)=>{return Q.value.charAt(X.position.start.offset)};a1(Z,(X)=>["strong","emphasis"].includes(X.type),(X)=>{X.marker=J(X)})});y(pX.plugin,{displayName:"Remark<remarkMarker>",group:"Remark"});y(pX.options,{displayName:"RemarkConfig<remarkMarker>",group:"Remark"});var $z=s1(()=>{let Z=!1,Q=new k0("MILKDOWN_INLINE_NODES_CURSOR"),J=new y0({key:Q,state:{init(){return!1},apply(X){if(!X.selection.empty)return!1;let Y=X.selection.$from,q=Y.nodeBefore,G=Y.nodeAfter;if(q&&G&&q.isInline&&!q.isText&&G.isInline&&!G.isText)return!0;return!1}},props:{handleDOMEvents:{compositionend:(X,Y)=>{if(Z)return Z=!1,requestAnimationFrame(()=>{if(J.getState(X.state)){let G=X.state.selection.from;Y.preventDefault(),X.dispatch(X.state.tr.insertText(Y.data||"",G))}}),!0;return!1},compositionstart:(X)=>{if(J.getState(X.state))Z=!0;return!1},beforeinput:(X,Y)=>{if(J.getState(X.state)&&Y instanceof InputEvent&&Y.data&&!Z){let G=X.state.selection.from;return Y.preventDefault(),X.dispatch(X.state.tr.insertText(Y.data||"",G)),!0}return!1}},decorations(X){if(J.getState(X)){let G=X.selection.$from.pos,U=document.createElement("span"),K=i0.widget(G,U,{side:-1}),H=document.createElement("span"),W=i0.widget(G,H);return setTimeout(()=>{U.contentEditable="true",H.contentEditable="true"}),M0.create(X.doc,[K,W])}return M0.empty}}});return J});y($z,{displayName:"Prose<inlineNodesCursorPlugin>",group:"Prose"});var bz=s1((Z)=>{return new y0({key:new k0("MILKDOWN_HARDBREAK_MARKS"),appendTransaction:(Q,J,X)=>{if(!Q.length)return;let[Y]=Q;if(!Y)return;let[q]=Y.steps;if(Y.getMeta("hardbreak")){if(!(q instanceof u0))return;let{from:K}=q;return X.tr.setNodeMarkup(K,X6.type(Z),void 0,[])}if(q instanceof U5){let K=X.tr,{from:H,to:W}=q;return X.doc.nodesBetween(H,W,(z,F)=>{if(z.type===X6.type(Z))K=K.setNodeMarkup(F,X6.type(Z),void 0,[])}),K}return}})});y(bz,{displayName:"Prose<hardbreakClearMarkPlugin>",group:"Prose"});var lX=k5(["table","code_block"],"hardbreakFilterNodes");y(lX,{displayName:"Ctx<hardbreakFilterNodes>",group:"Prose"});var Cz=s1((Z)=>{let Q=Z.get(lX.key);return new y0({key:new k0("MILKDOWN_HARDBREAK_FILTER"),filterTransaction:(J,X)=>{let Y=J.getMeta("hardbreak"),[q]=J.steps;if(Y&&q){let{from:G}=q,U=X.doc.resolve(G),K=U.depth,H=!0;while(K>0){if(Q.includes(U.node(K).type.name))H=!1;K--}return H}return!0}})});y(Cz,{displayName:"Prose<hardbreakFilterPlugin>",group:"Prose"});var yz=s1((Z)=>{let Q=new k0("MILKDOWN_HEADING_ID"),J=(X)=>{if(X.composing)return;let Y=Z.get(p9.key),q=X.state.tr.setMeta("addToHistory",!1),G=!1,U={};if(X.state.doc.descendants((K,H)=>{if(K.type===Y6.type(Z)){if(K.textContent.trim().length===0)return;let W=K.attrs,z=Y(K);if(U[z])U[z]+=1,z+=`-#${U[z]}`;else U[z]=1;if(W.id!==z)G=!0,q.setMeta(Q,!0).setNodeMarkup(H,void 0,{...W,id:z})}}),G)X.dispatch(q)};return new y0({key:Q,view:(X)=>{return J(X),{update:(Y,q)=>{if(Y.state.doc.eq(q.doc))return;J(Y)}}}})});y(yz,{displayName:"Prose<syncHeadingIdPlugin>",group:"Prose"});var Sz=s1((Z)=>{let Q=(J,X,Y)=>{if(!Y.selection||J.some((z)=>z.getMeta("addToHistory")===!1||!z.isGeneric))return null;let q=z2.type(Z),G=W2.type(Z),U=V5.type(Z),K=(z,F)=>{let B=!1,V=`${F+1}.`;if(z.label!==V)z.label=V,B=!0;return B},H=Y.tr,W=!1;return Y.doc.descendants((z,F,B,V)=>{if(z.type===G){let O=z.maybeChild(0);if(O?.type===U&&O.attrs.listType==="ordered")W=!0,H.setNodeMarkup(F,q,{spread:"true"}),z.descendants((N,j,R,E)=>{if(N.type===U){let $={...N.attrs};if(K($,E))H=H.setNodeMarkup(j,void 0,$)}return!1})}else if(z.type===U&&B?.type===q){let O={...z.attrs},N=!1;if(O.listType!=="ordered")O.listType="ordered",N=!0;if(B?.maybeChild(0))N=K(O,V);if(N)H=H.setNodeMarkup(F,void 0,O),W=!0}}),W?H.setMeta("addToHistory",!1):null};return new y0({key:new k0("MILKDOWN_KEEP_LIST_ORDER"),appendTransaction:Q})});y(Sz,{displayName:"Prose<syncListOrderPlugin>",group:"Prose"});var HR=[bz,lX,Cz,$z,hX,fX,uX,mX,pX,m9,yz,Sz].flat(),wz=[rP,aP,nP,XR,YR,HR].flat();var dX,cX;if(typeof WeakMap<"u"){let Z=new WeakMap;dX=(Q)=>Z.get(Q),cX=(Q,J)=>{return Z.set(Q,J),J}}else{let Z=[],Q=10,J=0;dX=(X)=>{for(let Y=0;Y<Z.length;Y+=2)if(Z[Y]==X)return Z[Y+1]},cX=(X,Y)=>{if(J==10)J=0;return Z[J++]=X,Z[J++]=Y}}var N0=class{constructor(Z,Q,J,X){this.width=Z,this.height=Q,this.map=J,this.problems=X}findCell(Z){for(let Q=0;Q<this.map.length;Q++){let J=this.map[Q];if(J!=Z)continue;let X=Q%this.width,Y=Q/this.width|0,q=X+1,G=Y+1;for(let U=1;q<this.width&&this.map[Q+U]==J;U++)q++;for(let U=1;G<this.height&&this.map[Q+this.width*U]==J;U++)G++;return{left:X,top:Y,right:q,bottom:G}}throw RangeError(`No cell with offset ${Z} found`)}colCount(Z){for(let Q=0;Q<this.map.length;Q++)if(this.map[Q]==Z)return Q%this.width;throw RangeError(`No cell with offset ${Z} found`)}nextCell(Z,Q,J){let{left:X,right:Y,top:q,bottom:G}=this.findCell(Z);if(Q=="horiz"){if(J<0?X==0:Y==this.width)return null;return this.map[q*this.width+(J<0?X-1:Y)]}else{if(J<0?q==0:G==this.height)return null;return this.map[X+this.width*(J<0?q-1:G)]}}rectBetween(Z,Q){let{left:J,right:X,top:Y,bottom:q}=this.findCell(Z),{left:G,right:U,top:K,bottom:H}=this.findCell(Q);return{left:Math.min(J,G),top:Math.min(Y,K),right:Math.max(X,U),bottom:Math.max(q,H)}}cellsInRect(Z){let Q=[],J={};for(let X=Z.top;X<Z.bottom;X++)for(let Y=Z.left;Y<Z.right;Y++){let q=X*this.width+Y,G=this.map[q];if(J[G])continue;if(J[G]=!0,Y==Z.left&&Y&&this.map[q-1]==G||X==Z.top&&X&&this.map[q-this.width]==G)continue;Q.push(G)}return Q}positionAt(Z,Q,J){for(let X=0,Y=0;;X++){let q=Y+J.child(X).nodeSize;if(X==Z){let G=Q+Z*this.width,U=(Z+1)*this.width;while(G<U&&this.map[G]<Y)G++;return G==U?q-1:this.map[G]}Y=q}}static get(Z){return dX(Z)||cX(Z,WR(Z))}};function WR(Z){if(Z.type.spec.tableRole!="table")throw RangeError("Not a table node: "+Z.type.name);let Q=zR(Z),J=Z.childCount,X=[],Y=0,q=null,G=[];for(let H=0,W=Q*J;H<W;H++)X[H]=0;for(let H=0,W=0;H<J;H++){let z=Z.child(H);W++;for(let V=0;;V++){while(Y<X.length&&X[Y]!=0)Y++;if(V==z.childCount)break;let O=z.child(V),{colspan:N,rowspan:j,colwidth:R}=O.attrs;for(let E=0;E<j;E++){if(E+H>=J){(q||(q=[])).push({type:"overlong_rowspan",pos:W,n:j-E});break}let $=Y+E*Q;for(let w=0;w<N;w++){if(X[$+w]==0)X[$+w]=W;else(q||(q=[])).push({type:"collision",row:H,pos:W,n:N-w});let I=R&&R[w];if(I){let g=($+w)%Q*2,S=G[g];if(S==null||S!=I&&G[g+1]==1)G[g]=I,G[g+1]=1;else if(S==I)G[g+1]++}}}Y+=N,W+=O.nodeSize}let F=(H+1)*Q,B=0;while(Y<F)if(X[Y++]==0)B++;if(B)(q||(q=[])).push({type:"missing",row:H,n:B});W++}if(Q===0||J===0)(q||(q=[])).push({type:"zero_sized"});let U=new N0(Q,J,X,q),K=!1;for(let H=0;!K&&H<G.length;H+=2)if(G[H]!=null&&G[H+1]<J)K=!0;if(K)FR(U,G,Z);return U}function zR(Z){let Q=-1,J=!1;for(let X=0;X<Z.childCount;X++){let Y=Z.child(X),q=0;if(J)for(let G=0;G<X;G++){let U=Z.child(G);for(let K=0;K<U.childCount;K++){let H=U.child(K);if(G+H.attrs.rowspan>X)q+=H.attrs.colspan}}for(let G=0;G<Y.childCount;G++){let U=Y.child(G);if(q+=U.attrs.colspan,U.attrs.rowspan>1)J=!0}if(Q==-1)Q=q;else if(Q!=q)Q=Math.max(Q,q)}return Q}function FR(Z,Q,J){if(!Z.problems)Z.problems=[];let X={};for(let Y=0;Y<Z.map.length;Y++){let q=Z.map[Y];if(X[q])continue;X[q]=!0;let G=J.nodeAt(q);if(!G)throw RangeError(`No cell with offset ${q} found`);let U=null,K=G.attrs;for(let H=0;H<K.colspan;H++){let W=Q[(Y+H)%Z.width*2];if(W!=null&&(!K.colwidth||K.colwidth[H]!=W))(U||(U=BR(K)))[H]=W}if(U)Z.problems.unshift({type:"colwidth mismatch",pos:q,colwidth:U})}}function BR(Z){if(Z.colwidth)return Z.colwidth.slice();let Q=[];for(let J=0;J<Z.colspan;J++)Q.push(0);return Q}function xz(Z,Q){if(typeof Z==="string")return{};let J=Z.getAttribute("data-colwidth"),X=J&&/^\d+(,\d+)*$/.test(J)?J.split(",").map((G)=>Number(G)):null,Y=Number(Z.getAttribute("colspan")||1),q={colspan:Y,rowspan:Number(Z.getAttribute("rowspan")||1),colwidth:X&&X.length==Y?X:null};for(let G in Q){let U=Q[G].getFromDOM,K=U&&U(Z);if(K!=null)q[G]=K}return q}function kz(Z,Q){let J={};if(Z.attrs.colspan!=1)J.colspan=Z.attrs.colspan;if(Z.attrs.rowspan!=1)J.rowspan=Z.attrs.rowspan;if(Z.attrs.colwidth)J["data-colwidth"]=Z.attrs.colwidth.join(",");for(let X in Q){let Y=Q[X].setDOMAttr;if(Y)Y(Z.attrs[X],J)}return J}function VR(Z){if(Z===null)return;if(!Array.isArray(Z))throw TypeError("colwidth must be null or an array");for(let Q of Z)if(typeof Q!=="number")throw TypeError("colwidth must be null or an array of numbers")}function rz(Z){let Q=Z.cellAttributes||{},J={colspan:{default:1,validate:"number"},rowspan:{default:1,validate:"number"},colwidth:{default:null,validate:VR}};for(let X in Q)J[X]={default:Q[X].default,validate:Q[X].validate};return{table:{content:"table_row+",tableRole:"table",isolating:!0,group:Z.tableGroup,parseDOM:[{tag:"table"}],toDOM(){return["table",["tbody",0]]}},table_row:{content:"(table_cell | table_header)*",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM(){return["tr",0]}},table_cell:{content:Z.cellContent,attrs:J,tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:(X)=>xz(X,Q)}],toDOM(X){return["td",kz(X,Q),0]}},table_header:{content:Z.cellContent,attrs:J,tableRole:"header_cell",isolating:!0,parseDOM:[{tag:"th",getAttrs:(X)=>xz(X,Q)}],toDOM(X){return["th",kz(X,Q),0]}}}}function p1(Z){let Q=Z.cached.tableNodeTypes;if(!Q){Q=Z.cached.tableNodeTypes={};for(let J in Z.nodes){let X=Z.nodes[J],Y=X.spec.tableRole;if(Y)Q[Y]=X}}return Q}var z4=new k0("selectingCells");function V2(Z){for(let Q=Z.depth-1;Q>0;Q--)if(Z.node(Q).type.spec.tableRole=="row")return Z.node(0).resolve(Z.before(Q+1));return null}function w1(Z){let Q=Z.selection.$head;for(let J=Q.depth;J>0;J--)if(Q.node(J).type.spec.tableRole=="row")return!0;return!1}function r9(Z){let Q=Z.selection;if("$anchorCell"in Q&&Q.$anchorCell)return Q.$anchorCell.pos>Q.$headCell.pos?Q.$anchorCell:Q.$headCell;else if("node"in Q&&Q.node&&Q.node.type.spec.tableRole=="cell")return Q.$anchor;let J=V2(Q.$head)||LR(Q.$head);if(J)return J;throw RangeError(`No cell found around position ${Q.head}`)}function LR(Z){for(let{nodeAfter:Q,pos:J}=Z;Q;Q=Q.firstChild,J++){let X=Q.type.spec.tableRole;if(X=="cell"||X=="header_cell")return Z.doc.resolve(J)}for(let{nodeBefore:Q,pos:J}=Z;Q;Q=Q.lastChild,J--){let X=Q.type.spec.tableRole;if(X=="cell"||X=="header_cell")return Z.doc.resolve(J-Q.nodeSize)}}function rX(Z){return Z.parent.type.spec.tableRole=="row"&&!!Z.nodeAfter}function _R(Z){return Z.node(0).resolve(Z.pos+Z.nodeAfter.nodeSize)}function sX(Z,Q){return Z.depth==Q.depth&&Z.pos>=Q.start(-1)&&Z.pos<=Q.end(-1)}function az(Z,Q,J){let X=Z.node(-1),Y=N0.get(X),q=Z.start(-1),G=Y.nextCell(Z.pos-q,Q,J);return G==null?null:Z.node(0).resolve(q+G)}function q6(Z,Q,J=1){let X={...Z,colspan:Z.colspan-J};if(X.colwidth){if(X.colwidth=X.colwidth.slice(),X.colwidth.splice(Q,J),!X.colwidth.some((Y)=>Y>0))X.colwidth=null}return X}function OR(Z,Q,J=1){let X={...Z,colspan:Z.colspan+J};if(X.colwidth){X.colwidth=X.colwidth.slice();for(let Y=0;Y<J;Y++)X.colwidth.splice(Q,0,0)}return X}function NR(Z,Q,J){let X=p1(Q.type.schema).header_cell;for(let Y=0;Y<Z.height;Y++)if(Q.nodeAt(Z.map[J+Y*Z.width]).type!=X)return!1;return!0}var D0=class Z extends n{constructor(Q,J=Q){let X=Q.node(-1),Y=N0.get(X),q=Q.start(-1),G=Y.rectBetween(Q.pos-q,J.pos-q),U=Q.node(0),K=Y.cellsInRect(G).filter((W)=>W!=J.pos-q);K.unshift(J.pos-q);let H=K.map((W)=>{let z=X.nodeAt(W);if(!z)throw RangeError(`No cell with offset ${W} found`);let F=q+W+1;return new d4(U.resolve(F),U.resolve(F+z.content.size))});super(H[0].$from,H[0].$to,H);this.$anchorCell=Q,this.$headCell=J}map(Q,J){let X=Q.resolve(J.map(this.$anchorCell.pos)),Y=Q.resolve(J.map(this.$headCell.pos));if(rX(X)&&rX(Y)&&sX(X,Y)){let q=this.$anchorCell.node(-1)!=X.node(-1);if(q&&this.isRowSelection())return Z.rowSelection(X,Y);else if(q&&this.isColSelection())return Z.colSelection(X,Y);else return new Z(X,Y)}return Z0.between(X,Y)}content(){let Q=this.$anchorCell.node(-1),J=N0.get(Q),X=this.$anchorCell.start(-1),Y=J.rectBetween(this.$anchorCell.pos-X,this.$headCell.pos-X),q={},G=[];for(let K=Y.top;K<Y.bottom;K++){let H=[];for(let W=K*J.width+Y.left,z=Y.left;z<Y.right;z++,W++){let F=J.map[W];if(q[F])continue;q[F]=!0;let B=J.findCell(F),V=Q.nodeAt(F);if(!V)throw RangeError(`No cell with offset ${F} found`);let O=Y.left-B.left,N=B.right-Y.right;if(O>0||N>0){let j=V.attrs;if(O>0)j=q6(j,0,O);if(N>0)j=q6(j,j.colspan-N,N);if(B.left<Y.left){if(V=V.type.createAndFill(j),!V)throw RangeError(`Could not create cell with attrs ${JSON.stringify(j)}`)}else V=V.type.create(j,V.content)}if(B.top<Y.top||B.bottom>Y.bottom){let j={...V.attrs,rowspan:Math.min(B.bottom,Y.bottom)-Math.max(B.top,Y.top)};if(B.top<Y.top)V=V.type.createAndFill(j);else V=V.type.create(j,V.content)}H.push(V)}G.push(Q.child(K).copy(x.from(H)))}let U=this.isColSelection()&&this.isRowSelection()?Q:G;return new h(x.from(U),1,1)}replace(Q,J=h.empty){let X=Q.steps.length,Y=this.ranges;for(let G=0;G<Y.length;G++){let{$from:U,$to:K}=Y[G],H=Q.mapping.slice(X);Q.replace(H.map(U.pos),H.map(K.pos),G?h.empty:J)}let q=n.findFrom(Q.doc.resolve(Q.mapping.slice(X).map(this.to)),-1);if(q)Q.setSelection(q)}replaceWith(Q,J){this.replace(Q,new h(x.from(J),0,0))}forEachCell(Q){let J=this.$anchorCell.node(-1),X=N0.get(J),Y=this.$anchorCell.start(-1),q=X.cellsInRect(X.rectBetween(this.$anchorCell.pos-Y,this.$headCell.pos-Y));for(let G=0;G<q.length;G++)Q(J.nodeAt(q[G]),Y+q[G])}isColSelection(){let Q=this.$anchorCell.index(-1),J=this.$headCell.index(-1);if(Math.min(Q,J)>0)return!1;let X=Q+this.$anchorCell.nodeAfter.attrs.rowspan,Y=J+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(X,Y)==this.$headCell.node(-1).childCount}static colSelection(Q,J=Q){let X=Q.node(-1),Y=N0.get(X),q=Q.start(-1),G=Y.findCell(Q.pos-q),U=Y.findCell(J.pos-q),K=Q.node(0);if(G.top<=U.top){if(G.top>0)Q=K.resolve(q+Y.map[G.left]);if(U.bottom<Y.height)J=K.resolve(q+Y.map[Y.width*(Y.height-1)+U.right-1])}else{if(U.top>0)J=K.resolve(q+Y.map[U.left]);if(G.bottom<Y.height)Q=K.resolve(q+Y.map[Y.width*(Y.height-1)+G.right-1])}return new Z(Q,J)}isRowSelection(){let Q=this.$anchorCell.node(-1),J=N0.get(Q),X=this.$anchorCell.start(-1),Y=J.colCount(this.$anchorCell.pos-X),q=J.colCount(this.$headCell.pos-X);if(Math.min(Y,q)>0)return!1;let G=Y+this.$anchorCell.nodeAfter.attrs.colspan,U=q+this.$headCell.nodeAfter.attrs.colspan;return Math.max(G,U)==J.width}eq(Q){return Q instanceof Z&&Q.$anchorCell.pos==this.$anchorCell.pos&&Q.$headCell.pos==this.$headCell.pos}static rowSelection(Q,J=Q){let X=Q.node(-1),Y=N0.get(X),q=Q.start(-1),G=Y.findCell(Q.pos-q),U=Y.findCell(J.pos-q),K=Q.node(0);if(G.left<=U.left){if(G.left>0)Q=K.resolve(q+Y.map[G.top*Y.width]);if(U.right<Y.width)J=K.resolve(q+Y.map[Y.width*(U.top+1)-1])}else{if(U.left>0)J=K.resolve(q+Y.map[U.top*Y.width]);if(G.right<Y.width)Q=K.resolve(q+Y.map[Y.width*(G.top+1)-1])}return new Z(Q,J)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(Q,J){return new Z(Q.resolve(J.anchor),Q.resolve(J.head))}static create(Q,J,X=J){return new Z(Q.resolve(J),Q.resolve(X))}getBookmark(){return new jR(this.$anchorCell.pos,this.$headCell.pos)}};D0.prototype.visible=!1;n.jsonID("cell",D0);var jR=class Z{constructor(Q,J){this.anchor=Q,this.head=J}map(Q){return new Z(Q.map(this.anchor),Q.map(this.head))}resolve(Q){let J=Q.resolve(this.anchor),X=Q.resolve(this.head);if(J.parent.type.spec.tableRole=="row"&&X.parent.type.spec.tableRole=="row"&&J.index()<J.parent.childCount&&X.index()<X.parent.childCount&&sX(J,X))return new D0(J,X);else return n.near(X,1)}};function AR(Z){if(!(Z.selection instanceof D0))return null;let Q=[];return Z.selection.forEachCell((J,X)=>{Q.push(i0.node(X,X+J.nodeSize,{class:"selectedCell"}))}),M0.create(Z.doc,Q)}function PR({$from:Z,$to:Q}){if(Z.pos==Q.pos||Z.pos<Q.pos-6)return!1;let J=Z.pos,X=Q.pos,Y=Z.depth;for(;Y>=0;Y--,J++)if(Z.after(Y+1)<Z.end(Y))break;for(let q=Q.depth;q>=0;q--,X--)if(Q.before(q+1)>Q.start(q))break;return J==X&&/row|table/.test(Z.node(Y).type.spec.tableRole)}function RR({$from:Z,$to:Q}){let J,X;for(let Y=Z.depth;Y>0;Y--){let q=Z.node(Y);if(q.type.spec.tableRole==="cell"||q.type.spec.tableRole==="header_cell"){J=q;break}}for(let Y=Q.depth;Y>0;Y--){let q=Q.node(Y);if(q.type.spec.tableRole==="cell"||q.type.spec.tableRole==="header_cell"){X=q;break}}return J!==X&&Q.parentOffset===0}function MR(Z,Q,J){let X=(Q||Z).selection,Y=(Q||Z).doc,q,G;if(X instanceof s&&(G=X.node.type.spec.tableRole)){if(G=="cell"||G=="header_cell")q=D0.create(Y,X.from);else if(G=="row"){let U=Y.resolve(X.from+1);q=D0.rowSelection(U,U)}else if(!J){let U=N0.get(X.node),K=X.from+1,H=K+U.map[U.width*U.height-1];q=D0.create(Y,K+1,H)}}else if(X instanceof Z0&&PR(X))q=Z0.create(Y,X.from);else if(X instanceof Z0&&RR(X))q=Z0.create(Y,X.$from.start(),X.$from.end());if(q)(Q||(Q=Z.tr)).setSelection(q);return Q}var DR=new k0("fix-tables");function nz(Z,Q,J,X){let Y=Z.childCount,q=Q.childCount;Z:for(let G=0,U=0;G<q;G++){let K=Q.child(G);for(let H=U,W=Math.min(Y,G+3);H<W;H++)if(Z.child(H)==K){U=H+1,J+=K.nodeSize;continue Z}if(X(K,J),U<Y&&Z.child(U).sameMarkup(K))nz(Z.child(U),K,J+1,X);else K.nodesBetween(0,K.content.size,X,J+1);J+=K.nodeSize}}function IR(Z,Q){let J,X=(Y,q)=>{if(Y.type.spec.tableRole=="table")J=ER(Z,Y,q,J)};if(!Q)Z.doc.descendants(X);else if(Q.doc!=Z.doc)nz(Q.doc,Z.doc,0,X);return J}function ER(Z,Q,J,X){let Y=N0.get(Q);if(!Y.problems)return X;if(!X)X=Z.tr;let q=[];for(let K=0;K<Y.height;K++)q.push(0);for(let K=0;K<Y.problems.length;K++){let H=Y.problems[K];if(H.type=="collision"){let W=Q.nodeAt(H.pos);if(!W)continue;let z=W.attrs;for(let F=0;F<z.rowspan;F++)q[H.row+F]+=H.n;X.setNodeMarkup(X.mapping.map(J+1+H.pos),null,q6(z,z.colspan-H.n,H.n))}else if(H.type=="missing")q[H.row]+=H.n;else if(H.type=="overlong_rowspan"){let W=Q.nodeAt(H.pos);if(!W)continue;X.setNodeMarkup(X.mapping.map(J+1+H.pos),null,{...W.attrs,rowspan:W.attrs.rowspan-H.n})}else if(H.type=="colwidth mismatch"){let W=Q.nodeAt(H.pos);if(!W)continue;X.setNodeMarkup(X.mapping.map(J+1+H.pos),null,{...W.attrs,colwidth:H.colwidth})}else if(H.type=="zero_sized"){let W=X.mapping.map(J);X.delete(W,W+Q.nodeSize)}}let G,U;for(let K=0;K<q.length;K++)if(q[K]){if(G==null)G=K;U=K}for(let K=0,H=J+1;K<Y.height;K++){let W=Q.child(K),z=H+W.nodeSize,F=q[K];if(F>0){let B="cell";if(W.firstChild)B=W.firstChild.type.spec.tableRole;let V=[];for(let N=0;N<F;N++){let j=p1(Z.schema)[B].createAndFill();if(j)V.push(j)}let O=(K==0||G==K-1)&&U==K?H+1:z-1;X.insert(X.mapping.map(O),V)}H=z}return X.setMeta(DR,{fixTables:!0})}function sz(Z){let Q=N0.get(Z),J=[],X=Q.height,Y=Q.width;for(let q=0;q<X;q++){let G=[];for(let U=0;U<Y;U++){let K=q*Y+U,H=Q.map[K];if(q>0){let W=K-Y;if(H===Q.map[W]){G.push(null);continue}}if(U>0){let W=K-1;if(H===Q.map[W]){G.push(null);continue}}G.push(Z.nodeAt(H))}J.push(G)}return J}function oz(Z,Q){let J=[],X=N0.get(Z),Y=X.height,q=X.width;for(let G=0;G<Y;G++){let U=Z.child(G),K=[];for(let W=0;W<q;W++){let z=Q[G][W];if(!z)continue;let F=X.map[G*X.width+W],B=Z.nodeAt(F);if(!B)continue;let V=B.type.createChecked(z.attrs,z.content,z.marks);K.push(V)}let H=U.type.createChecked(U.attrs,K,U.marks);J.push(H)}return Z.type.createChecked(Z.attrs,J,Z.marks)}function tz(Z,Q,J,X){let Y=Q[0]>J[0]?-1:1,q=Z.splice(Q[0],Q.length),G=q.length%2===0?1:0,U;if(X===-1&&Y===1)U=J[0]-1;else if(X===1&&Y===-1)U=J[J.length-1]-G+1;else U=Y===-1?J[0]:J[J.length-1]-G;return Z.splice(U,0,...q),Z}function L2(Z){return TR((Q)=>Q.type.spec.tableRole==="table",Z)}function TR(Z,Q){for(let J=Q.depth;J>=0;J-=1){let X=Q.node(J);if(Z(X))return{node:X,pos:J===0?0:Q.before(J),start:Q.start(J),depth:J}}return null}function F2(Z,Q){let J=L2(Q.$from);if(!J)return;let X=N0.get(J.node);if(Z<0||Z>X.width-1)return;return X.cellsInRect({left:Z,right:Z+1,top:0,bottom:X.height}).map((Y)=>{let q=J.node.nodeAt(Y),G=Y+J.start;return{pos:G,start:G+1,node:q,depth:J.depth+2}})}function B2(Z,Q){let J=L2(Q.$from);if(!J)return;let X=N0.get(J.node);if(Z<0||Z>X.height-1)return;return X.cellsInRect({left:0,right:X.width,top:Z,bottom:Z+1}).map((Y)=>{let q=J.node.nodeAt(Y),G=Y+J.start;return{pos:G,start:G+1,node:q,depth:J.depth+2}})}function gz(Z,Q,J=Q){let X=Q,Y=J;for(let W=Q;W>=0;W--){let z=F2(W,Z.selection);if(z)z.forEach((F)=>{let B=F.node.attrs.colspan+W-1;if(B>=X)X=W;if(B>Y)Y=B})}for(let W=Q;W<=Y;W++){let z=F2(W,Z.selection);if(z)z.forEach((F)=>{let B=F.node.attrs.colspan+W-1;if(F.node.attrs.colspan>1&&B>Y)Y=B})}let q=[];for(let W=X;W<=Y;W++){let z=F2(W,Z.selection);if(z&&z.length>0)q.push(W)}X=q[0],Y=q[q.length-1];let G=F2(X,Z.selection),U=B2(0,Z.selection);if(!G||!U)return;let K=Z.doc.resolve(G[G.length-1].pos),H;for(let W=Y;W>=X;W--){let z=F2(W,Z.selection);if(z&&z.length>0){for(let F=U.length-1;F>=0;F--)if(U[F].pos===z[0].pos){H=z[0];break}if(H)break}}if(!H)return;return{$anchor:K,$head:Z.doc.resolve(H.pos),indexes:q}}function vz(Z,Q,J=Q){let X=Q,Y=J;for(let W=Q;W>=0;W--){let z=B2(W,Z.selection);if(z)z.forEach((F)=>{let B=F.node.attrs.rowspan+W-1;if(B>=X)X=W;if(B>Y)Y=B})}for(let W=Q;W<=Y;W++){let z=B2(W,Z.selection);if(z)z.forEach((F)=>{let B=F.node.attrs.rowspan+W-1;if(F.node.attrs.rowspan>1&&B>Y)Y=B})}let q=[];for(let W=X;W<=Y;W++){let z=B2(W,Z.selection);if(z&&z.length>0)q.push(W)}X=q[0],Y=q[q.length-1];let G=B2(X,Z.selection),U=F2(0,Z.selection);if(!G||!U)return;let K=Z.doc.resolve(G[G.length-1].pos),H;for(let W=Y;W>=X;W--){let z=B2(W,Z.selection);if(z&&z.length>0){for(let F=U.length-1;F>=0;F--)if(U[F].pos===z[0].pos){H=z[0];break}if(H)break}}if(!H)return;return{$anchor:K,$head:Z.doc.resolve(H.pos),indexes:q}}function hz(Z){return Z[0].map((Q,J)=>{return Z.map((X)=>X[J])})}function $R(Z){var Q,J;let{tr:X,originIndex:Y,targetIndex:q,select:G,pos:U}=Z,K=L2(X.doc.resolve(U));if(!K)return!1;let H=(Q=gz(X,Y))===null||Q===void 0?void 0:Q.indexes,W=(J=gz(X,q))===null||J===void 0?void 0:J.indexes;if(!H||!W)return!1;if(H.includes(q))return!1;let z=bR(K.node,H,W,0);if(X.replaceWith(K.pos,K.pos+K.node.nodeSize,z),!G)return!0;let F=N0.get(z),B=K.start,V=q,O=F.positionAt(F.height-1,V,z),N=X.doc.resolve(B+O),j=F.positionAt(0,V,z),R=X.doc.resolve(B+j);return X.setSelection(D0.colSelection(N,R)),!0}function bR(Z,Q,J,X){let Y=hz(sz(Z));return Y=tz(Y,Q,J,X),Y=hz(Y),oz(Z,Y)}function CR(Z){var Q,J;let{tr:X,originIndex:Y,targetIndex:q,select:G,pos:U}=Z,K=L2(X.doc.resolve(U));if(!K)return!1;let H=(Q=vz(X,Y))===null||Q===void 0?void 0:Q.indexes,W=(J=vz(X,q))===null||J===void 0?void 0:J.indexes;if(!H||!W)return!1;if(H.includes(q))return!1;let z=yR(K.node,H,W,0);if(X.replaceWith(K.pos,K.pos+K.node.nodeSize,z),!G)return!0;let F=N0.get(z),B=K.start,V=q,O=F.positionAt(V,F.width-1,z),N=X.doc.resolve(B+O),j=F.positionAt(V,0,z),R=X.doc.resolve(B+j);return X.setSelection(D0.rowSelection(N,R)),!0}function yR(Z,Q,J,X){let Y=sz(Z);return Y=tz(Y,Q,J,X),oz(Z,Y)}function v5(Z){let Q=Z.selection,J=r9(Z),X=J.node(-1),Y=J.start(-1),q=N0.get(X);return{...Q instanceof D0?q.rectBetween(Q.$anchorCell.pos-Y,Q.$headCell.pos-Y):q.findCell(J.pos-Y),tableStart:Y,map:q,table:X}}function ez(Z,{map:Q,tableStart:J,table:X},Y){let q=Y>0?-1:0;if(NR(Q,X,Y+q))q=Y==0||Y==Q.width?null:0;for(let G=0;G<Q.height;G++){let U=G*Q.width+Y;if(Y>0&&Y<Q.width&&Q.map[U-1]==Q.map[U]){let K=Q.map[U],H=X.nodeAt(K);Z.setNodeMarkup(Z.mapping.map(J+K),null,OR(H.attrs,Y-Q.colCount(K))),G+=H.attrs.rowspan-1}else{let K=q==null?p1(X.type.schema).cell:X.nodeAt(Q.map[U+q]).type,H=Q.positionAt(G,Y,X);Z.insert(Z.mapping.map(J+H),K.createAndFill())}}return Z}function ZF(Z,Q){if(!w1(Z))return!1;if(Q){let J=v5(Z);Q(ez(Z.tr,J,J.left))}return!0}function QF(Z,Q){if(!w1(Z))return!1;if(Q){let J=v5(Z);Q(ez(Z.tr,J,J.right))}return!0}function SR(Z,{map:Q,table:J,tableStart:X},Y){let q=Z.mapping.maps.length;for(let G=0;G<Q.height;){let U=G*Q.width+Y,K=Q.map[U],H=J.nodeAt(K),W=H.attrs;if(Y>0&&Q.map[U-1]==K||Y<Q.width-1&&Q.map[U+1]==K)Z.setNodeMarkup(Z.mapping.slice(q).map(X+K),null,q6(W,Y-Q.colCount(K)));else{let z=Z.mapping.slice(q).map(X+K);Z.delete(z,z+H.nodeSize)}G+=W.rowspan}}function JF(Z,Q){if(!w1(Z))return!1;if(Q){let J=v5(Z),X=Z.tr;if(J.left==0&&J.right==J.map.width)return!1;for(let Y=J.right-1;;Y--){if(SR(X,J,Y),Y==J.left)break;let q=J.tableStart?X.doc.nodeAt(J.tableStart-1):X.doc;if(!q)throw RangeError("No table found");J.table=q,J.map=N0.get(q)}Q(X)}return!0}function wR(Z,{map:Q,table:J,tableStart:X},Y){let q=0;for(let H=0;H<Y;H++)q+=J.child(H).nodeSize;let G=q+J.child(Y).nodeSize,U=Z.mapping.maps.length;Z.delete(q+X,G+X);let K=new Set;for(let H=0,W=Y*Q.width;H<Q.width;H++,W++){let z=Q.map[W];if(K.has(z))continue;if(K.add(z),Y>0&&z==Q.map[W-Q.width]){let F=J.nodeAt(z).attrs;Z.setNodeMarkup(Z.mapping.slice(U).map(z+X),null,{...F,rowspan:F.rowspan-1}),H+=F.colspan-1}else if(Y<Q.height&&z==Q.map[W+Q.width]){let F=J.nodeAt(z),B=F.attrs,V=F.type.create({...B,rowspan:F.attrs.rowspan-1},F.content),O=Q.positionAt(Y+1,H,J);Z.insert(Z.mapping.slice(U).map(X+O),V),H+=B.colspan-1}}}function XF(Z,Q){if(!w1(Z))return!1;if(Q){let J=v5(Z),X=Z.tr;if(J.top==0&&J.bottom==J.map.height)return!1;for(let Y=J.bottom-1;;Y--){if(wR(X,J,Y),Y==J.top)break;let q=J.tableStart?X.doc.nodeAt(J.tableStart-1):X.doc;if(!q)throw RangeError("No table found");J.table=q,J.map=N0.get(J.table)}Q(X)}return!0}function YF(Z,Q){return function(J,X){if(!w1(J))return!1;let Y=r9(J);if(Y.nodeAfter.attrs[Z]===Q)return!1;if(X){let q=J.tr;if(J.selection instanceof D0)J.selection.forEachCell((G,U)=>{if(G.attrs[Z]!==Q)q.setNodeMarkup(U,null,{...G.attrs,[Z]:Q})});else q.setNodeMarkup(Y.pos,null,{...Y.nodeAfter.attrs,[Z]:Q});X(q)}return!0}}function xR(Z){return function(Q,J){if(!w1(Q))return!1;if(J){let X=p1(Q.schema),Y=v5(Q),q=Q.tr,G=Y.map.cellsInRect(Z=="column"?{left:Y.left,top:0,right:Y.right,bottom:Y.map.height}:Z=="row"?{left:0,top:Y.top,right:Y.map.width,bottom:Y.bottom}:Y),U=G.map((K)=>Y.table.nodeAt(K));for(let K=0;K<G.length;K++)if(U[K].type==X.header_cell)q.setNodeMarkup(Y.tableStart+G[K],X.cell,U[K].attrs);if(q.steps.length===0)for(let K=0;K<G.length;K++)q.setNodeMarkup(Y.tableStart+G[K],X.header_cell,U[K].attrs);J(q)}return!0}}function uz(Z,Q,J){let X=Q.map.cellsInRect({left:0,top:0,right:Z=="row"?Q.map.width:1,bottom:Z=="column"?Q.map.height:1});for(let Y=0;Y<X.length;Y++){let q=Q.table.nodeAt(X[Y]);if(q&&q.type!==J.header_cell)return!1}return!0}function oX(Z,Q){if(Q=Q||{useDeprecatedLogic:!1},Q.useDeprecatedLogic)return xR(Z);return function(J,X){if(!w1(J))return!1;if(X){let Y=p1(J.schema),q=v5(J),G=J.tr,U=uz("row",q,Y),K=uz("column",q,Y),H=(Z==="column"?U:Z==="row"?K:!1)?1:0,W=Z=="column"?{left:0,top:H,right:1,bottom:q.map.height}:Z=="row"?{left:H,top:0,right:q.map.width,bottom:1}:q,z=Z=="column"?K?Y.cell:Y.header_cell:Z=="row"?U?Y.cell:Y.header_cell:Y.cell;q.map.cellsInRect(W).forEach((F)=>{let B=F+q.tableStart,V=G.doc.nodeAt(B);if(V)G.setNodeMarkup(B,z,V.attrs)}),X(G)}return!0}}var Iv=oX("row",{useDeprecatedLogic:!0}),Ev=oX("column",{useDeprecatedLogic:!0}),Tv=oX("cell",{useDeprecatedLogic:!0});function kR(Z,Q){if(Q<0){let J=Z.nodeBefore;if(J)return Z.pos-J.nodeSize;for(let X=Z.index(-1)-1,Y=Z.before();X>=0;X--){let q=Z.node(-1).child(X),G=q.lastChild;if(G)return Y-1-G.nodeSize;Y-=q.nodeSize}}else{if(Z.index()<Z.parent.childCount-1)return Z.pos+Z.nodeAfter.nodeSize;let J=Z.node(-1);for(let X=Z.indexAfter(-1),Y=Z.after();X<J.childCount;X++){let q=J.child(X);if(q.childCount)return Y+1;Y+=q.nodeSize}}return null}function tX(Z){return function(Q,J){if(!w1(Q))return!1;let X=kR(r9(Q),Z);if(X==null)return!1;if(J){let Y=Q.doc.resolve(X);J(Q.tr.setSelection(Z0.between(Y,_R(Y))).scrollIntoView())}return!0}}function qF(Z,Q){let J=Z.selection.$anchor;for(let X=J.depth;X>0;X--)if(J.node(X).type.spec.tableRole=="table"){if(Q)Q(Z.tr.delete(J.before(X),J.after(X)).scrollIntoView());return!0}return!1}function l9(Z,Q){let J=Z.selection;if(!(J instanceof D0))return!1;if(Q){let X=Z.tr,Y=p1(Z.schema).cell.createAndFill().content;if(J.forEachCell((q,G)=>{if(!q.content.eq(Y))X.replace(X.mapping.map(G+1),X.mapping.map(G+q.nodeSize-1),new h(Y,0,0))}),X.docChanged)Q(X)}return!0}function GF(Z){return(Q,J)=>{let{from:X,to:Y,select:q=!0,pos:G=Q.selection.from}=Z,U=Q.tr;if(CR({tr:U,originIndex:X,targetIndex:Y,select:q,pos:G}))return J===null||J===void 0||J(U),!0;return!1}}function UF(Z){return(Q,J)=>{let{from:X,to:Y,select:q=!0,pos:G=Q.selection.from}=Z,U=Q.tr;if($R({tr:U,originIndex:X,targetIndex:Y,select:q,pos:G}))return J===null||J===void 0||J(U),!0;return!1}}function gR(Z){if(Z.size===0)return null;let{content:Q,openStart:J,openEnd:X}=Z;while(Q.childCount==1&&(J>0&&X>0||Q.child(0).type.spec.tableRole=="table"))J--,X--,Q=Q.child(0).content;let Y=Q.child(0),q=Y.type.spec.tableRole,G=Y.type.schema,U=[];if(q=="row")for(let K=0;K<Q.childCount;K++){let H=Q.child(K).content,W=K?0:Math.max(0,J-1),z=K<Q.childCount-1?0:Math.max(0,X-1);if(W||z)H=aX(p1(G).row,new h(H,W,z)).content;U.push(H)}else if(q=="cell"||q=="header_cell")U.push(J||X?aX(p1(G).row,new h(Q,J,X)).content:Q);else return null;return vR(G,U)}function vR(Z,Q){let J=[];for(let Y=0;Y<Q.length;Y++){let q=Q[Y];for(let G=q.childCount-1;G>=0;G--){let{rowspan:U,colspan:K}=q.child(G).attrs;for(let H=Y;H<Y+U;H++)J[H]=(J[H]||0)+K}}let X=0;for(let Y=0;Y<J.length;Y++)X=Math.max(X,J[Y]);for(let Y=0;Y<J.length;Y++){if(Y>=Q.length)Q.push(x.empty);if(J[Y]<X){let q=p1(Z).cell.createAndFill(),G=[];for(let U=J[Y];U<X;U++)G.push(q);Q[Y]=Q[Y].append(x.from(G))}}return{height:Q.length,width:X,rows:Q}}function aX(Z,Q){let J=Z.createAndFill();return new W8(J).replace(0,J.content.size,Q).doc}function hR({width:Z,height:Q,rows:J},X,Y){if(Z!=X){let q=[],G=[];for(let U=0;U<J.length;U++){let K=J[U],H=[];for(let W=q[U]||0,z=0;W<X;z++){let F=K.child(z%K.childCount);if(W+F.attrs.colspan>X)F=F.type.createChecked(q6(F.attrs,F.attrs.colspan,W+F.attrs.colspan-X),F.content);H.push(F),W+=F.attrs.colspan;for(let B=1;B<F.attrs.rowspan;B++)q[U+B]=(q[U+B]||0)+F.attrs.colspan}G.push(x.from(H))}J=G,Z=X}if(Q!=Y){let q=[];for(let G=0,U=0;G<Y;G++,U++){let K=[],H=J[U%Q];for(let W=0;W<H.childCount;W++){let z=H.child(W);if(G+z.attrs.rowspan>Y)z=z.type.create({...z.attrs,rowspan:Math.max(1,Y-z.attrs.rowspan)},z.content);K.push(z)}q.push(x.from(K))}J=q,Q=Y}return{width:Z,height:Q,rows:J}}function uR(Z,Q,J,X,Y,q,G){let U=Z.doc.type.schema,K=p1(U),H,W;if(Y>Q.width)for(let z=0,F=0;z<Q.height;z++){let B=J.child(z);F+=B.nodeSize;let V=[],O;if(B.lastChild==null||B.lastChild.type==K.cell)O=H||(H=K.cell.createAndFill());else O=W||(W=K.header_cell.createAndFill());for(let N=Q.width;N<Y;N++)V.push(O);Z.insert(Z.mapping.slice(G).map(F-1+X),V)}if(q>Q.height){let z=[];for(let V=0,O=(Q.height-1)*Q.width;V<Math.max(Q.width,Y);V++){let N=V>=Q.width?!1:J.nodeAt(Q.map[O+V]).type==K.header_cell;z.push(N?W||(W=K.header_cell.createAndFill()):H||(H=K.cell.createAndFill()))}let F=K.row.create(null,x.from(z)),B=[];for(let V=Q.height;V<q;V++)B.push(F);Z.insert(Z.mapping.slice(G).map(X+J.nodeSize-2),B)}return!!(H||W)}function fz(Z,Q,J,X,Y,q,G,U){if(G==0||G==Q.height)return!1;let K=!1;for(let H=Y;H<q;H++){let W=G*Q.width+H,z=Q.map[W];if(Q.map[W-Q.width]==z){K=!0;let F=J.nodeAt(z),{top:B,left:V}=Q.findCell(z);Z.setNodeMarkup(Z.mapping.slice(U).map(z+X),null,{...F.attrs,rowspan:G-B}),Z.insert(Z.mapping.slice(U).map(Q.positionAt(G,V,J)),F.type.createAndFill({...F.attrs,rowspan:B+F.attrs.rowspan-G})),H+=F.attrs.colspan-1}}return K}function mz(Z,Q,J,X,Y,q,G,U){if(G==0||G==Q.width)return!1;let K=!1;for(let H=Y;H<q;H++){let W=H*Q.width+G,z=Q.map[W];if(Q.map[W-1]==z){K=!0;let F=J.nodeAt(z),B=Q.colCount(z),V=Z.mapping.slice(U).map(z+X);Z.setNodeMarkup(V,null,q6(F.attrs,G-B,F.attrs.colspan-(G-B))),Z.insert(V+F.nodeSize,F.type.createAndFill(q6(F.attrs,0,G-B))),H+=F.attrs.rowspan-1}}return K}function pz(Z,Q,J,X,Y){let q=J?Z.doc.nodeAt(J-1):Z.doc;if(!q)throw Error("No table found");let G=N0.get(q),{top:U,left:K}=X,H=K+Y.width,W=U+Y.height,z=Z.tr,F=0;function B(){if(q=J?z.doc.nodeAt(J-1):z.doc,!q)throw Error("No table found");G=N0.get(q),F=z.mapping.maps.length}if(uR(z,G,q,J,H,W,F))B();if(fz(z,G,q,J,K,H,U,F))B();if(fz(z,G,q,J,K,H,W,F))B();if(mz(z,G,q,J,U,W,K,F))B();if(mz(z,G,q,J,U,W,H,F))B();for(let V=U;V<W;V++){let O=G.positionAt(V,K,q),N=G.positionAt(V,H,q);z.replace(z.mapping.slice(F).map(O+J),z.mapping.slice(F).map(N+J),new h(Y.rows[V-U],0,0))}B(),z.setSelection(new D0(z.doc.resolve(J+G.positionAt(U,K,q)),z.doc.resolve(J+G.positionAt(W-1,H-1,q)))),Q(z)}var fR=WJ({ArrowLeft:i9("horiz",-1),ArrowRight:i9("horiz",1),ArrowUp:i9("vert",-1),ArrowDown:i9("vert",1),"Shift-ArrowLeft":d9("horiz",-1),"Shift-ArrowRight":d9("horiz",1),"Shift-ArrowUp":d9("vert",-1),"Shift-ArrowDown":d9("vert",1),Backspace:l9,"Mod-Backspace":l9,Delete:l9,"Mod-Delete":l9});function c9(Z,Q,J){if(J.eq(Z.selection))return!1;if(Q)Q(Z.tr.setSelection(J).scrollIntoView());return!0}function i9(Z,Q){return(J,X,Y)=>{if(!Y)return!1;let q=J.selection;if(q instanceof D0)return c9(J,X,n.near(q.$headCell,Q));if(Z!="horiz"&&!q.empty)return!1;let G=KF(Y,Z,Q);if(G==null)return!1;if(Z=="horiz")return c9(J,X,n.near(J.doc.resolve(q.head+Q),Q));else{let U=J.doc.resolve(G),K=az(U,Z,Q),H;if(K)H=n.near(K,1);else if(Q<0)H=n.near(J.doc.resolve(U.before(-1)),-1);else H=n.near(J.doc.resolve(U.after(-1)),1);return c9(J,X,H)}}}function d9(Z,Q){return(J,X,Y)=>{if(!Y)return!1;let q=J.selection,G;if(q instanceof D0)G=q;else{let K=KF(Y,Z,Q);if(K==null)return!1;G=new D0(J.doc.resolve(K))}let U=az(G.$headCell,Z,Q);if(!U)return!1;return c9(J,X,new D0(G.$anchorCell,U))}}function mR(Z,Q){let J=Z.state.doc,X=V2(J.resolve(Q));if(!X)return!1;return Z.dispatch(Z.state.tr.setSelection(new D0(X))),!0}function pR(Z,Q,J){if(!w1(Z.state))return!1;let X=gR(J),Y=Z.state.selection;if(Y instanceof D0){if(!X)X={width:1,height:1,rows:[x.from(aX(p1(Z.state.schema).cell,J))]};let q=Y.$anchorCell.node(-1),G=Y.$anchorCell.start(-1),U=N0.get(q).rectBetween(Y.$anchorCell.pos-G,Y.$headCell.pos-G);return X=hR(X,U.right-U.left,U.bottom-U.top),pz(Z.state,Z.dispatch,G,U,X),!0}else if(X){let q=r9(Z.state),G=q.start(-1);return pz(Z.state,Z.dispatch,G,N0.get(q.node(-1)).findCell(q.pos-G),X),!0}else return!1}function lR(Z,Q){var J;if(Q.button!=0)return;if(Q.ctrlKey||Q.metaKey)return;let X=lz(Z,Q.target),Y;if(Q.shiftKey&&Z.state.selection instanceof D0)q(Z.state.selection.$anchorCell,Q),Q.preventDefault();else if(Q.shiftKey&&X&&(Y=V2(Z.state.selection.$anchor))!=null&&((J=iX(Z,Q))===null||J===void 0?void 0:J.pos)!=Y.pos)q(Y,Q),Q.preventDefault();else if(!X)return;function q(K,H){let W=iX(Z,H),z=z4.getState(Z.state)==null;if(!W||!sX(K,W))if(z)W=K;else return;let F=new D0(K,W);if(z||!Z.state.selection.eq(F)){let B=Z.state.tr.setSelection(F);if(z)B.setMeta(z4,K.pos);Z.dispatch(B)}}function G(){if(Z.root.removeEventListener("mouseup",G),Z.root.removeEventListener("dragstart",G),Z.root.removeEventListener("mousemove",U),z4.getState(Z.state)!=null)Z.dispatch(Z.state.tr.setMeta(z4,-1))}function U(K){let H=K,W=z4.getState(Z.state),z;if(W!=null)z=Z.state.doc.resolve(W);else if(lz(Z,H.target)!=X){if(z=iX(Z,Q),!z)return G()}if(z)q(z,H)}Z.root.addEventListener("mouseup",G),Z.root.addEventListener("dragstart",G),Z.root.addEventListener("mousemove",U)}function KF(Z,Q,J){if(!(Z.state.selection instanceof Z0))return null;let{$head:X}=Z.state.selection;for(let Y=X.depth-1;Y>=0;Y--){let q=X.node(Y);if((J<0?X.index(Y):X.indexAfter(Y))!=(J<0?0:q.childCount))return null;if(q.type.spec.tableRole=="cell"||q.type.spec.tableRole=="header_cell"){let G=X.before(Y),U=Q=="vert"?J>0?"down":"up":J>0?"right":"left";return Z.endOfTextblock(U)?G:null}}return null}function lz(Z,Q){for(;Q&&Q!=Z.dom;Q=Q.parentNode)if(Q.nodeName=="TD"||Q.nodeName=="TH")return Q;return null}function iX(Z,Q){let J=Z.posAtCoords({left:Q.clientX,top:Q.clientY});if(!J)return null;let{inside:X,pos:Y}=J;return X>=0&&V2(Z.state.doc.resolve(X))||V2(Z.state.doc.resolve(Y))}var iR=class{constructor(Z,Q){this.node=Z,this.defaultCellMinWidth=Q,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${Q}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),nX(Z,this.colgroup,this.table,Q),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(Z){if(Z.type!=this.node.type)return!1;return this.node=Z,nX(Z,this.colgroup,this.table,this.defaultCellMinWidth),!0}ignoreMutation(Z){return Z.type=="attributes"&&(Z.target==this.table||this.colgroup.contains(Z.target))}};function nX(Z,Q,J,X,Y,q){let G=0,U=!0,K=Q.firstChild,H=Z.firstChild;if(!H)return;for(let z=0,F=0;z<H.childCount;z++){let{colspan:B,colwidth:V}=H.child(z).attrs;for(let O=0;O<B;O++,F++){let N=Y==F?q:V&&V[O],j=N?N+"px":"";if(G+=N||X,!N)U=!1;if(!K){let R=document.createElement("col");R.style.width=j,Q.appendChild(R)}else{if(K.style.width!=j)K.style.width=j;K=K.nextSibling}}}while(K){var W;let z=K.nextSibling;(W=K.parentNode)===null||W===void 0||W.removeChild(K),K=z}if(U)J.style.width=G+"px",J.style.minWidth="";else J.style.width="",J.style.minWidth=G+"px"}var S1=new k0("tableColumnResizing");function HF({handleWidth:Z=5,cellMinWidth:Q=25,defaultCellMinWidth:J=100,View:X=iR,lastColumnResizable:Y=!0}={}){let q=new y0({key:S1,state:{init(G,U){var K;let H=(K=q.spec)===null||K===void 0||(K=K.props)===null||K===void 0?void 0:K.nodeViews,W=p1(U.schema).table.name;if(X&&H)H[W]=(z,F)=>{return new X(z,J,F)};return new dR(-1,!1)},apply(G,U){return U.apply(G)}},props:{attributes:(G)=>{let U=S1.getState(G);return U&&U.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(G,U)=>{cR(G,U,Z,Y)},mouseleave:(G)=>{rR(G)},mousedown:(G,U)=>{aR(G,U,Q,J)}},decorations:(G)=>{let U=S1.getState(G);if(U&&U.activeHandle>-1)return eR(G,U.activeHandle)},nodeViews:{}}});return q}var dR=class Z{constructor(Q,J){this.activeHandle=Q,this.dragging=J}apply(Q){let J=this,X=Q.getMeta(S1);if(X&&X.setHandle!=null)return new Z(X.setHandle,!1);if(X&&X.setDragging!==void 0)return new Z(J.activeHandle,X.setDragging);if(J.activeHandle>-1&&Q.docChanged){let Y=Q.mapping.map(J.activeHandle,-1);if(!rX(Q.doc.resolve(Y)))Y=-1;return new Z(Y,J.dragging)}return J}};function cR(Z,Q,J,X){if(!Z.editable)return;let Y=S1.getState(Z.state);if(!Y)return;if(!Y.dragging){let q=sR(Q.target),G=-1;if(q){let{left:U,right:K}=q.getBoundingClientRect();if(Q.clientX-U<=J)G=iz(Z,Q,"left",J);else if(K-Q.clientX<=J)G=iz(Z,Q,"right",J)}if(G!=Y.activeHandle){if(!X&&G!==-1){let U=Z.state.doc.resolve(G),K=U.node(-1),H=N0.get(K),W=U.start(-1);if(H.colCount(U.pos-W)+U.nodeAfter.attrs.colspan-1==H.width-1)return}WF(Z,G)}}}function rR(Z){if(!Z.editable)return;let Q=S1.getState(Z.state);if(Q&&Q.activeHandle>-1&&!Q.dragging)WF(Z,-1)}function aR(Z,Q,J,X){var Y;if(!Z.editable)return!1;let q=(Y=Z.dom.ownerDocument.defaultView)!==null&&Y!==void 0?Y:window,G=S1.getState(Z.state);if(!G||G.activeHandle==-1||G.dragging)return!1;let U=Z.state.doc.nodeAt(G.activeHandle),K=nR(Z,G.activeHandle,U.attrs);Z.dispatch(Z.state.tr.setMeta(S1,{setDragging:{startX:Q.clientX,startWidth:K}}));function H(z){q.removeEventListener("mouseup",H),q.removeEventListener("mousemove",W);let F=S1.getState(Z.state);if(F===null||F===void 0?void 0:F.dragging)oR(Z,F.activeHandle,dz(F.dragging,z,J)),Z.dispatch(Z.state.tr.setMeta(S1,{setDragging:null}))}function W(z){if(!z.which)return H(z);let F=S1.getState(Z.state);if(!F)return;if(F.dragging){let B=dz(F.dragging,z,J);cz(Z,F.activeHandle,B,X)}}return cz(Z,G.activeHandle,K,X),q.addEventListener("mouseup",H),q.addEventListener("mousemove",W),Q.preventDefault(),!0}function nR(Z,Q,{colspan:J,colwidth:X}){let Y=X&&X[X.length-1];if(Y)return Y;let q=Z.domAtPos(Q),G=q.node.childNodes[q.offset].offsetWidth,U=J;if(X){for(let K=0;K<J;K++)if(X[K])G-=X[K],U--}return G/U}function sR(Z){while(Z&&Z.nodeName!="TD"&&Z.nodeName!="TH")Z=Z.classList&&Z.classList.contains("ProseMirror")?null:Z.parentNode;return Z}function iz(Z,Q,J,X){let Y=J=="right"?-X:X,q=Z.posAtCoords({left:Q.clientX+Y,top:Q.clientY});if(!q)return-1;let{pos:G}=q,U=V2(Z.state.doc.resolve(G));if(!U)return-1;if(J=="right")return U.pos;let K=N0.get(U.node(-1)),H=U.start(-1),W=K.map.indexOf(U.pos-H);return W%K.width==0?-1:H+K.map[W-1]}function dz(Z,Q,J){let X=Q.clientX-Z.startX;return Math.max(J,Z.startWidth+X)}function WF(Z,Q){Z.dispatch(Z.state.tr.setMeta(S1,{setHandle:Q}))}function oR(Z,Q,J){let X=Z.state.doc.resolve(Q),Y=X.node(-1),q=N0.get(Y),G=X.start(-1),U=q.colCount(X.pos-G)+X.nodeAfter.attrs.colspan-1,K=Z.state.tr;for(let H=0;H<q.height;H++){let W=H*q.width+U;if(H&&q.map[W]==q.map[W-q.width])continue;let z=q.map[W],F=Y.nodeAt(z).attrs,B=F.colspan==1?0:U-q.colCount(z);if(F.colwidth&&F.colwidth[B]==J)continue;let V=F.colwidth?F.colwidth.slice():tR(F.colspan);V[B]=J,K.setNodeMarkup(G+z,null,{...F,colwidth:V})}if(K.docChanged)Z.dispatch(K)}function cz(Z,Q,J,X){let Y=Z.state.doc.resolve(Q),q=Y.node(-1),G=Y.start(-1),U=N0.get(q).colCount(Y.pos-G)+Y.nodeAfter.attrs.colspan-1,K=Z.domAtPos(Y.start(-1)).node;while(K&&K.nodeName!="TABLE")K=K.parentNode;if(!K)return;nX(q,K.firstChild,K,X,U,J)}function tR(Z){return Array(Z).fill(0)}function eR(Z,Q){let J=[],X=Z.doc.resolve(Q),Y=X.node(-1);if(!Y)return M0.empty;let q=N0.get(Y),G=X.start(-1),U=q.colCount(X.pos-G)+X.nodeAfter.attrs.colspan-1;for(let H=0;H<q.height;H++){let W=U+H*q.width;if((U==q.width-1||q.map[W]!=q.map[W+1])&&(H==0||q.map[W]!=q.map[W-q.width])){var K;let z=q.map[W],F=G+z+Y.nodeAt(z).nodeSize-1,B=document.createElement("div");if(B.className="column-resize-handle",(K=S1.getState(Z))===null||K===void 0?void 0:K.dragging)J.push(i0.node(G+z,G+z+Y.nodeAt(z).nodeSize,{class:"column-resize-dragging"}));J.push(i0.widget(F,B))}}return M0.create(Z.doc,J)}function zF({allowTableNodeSelection:Z=!1}={}){return new y0({key:z4,state:{init(){return null},apply(Q,J){let X=Q.getMeta(z4);if(X!=null)return X==-1?null:X;if(J==null||!Q.docChanged)return J;let{deleted:Y,pos:q}=Q.mapping.mapResult(J);return Y?null:q}},props:{decorations:AR,handleDOMEvents:{mousedown:lR},createSelectionBetween(Q){return z4.getState(Q.state)!=null?Q.state.selection:null},handleTripleClick:mR,handleKeyDown:fR,handlePaste:pR},appendTransaction(Q,J,X){return MR(X,IR(X,J),Z)}})}var a9=typeof navigator<"u"?navigator:null,ZY=a9&&a9.userAgent||"",ZM=/Edge\/(\d+)/.exec(ZY),QM=/MSIE \d/.exec(ZY),JM=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ZY),XM=!!(QM||JM||ZM),YM=!XM&&!!a9&&/Apple Computer/.test(a9.vendor),FF=new k0("safari-ime-span"),eX=!1,qM={key:FF,props:{decorations:GM,handleDOMEvents:{compositionstart:()=>{eX=!0},compositionend:()=>{eX=!1}}}};function GM(Z){let{$from:Q,$to:J,to:X}=Z.selection;if(eX&&Q.sameParent(J)){let Y=i0.widget(X,UM,{ignoreSelection:!0,key:"safari-ime-span"});return M0.create(Z.doc,[Y])}}function UM(Z){let Q=Z.dom.ownerDocument.createElement("span");return Q.className="ProseMirror-safari-ime-span",Q}var BF=new y0(YM?qM:{key:FF});function QY(Z,Q){let J=String(Z);if(typeof Q!=="string")throw TypeError("Expected character");let X=0,Y=J.indexOf(Q);while(Y!==-1)X++,Y=J.indexOf(Q,Y+Q.length);return X}function JY(Z){if(typeof Z!=="string")throw TypeError("Expected a string");return Z.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function XY(Z,Q,J){let Y=s5((J||{}).ignore||[]),q=KM(Q),G=-1;while(++G<q.length)g4(Z,"text",U);function U(H,W){let z=-1,F;while(++z<W.length){let B=W[z],V=F?F.children:void 0;if(Y(B,V?V.indexOf(B):void 0,F))return;F=B}if(F)return K(H,W)}function K(H,W){let z=W[W.length-1],F=q[G][0],B=q[G][1],V=0,N=z.children.indexOf(H),j=!1,R=[];F.lastIndex=0;let E=F.exec(H.value);while(E){let $=E.index,w={index:E.index,input:E.input,stack:[...W,H]},I=B(...E,w);if(typeof I==="string")I=I.length>0?{type:"text",value:I}:void 0;if(I===!1)F.lastIndex=$+1;else{if(V!==$)R.push({type:"text",value:H.value.slice(V,$)});if(Array.isArray(I))R.push(...I);else if(I)R.push(I);V=$+E[0].length,j=!0}if(!F.global)break;E=F.exec(H.value)}if(j){if(V<H.value.length)R.push({type:"text",value:H.value.slice(V)});z.children.splice(N,1,...R)}else R=[H];return N+R.length}}function KM(Z){let Q=[];if(!Array.isArray(Z))throw TypeError("Expected find and replace tuple or list of tuples");let J=!Z[0]||Array.isArray(Z[0])?Z:[Z],X=-1;while(++X<J.length){let Y=J[X];Q.push([HM(Y[0]),WM(Y[1])])}return Q}function HM(Z){return typeof Z==="string"?new RegExp(JY(Z),"g"):Z}function WM(Z){return typeof Z==="function"?Z:function(){return Z}}var YY="phrasing",qY=["autolink","link","image","label"];function UY(){return{transforms:[_M],enter:{literalAutolink:zM,literalAutolinkEmail:GY,literalAutolinkHttp:GY,literalAutolinkWww:GY},exit:{literalAutolink:LM,literalAutolinkEmail:VM,literalAutolinkHttp:FM,literalAutolinkWww:BM}}}function KY(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:YY,notInConstruct:qY},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:YY,notInConstruct:qY},{character:":",before:"[ps]",after:"\\/",inConstruct:YY,notInConstruct:qY}]}}function zM(Z){this.enter({type:"link",title:null,url:"",children:[]},Z)}function GY(Z){this.config.enter.autolinkProtocol.call(this,Z)}function FM(Z){this.config.exit.autolinkProtocol.call(this,Z)}function BM(Z){this.config.exit.data.call(this,Z);let Q=this.stack[this.stack.length-1];P(Q.type==="link"),Q.url="http://"+this.sliceSerialize(Z)}function VM(Z){this.config.exit.autolinkEmail.call(this,Z)}function LM(Z){this.exit(Z)}function _M(Z){XY(Z,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,OM],[/(?<=^|\s|\p{P}|\p{S})([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/gu,NM]],{ignore:["link","linkReference"]})}function OM(Z,Q,J,X,Y){let q="";if(!VF(Y))return!1;if(/^w/i.test(Q))J=Q+J,Q="",q="http://";if(!jM(J))return!1;let G=AM(J+X);if(!G[0])return!1;let U={type:"link",title:null,url:q+Q+G[0],children:[{type:"text",value:Q+G[0]}]};if(G[1])return[U,{type:"text",value:G[1]}];return U}function NM(Z,Q,J,X){if(!VF(X,!0)||/[-\d_]$/.test(J))return!1;return{type:"link",title:null,url:"mailto:"+Q+"@"+J,children:[{type:"text",value:Q+"@"+J}]}}function jM(Z){let Q=Z.split(".");if(Q.length<2||Q[Q.length-1]&&(/_/.test(Q[Q.length-1])||!/[a-zA-Z\d]/.test(Q[Q.length-1]))||Q[Q.length-2]&&(/_/.test(Q[Q.length-2])||!/[a-zA-Z\d]/.test(Q[Q.length-2])))return!1;return!0}function AM(Z){let Q=/[!"&'),.:;<>?\]}]+$/.exec(Z);if(!Q)return[Z,void 0];Z=Z.slice(0,Q.index);let J=Q[0],X=J.indexOf(")"),Y=QY(Z,"("),q=QY(Z,")");while(X!==-1&&Y>q)Z+=J.slice(0,X+1),J=J.slice(X+1),X=J.indexOf(")"),q++;return[Z,J]}function VF(Z,Q){let J=Z.input.charCodeAt(Z.index-1);return(Z.index===0||Y5(J)||$4(J))&&(!Q||J!==47)}LF.peek=bM;function PM(){this.buffer()}function RM(Z){this.enter({type:"footnoteReference",identifier:"",label:""},Z)}function MM(){this.buffer()}function DM(Z){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},Z)}function IM(Z){let Q=this.resume(),J=this.stack[this.stack.length-1];P(J.type==="footnoteReference"),J.identifier=G1(this.sliceSerialize(Z)).toLowerCase(),J.label=Q}function EM(Z){this.exit(Z)}function TM(Z){let Q=this.resume(),J=this.stack[this.stack.length-1];P(J.type==="footnoteDefinition"),J.identifier=G1(this.sliceSerialize(Z)).toLowerCase(),J.label=Q}function $M(Z){this.exit(Z)}function bM(){return"["}function LF(Z,Q,J,X){let Y=J.createTracker(X),q=Y.move("[^"),G=J.enter("footnoteReference"),U=J.enter("reference");return q+=Y.move(J.safe(J.associationId(Z),{after:"]",before:q})),U(),G(),q+=Y.move("]"),q}function HY(){return{enter:{gfmFootnoteCallString:PM,gfmFootnoteCall:RM,gfmFootnoteDefinitionLabelString:MM,gfmFootnoteDefinition:DM},exit:{gfmFootnoteCallString:IM,gfmFootnoteCall:EM,gfmFootnoteDefinitionLabelString:TM,gfmFootnoteDefinition:$M}}}function WY(Z){let Q=!1;if(Z&&Z.firstLineBlank)Q=!0;return{handlers:{footnoteDefinition:J,footnoteReference:LF},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function J(X,Y,q,G){let U=q.createTracker(G),K=U.move("[^"),H=q.enter("footnoteDefinition"),W=q.enter("label");if(K+=U.move(q.safe(q.associationId(X),{before:K,after:"]"})),W(),K+=U.move("]:"),X.children&&X.children.length>0)U.shift(4),K+=U.move((Q?`
`:" ")+q.indentLines(q.containerFlow(X,U.current()),Q?_F:CM));return H(),K}}function CM(Z,Q,J){return Q===0?Z:_F(Z,Q,J)}function _F(Z,Q,J){return(J?"":"    ")+Z}var yM=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];OF.peek=xM;function zY(){return{canContainEols:["delete"],enter:{strikethrough:SM},exit:{strikethrough:wM}}}function FY(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:yM}],handlers:{delete:OF}}}function SM(Z){this.enter({type:"delete",children:[]},Z)}function wM(Z){this.exit(Z)}function OF(Z,Q,J,X){let Y=J.createTracker(X),q=J.enter("strikethrough"),G=Y.move("~~");return G+=J.containerPhrasing(Z,{...Y.current(),before:G,after:"~"}),G+=Y.move("~~"),q(),G}function xM(){return"~"}function kM(Z){return Z.length}function jF(Z,Q){let J=Q||{},X=(J.align||[]).concat(),Y=J.stringLength||kM,q=[],G=[],U=[],K=[],H=0,W=-1;while(++W<Z.length){let O=[],N=[],j=-1;if(Z[W].length>H)H=Z[W].length;while(++j<Z[W].length){let R=gM(Z[W][j]);if(J.alignDelimiters!==!1){let E=Y(R);if(N[j]=E,K[j]===void 0||E>K[j])K[j]=E}O.push(R)}G[W]=O,U[W]=N}let z=-1;if(typeof X==="object"&&"length"in X)while(++z<H)q[z]=NF(X[z]);else{let O=NF(X);while(++z<H)q[z]=O}z=-1;let F=[],B=[];while(++z<H){let O=q[z],N="",j="";if(O===99)N=":",j=":";else if(O===108)N=":";else if(O===114)j=":";let R=J.alignDelimiters===!1?1:Math.max(1,K[z]-N.length-j.length),E=N+"-".repeat(R)+j;if(J.alignDelimiters!==!1){if(R=N.length+R+j.length,R>K[z])K[z]=R;B[z]=R}F[z]=E}G.splice(1,0,F),U.splice(1,0,B),W=-1;let V=[];while(++W<G.length){let O=G[W],N=U[W];z=-1;let j=[];while(++z<H){let R=O[z]||"",E="",$="";if(J.alignDelimiters!==!1){let w=K[z]-(N[z]||0),I=q[z];if(I===114)E=" ".repeat(w);else if(I===99)if(w%2)E=" ".repeat(w/2+0.5),$=" ".repeat(w/2-0.5);else E=" ".repeat(w/2),$=E;else $=" ".repeat(w)}if(J.delimiterStart!==!1&&!z)j.push("|");if(J.padding!==!1&&!(J.alignDelimiters===!1&&R==="")&&(J.delimiterStart!==!1||z))j.push(" ");if(J.alignDelimiters!==!1)j.push(E);if(j.push(R),J.alignDelimiters!==!1)j.push($);if(J.padding!==!1)j.push(" ");if(J.delimiterEnd!==!1||z!==H-1)j.push("|")}V.push(J.delimiterEnd===!1?j.join("").replace(/ +$/,""):j.join(""))}return V.join(`
`)}function gM(Z){return Z===null||Z===void 0?"":String(Z)}function NF(Z){let Q=typeof Z==="string"?Z.codePointAt(0):0;return Q===67||Q===99?99:Q===76||Q===108?108:Q===82||Q===114?114:0}function VY(){return{enter:{table:vM,tableData:AF,tableHeader:AF,tableRow:uM},exit:{codeText:fM,table:hM,tableData:BY,tableHeader:BY,tableRow:BY}}}function vM(Z){let Q=Z._align;P(Q,"expected `_align` on table"),this.enter({type:"table",align:Q.map(function(J){return J==="none"?null:J}),children:[]},Z),this.data.inTable=!0}function hM(Z){this.exit(Z),this.data.inTable=void 0}function uM(Z){this.enter({type:"tableRow",children:[]},Z)}function BY(Z){this.exit(Z)}function AF(Z){this.enter({type:"tableCell",children:[]},Z)}function fM(Z){let Q=this.resume();if(this.data.inTable)Q=Q.replace(/\\([\\|])/g,mM);let J=this.stack[this.stack.length-1];P(J.type==="inlineCode"),J.value=Q,this.exit(Z)}function mM(Z,Q){return Q==="|"?Q:Z}function LY(Z){let Q=Z||{},J=Q.tableCellPadding,X=Q.tablePipeAlign,Y=Q.stringLength,q=J?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[\t :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:F,table:G,tableCell:K,tableRow:U}};function G(B,V,O,N){return H(W(B,O,N),B.align)}function U(B,V,O,N){let j=z(B,O,N),R=H([j]);return R.slice(0,R.indexOf(`
`))}function K(B,V,O,N){let j=O.enter("tableCell"),R=O.enter("phrasing"),E=O.containerPhrasing(B,{...N,before:q,after:q});return R(),j(),E}function H(B,V){return jF(B,{align:V,alignDelimiters:X,padding:J,stringLength:Y})}function W(B,V,O){let N=B.children,j=-1,R=[],E=V.enter("table");while(++j<N.length)R[j]=z(N[j],V,O);return E(),R}function z(B,V,O){let N=B.children,j=-1,R=[],E=V.enter("tableRow");while(++j<N.length)R[j]=K(N[j],B,V,O);return E(),R}function F(B,V,O){let N=v4.inlineCode(B,V,O);if(O.stack.includes("tableCell"))N=N.replace(/\|/g,"\\$&");return N}}function _Y(){return{exit:{taskListCheckValueChecked:PF,taskListCheckValueUnchecked:PF,paragraph:pM}}}function OY(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:lM}}}function PF(Z){let Q=this.stack[this.stack.length-2];P(Q.type==="listItem"),Q.checked=Z.type==="taskListCheckValueChecked"}function pM(Z){let Q=this.stack[this.stack.length-2];if(Q&&Q.type==="listItem"&&typeof Q.checked==="boolean"){let J=this.stack[this.stack.length-1];P(J.type==="paragraph");let X=J.children[0];if(X&&X.type==="text"){let Y=Q.children,q=-1,G;while(++q<Y.length){let U=Y[q];if(U.type==="paragraph"){G=U;break}}if(G===J){if(X.value=X.value.slice(1),X.value.length===0)J.children.shift();else if(J.position&&X.position&&typeof X.position.start.offset==="number")X.position.start.column++,X.position.start.offset++,J.position.start=Object.assign({},X.position.start)}}}this.exit(Z)}function lM(Z,Q,J,X){let Y=Z.children[0],q=typeof Z.checked==="boolean"&&Y&&Y.type==="paragraph",G="["+(Z.checked?"x":" ")+"] ",U=J.createTracker(X);if(q)U.move(G);let K=v4.listItem(Z,Q,J,{...X,...U.current()});if(q)K=K.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,H);return K;function H(W){return W+G}}function NY(){return[UY(),HY(),zY(),VY(),_Y()]}function jY(Z){return{extensions:[KY(),WY(Z),FY(),LY(Z),OY()]}}var iM={tokenize:nM,partial:!0},RF={tokenize:sM,partial:!0},MF={tokenize:oM,partial:!0},DF={tokenize:tM,partial:!0},dM={tokenize:eM,partial:!0},IF={name:"wwwAutolink",tokenize:rM,previous:TF},EF={name:"protocolAutolink",tokenize:aM,previous:$F},h5={name:"emailAutolink",tokenize:cM,previous:bF},L5={};function PY(){return{text:L5}}var G6=L.digit0;while(G6<L.leftCurlyBrace)if(L5[G6]=h5,G6++,G6===L.colon)G6=L.uppercaseA;else if(G6===L.leftSquareBracket)G6=L.lowercaseA;L5[L.plusSign]=h5;L5[L.dash]=h5;L5[L.dot]=h5;L5[L.underscore]=h5;L5[L.uppercaseH]=[h5,EF];L5[L.lowercaseH]=[h5,EF];L5[L.uppercaseW]=[h5,IF];L5[L.lowercaseW]=[h5,IF];function cM(Z,Q,J){let X=this,Y,q;return G;function G(z){if(!AY(z)||!bF.call(X,X.previous)||RY(X.events))return J(z);return Z.enter("literalAutolink"),Z.enter("literalAutolinkEmail"),U(z)}function U(z){if(AY(z))return Z.consume(z),U;if(z===L.atSign)return Z.consume(z),K;return J(z)}function K(z){if(z===L.dot)return Z.check(dM,W,H)(z);if(z===L.dash||z===L.underscore||a0(z))return q=!0,Z.consume(z),K;return W(z)}function H(z){return Z.consume(z),Y=!0,K}function W(z){if(q&&Y&&r0(X.previous))return Z.exit("literalAutolinkEmail"),Z.exit("literalAutolink"),Q(z);return J(z)}}function rM(Z,Q,J){let X=this;return Y;function Y(G){if(G!==L.uppercaseW&&G!==L.lowercaseW||!TF.call(X,X.previous)||RY(X.events))return J(G);return Z.enter("literalAutolink"),Z.enter("literalAutolinkWww"),Z.check(iM,Z.attempt(RF,Z.attempt(MF,q),J),J)(G)}function q(G){return Z.exit("literalAutolinkWww"),Z.exit("literalAutolink"),Q(G)}}function aM(Z,Q,J){let X=this,Y="",q=!1;return G;function G(z){if((z===L.uppercaseH||z===L.lowercaseH)&&$F.call(X,X.previous)&&!RY(X.events))return Z.enter("literalAutolink"),Z.enter("literalAutolinkHttp"),Y+=String.fromCodePoint(z),Z.consume(z),U;return J(z)}function U(z){if(r0(z)&&Y.length<5)return Y+=String.fromCodePoint(z),Z.consume(z),U;if(z===L.colon){let F=Y.toLowerCase();if(F==="http"||F==="https")return Z.consume(z),K}return J(z)}function K(z){if(z===L.slash){if(Z.consume(z),q)return H;return q=!0,K}return J(z)}function H(z){return z===L.eof||T4(z)||H0(z)||Y5(z)||$4(z)?J(z):Z.attempt(RF,Z.attempt(MF,W),J)(z)}function W(z){return Z.exit("literalAutolinkHttp"),Z.exit("literalAutolink"),Q(z)}}function nM(Z,Q,J){let X=0;return Y;function Y(G){if((G===L.uppercaseW||G===L.lowercaseW)&&X<3)return X++,Z.consume(G),Y;if(G===L.dot&&X===3)return Z.consume(G),q;return J(G)}function q(G){return G===L.eof?J(G):Q(G)}}function sM(Z,Q,J){let X,Y,q;return G;function G(H){if(H===L.dot||H===L.underscore)return Z.check(DF,K,U)(H);if(H===L.eof||H0(H)||Y5(H)||H!==L.dash&&$4(H))return K(H);return q=!0,Z.consume(H),G}function U(H){if(H===L.underscore)X=!0;else Y=X,X=void 0;return Z.consume(H),G}function K(H){if(Y||X||!q)return J(H);return Q(H)}}function oM(Z,Q){let J=0,X=0;return Y;function Y(G){if(G===L.leftParenthesis)return J++,Z.consume(G),Y;if(G===L.rightParenthesis&&X<J)return q(G);if(G===L.exclamationMark||G===L.quotationMark||G===L.ampersand||G===L.apostrophe||G===L.rightParenthesis||G===L.asterisk||G===L.comma||G===L.dot||G===L.colon||G===L.semicolon||G===L.lessThan||G===L.questionMark||G===L.rightSquareBracket||G===L.underscore||G===L.tilde)return Z.check(DF,Q,q)(G);if(G===L.eof||H0(G)||Y5(G))return Q(G);return Z.consume(G),Y}function q(G){if(G===L.rightParenthesis)X++;return Z.consume(G),Y}}function tM(Z,Q,J){return X;function X(U){if(U===L.exclamationMark||U===L.quotationMark||U===L.apostrophe||U===L.rightParenthesis||U===L.asterisk||U===L.comma||U===L.dot||U===L.colon||U===L.semicolon||U===L.questionMark||U===L.underscore||U===L.tilde)return Z.consume(U),X;if(U===L.ampersand)return Z.consume(U),q;if(U===L.rightSquareBracket)return Z.consume(U),Y;if(U===L.lessThan||U===L.eof||H0(U)||Y5(U))return Q(U);return J(U)}function Y(U){if(U===L.eof||U===L.leftParenthesis||U===L.leftSquareBracket||H0(U)||Y5(U))return Q(U);return X(U)}function q(U){return r0(U)?G(U):J(U)}function G(U){if(U===L.semicolon)return Z.consume(U),X;if(r0(U))return Z.consume(U),G;return J(U)}}function eM(Z,Q,J){return X;function X(q){return Z.consume(q),Y}function Y(q){return a0(q)?J(q):Q(q)}}function TF(Z){return Z===L.eof||Z===L.leftParenthesis||Z===L.asterisk||Z===L.underscore||Z===L.leftSquareBracket||Z===L.rightSquareBracket||Z===L.tilde||H0(Z)}function $F(Z){return!r0(Z)}function bF(Z){return!(Z===L.slash||AY(Z))}function AY(Z){return Z===L.plusSign||Z===L.dash||Z===L.dot||Z===L.underscore||a0(Z)}function RY(Z){let Q=Z.length,J=!1;while(Q--){let X=Z[Q][1];if((X.type==="labelLink"||X.type==="labelImage")&&!X._balanced){J=!0;break}if(X._gfmAutolinkLiteralWalkedInto){J=!1;break}}if(Z.length>0&&!J)Z[Z.length-1][1]._gfmAutolinkLiteralWalkedInto=!0;return J}var ZD={tokenize:UD,partial:!0};function MY(){return{document:{[L.leftSquareBracket]:{name:"gfmFootnoteDefinition",tokenize:YD,continuation:{tokenize:qD},exit:GD}},text:{[L.leftSquareBracket]:{name:"gfmFootnoteCall",tokenize:XD},[L.rightSquareBracket]:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:QD,resolveTo:JD}}}}function QD(Z,Q,J){let X=this,Y=X.events.length,q=X.parser.gfmFootnotes||(X.parser.gfmFootnotes=[]),G;while(Y--){let K=X.events[Y][1];if(K.type===_.labelImage){G=K;break}if(K.type==="gfmFootnoteCall"||K.type===_.labelLink||K.type===_.label||K.type===_.image||K.type===_.link)break}return U;function U(K){if(P(K===L.rightSquareBracket,"expected `]`"),!G||!G._balanced)return J(K);let H=G1(X.sliceSerialize({start:G.end,end:X.now()}));if(H.codePointAt(0)!==L.caret||!q.includes(H.slice(1)))return J(K);return Z.enter("gfmFootnoteCallLabelMarker"),Z.consume(K),Z.exit("gfmFootnoteCallLabelMarker"),Q(K)}}function JD(Z,Q){let J=Z.length,X;while(J--)if(Z[J][1].type===_.labelImage&&Z[J][0]==="enter"){X=Z[J][1];break}P(X,"expected `labelStart` to resolve"),Z[J+1][1].type=_.data,Z[J+3][1].type="gfmFootnoteCallLabelMarker";let Y={type:"gfmFootnoteCall",start:Object.assign({},Z[J+3][1].start),end:Object.assign({},Z[Z.length-1][1].end)},q={type:"gfmFootnoteCallMarker",start:Object.assign({},Z[J+3][1].end),end:Object.assign({},Z[J+3][1].end)};q.end.column++,q.end.offset++,q.end._bufferIndex++;let G={type:"gfmFootnoteCallString",start:Object.assign({},q.end),end:Object.assign({},Z[Z.length-1][1].start)},U={type:_.chunkString,contentType:"string",start:Object.assign({},G.start),end:Object.assign({},G.end)},K=[Z[J+1],Z[J+2],["enter",Y,Q],Z[J+3],Z[J+4],["enter",q,Q],["exit",q,Q],["enter",G,Q],["enter",U,Q],["exit",U,Q],["exit",G,Q],Z[Z.length-2],Z[Z.length-1],["exit",Y,Q]];return Z.splice(J,Z.length-J+1,...K),Z}function XD(Z,Q,J){let X=this,Y=X.parser.gfmFootnotes||(X.parser.gfmFootnotes=[]),q=0,G;return U;function U(z){return P(z===L.leftSquareBracket,"expected `[`"),Z.enter("gfmFootnoteCall"),Z.enter("gfmFootnoteCallLabelMarker"),Z.consume(z),Z.exit("gfmFootnoteCallLabelMarker"),K}function K(z){if(z!==L.caret)return J(z);return Z.enter("gfmFootnoteCallMarker"),Z.consume(z),Z.exit("gfmFootnoteCallMarker"),Z.enter("gfmFootnoteCallString"),Z.enter("chunkString").contentType="string",H}function H(z){if(q>k.linkReferenceSizeMax||z===L.rightSquareBracket&&!G||z===L.eof||z===L.leftSquareBracket||H0(z))return J(z);if(z===L.rightSquareBracket){Z.exit("chunkString");let F=Z.exit("gfmFootnoteCallString");if(!Y.includes(G1(X.sliceSerialize(F))))return J(z);return Z.enter("gfmFootnoteCallLabelMarker"),Z.consume(z),Z.exit("gfmFootnoteCallLabelMarker"),Z.exit("gfmFootnoteCall"),Q}if(!H0(z))G=!0;return q++,Z.consume(z),z===L.backslash?W:H}function W(z){if(z===L.leftSquareBracket||z===L.backslash||z===L.rightSquareBracket)return Z.consume(z),q++,H;return H(z)}}function YD(Z,Q,J){let X=this,Y=X.parser.gfmFootnotes||(X.parser.gfmFootnotes=[]),q,G=0,U;return K;function K(V){return P(V===L.leftSquareBracket,"expected `[`"),Z.enter("gfmFootnoteDefinition")._container=!0,Z.enter("gfmFootnoteDefinitionLabel"),Z.enter("gfmFootnoteDefinitionLabelMarker"),Z.consume(V),Z.exit("gfmFootnoteDefinitionLabelMarker"),H}function H(V){if(V===L.caret)return Z.enter("gfmFootnoteDefinitionMarker"),Z.consume(V),Z.exit("gfmFootnoteDefinitionMarker"),Z.enter("gfmFootnoteDefinitionLabelString"),Z.enter("chunkString").contentType="string",W;return J(V)}function W(V){if(G>k.linkReferenceSizeMax||V===L.rightSquareBracket&&!U||V===L.eof||V===L.leftSquareBracket||H0(V))return J(V);if(V===L.rightSquareBracket){Z.exit("chunkString");let O=Z.exit("gfmFootnoteDefinitionLabelString");return q=G1(X.sliceSerialize(O)),Z.enter("gfmFootnoteDefinitionLabelMarker"),Z.consume(V),Z.exit("gfmFootnoteDefinitionLabelMarker"),Z.exit("gfmFootnoteDefinitionLabel"),F}if(!H0(V))U=!0;return G++,Z.consume(V),V===L.backslash?z:W}function z(V){if(V===L.leftSquareBracket||V===L.backslash||V===L.rightSquareBracket)return Z.consume(V),G++,W;return W(V)}function F(V){if(V===L.colon){if(Z.enter("definitionMarker"),Z.consume(V),Z.exit("definitionMarker"),!Y.includes(q))Y.push(q);return a(Z,B,"gfmFootnoteDefinitionWhitespace")}return J(V)}function B(V){return Q(V)}}function qD(Z,Q,J){return Z.check(q5,Q,Z.attempt(ZD,Q,J))}function GD(Z){Z.exit("gfmFootnoteDefinition")}function UD(Z,Q,J){let X=this;return a(Z,Y,"gfmFootnoteDefinitionIndent",k.tabSize+1);function Y(q){let G=X.events[X.events.length-1];return G&&G[1].type==="gfmFootnoteDefinitionIndent"&&G[2].sliceSerialize(G[1],!0).length===k.tabSize?Q(q):J(q)}}function DY(Z){let J=(Z||{}).singleTilde,X={name:"strikethrough",tokenize:q,resolveAll:Y};if(J===null||J===void 0)J=!0;return{text:{[L.tilde]:X},insideSpan:{null:[X]},attentionMarkers:{null:[L.tilde]}};function Y(G,U){let K=-1;while(++K<G.length)if(G[K][0]==="enter"&&G[K][1].type==="strikethroughSequenceTemporary"&&G[K][1]._close){let H=K;while(H--)if(G[H][0]==="exit"&&G[H][1].type==="strikethroughSequenceTemporary"&&G[H][1]._open&&G[K][1].end.offset-G[K][1].start.offset===G[H][1].end.offset-G[H][1].start.offset){G[K][1].type="strikethroughSequence",G[H][1].type="strikethroughSequence";let W={type:"strikethrough",start:Object.assign({},G[H][1].start),end:Object.assign({},G[K][1].end)},z={type:"strikethroughText",start:Object.assign({},G[H][1].end),end:Object.assign({},G[K][1].start)},F=[["enter",W,U],["enter",G[H][1],U],["exit",G[H][1],U],["enter",z,U]],B=U.parser.constructs.insideSpan.null;if(B)h0(F,F.length,0,r5(B,G.slice(H+1,K),U));h0(F,F.length,0,[["exit",z,U],["enter",G[K][1],U],["exit",G[K][1],U],["exit",W,U]]),h0(G,H-1,K-H+3,F),K=H+F.length-2;break}}K=-1;while(++K<G.length)if(G[K][1].type==="strikethroughSequenceTemporary")G[K][1].type=_.data;return G}function q(G,U,K){let H=this.previous,W=this.events,z=0;return F;function F(V){if(P(V===L.tilde,"expected `~`"),H===L.tilde&&W[W.length-1][1].type!==_.characterEscape)return K(V);return G.enter("strikethroughSequenceTemporary"),B(V)}function B(V){let O=D5(H);if(V===L.tilde){if(z>1)return K(V);return G.consume(V),z++,B}if(z<2&&!J)return K(V);let N=G.exit("strikethroughSequenceTemporary"),j=D5(V);return N._open=!j||j===k.attentionSideAfter&&Boolean(O),N._close=!O||O===k.attentionSideAfter&&Boolean(j),U(V)}}}class IY{constructor(){this.map=[]}add(Z,Q,J){KD(this,Z,Q,J)}consume(Z){if(this.map.sort(function(Y,q){return Y[0]-q[0]}),this.map.length===0)return;let Q=this.map.length,J=[];while(Q>0)Q-=1,J.push(Z.slice(this.map[Q][0]+this.map[Q][1]),this.map[Q][2]),Z.length=this.map[Q][0];J.push(Z.slice()),Z.length=0;let X=J.pop();while(X){for(let Y of X)Z.push(Y);X=J.pop()}this.map.length=0}}function KD(Z,Q,J,X){let Y=0;if(J===0&&X.length===0)return;while(Y<Z.map.length){if(Z.map[Y][0]===Q){Z.map[Y][1]+=J,Z.map[Y][2].push(...X);return}Y+=1}Z.map.push([Q,J,X])}function CF(Z,Q){P(Z[Q][1].type==="table","expected table");let J=!1,X=[];while(Q<Z.length){let Y=Z[Q];if(J){if(Y[0]==="enter"){if(Y[1].type==="tableContent")X.push(Z[Q+1][1].type==="tableDelimiterMarker"?"left":"none")}else if(Y[1].type==="tableContent"){if(Z[Q-1][1].type==="tableDelimiterMarker"){let q=X.length-1;X[q]=X[q]==="left"?"center":"right"}}else if(Y[1].type==="tableDelimiterRow")break}else if(Y[0]==="enter"&&Y[1].type==="tableDelimiterRow")J=!0;Q+=1}return X}function EY(){return{flow:{null:{name:"table",tokenize:HD,resolveAll:WD}}}}function HD(Z,Q,J){let X=this,Y=0,q=0,G;return U;function U(T){let F0=X.events.length-1;while(F0>-1){let c=X.events[F0][1].type;if(c===_.lineEnding||c===_.linePrefix)F0--;else break}let e=F0>-1?X.events[F0][1].type:null,m=e==="tableHead"||e==="tableRow"?I:K;if(m===I&&X.parser.lazy[X.now().line])return J(T);return m(T)}function K(T){return Z.enter("tableHead"),Z.enter("tableRow"),H(T)}function H(T){if(T===L.verticalBar)return W(T);return G=!0,q+=1,W(T)}function W(T){if(T===L.eof)return J(T);if(v(T)){if(q>1)return q=0,X.interrupt=!0,Z.exit("tableRow"),Z.enter(_.lineEnding),Z.consume(T),Z.exit(_.lineEnding),B;return J(T)}if(r(T))return a(Z,W,_.whitespace)(T);if(q+=1,G)G=!1,Y+=1;if(T===L.verticalBar)return Z.enter("tableCellDivider"),Z.consume(T),Z.exit("tableCellDivider"),G=!0,W;return Z.enter(_.data),z(T)}function z(T){if(T===L.eof||T===L.verticalBar||H0(T))return Z.exit(_.data),W(T);return Z.consume(T),T===L.backslash?F:z}function F(T){if(T===L.backslash||T===L.verticalBar)return Z.consume(T),z;return z(T)}function B(T){if(X.interrupt=!1,X.parser.lazy[X.now().line])return J(T);if(Z.enter("tableDelimiterRow"),G=!1,r(T))return P(X.parser.constructs.disable.null,"expected `disabled.null`"),a(Z,V,_.linePrefix,X.parser.constructs.disable.null.includes("codeIndented")?void 0:k.tabSize)(T);return V(T)}function V(T){if(T===L.dash||T===L.colon)return N(T);if(T===L.verticalBar)return G=!0,Z.enter("tableCellDivider"),Z.consume(T),Z.exit("tableCellDivider"),O;return w(T)}function O(T){if(r(T))return a(Z,N,_.whitespace)(T);return N(T)}function N(T){if(T===L.colon)return q+=1,G=!0,Z.enter("tableDelimiterMarker"),Z.consume(T),Z.exit("tableDelimiterMarker"),j;if(T===L.dash)return q+=1,j(T);if(T===L.eof||v(T))return $(T);return w(T)}function j(T){if(T===L.dash)return Z.enter("tableDelimiterFiller"),R(T);return w(T)}function R(T){if(T===L.dash)return Z.consume(T),R;if(T===L.colon)return G=!0,Z.exit("tableDelimiterFiller"),Z.enter("tableDelimiterMarker"),Z.consume(T),Z.exit("tableDelimiterMarker"),E;return Z.exit("tableDelimiterFiller"),E(T)}function E(T){if(r(T))return a(Z,$,_.whitespace)(T);return $(T)}function $(T){if(T===L.verticalBar)return V(T);if(T===L.eof||v(T)){if(!G||Y!==q)return w(T);return Z.exit("tableDelimiterRow"),Z.exit("tableHead"),Q(T)}return w(T)}function w(T){return J(T)}function I(T){return Z.enter("tableRow"),g(T)}function g(T){if(T===L.verticalBar)return Z.enter("tableCellDivider"),Z.consume(T),Z.exit("tableCellDivider"),g;if(T===L.eof||v(T))return Z.exit("tableRow"),Q(T);if(r(T))return a(Z,g,_.whitespace)(T);return Z.enter(_.data),S(T)}function S(T){if(T===L.eof||T===L.verticalBar||H0(T))return Z.exit(_.data),g(T);return Z.consume(T),T===L.backslash?u:S}function u(T){if(T===L.backslash||T===L.verticalBar)return Z.consume(T),S;return S(T)}}function WD(Z,Q){let J=-1,X=!0,Y=0,q=[0,0,0,0],G=[0,0,0,0],U=!1,K=0,H,W,z,F=new IY;while(++J<Z.length){let B=Z[J],V=B[1];if(B[0]==="enter"){if(V.type==="tableHead"){if(U=!1,K!==0)P(H,"there should be a table opening"),yF(F,Q,K,H,W),W=void 0,K=0;H={type:"table",start:Object.assign({},V.start),end:Object.assign({},V.end)},F.add(J,0,[["enter",H,Q]])}else if(V.type==="tableRow"||V.type==="tableDelimiterRow"){if(X=!0,z=void 0,q=[0,0,0,0],G=[0,J+1,0,0],U)U=!1,W={type:"tableBody",start:Object.assign({},V.start),end:Object.assign({},V.end)},F.add(J,0,[["enter",W,Q]]);Y=V.type==="tableDelimiterRow"?2:W?3:1}else if(Y&&(V.type===_.data||V.type==="tableDelimiterMarker"||V.type==="tableDelimiterFiller")){if(X=!1,G[2]===0){if(q[1]!==0)G[0]=G[1],z=n9(F,Q,q,Y,void 0,z),q=[0,0,0,0];G[2]=J}}else if(V.type==="tableCellDivider")if(X)X=!1;else{if(q[1]!==0)G[0]=G[1],z=n9(F,Q,q,Y,void 0,z);q=G,G=[q[1],J,0,0]}}else if(V.type==="tableHead")U=!0,K=J;else if(V.type==="tableRow"||V.type==="tableDelimiterRow"){if(K=J,q[1]!==0)G[0]=G[1],z=n9(F,Q,q,Y,J,z);else if(G[1]!==0)z=n9(F,Q,G,Y,J,z);Y=0}else if(Y&&(V.type===_.data||V.type==="tableDelimiterMarker"||V.type==="tableDelimiterFiller"))G[3]=J}if(K!==0)P(H,"expected table opening"),yF(F,Q,K,H,W);F.consume(Q.events),J=-1;while(++J<Q.events.length){let B=Q.events[J];if(B[0]==="enter"&&B[1].type==="table")B[1]._align=CF(Q.events,J)}return Z}function n9(Z,Q,J,X,Y,q){let G=X===1?"tableHeader":X===2?"tableDelimiter":"tableData",U="tableContent";if(J[0]!==0)P(q,"expected previous cell enter"),q.end=Object.assign({},_2(Q.events,J[0])),Z.add(J[0],0,[["exit",q,Q]]);let K=_2(Q.events,J[1]);if(q={type:G,start:Object.assign({},K),end:Object.assign({},K)},Z.add(J[1],0,[["enter",q,Q]]),J[2]!==0){let H=_2(Q.events,J[2]),W=_2(Q.events,J[3]),z={type:"tableContent",start:Object.assign({},H),end:Object.assign({},W)};if(Z.add(J[2],0,[["enter",z,Q]]),P(J[3]!==0),X!==2){let F=Q.events[J[2]],B=Q.events[J[3]];if(F[1].end=Object.assign({},B[1].end),F[1].type=_.chunkText,F[1].contentType=k.contentTypeText,J[3]>J[2]+1){let V=J[2]+1,O=J[3]-J[2]-1;Z.add(V,O,[])}}Z.add(J[3]+1,0,[["exit",z,Q]])}if(Y!==void 0)q.end=Object.assign({},_2(Q.events,Y)),Z.add(Y,0,[["exit",q,Q]]),q=void 0;return q}function yF(Z,Q,J,X,Y){let q=[],G=_2(Q.events,J);if(Y)Y.end=Object.assign({},G),q.push(["exit",Y,Q]);X.end=Object.assign({},G),q.push(["exit",X,Q]),Z.add(J+1,0,q)}function _2(Z,Q){let J=Z[Q],X=J[0]==="enter"?"start":"end";return J[1][X]}var zD={name:"tasklistCheck",tokenize:FD};function TY(){return{text:{[L.leftSquareBracket]:zD}}}function FD(Z,Q,J){let X=this;return Y;function Y(K){if(P(K===L.leftSquareBracket,"expected `[`"),X.previous!==L.eof||!X._gfmTasklistFirstContentOfListItem)return J(K);return Z.enter("taskListCheck"),Z.enter("taskListCheckMarker"),Z.consume(K),Z.exit("taskListCheckMarker"),q}function q(K){if(H0(K))return Z.enter("taskListCheckValueUnchecked"),Z.consume(K),Z.exit("taskListCheckValueUnchecked"),G;if(K===L.uppercaseX||K===L.lowercaseX)return Z.enter("taskListCheckValueChecked"),Z.consume(K),Z.exit("taskListCheckValueChecked"),G;return J(K)}function G(K){if(K===L.rightSquareBracket)return Z.enter("taskListCheckMarker"),Z.consume(K),Z.exit("taskListCheckMarker"),Z.exit("taskListCheck"),U;return J(K)}function U(K){if(v(K))return Q(K);if(r(K))return Z.check({tokenize:BD},Q,J)(K);return J(K)}}function BD(Z,Q,J){return a(Z,X,_.whitespace);function X(Y){return Y===L.eof?J(Y):Q(Y)}}function SF(Z){return I7([PY(),MY(),DY(Z),EY(),TY()])}var VD={};function s9(Z){let Q=this,J=Z||VD,X=Q.data(),Y=X.micromarkExtensions||(X.micromarkExtensions=[]),q=X.fromMarkdownExtensions||(X.fromMarkdownExtensions=[]),G=X.toMarkdownExtensions||(X.toMarkdownExtensions=[]);Y.push(SF(J)),q.push(NY()),G.push(jY(J))}function t(Z,Q){return Object.assign(Z,{meta:{package:"@milkdown/preset-gfm",...Q}}),Z}var CY=J6("strike_through");t(CY,{displayName:"Attr<strikethrough>",group:"Strikethrough"});var S8=K4("strike_through",(Z)=>({parseDOM:[{tag:"del"},{style:"text-decoration",getAttrs:(Q)=>Q==="line-through"}],toDOM:(Q)=>["del",Z.get(CY.key)(Q)],parseMarkdown:{match:(Q)=>Q.type==="delete",runner:(Q,J,X)=>{Q.openMark(X),Q.next(J.children),Q.closeMark(X)}},toMarkdown:{match:(Q)=>Q.type.name==="strike_through",runner:(Q,J)=>{Q.withMark(J,"delete")}}}));t(S8.mark,{displayName:"MarkSchema<strikethrough>",group:"Strikethrough"});t(S8.ctx,{displayName:"MarkSchemaCtx<strikethrough>",group:"Strikethrough"});var yY=Q0("ToggleStrikeThrough",(Z)=>()=>{return p6(S8.type(Z))});t(yY,{displayName:"Command<ToggleStrikethrough>",group:"Strikethrough"});var xF=W1((Z)=>{return r4(new RegExp("(?<![\\w:/])(~{1,2})(.+?)\\1(?!\\w|\\/)"),S8.type(Z))});t(xF,{displayName:"InputRule<strikethrough>",group:"Strikethrough"});var SY=j1("strikeThroughKeymap",{ToggleStrikethrough:{shortcuts:"Mod-Alt-x",command:(Z)=>{let Q=Z.get(_0);return()=>Q.call(yY.key)}}});t(SY.ctx,{displayName:"KeymapCtx<strikethrough>",group:"Strikethrough"});t(SY.shortcuts,{displayName:"Keymap<strikethrough>",group:"Strikethrough"});var w8=rz({tableGroup:"block",cellContent:"paragraph",cellAttributes:{alignment:{default:"left",getFromDOM:(Z)=>Z.style.textAlign||"left",setDOMAttr:(Z,Q)=>{Q.style=`text-align: ${Z||"left"}`}}}}),U6=f0("table",()=>({...w8.table,content:"table_header_row table_row+",disableDropCursor:!0,parseMarkdown:{match:(Z)=>Z.type==="table",runner:(Z,Q,J)=>{let X=Q.align,Y=Q.children.map((q,G)=>({...q,align:X,isHeader:G===0}));Z.openNode(J),Z.next(Y),Z.closeNode()}},toMarkdown:{match:(Z)=>Z.type.name==="table",runner:(Z,Q)=>{let J=Q.content.firstChild?.content;if(!J)return;let X=[];J.forEach((Y)=>{X.push(Y.attrs.alignment)}),Z.openNode("table",void 0,{align:X}),Z.next(Q.content),Z.closeNode()}}}));t(U6.node,{displayName:"NodeSchema<table>",group:"Table"});t(U6.ctx,{displayName:"NodeSchemaCtx<table>",group:"Table"});var o9=f0("table_header_row",()=>({...w8.table_row,disableDropCursor:!0,content:"(table_header)*",parseDOM:[{tag:"tr[data-is-header]"},{tag:"tr",getAttrs:(Z)=>{if(Z instanceof HTMLElement)return Z.querySelector("th")?{}:!1;return!1}}],toDOM(){return["tr",{"data-is-header":!0},0]},parseMarkdown:{match:(Z)=>Boolean(Z.type==="tableRow"&&Z.isHeader),runner:(Z,Q,J)=>{let X=Q.align,Y=Q.children.map((q,G)=>({...q,align:X[G],isHeader:Q.isHeader}));Z.openNode(J),Z.next(Y),Z.closeNode()}},toMarkdown:{match:(Z)=>Z.type.name==="table_header_row",runner:(Z,Q)=>{Z.openNode("tableRow",void 0,{isHeader:!0}),Z.next(Q.content),Z.closeNode()}}}));t(o9.node,{displayName:"NodeSchema<tableHeaderRow>",group:"Table"});t(o9.ctx,{displayName:"NodeSchemaCtx<tableHeaderRow>",group:"Table"});var x8=f0("table_row",()=>({...w8.table_row,disableDropCursor:!0,content:"(table_cell)*",parseMarkdown:{match:(Z)=>Z.type==="tableRow",runner:(Z,Q,J)=>{let X=Q.align,Y=Q.children.map((q,G)=>({...q,align:X[G]}));Z.openNode(J),Z.next(Y),Z.closeNode()}},toMarkdown:{match:(Z)=>Z.type.name==="table_row",runner:(Z,Q)=>{if(Q.content.size===0)return;Z.openNode("tableRow"),Z.next(Q.content),Z.closeNode()}}}));t(x8.node,{displayName:"NodeSchema<tableRow>",group:"Table"});t(x8.ctx,{displayName:"NodeSchemaCtx<tableRow>",group:"Table"});var k8=f0("table_cell",()=>({...w8.table_cell,disableDropCursor:!0,parseMarkdown:{match:(Z)=>Z.type==="tableCell"&&!Z.isHeader,runner:(Z,Q,J)=>{let X=Q.align;Z.openNode(J,{alignment:X}).openNode(Z.schema.nodes.paragraph).next(Q.children).closeNode().closeNode()}},toMarkdown:{match:(Z)=>Z.type.name==="table_cell",runner:(Z,Q)=>{Z.openNode("tableCell").next(Q.content).closeNode()}}}));t(k8.node,{displayName:"NodeSchema<tableCell>",group:"Table"});t(k8.ctx,{displayName:"NodeSchemaCtx<tableCell>",group:"Table"});var g8=f0("table_header",()=>({...w8.table_header,disableDropCursor:!0,parseMarkdown:{match:(Z)=>Z.type==="tableCell"&&!!Z.isHeader,runner:(Z,Q,J)=>{let X=Q.align;Z.openNode(J,{alignment:X}),Z.openNode(Z.schema.nodes.paragraph),Z.next(Q.children),Z.closeNode(),Z.closeNode()}},toMarkdown:{match:(Z)=>Z.type.name==="table_header",runner:(Z,Q)=>{Z.openNode("tableCell"),Z.next(Q.content),Z.closeNode()}}}));t(g8.node,{displayName:"NodeSchema<tableHeader>",group:"Table"});t(g8.ctx,{displayName:"NodeSchemaCtx<tableHeader>",group:"Table"});function kF(Z,Q=3,J=3){let X=Array(J).fill(0).map(()=>k8.type(Z).createAndFill()),Y=Array(J).fill(0).map(()=>g8.type(Z).createAndFill()),q=Array(Q).fill(0).map((G,U)=>U===0?o9.type(Z).create(null,Y):x8.type(Z).create(null,X));return U6.type(Z).create(null,q)}function gF(Z){return(Q,J)=>(X)=>{J=J??X.selection.from;let Y=X.doc.resolve(J),q=FH((K)=>K.type.name==="table")(Y),G=q?{node:q.node,from:q.start}:void 0,U=Z==="row";if(G){let K=N0.get(G.node);if(Q>=0&&Q<(U?K.height:K.width)){let H=K.positionAt(U?Q:K.height-1,U?K.width-1:Q,G.node),W=X.doc.resolve(G.from+H),z=U?D0.rowSelection:D0.colSelection,F=K.positionAt(U?Q:0,U?0:Q,G.node),B=X.doc.resolve(G.from+F);return KJ(X.setSelection(z(W,B)))}}return X}}var LD=gF("row"),_D=gF("col");function vF(Z,Q,{map:J,tableStart:X,table:Y},q){let G=Array(q).fill(0).reduce((K,H,W)=>{return K+Y.child(W).nodeSize},X),U=Array(J.width).fill(0).map((K,H)=>{let W=Y.nodeAt(J.map[H]);return k8.type(Z).createAndFill({alignment:W?.attrs.alignment})});return Q.insert(G,x8.type(Z).create(null,U)),Q}function OD(Z){let Q=L2(Z.$from);if(!Q)return;let J=N0.get(Q.node);return J.cellsInRect({left:0,right:J.width,top:0,bottom:J.height}).map((Y)=>{let q=Q.node.nodeAt(Y),G=Y+Q.start;return{pos:G,start:G+1,node:q}})}function ND(Z){let Q=OD(Z.selection);if(Q&&Q[0]){let J=Z.doc.resolve(Q[0].pos),X=Q[Q.length-1];if(X){let Y=Z.doc.resolve(X.pos);return KJ(Z.setSelection(new D0(Y,J)))}}return Z}var wY=Q0("GoToPrevTableCell",()=>()=>tX(-1));t(wY,{displayName:"Command<goToPrevTableCellCommand>",group:"Table"});var xY=Q0("GoToNextTableCell",()=>()=>tX(1));t(xY,{displayName:"Command<goToNextTableCellCommand>",group:"Table"});var kY=Q0("ExitTable",(Z)=>()=>(Q,J)=>{if(!w1(Q))return!1;let{$head:X}=Q.selection,Y=zH(X,U6.type(Z));if(!Y)return!1;let{to:q}=Y,G=Q.tr.replaceWith(q,q,B5.type(Z).createAndFill());return G.setSelection(n.near(G.doc.resolve(q),1)).scrollIntoView(),J?.(G),!0});t(kY,{displayName:"Command<breakTableCommand>",group:"Table"});var hF=Q0("InsertTable",(Z)=>({row:Q,col:J}={})=>(X,Y)=>{let{selection:q,tr:G}=X,{from:U}=q,K=kF(Z,Q,J),H=G.replaceSelectionWith(K),W=n.findFrom(H.doc.resolve(U),1,!0);if(W)H.setSelection(W);return Y?.(H),!0});t(hF,{displayName:"Command<insertTableCommand>",group:"Table"});var uF=Q0("MoveRow",()=>({from:Z,to:Q,pos:J}={})=>GF({from:Z??0,to:Q??0,pos:J}));t(uF,{displayName:"Command<moveRowCommand>",group:"Table"});var fF=Q0("MoveCol",()=>({from:Z,to:Q,pos:J}={})=>UF({from:Z??0,to:Q??0,pos:J}));t(fF,{displayName:"Command<moveColCommand>",group:"Table"});var mF=Q0("SelectRow",()=>(Z={index:0})=>(Q,J)=>{let{tr:X}=Q,Y=J?.(LD(Z.index,Z.pos)(X));return Boolean(Y)});t(mF,{displayName:"Command<selectRowCommand>",group:"Table"});var pF=Q0("SelectCol",()=>(Z={index:0})=>(Q,J)=>{let{tr:X}=Q,Y=J?.(_D(Z.index,Z.pos)(X));return Boolean(Y)});t(pF,{displayName:"Command<selectColCommand>",group:"Table"});var lF=Q0("SelectTable",()=>()=>(Z,Q)=>{let{tr:J}=Z,X=Q?.(ND(J));return Boolean(X)});t(lF,{displayName:"Command<selectTableCommand>",group:"Table"});var iF=Q0("DeleteSelectedCells",()=>()=>(Z,Q)=>{let{selection:J}=Z;if(!(J instanceof D0))return!1;let X=J.isRowSelection(),Y=J.isColSelection();if(X&&Y)return qF(Z,Q);if(Y)return JF(Z,Q);else return XF(Z,Q)});t(iF,{displayName:"Command<deleteSelectedCellsCommand>",group:"Table"});var dF=Q0("AddColBefore",()=>()=>ZF);t(dF,{displayName:"Command<addColBeforeCommand>",group:"Table"});var cF=Q0("AddColAfter",()=>()=>QF);t(cF,{displayName:"Command<addColAfterCommand>",group:"Table"});var rF=Q0("AddRowBefore",(Z)=>()=>(Q,J)=>{if(!w1(Q))return!1;if(J){let X=v5(Q);J(vF(Z,Q.tr,X,X.top))}return!0});t(rF,{displayName:"Command<addRowBeforeCommand>",group:"Table"});var aF=Q0("AddRowAfter",(Z)=>()=>(Q,J)=>{if(!w1(Q))return!1;if(J){let X=v5(Q);J(vF(Z,Q.tr,X,X.bottom))}return!0});t(aF,{displayName:"Command<addRowAfterCommand>",group:"Table"});var nF=Q0("SetAlign",()=>(Z="left")=>YF("alignment",Z));t(nF,{displayName:"Command<setAlignCommand>",group:"Table"});var sF=W1((Z)=>new Q1(/^\|(?<col>\d+)[xX](?<row>\d+)\|\s$/,(Q,J,X,Y)=>{let q=Q.doc.resolve(X);if(!q.node(-1).canReplaceWith(q.index(-1),q.indexAfter(-1),U6.type(Z)))return null;let G=Math.max(Number(J.groups?.row??0),2),U=kF(Z,G,Number(J.groups?.col)),K=Q.tr.replaceRangeWith(X,Y,U);return K.setSelection(Z0.create(K.doc,X+3)).scrollIntoView()}));t(sF,{displayName:"InputRule<insertTableInputRule>",group:"Table"});var oF=qz((Z)=>({run:(Q,J,X)=>{if(X)return Q;let Y=Q.content;return Q.content.forEach((q,G,U)=>{if(q?.type!==U6.type(Z))return;let K=q.childCount,H=q.lastChild?.childCount??0;if(K===0||H===0){Y=Y.replaceChild(U,B5.type(Z).create());return}let W=q.firstChild;if(!(H>0&&W&&W.childCount===0))return;let F=Array(H).fill(0).map(()=>g8.type(Z).createAndFill()),B=new h(x.from(F),0,0),V=W.replace(0,0,B),O=q.replace(0,W.nodeSize,new h(x.from(V),0,0));Y=Y.replaceChild(U,O)}),new h(x.from(Y),Q.openStart,Q.openEnd)}}));t(oF,{displayName:"PasteRule<table>",group:"Table"});var gY=j1("tableKeymap",{NextCell:{priority:100,shortcuts:["Mod-]","Tab"],command:(Z)=>{let Q=Z.get(_0);return()=>Q.call(xY.key)}},PrevCell:{shortcuts:["Mod-[","Shift-Tab"],command:(Z)=>{let Q=Z.get(_0);return()=>Q.call(wY.key)}},ExitTable:{shortcuts:["Mod-Enter","Enter"],command:(Z)=>{let Q=Z.get(_0);return()=>Q.call(kY.key)}}});t(gY.ctx,{displayName:"KeymapCtx<table>",group:"Table"});t(gY.shortcuts,{displayName:"Keymap<table>",group:"Table"});var $Y="footnote_definition",wF="footnoteDefinition",vY=f0("footnote_definition",()=>({group:"block",content:"block+",defining:!0,attrs:{label:{default:"",validate:"string"}},parseDOM:[{tag:`dl[data-type="${$Y}"]`,getAttrs:(Z)=>{if(!(Z instanceof HTMLElement))throw k1(Z);return{label:Z.dataset.label}},contentElement:"dd"}],toDOM:(Z)=>{let Q=Z.attrs.label;return["dl",{"data-label":Q,"data-type":$Y},["dt",Q],["dd",0]]},parseMarkdown:{match:({type:Z})=>Z===wF,runner:(Z,Q,J)=>{Z.openNode(J,{label:Q.label}).next(Q.children).closeNode()}},toMarkdown:{match:(Z)=>Z.type.name===$Y,runner:(Z,Q)=>{Z.openNode(wF,void 0,{label:Q.attrs.label,identifier:Q.attrs.label}).next(Q.content).closeNode()}}}));t(vY.ctx,{displayName:"NodeSchemaCtx<footnodeDef>",group:"footnote"});t(vY.node,{displayName:"NodeSchema<footnodeDef>",group:"footnote"});var bY="footnote_reference",hY=f0("footnote_reference",()=>({group:"inline",inline:!0,atom:!0,attrs:{label:{default:"",validate:"string"}},parseDOM:[{tag:`sup[data-type="${bY}"]`,getAttrs:(Z)=>{if(!(Z instanceof HTMLElement))throw k1(Z);return{label:Z.dataset.label}}}],toDOM:(Z)=>{let Q=Z.attrs.label;return["sup",{"data-label":Q,"data-type":bY},Q]},parseMarkdown:{match:({type:Z})=>Z==="footnoteReference",runner:(Z,Q,J)=>{Z.addNode(J,{label:Q.label})}},toMarkdown:{match:(Z)=>Z.type.name===bY,runner:(Z,Q)=>{Z.addNode("footnoteReference",void 0,void 0,{label:Q.attrs.label,identifier:Q.attrs.label})}}}));t(hY.ctx,{displayName:"NodeSchemaCtx<footnodeRef>",group:"footnote"});t(hY.node,{displayName:"NodeSchema<footnodeRef>",group:"footnote"});var uY=V5.extendSchema((Z)=>{return(Q)=>{let J=Z(Q);return{...J,attrs:{...J.attrs,checked:{default:null,validate:"boolean|null"}},parseDOM:[{tag:'li[data-item-type="task"]',getAttrs:(X)=>{if(!(X instanceof HTMLElement))throw k1(X);return{label:X.dataset.label,listType:X.dataset.listType,spread:X.dataset.spread,checked:X.dataset.checked?X.dataset.checked==="true":null}}},...J?.parseDOM||[]],toDOM:(X)=>{if(J.toDOM&&X.attrs.checked==null)return J.toDOM(X);return["li",{"data-item-type":"task","data-label":X.attrs.label,"data-list-type":X.attrs.listType,"data-spread":X.attrs.spread,"data-checked":X.attrs.checked},0]},parseMarkdown:{match:({type:X})=>X==="listItem",runner:(X,Y,q)=>{if(Y.checked==null){J.parseMarkdown.runner(X,Y,q);return}let G=Y.label!=null?`${Y.label}.`:"•",U=Y.checked!=null?Boolean(Y.checked):null,K=Y.label!=null?"ordered":"bullet",H=Y.spread!=null?`${Y.spread}`:"true";X.openNode(q,{label:G,listType:K,spread:H,checked:U}),X.next(Y.children),X.closeNode()}},toMarkdown:{match:(X)=>X.type.name==="list_item",runner:(X,Y)=>{if(Y.attrs.checked==null){J.toMarkdown.runner(X,Y);return}let q=Y.attrs.label,G=Y.attrs.listType,U=Y.attrs.spread==="true",K=Y.attrs.checked;X.openNode("listItem",void 0,{label:q,listType:G,spread:U,checked:K}),X.next(Y.content),X.closeNode()}}}}});t(uY.node,{displayName:"NodeSchema<taskListItem>",group:"ListItem"});t(uY.ctx,{displayName:"NodeSchemaCtx<taskListItem>",group:"ListItem"});var tF=W1(()=>{return new Q1(/^\[(?<checked>\s|x)\]\s$/,(Z,Q,J,X)=>{let Y=Z.doc.resolve(J),q=0,G=Y.node(q);while(G&&G.type.name!=="list_item")q--,G=Y.node(q);if(!G||G.attrs.checked!=null)return null;let U=Boolean(Q.groups?.checked==="x"),K=Y.before(q),H=Z.tr;return H.deleteRange(J,X).setNodeMarkup(K,void 0,{...G.attrs,checked:U}),H})});t(tF,{displayName:"InputRule<wrapInTaskListInputRule>",group:"ListItem"});var jD=[SY,gY].flat(),AD=[sF,tF],PD=[xF],RD=[oF],eF=s1(()=>BF);t(eF,{displayName:"Prose<autoInsertSpanPlugin>",group:"Prose"});var MD=s1(()=>HF({}));t(MD,{displayName:"Prose<columnResizingPlugin>",group:"Prose"});var ZB=s1(()=>zF({allowTableNodeSelection:!0}));t(ZB,{displayName:"Prose<tableEditingPlugin>",group:"Prose"});var fY=g5("remarkGFM",()=>s9);t(fY.plugin,{displayName:"Remark<remarkGFMPlugin>",group:"Remark"});t(fY.options,{displayName:"RemarkConfig<remarkGFMPlugin>",group:"Remark"});var DD=new k0("MILKDOWN_KEEP_TABLE_ALIGN_PLUGIN");function ID(Z,Q){let J=0;return Q.forEach((X,Y,q)=>{if(X===Z)J=q}),J}var QB=s1(()=>{return new y0({key:DD,appendTransaction:(Z,Q,J)=>{let X,Y=(q,G)=>{if(!X)X=J.tr;if(q.type.name!=="table_cell")return;let U=J.doc.resolve(G),K=U.node(U.depth),W=U.node(U.depth-1).firstChild;if(!W)return;let z=ID(q,K),F=W.maybeChild(z);if(!F)return;let B=F.attrs.alignment,V=q.attrs.alignment;if(B===V)return;X.setNodeMarkup(G,void 0,{...q.attrs,alignment:B})};if(Q.doc!==J.doc)J.doc.descendants(Y);return X}})});t(QB,{displayName:"Prose<keepTableAlignPlugin>",group:"Prose"});var ED=[QB,eF,fY,ZB].flat(),TD=[uY,U6,o9,x8,g8,k8,vY,hY,CY,S8].flat(),$D=[xY,wY,kY,hF,uF,fF,mF,pF,lF,iF,rF,aF,dF,cF,nF,yY],JB=[TD,AD,RD,PD,jD,$D,ED].flat();function bD({elementId:Z,initialContent:Q,onSave:J,onCancel:X}){let Y=x0(null),q=x0(null),[G,U]=J0(Q),[K,H]=J0(!1);j0(()=>{if(!Y.current)return;return(async()=>{let V=await x9.make().config((O)=>{O.set(D8,Y.current),O.set(R8,Q),O.get(v9).markdownUpdated((N,j)=>{U(j),fG(j)})}).use(wz).use(JB).use(sJ).create();q.current=V,H(!0)})(),()=>{q.current?.destroy(),q.current=null}},[Z]);let W=U0(()=>{J(G),v2(!1)},[G,J]),z=U0(()=>{X(),v2(!1)},[X]),F=U0(()=>{lG((B,V)=>{let O=`![${V}](${B})`;U((N)=>`${N}

${O}`)})},[]);return A("div",{class:"markdown-inline-editor","data-cms-ui":!0,"data-element-id":Z,children:[A("div",{class:"flex items-center gap-2 p-2 border-b bg-gray-50 rounded-t-lg",children:[A("button",{type:"button",onClick:F,class:"p-1.5 rounded hover:bg-gray-200 text-gray-600",title:"Insert Image","data-cms-ui":!0,children:A("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"},void 0,!1,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this),A("div",{class:"flex-1"},void 0,!1,void 0,this),A("button",{type:"button",onClick:z,class:"px-3 py-1 text-sm text-gray-600 hover:text-gray-800","data-cms-ui":!0,children:"Cancel"},void 0,!1,void 0,this),A("button",{type:"button",onClick:W,class:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700","data-cms-ui":!0,children:"Save"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),A("div",{ref:Y,class:"milkdown-editor prose prose-sm max-w-none p-4 min-h-[200px] focus:outline-none","data-cms-ui":!0},void 0,!1,void 0,this),!K&&A("div",{class:"absolute inset-0 flex items-center justify-center bg-white/80",children:A("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function XB(){let Z=$G.value;if(!Z)return null;let Q=U0((X)=>{console.log("Save markdown:",X)},[]),J=U0(()=>{console.log("Cancel markdown edit")},[]);return A("div",{class:"fixed inset-0 z-[2147483646] bg-black/20 flex items-center justify-center","data-cms-ui":!0,children:A("div",{class:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] flex flex-col","data-cms-ui":!0,children:[A("div",{class:"flex items-center justify-between p-4 border-b",children:A("div",{children:[A("h2",{class:"text-lg font-semibold text-gray-900",children:Z.frontmatter.title},void 0,!1,void 0,this),A("p",{class:"text-sm text-gray-500",children:Z.filePath},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),A("div",{class:"flex-1 overflow-auto",children:A(bD,{elementId:Z.slug,initialContent:Z.content,onSave:Q,onCancel:J},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)}function YB(){let Z=bG.value,Q=CG.value,J=yG.value,X=R1.value.insertCallback,[Y,q]=J0(null),[G,U]=J0(""),K=x0(null),H=x0(null);j0(()=>{if(Z&&Q.length===0)W()},[Z]);let W=async()=>{gZ(!0);try{let R=await YU(P5.value);z7(R.items)}catch(R){I0("Failed to load media library","error")}finally{gZ(!1)}},z=U0(()=>{iG(),U("")},[]),F=U0((R)=>{if(X){let E=R.filename||"Image";X(R.url,E),z()}},[X,z]),B=U0(()=>{K.current?.click()},[]),V=async(R)=>{let E=R.target,$=E.files?.[0];if(!$)return;q(0);try{let w=await fZ(P5.value,$,(I)=>{q(I)});if(w.success&&w.url){let I={id:w.id||crypto.randomUUID(),url:w.url,filename:w.filename||$.name,contentType:$.type};z7([I,...Q]),I0("Image uploaded successfully","success")}else I0(w.error||"Upload failed","error")}catch(w){I0("Upload failed","error")}finally{q(null),E.value=""}},O=async(R)=>{R.preventDefault(),R.stopPropagation();let E=R.dataTransfer?.files[0];if(!E||!E.type.startsWith("image/")){I0("Please drop an image file","error");return}q(0);try{let $=await fZ(P5.value,E,(w)=>{q(w)});if($.success&&$.url){let w={id:$.id||crypto.randomUUID(),url:$.url,filename:$.filename||E.name,contentType:E.type};z7([w,...Q]),I0("Image uploaded successfully","success")}else I0($.error||"Upload failed","error")}catch($){I0("Upload failed","error")}finally{q(null)}},N=(R)=>{R.preventDefault(),R.stopPropagation()},j=G?Q.filter((R)=>R.filename.toLowerCase().includes(G.toLowerCase())):Q;if(!Z)return null;return A("div",{class:"fixed inset-0 z-[2147483647] flex items-center justify-center bg-black/50",onClick:z,"data-cms-ui":!0,children:A("div",{ref:H,class:"bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[80vh] flex flex-col",onClick:(R)=>R.stopPropagation(),onDrop:O,onDragOver:N,"data-cms-ui":!0,children:[A("div",{class:"flex items-center justify-between p-4 border-b",children:[A("h2",{class:"text-lg font-semibold text-gray-900",children:"Media Library"},void 0,!1,void 0,this),A("button",{type:"button",onClick:z,class:"text-gray-500 hover:text-gray-700","data-cms-ui":!0,children:A("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},void 0,!1,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this),A("div",{class:"flex items-center gap-3 p-4 border-b",children:[A("input",{type:"text",placeholder:"Search images...",value:G,onInput:(R)=>U(R.target.value),class:"flex-1 px-3 py-2 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500","data-cms-ui":!0},void 0,!1,void 0,this),A("button",{type:"button",onClick:B,class:"px-4 py-2 bg-blue-600 text-white rounded-md text-sm font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500","data-cms-ui":!0,children:"Upload"},void 0,!1,void 0,this),A("input",{ref:K,type:"file",accept:"image/*",class:"hidden",onChange:V,"data-cms-ui":!0},void 0,!1,void 0,this)]},void 0,!0,void 0,this),Y!==null&&A("div",{class:"px-4 py-2 bg-blue-50 border-b",children:A("div",{class:"flex items-center gap-2",children:[A("div",{class:"flex-1 h-2 bg-blue-200 rounded-full overflow-hidden",children:A("div",{class:"h-full bg-blue-600 transition-all duration-200",style:{width:`${Y}%`}},void 0,!1,void 0,this)},void 0,!1,void 0,this),A("span",{class:"text-sm text-blue-700",children:[Y,"%"]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),A("div",{class:"flex-1 overflow-auto p-4",children:J?A("div",{class:"flex items-center justify-center h-48",children:A("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},void 0,!1,void 0,this)},void 0,!1,void 0,this):j.length===0?A("div",{class:"flex flex-col items-center justify-center h-48 text-gray-500",children:[A("svg",{class:"w-12 h-12 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"},void 0,!1,void 0,this)},void 0,!1,void 0,this),A("p",{class:"text-sm",children:G?"No images found":"No images yet. Upload one to get started."},void 0,!1,void 0,this)]},void 0,!0,void 0,this):A("div",{class:"grid grid-cols-4 gap-3",children:j.map((R)=>A("button",{type:"button",onClick:()=>F(R),class:"group relative aspect-square rounded-lg overflow-hidden border-2 border-transparent hover:border-blue-500 focus:outline-none focus:border-blue-500 transition-colors","data-cms-ui":!0,children:[A("img",{src:R.url,alt:R.filename,class:"w-full h-full object-cover"},void 0,!1,void 0,this),A("div",{class:"absolute inset-0 bg-black/0 group-hover:bg-black/30 transition-colors"},void 0,!1,void 0,this),A("div",{class:"absolute bottom-0 left-0 right-0 p-2 bg-gradient-to-t from-black/70 to-transparent opacity-0 group-hover:opacity-100 transition-opacity",children:A("p",{class:"text-xs text-white truncate",children:R.filename},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},R.id,!0,void 0,this))},void 0,!1,void 0,this)},void 0,!1,void 0,this),A("div",{class:"px-4 py-3 border-t bg-gray-50 text-center text-sm text-gray-500",children:"Drag and drop images here to upload"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)}var v8=8;function qB({visible:Z,rect:Q,isComponent:J=!1,componentName:X,tagName:Y,element:q}){let G=x0(null),U=x0(null),K=x0(null),H=x0(null);return j0(()=>{if(G.current&&!U.current){U.current=G.current.attachShadow({mode:"open"});let W=document.createElement("style");W.textContent=`
        :host {
          position: fixed;
          top: 0;
          left: 0;
          pointer-events: none;
          z-index: 2147483646;
        }

        .outline-overlay {
          position: fixed;
          border-radius: 0;
          box-sizing: border-box;
          transition: opacity 100ms ease;
          overflow: visible;
        }

        .outline-overlay.hidden {
          opacity: 0;
        }

        .outline-overlay.visible {
          opacity: 1;
        }

        .outline-label {
          position: fixed;
          padding: 4px 10px;
          border-radius: 0;
          font-size: 11px;
          font-family: ui-monospace, SFMono-Regular, SF Mono, Menlo, Consolas, Liberation Mono, monospace;
          font-weight: 700;
          text-transform: uppercase;
          letter-spacing: 0.05em;
          white-space: nowrap;
          display: flex;
          align-items: center;
          gap: 6px;
          box-shadow: 4px 4px 0px 0px #000000;
          border: 2px solid black;
          z-index: 2147483647;
        }

        .outline-label .tag {
          opacity: 0.9;
        }

        .outline-label .component-name {
          font-weight: 800;
        }

        .outline-label .separator {
          opacity: 0.5;
        }
      `,K.current=document.createElement("div"),K.current.className="outline-overlay hidden",H.current=document.createElement("div"),H.current.className="outline-label",U.current.appendChild(W),U.current.appendChild(K.current),U.current.appendChild(H.current)}},[]),j0(()=>{if(!K.current||!H.current)return;if(!Z||!Q){K.current.className="outline-overlay hidden",H.current.style.display="none";return}K.current.className="outline-overlay visible";let{innerHeight:W,innerWidth:z}=window,F=Q.left-2,B=Q.top-2,V=Q.width+4,O=Q.height+4;if(K.current.style.left=`${F}px`,K.current.style.top=`${B}px`,K.current.style.width=`${V}px`,K.current.style.height=`${O}px`,J){K.current.style.border="4px solid black",K.current.style.backgroundColor="rgba(0, 90, 224, 0.1)",K.current.style.boxShadow="4px 4px 0px 0px rgba(0,0,0,0.2)",H.current.style.display="flex",H.current.style.backgroundColor="#005AE0",H.current.style.color="white";let N="";if(Y)N+=`<span class="tag">&lt;${Y}&gt;</span>`;if(X){if(Y)N+='<span class="separator">·</span>';N+=`<span class="component-name">${X}</span>`}if(!Y&&!X)N="COMPONENT";H.current.innerHTML=N;let{top:j,bottom:R,left:E}=Q,$=j-36,w=Math.max(v8,E);if(j<v8+36)$=Math.max(v8,Math.min(j+v8,R-36));if(j>W)H.current.style.display="none";else if(R<0)H.current.style.display="none";else $=Math.max(v8,Math.min($,W-36)),w=Math.min(w,z-150),H.current.style.top=`${$}px`,H.current.style.left=`${w}px`}else K.current.style.border="2px dashed black",K.current.style.backgroundColor="transparent",K.current.style.boxShadow="none",H.current.style.display="none"},[Z,Q,J,X,Y]),A("div",{ref:G,style:{position:"fixed",top:0,left:0,width:0,height:0,pointerEvents:"none",zIndex:2147483646}},void 0,!1,void 0,this)}function GB(Z){var Q,J,X="";if(typeof Z=="string"||typeof Z=="number")X+=Z;else if(typeof Z=="object")if(Array.isArray(Z)){var Y=Z.length;for(Q=0;Q<Y;Q++)Z[Q]&&(J=GB(Z[Q]))&&(X&&(X+=" "),X+=J)}else for(J in Z)Z[J]&&(X&&(X+=" "),X+=J);return X}function UB(){for(var Z,Q,J=0,X="",Y=arguments.length;J<Y;J++)(Z=arguments[J])&&(Q=GB(Z))&&(X&&(X+=" "),X+=Q);return X}var CD=(Z,Q)=>{let J=Array(Z.length+Q.length);for(let X=0;X<Z.length;X++)J[X]=Z[X];for(let X=0;X<Q.length;X++)J[Z.length+X]=Q[X];return J},yD=(Z,Q)=>({classGroupId:Z,validator:Q}),FB=(Z=new Map,Q=null,J)=>({nextPart:Z,validators:Q,classGroupId:J});var KB=[];var SD=(Z)=>{let Q=xD(Z),{conflictingClassGroups:J,conflictingClassGroupModifiers:X}=Z;return{getClassGroupId:(G)=>{if(G.startsWith("[")&&G.endsWith("]"))return wD(G);let U=G.split("-"),K=U[0]===""&&U.length>1?1:0;return BB(U,K,Q)},getConflictingClassGroupIds:(G,U)=>{if(U){let K=X[G],H=J[G];if(K){if(H)return CD(H,K);return K}return H||KB}return J[G]||KB}}},BB=(Z,Q,J)=>{if(Z.length-Q===0)return J.classGroupId;let Y=Z[Q],q=J.nextPart.get(Y);if(q){let H=BB(Z,Q+1,q);if(H)return H}let G=J.validators;if(G===null)return;let U=Q===0?Z.join("-"):Z.slice(Q).join("-"),K=G.length;for(let H=0;H<K;H++){let W=G[H];if(W.validator(U))return W.classGroupId}return},wD=(Z)=>Z.slice(1,-1).indexOf(":")===-1?void 0:(()=>{let Q=Z.slice(1,-1),J=Q.indexOf(":"),X=Q.slice(0,J);return X?"arbitrary.."+X:void 0})(),xD=(Z)=>{let{theme:Q,classGroups:J}=Z;return kD(J,Q)},kD=(Z,Q)=>{let J=FB();for(let X in Z){let Y=Z[X];lY(Y,J,X,Q)}return J},lY=(Z,Q,J,X)=>{let Y=Z.length;for(let q=0;q<Y;q++){let G=Z[q];gD(G,Q,J,X)}},gD=(Z,Q,J,X)=>{if(typeof Z==="string"){vD(Z,Q,J);return}if(typeof Z==="function"){hD(Z,Q,J,X);return}uD(Z,Q,J,X)},vD=(Z,Q,J)=>{let X=Z===""?Q:VB(Q,Z);X.classGroupId=J},hD=(Z,Q,J,X)=>{if(fD(Z)){lY(Z(X),Q,J,X);return}if(Q.validators===null)Q.validators=[];Q.validators.push(yD(J,Z))},uD=(Z,Q,J,X)=>{let Y=Object.entries(Z),q=Y.length;for(let G=0;G<q;G++){let[U,K]=Y[G];lY(K,VB(Q,U),J,X)}},VB=(Z,Q)=>{let J=Z,X=Q.split("-"),Y=X.length;for(let q=0;q<Y;q++){let G=X[q],U=J.nextPart.get(G);if(!U)U=FB(),J.nextPart.set(G,U);J=U}return J},fD=(Z)=>("isThemeGetter"in Z)&&Z.isThemeGetter===!0,mD=(Z)=>{if(Z<1)return{get:()=>{return},set:()=>{}};let Q=0,J=Object.create(null),X=Object.create(null),Y=(q,G)=>{if(J[q]=G,Q++,Q>Z)Q=0,X=J,J=Object.create(null)};return{get(q){let G=J[q];if(G!==void 0)return G;if((G=X[q])!==void 0)return Y(q,G),G},set(q,G){if(q in J)J[q]=G;else Y(q,G)}}};var pD=[],HB=(Z,Q,J,X,Y)=>({modifiers:Z,hasImportantModifier:Q,baseClassName:J,maybePostfixModifierPosition:X,isExternal:Y}),lD=(Z)=>{let{prefix:Q,experimentalParseClassName:J}=Z,X=(Y)=>{let q=[],G=0,U=0,K=0,H,W=Y.length;for(let O=0;O<W;O++){let N=Y[O];if(G===0&&U===0){if(N===":"){q.push(Y.slice(K,O)),K=O+1;continue}if(N==="/"){H=O;continue}}if(N==="[")G++;else if(N==="]")G--;else if(N==="(")U++;else if(N===")")U--}let z=q.length===0?Y:Y.slice(K),F=z,B=!1;if(z.endsWith("!"))F=z.slice(0,-1),B=!0;else if(z.startsWith("!"))F=z.slice(1),B=!0;let V=H&&H>K?H-K:void 0;return HB(q,B,F,V)};if(Q){let Y=Q+":",q=X;X=(G)=>G.startsWith(Y)?q(G.slice(Y.length)):HB(pD,!1,G,void 0,!0)}if(J){let Y=X;X=(q)=>J({className:q,parseClassName:Y})}return X},iD=(Z)=>{let Q=new Map;return Z.orderSensitiveModifiers.forEach((J,X)=>{Q.set(J,1e6+X)}),(J)=>{let X=[],Y=[];for(let q=0;q<J.length;q++){let G=J[q],U=G[0]==="[",K=Q.has(G);if(U||K){if(Y.length>0)Y.sort(),X.push(...Y),Y=[];X.push(G)}else Y.push(G)}if(Y.length>0)Y.sort(),X.push(...Y);return X}},dD=(Z)=>({cache:mD(Z.cacheSize),parseClassName:lD(Z),sortModifiers:iD(Z),...SD(Z)}),cD=/\s+/,rD=(Z,Q)=>{let{parseClassName:J,getClassGroupId:X,getConflictingClassGroupIds:Y,sortModifiers:q}=Q,G=[],U=Z.trim().split(cD),K="";for(let H=U.length-1;H>=0;H-=1){let W=U[H],{isExternal:z,modifiers:F,hasImportantModifier:B,baseClassName:V,maybePostfixModifierPosition:O}=J(W);if(z){K=W+(K.length>0?" "+K:K);continue}let N=!!O,j=X(N?V.substring(0,O):V);if(!j){if(!N){K=W+(K.length>0?" "+K:K);continue}if(j=X(V),!j){K=W+(K.length>0?" "+K:K);continue}N=!1}let R=F.length===0?"":F.length===1?F[0]:q(F).join(":"),E=B?R+"!":R,$=E+j;if(G.indexOf($)>-1)continue;G.push($);let w=Y(j,N);for(let I=0;I<w.length;++I){let g=w[I];G.push(E+g)}K=W+(K.length>0?" "+K:K)}return K},aD=(...Z)=>{let Q=0,J,X,Y="";while(Q<Z.length)if(J=Z[Q++]){if(X=LB(J))Y&&(Y+=" "),Y+=X}return Y},LB=(Z)=>{if(typeof Z==="string")return Z;let Q,J="";for(let X=0;X<Z.length;X++)if(Z[X]){if(Q=LB(Z[X]))J&&(J+=" "),J+=Q}return J},nD=(Z,...Q)=>{let J,X,Y,q,G=(K)=>{let H=Q.reduce((W,z)=>z(W),Z());return J=dD(H),X=J.cache.get,Y=J.cache.set,q=U,U(K)},U=(K)=>{let H=X(K);if(H)return H;let W=rD(K,J);return Y(K,W),W};return q=G,(...K)=>q(aD(...K))},sD=[],s0=(Z)=>{let Q=(J)=>J[Z]||sD;return Q.isThemeGetter=!0,Q},_B=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,OB=/^\((?:(\w[\w-]*):)?(.+)\)$/i,oD=/^\d+\/\d+$/,tD=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,eD=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,ZI=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,QI=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,JI=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,O2=(Z)=>oD.test(Z),q0=(Z)=>!!Z&&!Number.isNaN(Number(Z)),F4=(Z)=>!!Z&&Number.isInteger(Number(Z)),mY=(Z)=>Z.endsWith("%")&&q0(Z.slice(0,-1)),u5=(Z)=>tD.test(Z),XI=()=>!0,YI=(Z)=>eD.test(Z)&&!ZI.test(Z),NB=()=>!1,qI=(Z)=>QI.test(Z),GI=(Z)=>JI.test(Z),UI=(Z)=>!i(Z)&&!d(Z),KI=(Z)=>N2(Z,PB,NB),i=(Z)=>_B.test(Z),K6=(Z)=>N2(Z,RB,YI),pY=(Z)=>N2(Z,BI,q0),WB=(Z)=>N2(Z,jB,NB),HI=(Z)=>N2(Z,AB,GI),t9=(Z)=>N2(Z,MB,qI),d=(Z)=>OB.test(Z),h8=(Z)=>j2(Z,RB),WI=(Z)=>j2(Z,VI),zB=(Z)=>j2(Z,jB),zI=(Z)=>j2(Z,PB),FI=(Z)=>j2(Z,AB),e9=(Z)=>j2(Z,MB,!0),N2=(Z,Q,J)=>{let X=_B.exec(Z);if(X){if(X[1])return Q(X[1]);return J(X[2])}return!1},j2=(Z,Q,J=!1)=>{let X=OB.exec(Z);if(X){if(X[1])return Q(X[1]);return J}return!1},jB=(Z)=>Z==="position"||Z==="percentage",AB=(Z)=>Z==="image"||Z==="url",PB=(Z)=>Z==="length"||Z==="size"||Z==="bg-size",RB=(Z)=>Z==="length",BI=(Z)=>Z==="number",VI=(Z)=>Z==="family-name",MB=(Z)=>Z==="shadow";var LI=()=>{let Z=s0("color"),Q=s0("font"),J=s0("text"),X=s0("font-weight"),Y=s0("tracking"),q=s0("leading"),G=s0("breakpoint"),U=s0("container"),K=s0("spacing"),H=s0("radius"),W=s0("shadow"),z=s0("inset-shadow"),F=s0("text-shadow"),B=s0("drop-shadow"),V=s0("blur"),O=s0("perspective"),N=s0("aspect"),j=s0("ease"),R=s0("animate"),E=()=>["auto","avoid","all","avoid-page","page","left","right","column"],$=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],w=()=>[...$(),d,i],I=()=>["auto","hidden","clip","visible","scroll"],g=()=>["auto","contain","none"],S=()=>[d,i,K],u=()=>[O2,"full","auto",...S()],T=()=>[F4,"none","subgrid",d,i],F0=()=>["auto",{span:["full",F4,d,i]},F4,d,i],e=()=>[F4,"auto",d,i],m=()=>["auto","min","max","fr",d,i],c=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],o=()=>["start","end","center","stretch","center-safe","end-safe"],V0=()=>["auto",...S()],p=()=>[O2,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...S()],f=()=>[Z,d,i],T0=()=>[...$(),zB,WB,{position:[d,i]}],D=()=>["no-repeat",{repeat:["","x","y","space","round"]}],d0=()=>["auto","cover","contain",zI,KI,{size:[d,i]}],t0=()=>[mY,h8,K6],M=()=>["","none","full",H,d,i],B0=()=>["",q0,h8,K6],x1=()=>["solid","dashed","dotted","double"],z6=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],b0=()=>[q0,mY,zB,WB],w0=()=>["","none",V,d,i],Z5=()=>["none",q0,d,i],A1=()=>["none",q0,d,i],l1=()=>[q0,d,i],i1=()=>[O2,"full",...S()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[u5],breakpoint:[u5],color:[XI],container:[u5],"drop-shadow":[u5],ease:["in","out","in-out"],font:[UI],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[u5],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[u5],shadow:[u5],spacing:["px",q0],text:[u5],"text-shadow":[u5],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",O2,i,d,N]}],container:["container"],columns:[{columns:[q0,i,d,U]}],"break-after":[{"break-after":E()}],"break-before":[{"break-before":E()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:w()}],overflow:[{overflow:I()}],"overflow-x":[{"overflow-x":I()}],"overflow-y":[{"overflow-y":I()}],overscroll:[{overscroll:g()}],"overscroll-x":[{"overscroll-x":g()}],"overscroll-y":[{"overscroll-y":g()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:u()}],"inset-x":[{"inset-x":u()}],"inset-y":[{"inset-y":u()}],start:[{start:u()}],end:[{end:u()}],top:[{top:u()}],right:[{right:u()}],bottom:[{bottom:u()}],left:[{left:u()}],visibility:["visible","invisible","collapse"],z:[{z:[F4,"auto",d,i]}],basis:[{basis:[O2,"full","auto",U,...S()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[q0,O2,"auto","initial","none",i]}],grow:[{grow:["",q0,d,i]}],shrink:[{shrink:["",q0,d,i]}],order:[{order:[F4,"first","last","none",d,i]}],"grid-cols":[{"grid-cols":T()}],"col-start-end":[{col:F0()}],"col-start":[{"col-start":e()}],"col-end":[{"col-end":e()}],"grid-rows":[{"grid-rows":T()}],"row-start-end":[{row:F0()}],"row-start":[{"row-start":e()}],"row-end":[{"row-end":e()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":m()}],"auto-rows":[{"auto-rows":m()}],gap:[{gap:S()}],"gap-x":[{"gap-x":S()}],"gap-y":[{"gap-y":S()}],"justify-content":[{justify:[...c(),"normal"]}],"justify-items":[{"justify-items":[...o(),"normal"]}],"justify-self":[{"justify-self":["auto",...o()]}],"align-content":[{content:["normal",...c()]}],"align-items":[{items:[...o(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...o(),{baseline:["","last"]}]}],"place-content":[{"place-content":c()}],"place-items":[{"place-items":[...o(),"baseline"]}],"place-self":[{"place-self":["auto",...o()]}],p:[{p:S()}],px:[{px:S()}],py:[{py:S()}],ps:[{ps:S()}],pe:[{pe:S()}],pt:[{pt:S()}],pr:[{pr:S()}],pb:[{pb:S()}],pl:[{pl:S()}],m:[{m:V0()}],mx:[{mx:V0()}],my:[{my:V0()}],ms:[{ms:V0()}],me:[{me:V0()}],mt:[{mt:V0()}],mr:[{mr:V0()}],mb:[{mb:V0()}],ml:[{ml:V0()}],"space-x":[{"space-x":S()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":S()}],"space-y-reverse":["space-y-reverse"],size:[{size:p()}],w:[{w:[U,"screen",...p()]}],"min-w":[{"min-w":[U,"screen","none",...p()]}],"max-w":[{"max-w":[U,"screen","none","prose",{screen:[G]},...p()]}],h:[{h:["screen","lh",...p()]}],"min-h":[{"min-h":["screen","lh","none",...p()]}],"max-h":[{"max-h":["screen","lh",...p()]}],"font-size":[{text:["base",J,h8,K6]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[X,d,pY]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",mY,i]}],"font-family":[{font:[WI,i,Q]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[Y,d,i]}],"line-clamp":[{"line-clamp":[q0,"none",d,pY]}],leading:[{leading:[q,...S()]}],"list-image":[{"list-image":["none",d,i]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",d,i]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:f()}],"text-color":[{text:f()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...x1(),"wavy"]}],"text-decoration-thickness":[{decoration:[q0,"from-font","auto",d,K6]}],"text-decoration-color":[{decoration:f()}],"underline-offset":[{"underline-offset":[q0,"auto",d,i]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:S()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",d,i]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",d,i]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:T0()}],"bg-repeat":[{bg:D()}],"bg-size":[{bg:d0()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},F4,d,i],radial:["",d,i],conic:[F4,d,i]},FI,HI]}],"bg-color":[{bg:f()}],"gradient-from-pos":[{from:t0()}],"gradient-via-pos":[{via:t0()}],"gradient-to-pos":[{to:t0()}],"gradient-from":[{from:f()}],"gradient-via":[{via:f()}],"gradient-to":[{to:f()}],rounded:[{rounded:M()}],"rounded-s":[{"rounded-s":M()}],"rounded-e":[{"rounded-e":M()}],"rounded-t":[{"rounded-t":M()}],"rounded-r":[{"rounded-r":M()}],"rounded-b":[{"rounded-b":M()}],"rounded-l":[{"rounded-l":M()}],"rounded-ss":[{"rounded-ss":M()}],"rounded-se":[{"rounded-se":M()}],"rounded-ee":[{"rounded-ee":M()}],"rounded-es":[{"rounded-es":M()}],"rounded-tl":[{"rounded-tl":M()}],"rounded-tr":[{"rounded-tr":M()}],"rounded-br":[{"rounded-br":M()}],"rounded-bl":[{"rounded-bl":M()}],"border-w":[{border:B0()}],"border-w-x":[{"border-x":B0()}],"border-w-y":[{"border-y":B0()}],"border-w-s":[{"border-s":B0()}],"border-w-e":[{"border-e":B0()}],"border-w-t":[{"border-t":B0()}],"border-w-r":[{"border-r":B0()}],"border-w-b":[{"border-b":B0()}],"border-w-l":[{"border-l":B0()}],"divide-x":[{"divide-x":B0()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":B0()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...x1(),"hidden","none"]}],"divide-style":[{divide:[...x1(),"hidden","none"]}],"border-color":[{border:f()}],"border-color-x":[{"border-x":f()}],"border-color-y":[{"border-y":f()}],"border-color-s":[{"border-s":f()}],"border-color-e":[{"border-e":f()}],"border-color-t":[{"border-t":f()}],"border-color-r":[{"border-r":f()}],"border-color-b":[{"border-b":f()}],"border-color-l":[{"border-l":f()}],"divide-color":[{divide:f()}],"outline-style":[{outline:[...x1(),"none","hidden"]}],"outline-offset":[{"outline-offset":[q0,d,i]}],"outline-w":[{outline:["",q0,h8,K6]}],"outline-color":[{outline:f()}],shadow:[{shadow:["","none",W,e9,t9]}],"shadow-color":[{shadow:f()}],"inset-shadow":[{"inset-shadow":["none",z,e9,t9]}],"inset-shadow-color":[{"inset-shadow":f()}],"ring-w":[{ring:B0()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:f()}],"ring-offset-w":[{"ring-offset":[q0,K6]}],"ring-offset-color":[{"ring-offset":f()}],"inset-ring-w":[{"inset-ring":B0()}],"inset-ring-color":[{"inset-ring":f()}],"text-shadow":[{"text-shadow":["none",F,e9,t9]}],"text-shadow-color":[{"text-shadow":f()}],opacity:[{opacity:[q0,d,i]}],"mix-blend":[{"mix-blend":[...z6(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":z6()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[q0]}],"mask-image-linear-from-pos":[{"mask-linear-from":b0()}],"mask-image-linear-to-pos":[{"mask-linear-to":b0()}],"mask-image-linear-from-color":[{"mask-linear-from":f()}],"mask-image-linear-to-color":[{"mask-linear-to":f()}],"mask-image-t-from-pos":[{"mask-t-from":b0()}],"mask-image-t-to-pos":[{"mask-t-to":b0()}],"mask-image-t-from-color":[{"mask-t-from":f()}],"mask-image-t-to-color":[{"mask-t-to":f()}],"mask-image-r-from-pos":[{"mask-r-from":b0()}],"mask-image-r-to-pos":[{"mask-r-to":b0()}],"mask-image-r-from-color":[{"mask-r-from":f()}],"mask-image-r-to-color":[{"mask-r-to":f()}],"mask-image-b-from-pos":[{"mask-b-from":b0()}],"mask-image-b-to-pos":[{"mask-b-to":b0()}],"mask-image-b-from-color":[{"mask-b-from":f()}],"mask-image-b-to-color":[{"mask-b-to":f()}],"mask-image-l-from-pos":[{"mask-l-from":b0()}],"mask-image-l-to-pos":[{"mask-l-to":b0()}],"mask-image-l-from-color":[{"mask-l-from":f()}],"mask-image-l-to-color":[{"mask-l-to":f()}],"mask-image-x-from-pos":[{"mask-x-from":b0()}],"mask-image-x-to-pos":[{"mask-x-to":b0()}],"mask-image-x-from-color":[{"mask-x-from":f()}],"mask-image-x-to-color":[{"mask-x-to":f()}],"mask-image-y-from-pos":[{"mask-y-from":b0()}],"mask-image-y-to-pos":[{"mask-y-to":b0()}],"mask-image-y-from-color":[{"mask-y-from":f()}],"mask-image-y-to-color":[{"mask-y-to":f()}],"mask-image-radial":[{"mask-radial":[d,i]}],"mask-image-radial-from-pos":[{"mask-radial-from":b0()}],"mask-image-radial-to-pos":[{"mask-radial-to":b0()}],"mask-image-radial-from-color":[{"mask-radial-from":f()}],"mask-image-radial-to-color":[{"mask-radial-to":f()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":$()}],"mask-image-conic-pos":[{"mask-conic":[q0]}],"mask-image-conic-from-pos":[{"mask-conic-from":b0()}],"mask-image-conic-to-pos":[{"mask-conic-to":b0()}],"mask-image-conic-from-color":[{"mask-conic-from":f()}],"mask-image-conic-to-color":[{"mask-conic-to":f()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:T0()}],"mask-repeat":[{mask:D()}],"mask-size":[{mask:d0()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",d,i]}],filter:[{filter:["","none",d,i]}],blur:[{blur:w0()}],brightness:[{brightness:[q0,d,i]}],contrast:[{contrast:[q0,d,i]}],"drop-shadow":[{"drop-shadow":["","none",B,e9,t9]}],"drop-shadow-color":[{"drop-shadow":f()}],grayscale:[{grayscale:["",q0,d,i]}],"hue-rotate":[{"hue-rotate":[q0,d,i]}],invert:[{invert:["",q0,d,i]}],saturate:[{saturate:[q0,d,i]}],sepia:[{sepia:["",q0,d,i]}],"backdrop-filter":[{"backdrop-filter":["","none",d,i]}],"backdrop-blur":[{"backdrop-blur":w0()}],"backdrop-brightness":[{"backdrop-brightness":[q0,d,i]}],"backdrop-contrast":[{"backdrop-contrast":[q0,d,i]}],"backdrop-grayscale":[{"backdrop-grayscale":["",q0,d,i]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[q0,d,i]}],"backdrop-invert":[{"backdrop-invert":["",q0,d,i]}],"backdrop-opacity":[{"backdrop-opacity":[q0,d,i]}],"backdrop-saturate":[{"backdrop-saturate":[q0,d,i]}],"backdrop-sepia":[{"backdrop-sepia":["",q0,d,i]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":S()}],"border-spacing-x":[{"border-spacing-x":S()}],"border-spacing-y":[{"border-spacing-y":S()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",d,i]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[q0,"initial",d,i]}],ease:[{ease:["linear","initial",j,d,i]}],delay:[{delay:[q0,d,i]}],animate:[{animate:["none",R,d,i]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[O,d,i]}],"perspective-origin":[{"perspective-origin":w()}],rotate:[{rotate:Z5()}],"rotate-x":[{"rotate-x":Z5()}],"rotate-y":[{"rotate-y":Z5()}],"rotate-z":[{"rotate-z":Z5()}],scale:[{scale:A1()}],"scale-x":[{"scale-x":A1()}],"scale-y":[{"scale-y":A1()}],"scale-z":[{"scale-z":A1()}],"scale-3d":["scale-3d"],skew:[{skew:l1()}],"skew-x":[{"skew-x":l1()}],"skew-y":[{"skew-y":l1()}],transform:[{transform:[d,i,"","none","gpu","cpu"]}],"transform-origin":[{origin:w()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:i1()}],"translate-x":[{"translate-x":i1()}],"translate-y":[{"translate-y":i1()}],"translate-z":[{"translate-z":i1()}],"translate-none":["translate-none"],accent:[{accent:f()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:f()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",d,i]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":S()}],"scroll-mx":[{"scroll-mx":S()}],"scroll-my":[{"scroll-my":S()}],"scroll-ms":[{"scroll-ms":S()}],"scroll-me":[{"scroll-me":S()}],"scroll-mt":[{"scroll-mt":S()}],"scroll-mr":[{"scroll-mr":S()}],"scroll-mb":[{"scroll-mb":S()}],"scroll-ml":[{"scroll-ml":S()}],"scroll-p":[{"scroll-p":S()}],"scroll-px":[{"scroll-px":S()}],"scroll-py":[{"scroll-py":S()}],"scroll-ps":[{"scroll-ps":S()}],"scroll-pe":[{"scroll-pe":S()}],"scroll-pt":[{"scroll-pt":S()}],"scroll-pr":[{"scroll-pr":S()}],"scroll-pb":[{"scroll-pb":S()}],"scroll-pl":[{"scroll-pl":S()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",d,i]}],fill:[{fill:["none",...f()]}],"stroke-w":[{stroke:[q0,h8,K6,pY]}],stroke:[{stroke:["none",...f()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}};var DB=nD(LI);var o1=(...Z)=>DB(UB(...Z));var B4={weight:{normal:{class:"font-normal",label:"Normal"},medium:{class:"font-medium",label:"Medium"},semibold:{class:"font-semibold",label:"Semibold"},bold:{class:"font-bold",label:"Bold"}},decoration:{none:{class:"no-underline",label:"None"},underline:{class:"underline",label:"Underline"},lineThrough:{class:"line-through",label:"Strikethrough"}},style:{normal:{class:"not-italic",label:"Normal"},italic:{class:"italic",label:"Italic"}},color:{inherit:{class:"text-inherit",label:"Inherit"},slate:{class:"text-slate-700",label:"Slate"},gray:{class:"text-gray-700",label:"Gray"},red:{class:"text-red-600",label:"Red"},orange:{class:"text-orange-600",label:"Orange"},amber:{class:"text-amber-600",label:"Amber"},green:{class:"text-green-600",label:"Green"},blue:{class:"text-blue-600",label:"Blue"},purple:{class:"text-purple-600",label:"Purple"}},highlight:{none:{class:"",label:"None"},yellow:{class:"bg-yellow-200",label:"Yellow"},green:{class:"bg-green-200",label:"Green"},blue:{class:"bg-blue-200",label:"Blue"},pink:{class:"bg-pink-200",label:"Pink"}},size:{xs:{class:"text-xs",label:"XS"},sm:{class:"text-sm",label:"SM"},base:{class:"text-base",label:"Base"},lg:{class:"text-lg",label:"LG"},xl:{class:"text-xl",label:"XL"},"2xl":{class:"text-2xl",label:"2XL"}}},IB={weight:"normal",decoration:"none",style:"normal",color:"inherit",highlight:"none",size:"base"},dY=new Map;for(let[Z,Q]of Object.entries(B4))for(let[J,X]of Object.entries(Q))if(X.class)dY.set(X.class,{category:Z,key:J});var _I=new Set(dY.keys());function f8(Z){let Q=window.getSelection();if(!Q||Q.isCollapsed||Q.rangeCount===0)return null;let J=Q.getRangeAt(0);if(!Z.contains(J.commonAncestorContainer))return null;let X=Q.toString();if(!X.trim())return null;let{anchorNode:Y,focusNode:q}=Q;if(!Y||!q)return null;return{startOffset:J.startOffset,endOffset:J.endOffset,text:X,range:J,anchorNode:Y,focusNode:q}}function u8(Z){let Q=[];for(let[J,X]of Object.entries(Z)){if(X===void 0)continue;let Y=IB[J];if(X===Y)continue;let G=B4[J][X];if(G?.class)Q.push(G.class)}return Q.join(" ")}function t1(Z){if(!Z)return{};let Q=Z.split(/\s+/).filter(Boolean),J={};for(let X of Q){let Y=dY.get(X);if(Y)J[Y.category]=Y.key}return J}function OI(Z){let Q=Z.split(/\s+/).filter(Boolean),J=[],X=[];for(let Y of Q)if(_I.has(Y))J.push(Y);else X.push(Y);return{styleClasses:J,otherClasses:X}}function ZZ(Z){let Q=document.createElement("span");Q.setAttribute("data-cms-styled","true");let J=u8(Z);if(J)Q.className=J;return Q}function m8(Z){let Q=window.getSelection();if(!Q||Q.rangeCount===0)return null;let X=Q.getRangeAt(0).commonAncestorContainer,Y=X.nodeType===Node.TEXT_NODE?X.parentElement:X;while(Y!==null&&Y!==Z){if(Y.hasAttribute("data-cms-styled"))return Y;Y=Y.parentElement}return null}function NI(Z){let Q=Z.parentNode;if(!Q)return;while(Z.firstChild)Q.insertBefore(Z.firstChild,Z);Q.removeChild(Z),Q.normalize()}function iY(Z,Q){let J=t1(Z.className),{otherClasses:X}=OI(Z.className),Y={...J,...Q},q=u8(Y);if(q||X.length>0)Z.className=[...X,q].filter(Boolean).join(" ");else NI(Z)}function jI(Z,Q){let J=(Y)=>{if(Y.nodeType===Node.ELEMENT_NODE){let q=Y;if(q.hasAttribute("data-cms-styled")){let G=t1(q.className),K={...t1(Q.className),...G};Q.className=u8(K)||"";let H=Array.from(q.childNodes);for(let W of H)J(W)}else{let G=q.cloneNode(!1),U=Array.from(q.childNodes);for(let K of U)if(K.nodeType===Node.ELEMENT_NODE){let H=K;if(H.hasAttribute("data-cms-styled")){let W=Array.from(H.childNodes);for(let V of W)G.appendChild(V.cloneNode(!0));let z=t1(H.className),B={...t1(Q.className),...z};Q.className=u8(B)||""}else G.appendChild(K.cloneNode(!0))}else G.appendChild(K.cloneNode(!0));Q.appendChild(G)}}else Q.appendChild(Y.cloneNode(!0))},X=Array.from(Z.childNodes);for(let Y of X)J(Y)}function AI(Z,Q){let J=Z.nextSibling;while(J&&J!==Q){if(J.nodeType===Node.TEXT_NODE){if(J.textContent&&J.textContent.trim()!=="")return!1}else if(J.nodeType===Node.ELEMENT_NODE)return!1;J=J.nextSibling}return J===Q}function EB(Z){let Q=Array.from(Z.querySelectorAll("[data-cms-styled]"));for(let J of Q)if(!J.textContent&&!J.querySelector("*"))J.remove()}function TB(Z){let Q=Array.from(Z.querySelectorAll("[data-cms-styled]")),J=!0;while(J){J=!1,Q=Array.from(Z.querySelectorAll("[data-cms-styled]"));for(let X=0;X<Q.length-1;X++){let Y=Q[X],q=Q[X+1];if(!Y.parentNode||!q.parentNode)continue;if(AI(Y,q)&&Y.className===q.className){while(q.firstChild)Y.appendChild(q.firstChild);q.remove(),J=!0;break}}}EB(Z),Z.normalize()}function PI(Z,Q,J){let X=u8(J),Y=m8(Z);if(Y){let q=Q.range,G=document.createRange();if(G.selectNodeContents(Y),q.compareBoundaryPoints(Range.START_TO_START,G)===0&&q.compareBoundaryPoints(Range.END_TO_END,G)===0)return iY(Y,J),Y;return RI(Z,Y,Q,J)}if(!X)return null;try{let q=ZZ(J),G=Q.range.extractContents();return jI(G,q),Q.range.insertNode(q),Z.normalize(),TB(Z),q}catch(q){return console.error("[CMS] Failed to wrap selection:",q),null}}function RI(Z,Q,J,X){try{let Y=J.range,q=t1(Q.className),G=document.createRange();G.setStart(Q,0),G.setEnd(Y.startContainer,Y.startOffset);let U=document.createRange();U.setStart(Y.endContainer,Y.endOffset),U.setEndAfter(Q.lastChild||Q);let K=G.extractContents(),H=Y.extractContents(),W=U.extractContents(),z=Q.parentNode;if(!z)return null;let F=K.textContent?.trim()||K.querySelector("*")?ZZ(q):null,B=ZZ({...q,...X}),V=W.textContent?.trim()||W.querySelector("*")?ZZ(q):null;if(F)F.appendChild(K);if(B.appendChild(H),V)V.appendChild(W);if(F)z.insertBefore(F,Q);if(z.insertBefore(B,Q),V)z.insertBefore(V,Q);return Q.remove(),EB(Z),TB(Z),Z.normalize(),B}catch(Y){return console.error("[CMS] Failed to split and style selection:",Y),null}}function MI(Z,Q,J){let X=f8(Z);if(!X)return null;let Y={[Q]:J};return PI(Z,X,Y)}function $B(Z,Q,J){let X=m8(Z);if(X)if(t1(X.className)[Q]===J){let G=IB[Q];return iY(X,{[Q]:G}),null}else return iY(X,{[Q]:J}),X;return MI(Z,Q,J)}function cY(Z){let Q=m8(Z);if(!Q)return{};return t1(Q.className)}function bB(Z,Q){let J=B4[Z];return typeof Q==="string"&&Q in J}var CB='<div aria-hidden="true" class="!hidden font-normal font-medium font-semibold font-bold no-underline underline line-through not-italic italic text-inherit text-slate-700 text-gray-700 text-red-600 text-orange-600 text-amber-600 text-green-600 text-blue-600 text-purple-600 bg-yellow-200 bg-green-200 bg-blue-200 bg-pink-200 text-xs text-sm text-base text-lg text-xl text-2xl"></div>';function QZ({label:Z,icon:Q,isActive:J,onClick:X}){return A("button",{type:"button",onClick:X,title:Z,class:o1("w-7 h-7 flex items-center justify-center rounded transition-colors cursor-pointer",J?"bg-blue-bold text-white":"hover:bg-slate-100 text-slate-700"),children:Q},void 0,!1,void 0,this)}function DI({color:Z,label:Q,isActive:J,onClick:X}){return A("button",{type:"button",onClick:X,title:Q,class:o1("w-5 h-5 rounded-full border-2 transition-transform cursor-pointer",J?"border-blue-bold scale-125":"border-transparent hover:scale-110"),style:{backgroundColor:Z}},void 0,!1,void 0,this)}var p8={inherit:"#374151",slate:"#334155",gray:"#374151",red:"#dc2626",orange:"#ea580c",amber:"#d97706",green:"#16a34a",blue:"#2563eb",purple:"#9333ea"},yB={none:"transparent",yellow:"#fef08a",green:"#bbf7d0",blue:"#bfdbfe",pink:"#fbcfe8"};function SB({visible:Z,rect:Q,element:J,onStyleChange:X}){let[Y,q]=J0({}),[G,U]=J0(!1),[K,H]=J0(!1);j0(()=>{if(!Z||!J){q({}),U(!1),H(!1);return}let R=()=>{q(cY(J))};return R(),document.addEventListener("selectionchange",R),()=>document.removeEventListener("selectionchange",R)},[Z,J]);let W=U0((R,E)=>{if(!J)return;if(!bB(R,E)){console.warn(`[CMS] Invalid style value: ${R}=${String(E)}`);return}let $=f8(J),w=m8(J);if(!$&&!w)return;let I=J.getAttribute(X0.ID_ATTRIBUTE);if(I)j6(I);let g=$B(J,R,E);if(J.dispatchEvent(new Event("input",{bubbles:!0})),g)q(t1(g.className));else if(w)if(w.parentElement)q(t1(w.className));else q({});else q(cY(J));X?.()},[J,X]);if(!Z||!Q)return null;let z=44,F=320,B=Q.left+Q.width/2-F/2,V=Q.top-z-8,O=10,N=window.innerWidth-F-O;if(B=Math.max(O,Math.min(B,N)),V<O)V=Q.bottom+8;return A("div",{"data-cms-ui":!0,onMouseDown:(R)=>R.stopPropagation(),onClick:(R)=>R.stopPropagation(),style:{position:"fixed",left:`${B}px`,top:`${V}px`,zIndex:oG.MODAL,fontFamily:"system-ui, -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"12px"},children:A("div",{class:"flex items-center gap-1 px-2 py-1.5 bg-white border-2 border-black shadow-brutalist-sm rounded",children:[A(QZ,{category:"weight",value:"bold",label:"Bold",isActive:Y.weight==="bold",onClick:()=>W("weight","bold"),icon:A("span",{class:"font-bold text-sm",children:"B"},void 0,!1,void 0,this)},void 0,!1,void 0,this),A(QZ,{category:"style",value:"italic",label:"Italic",isActive:Y.style==="italic",onClick:()=>W("style","italic"),icon:A("span",{class:"italic text-sm",children:"I"},void 0,!1,void 0,this)},void 0,!1,void 0,this),A(QZ,{category:"decoration",value:"underline",label:"Underline",isActive:Y.decoration==="underline",onClick:()=>W("decoration","underline"),icon:A("span",{class:"underline text-sm",children:"U"},void 0,!1,void 0,this)},void 0,!1,void 0,this),A(QZ,{category:"decoration",value:"lineThrough",label:"Strikethrough",isActive:Y.decoration==="lineThrough",onClick:()=>W("decoration","lineThrough"),icon:A("span",{class:"line-through text-sm",children:"S"},void 0,!1,void 0,this)},void 0,!1,void 0,this),A("div",{class:"w-px h-5 bg-slate-200 mx-1"},void 0,!1,void 0,this),A("div",{class:"relative",children:[A("button",{type:"button",onClick:()=>{U(!G),H(!1)},title:"Text Color",class:o1("w-7 h-7 flex items-center justify-center rounded transition-colors cursor-pointer",G?"bg-slate-100":"hover:bg-slate-100"),children:[A("span",{class:"text-sm",style:{color:Y.color?p8[Y.color]:p8.inherit},children:"A"},void 0,!1,void 0,this),A("div",{class:"absolute bottom-0.5 left-1.5 right-1.5 h-0.5 rounded",style:{backgroundColor:Y.color?p8[Y.color]:p8.inherit}},void 0,!1,void 0,this)]},void 0,!0,void 0,this),G&&A("div",{class:"absolute top-full left-0 mt-1 p-2 bg-white border-2 border-black shadow-brutalist-sm rounded flex gap-1.5 flex-wrap w-32 z-10",children:Object.entries(p8).map(([R,E])=>A(DI,{color:E,tailwindClass:B4.color[R]?.class||"",label:B4.color[R]?.label||R,isActive:Y.color===R,onClick:()=>{W("color",R),U(!1)}},R,!1,void 0,this))},void 0,!1,void 0,this)]},void 0,!0,void 0,this),A("div",{class:"relative",children:[A("button",{type:"button",onClick:()=>{H(!K),U(!1)},title:"Highlight",class:o1("w-7 h-7 flex items-center justify-center rounded transition-colors cursor-pointer",K?"bg-slate-100":"hover:bg-slate-100"),children:[A("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[A("path",{d:"M12 20h9"},void 0,!1,void 0,this),A("path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),A("div",{class:"absolute bottom-0.5 left-1 right-1 h-1.5 rounded",style:{backgroundColor:Y.highlight?yB[Y.highlight]:"transparent",border:Y.highlight&&Y.highlight!=="none"?"none":"1px solid #e2e8f0"}},void 0,!1,void 0,this)]},void 0,!0,void 0,this),K&&A("div",{class:"absolute top-full left-0 mt-1 p-2 bg-white border-2 border-black shadow-brutalist-sm rounded flex gap-1.5 flex-wrap w-28 z-10",children:Object.entries(yB).map(([R,E])=>A("button",{type:"button",onClick:()=>{W("highlight",R),H(!1)},title:B4.highlight[R]?.label||R,class:o1("w-5 h-5 rounded border-2 transition-transform cursor-pointer",Y.highlight===R?"border-blue-bold scale-125":"border-slate-200 hover:scale-110"),style:{backgroundColor:E==="transparent"?"#fff":E}},R,!1,void 0,this))},void 0,!1,void 0,this)]},void 0,!0,void 0,this),A("div",{class:"w-px h-5 bg-slate-200 mx-1"},void 0,!1,void 0,this),A("select",{value:Y.size||"base",onChange:(R)=>W("size",R.target.value),class:"h-7 px-1 text-xs border border-slate-200 rounded bg-white cursor-pointer hover:border-slate-300 focus:outline-none focus:border-blue-bold",children:Object.entries(B4.size).map(([R,{label:E}])=>A("option",{value:R,children:E},R,!1,void 0,this))},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)}var wB=({id:Z,message:Q,type:J,onRemove:X})=>{let[Y,q]=J0(!0);return j0(()=>{let U=setTimeout(()=>{q(!1)},c1.TOAST_VISIBLE_DURATION_MS),K=setTimeout(()=>{X(Z)},c1.TOAST_VISIBLE_DURATION_MS+c1.TOAST_FADE_DURATION_MS);return()=>{clearTimeout(U),clearTimeout(K)}},[Z,X]),A("div",{class:`
        px-4 py-3 font-sans text-[13px] font-bold uppercase tracking-wide
        shadow-brutalist-sm border-2 border-black
        transition-all duration-300 ease-out flex items-center gap-3
        ${{error:"bg-white border-l-4 border-l-red-600 text-slate-800",success:"bg-white border-l-4 border-l-emerald-600 text-slate-800",info:"bg-white border-l-4 border-l-blue-600 text-slate-800"}[J]}
        ${Y?"opacity-100 translate-y-0 scale-100":"opacity-0 translate-y-2 scale-95"}
      `,children:[J==="success"&&A("span",{class:"text-emerald-600 font-black text-lg",children:"✓"},void 0,!1,void 0,this),J==="error"&&A("span",{class:"text-red-600 font-black text-lg",children:"✕"},void 0,!1,void 0,this),J==="info"&&A("span",{class:"text-blue-600 font-black text-lg",children:"ℹ"},void 0,!1,void 0,this),Q]},void 0,!0,void 0,this)};var xB=({toasts:Z,onRemove:Q})=>{return A("div",{class:"fixed left-1/2 -translate-x-1/2 bottom-20 z-2147483648 flex flex-col gap-2 items-center",children:Z.map((J)=>A(wB,{...J,onRemove:Q},J.id,!1,void 0,this))},void 0,!1,void 0,this)};var kB=({callbacks:Z})=>{let Q=M1.value,J=x2.value,X=d1.value,Y=CZ.value,q=Q&&!J,G=(U)=>U.stopPropagation();return A("div",{class:"fixed bottom-8 left-1/2 z-2147483647 -translate-x-1/2 min-w-md font-sans transition-all duration-300 flex","data-cms-ui":!0,onMouseDown:G,onClick:G,children:[A("div",{class:"flex-1 gap-4 text-sm pl-5 pr-3 py-3 flex items-center bg-blue-bold border-4 border-black text-slate-600 shadow-brutalist-sm md:shadow-brutalist-md",children:A("div",{class:"flex items-center gap-6 grow",children:A("div",{class:"font-medium text-white",children:Y===0?"Let's start editing...":`${Y} change${Y!==1?"s":""}`},void 0,!1,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this),q&&A(A2,{onClick:()=>Z.onAIChat?.(),class:o1("border-y-4 border-x-2 border-black bg-purple-600 text-white hover:bg-purple-800"),children:X?"Close Chat":"AI Chat"},void 0,!1,void 0,this),Q&&!J&&Z.onNewPage&&A(A2,{onClick:()=>Z.onNewPage?.(),class:o1("border-y-4 border-x-2 border-black bg-emerald-600 text-white hover:bg-emerald-700"),children:"+ Page"},void 0,!1,void 0,this),Q&&!J&&Z.onMediaLibrary&&A(A2,{onClick:()=>Z.onMediaLibrary?.(),class:o1("border-y-4 border-x-2 border-black bg-indigo-600 text-white hover:bg-indigo-700"),children:"Media"},void 0,!1,void 0,this),(!Q||Y<1)&&A(A2,{onClick:Z.onEdit,class:"bg-black text-white",children:Q?"Done":"Edit"},void 0,!1,void 0,this),Y>0&&!J&&A(X1,{children:[A(A2,{class:"text-white bg-green-600 hover:bg-green-800 border-y-4 border-x-2 border-black",onClick:Z.onSave,children:"Save"},void 0,!1,void 0,this),A(A2,{onClick:Z.onDiscard,class:"bg-rose-600 text-white hover:bg-rose-700 border-y-4 border-x-2 border-r-4 border-black",children:"Discard"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},A2=({children:Z,onClick:Q,class:J})=>{return A("button",{onClick:(X)=>{X.stopPropagation(),Q()},class:o1("cursor-pointer px-4 py-2 font-medium transition-all duration-200 flex items-center justify-center shadow-brutalist-sm md:shadow-brutalist-md",J),children:Z},void 0,!1,void 0,this)};var gB=new WeakMap,e1=null,vB=!1;class hB extends HTMLElement{shadow;overlayElement;resizeObserver=null;targetElement=null;animationFrameId=null;constructor(){super();this.shadow=this.attachShadow({mode:"open"});let Z=document.createElement("style");Z.textContent=`
      :host {
        position: absolute;
        pointer-events: none;
        z-index: 2147483645;
        box-sizing: border-box;
      }

      .overlay {
        position: absolute;
        inset: 0;
        border-radius: 0;
        box-sizing: border-box;
        transition: border-color 150ms ease, border-style 150ms ease;
        box-shadow: 4px 4px 0px 0px rgba(0,0,0,0.2);
      }
    `,this.overlayElement=document.createElement("div"),this.overlayElement.className="overlay",this.shadow.appendChild(Z),this.shadow.appendChild(this.overlayElement)}connectedCallback(){this.startPositionTracking()}disconnectedCallback(){this.stopPositionTracking()}setTarget(Z){if(this.targetElement=Z,this.updatePosition(),this.resizeObserver)this.resizeObserver.disconnect();this.resizeObserver=new ResizeObserver(()=>{this.updatePosition()}),this.resizeObserver.observe(Z)}setHighlightStyle(Z,Q){this.overlayElement.style.borderWidth="4px",this.overlayElement.style.borderColor=Z,this.overlayElement.style.borderStyle=Q}updatePosition(){if(!this.targetElement)return;let Z=this.targetElement.getBoundingClientRect(),Q=window.scrollX,J=window.scrollY;this.style.left=`${Z.left+Q-2}px`,this.style.top=`${Z.top+J-2}px`,this.style.width=`${Z.width+4}px`,this.style.height=`${Z.height+4}px`}startPositionTracking(){let Z=()=>{this.updatePosition(),this.animationFrameId=requestAnimationFrame(Z)};this.animationFrameId=requestAnimationFrame(Z)}stopPositionTracking(){if(this.animationFrameId!==null)cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null;if(this.resizeObserver)this.resizeObserver.disconnect(),this.resizeObserver=null}}function II(){if(vB)return;if(typeof window>"u"||typeof customElements>"u")return;if(!customElements.get("cms-highlight-overlay"))customElements.define("cms-highlight-overlay",hB);vB=!0}function rY(){if(typeof document>"u")return;if(e1)return;II(),e1=document.createElement("div"),e1.id="cms-highlight-container",e1.style.cssText=`
    position: absolute;
    top: 0;
    left: 0;
    width: 0;
    height: 0;
    pointer-events: none;
    z-index: 2147483645;
  `,document.body.appendChild(e1)}function uB(){if(e1)e1.remove(),e1=null}function fB(Z,Q,J="solid"){rY();let X=gB.get(Z);if(!X)X=document.createElement("cms-highlight-overlay"),gB.set(Z,X),e1?.appendChild(X),X.setTarget(Z);X.setHighlightStyle(Q,J)}function mB(){if(e1)e1.innerHTML=""}function aY(Z,Q,J){let X=document.elementsFromPoint(Z,Q);for(let Y of X){if(!(Y instanceof HTMLElement))continue;if(!Y.hasAttribute(X0.ID_ATTRIBUTE))continue;if(Y.hasAttribute(X0.COMPONENT_ID_ATTRIBUTE))continue;let q=Y.getAttribute(X0.ID_ATTRIBUTE);if(J&&q&&!J[q])continue;if(Y.contentEditable==="true")return Y}for(let Y of X){if(!(Y instanceof HTMLElement))continue;if(!Y.hasAttribute(X0.ID_ATTRIBUTE))continue;if(Y.hasAttribute(X0.COMPONENT_ID_ATTRIBUTE))continue;let q=Y.getAttribute(X0.ID_ATTRIBUTE);if(J&&q&&!J[q])continue;return Y}return null}function nY(Z,Q){let J=document.elementsFromPoint(Z,Q);for(let X of J){if(!(X instanceof HTMLElement))continue;if(X.hasAttribute(X0.COMPONENT_ID_ATTRIBUTE))return X}return null}function sY(Z,Q,J,X=24){if(Z<J.left||Z>J.right||Q<J.top||Q>J.bottom)return!1;let Y=Z-J.left<X,q=J.right-Z<X,G=Q-J.top<X,U=J.bottom-Q<X;return Y||q||G||U}function EI(Z){let Q="";return Z.childNodes.forEach((J)=>{if(J.nodeType===Node.TEXT_NODE)Q+=J.nodeValue||"";else if(J.nodeType===Node.ELEMENT_NODE){let X=J,Y=X.getAttribute(X0.ID_ATTRIBUTE);if(Y)Q+=`{{cms:${Y}}}`;else Q+=X.textContent||""}}),Q}function R2(Z){return EI(Z).trim()}function oY(Z){let Q=Z.cloneNode(!0);return Q.removeAttribute("contenteditable"),Q.querySelectorAll("[contenteditable]").forEach((J)=>{J.removeAttribute("contenteditable")}),Q.innerHTML}function pB(Z){return Array.from(Z.querySelectorAll(`[${X0.ID_ATTRIBUTE}]`)).map((Q)=>({id:Q.getAttribute(X0.ID_ATTRIBUTE)||"",placeholder:`__CMS_CHILD_${Q.getAttribute(X0.ID_ATTRIBUTE)}__`}))}function lB(Z){if(!Z||!(Z instanceof HTMLElement))return null;let Q=Z;while(Q&&Q!==document.body){if(Q.hasAttribute(X0.ID_ATTRIBUTE)&&Q.contentEditable==="true")return Q;Q=Q.parentElement}return null}function tY(){return document.querySelectorAll(`[${X0.ID_ATTRIBUTE}]`)}function eY(Z){Z.contentEditable="true"}function H6(Z){Z.contentEditable="false"}function W6(Z,Q,J="solid"){fB(Z,Q,J)}function iB(){rY()}function Zq(){mB(),uB()}function z0(Z,...Q){if(!Z)return;console.debug("[CMS]",...Q)}function dB(){document.querySelectorAll("a").forEach((X)=>{X.setAttribute("data-cms-disabled","true"),X.addEventListener("click",P2,!0)}),document.querySelectorAll('button, input[type="submit"], input[type="button"], input[type="reset"]').forEach((X)=>{X.setAttribute("data-cms-disabled","true"),X.addEventListener("click",P2,!0)}),document.querySelectorAll("form").forEach((X)=>{X.setAttribute("data-cms-disabled","true"),X.addEventListener("submit",P2,!0)})}function cB(){document.querySelectorAll("a[data-cms-disabled]").forEach((X)=>{X.removeAttribute("data-cms-disabled"),X.removeEventListener("click",P2,!0)}),document.querySelectorAll("button[data-cms-disabled], input[data-cms-disabled]").forEach((X)=>{X.removeAttribute("data-cms-disabled"),X.removeEventListener("click",P2,!0)}),document.querySelectorAll("form[data-cms-disabled]").forEach((X)=>{X.removeAttribute("data-cms-disabled"),X.removeEventListener("submit",P2,!0)})}function P2(Z){if(Z.currentTarget.hasAttribute("data-cms-disabled"))Z.preventDefault(),Z.stopPropagation(),Z.stopImmediatePropagation()}async function Qq(Z,Q={},J=A6.REQUEST_TIMEOUT_MS){let X=new AbortController,Y=setTimeout(()=>X.abort(),J);try{return await fetch(Z,{...Q,signal:X.signal})}finally{clearTimeout(Y)}}function TI(Z){let Q=Z;if(Q.length>1&&Q.endsWith("/"))Q=Q.slice(0,-1);if(Q==="/"||Q==="")return"/index.json";return`/${Q.replace(/^\//,"")}.json`}async function aB(){let Z=window.location.pathname,Q=[TI(Z),"/cms-manifest.json"],J=null;for(let X of Q)try{let Y=await Qq(X);if(Y.ok)return Y.json()}catch(Y){J=Y instanceof Error?Y:Error(String(Y))}throw J||Error("Failed to load manifest from all sources")}async function nB(Z,Q){let J=await Qq(`${Z}/update`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(Q)});if(!J.ok){let X=await J.text().catch(()=>"");throw Error(`Save failed (${J.status}): ${X||J.statusText}`)}return J.json().catch(()=>({updated:0}))}function rB(Z){if(Z==="[DONE]")return{type:"done"};try{return JSON.parse(Z)}catch{return null}}async function sB(Z,Q,J,X){let Y=new AbortController,q=setTimeout(()=>Y.abort(),A6.AI_STREAM_TIMEOUT_MS);if(X)X.addEventListener("abort",()=>Y.abort());try{let G=await fetch(`${Z}/ai/chat`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(Q),signal:Y.signal});if(!G.ok){let W=await G.text().catch(()=>"");J.onError?.(W||`Request failed (${G.status})`,String(G.status));return}if(!G.body){J.onError?.("No response body");return}let U=G.body.getReader(),K=new TextDecoder,H="";while(!0){let{done:W,value:z}=await U.read();if(W)break;H+=K.decode(z,{stream:!0});let F=H.split(`
`);H=F.pop()||"";for(let B of F)if(B.startsWith("data: ")){let V=B.slice(6).trim();if(!V)continue;let O=rB(V);if(!O)continue;switch(O.type){case"token":J.onToken?.(O.token,O.fullText);break;case"status":J.onStatus?.(O.status,O.message);break;case"action":J.onAction?.(O.action);break;case"error":J.onError?.(O.error,O.code);break;case"done":J.onDone?.(O.summary);return}}}if(H.startsWith("data: ")){let W=H.slice(6).trim();if(W){let z=rB(W);if(z?.type==="done")J.onDone?.(z.summary)}}J.onDone?.()}catch(G){if(G instanceof Error&&G.name==="AbortError"){J.onError?.("Request timed out or was cancelled","TIMEOUT");return}J.onError?.(G instanceof Error?G.message:"Unknown error")}finally{clearTimeout(q)}}async function oB(Z,Q=50){let J=await Qq(`${Z}/ai/chat/history?limit=${Q}`,{method:"GET",credentials:"include"});if(!J.ok){let X=await J.text().catch(()=>"");throw Error(`Failed to fetch chat history (${J.status}): ${X||J.statusText}`)}return J.json()}function Jq(Z){let Q={};Z.forEach((J,X)=>{if(J.isDirty)Q[X]={originalText:J.originalText,newText:J.newText,hasStyledContent:J.hasStyledContent}});try{sessionStorage.setItem(F7.PENDING_EDITS,JSON.stringify(Q))}catch(J){console.warn("[CMS] Failed to save edits to storage:",J)}}function tB(){try{let Z=sessionStorage.getItem(F7.PENDING_EDITS);return Z?JSON.parse(Z):{}}catch(Z){return console.warn("[CMS] Failed to load edits from storage:",Z),{}}}function Xq(){try{sessionStorage.removeItem(F7.PENDING_EDITS)}catch(Z){console.warn("[CMS] Failed to clear edits from storage:",Z)}}var $I="data-cms-markdown";function eB(Z){return Z.querySelector("[data-cms-styled]")!==null}async function ZV(Z,Q){yZ(!0),dB(),iB(),Q?.();try{let Y=await aB();kG(Y);let q=eG(Y);z0(Z.debug,"Loaded manifest with",q,"entries")}catch(Y){console.error("[CMS] Failed to load manifest:",Y);return}let J=tB(),X=F1.value;tY().forEach((Y)=>{let q=Y.getAttribute(X0.ID_ATTRIBUTE);if(!q)return;if(Y.hasAttribute(X0.COMPONENT_ID_ATTRIBUTE)){z0(Z.debug,"Skipping component element:",q),H6(Y);return}if(!tG(X,q)){z0(Z.debug,"Skipping element not in manifest:",q),H6(Y);return}if(Y.hasAttribute($I)){z0(Z.debug,"Markdown element detected:",q),H6(Y),bI(Z,Y,q,Q);return}if(eY(Y),!Y1.value.has(q)){let G=Y.innerHTML,U=R2(Y);z0(Z.debug,"Setting up element:",q,"originalText:",U);let K=pB(Y),H=J[q],W=G,z=U,F=!1;if(H)W=H.newText,z=H.newText,F=!0,Y.innerHTML=W;let B=eB(Y);gG(q,{element:Y,originalHTML:G,originalText:U,newText:z,currentHTML:W,isDirty:F,childCmsElements:K,hasStyledContent:B})}Y.addEventListener("input",(G)=>{let U=l5.value;if(z0(Z.debug,"Input event on",q,"currentEditingId:",U,"target:",G.target.getAttribute("data-cms-id")),U===q)G.stopPropagation(),z0(Z.debug,"Handling input for",q),JZ(Z,q,Y,Q);else z0(Z.debug,"Skipping input - not current editing element, expected:",U)}),Y.addEventListener("click",(G)=>{if(G.detail!==1)return;let U=lB(G.target);if(U){let K=U.getAttribute("data-cms-id");if(U.focus(),j6(K),d1.value&&K)g2(K);z0(Z.debug,"Click - focusing innermost CMS element:",K),Q?.()}},!0),Y.addEventListener("focus",(G)=>{if(G.target===Y){if(j6(q),d1.value&&q)g2(q);z0(Z.debug,"Focus on",q),Q?.()}},!1),Y.addEventListener("blur",(G)=>{let U=G.relatedTarget;if(U?.hasAttribute(X0.ID_ATTRIBUTE))return;if(U?.hasAttribute(X0.UI_ATTRIBUTE)||U?.closest(`[${X0.UI_ATTRIBUTE}]`))return;setTimeout(()=>{let K=document.activeElement;if(K?.hasAttribute(X0.UI_ATTRIBUTE)||K?.closest(`[${X0.UI_ATTRIBUTE}]`))return;if(l5.value===q)j6(null),Q?.()},c1.BLUR_DELAY_MS)})})}function Yq(Z){yZ(!1),SZ(!1),cB(),Zq(),Z?.(),tY().forEach((Q)=>{H6(Q)})}function JZ(Z,Q,J,X){z0(Z.debug,"handleElementChange called for",Q);let Y=i5(Q);if(!Y){z0(Z.debug,"ERROR: No change tracked for",Q),z0(Z.debug,"Available IDs in pendingChanges:",Array.from(Y1.value.keys())),z0(Z.debug,"Element:",J.tagName,J.textContent?.substring(0,50));return}let q=J.innerHTML,G=eB(J),U=G?oY(J):R2(J),K=U!==Y.originalText,H=q!==Y.originalHTML,W=K||H,z=Y.childCmsElements?.map((F)=>{let B=J.querySelector(`[data-cms-id="${F.id}"]`);if(B)return{...F,currentHTML:B.outerHTML};return F});if(xZ(Q,(F)=>({...F,newText:U,currentHTML:q,isDirty:W,childCmsElements:z,hasStyledContent:G})),W)W6(J,Z.highlightColor,"solid");else W6(J,Z.highlightColor,"dashed");z0(Z.debug,`Change tracked for ${Q}:`,{originalText:Y.originalText,newText:U,isDirty:W,textChanged:K,htmlChanged:H,hasStyledContent:G}),Jq(Y1.value),X?.()}function QV(Z,Q){let J=!x2.value;SZ(J),Y1.value.forEach((X)=>{if(J)X.element.innerHTML=X.originalHTML,H6(X.element),W6(X.element,"#f59e0b","solid");else if(X.element.innerHTML=X.currentHTML||X.originalHTML,eY(X.element),X.isDirty)W6(X.element,Z.highlightColor,"solid");else W6(X.element,Z.highlightColor,"dashed")}),Q?.()}function JV(Z){if(!confirm("Discard all changes?"))return;Y1.value.forEach((Q)=>{Q.element.innerHTML=Q.originalHTML,H6(Q.element)}),Zq(),vG(),Xq(),Yq(Z)}async function XV(Z,Q){let J=xG.value;if(J.length===0)return{success:!0,updated:0};try{let X=J.map(([q,G])=>{let U={cmsId:q,newValue:G.newText};if(G.childCmsElements&&G.childCmsElements.length>0)U.childCmsIds=G.childCmsElements.map((K)=>K.id);if(G.hasStyledContent)U.hasStyledContent=!0,U.htmlValue=oY(G.element);return U}),Y=await nB(Z.apiBase,{changes:X,meta:{source:"inline-editor",url:window.location.href}});if(N4(()=>{J.forEach(([q,G])=>{xZ(q,(U)=>({...U,originalText:U.newText,originalHTML:U.element.innerHTML,currentHTML:U.element.innerHTML,isDirty:!1})),W6(G.element,Z.highlightColor,"dashed")})}),Xq(),Y.errors&&Y.errors.length>0)return console.error("[CMS] Save errors:",Y.errors),{success:!1,updated:Y.updated,errors:Y.errors};return Q?.(),{success:!0,updated:Y.updated}}catch(X){throw console.error("[CMS] Save failed:",X),Jq(Y1.value),X}}function bI(Z,Q,J,X){Q.style.cursor="pointer",Q.addEventListener("click",async(Y)=>{Y.preventDefault(),Y.stopPropagation(),z0(Z.debug,"Markdown element clicked:",J);let G=F1.value.entries[J];if(!G){I0("Markdown element not found in manifest","error");return}if(!G.contentPath){I0("No markdown file path configured for this element","error");return}mG(J),v2(!0)})}var YV=`/*! tailwindcss v4.1.18 | MIT License | https://tailwindcss.com */
@layer properties;
@layer theme, base, components, utilities;
@layer theme {
  :root, :host {
    --font-sans: ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji",
      "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
    --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono",
      "Courier New", monospace;
    --color-red-50: oklch(97.1% 0.013 17.38);
    --color-red-100: oklch(93.6% 0.032 17.717);
    --color-red-300: oklch(80.8% 0.114 19.571);
    --color-red-500: oklch(63.7% 0.237 25.331);
    --color-red-600: oklch(57.7% 0.245 27.325);
    --color-red-700: oklch(50.5% 0.213 27.518);
    --color-red-800: oklch(44.4% 0.177 26.899);
    --color-orange-600: oklch(64.6% 0.222 41.116);
    --color-amber-100: oklch(96.2% 0.059 95.617);
    --color-amber-200: oklch(92.4% 0.12 95.746);
    --color-amber-600: oklch(66.6% 0.179 58.318);
    --color-amber-700: oklch(55.5% 0.163 48.998);
    --color-yellow-200: oklch(94.5% 0.129 101.54);
    --color-green-200: oklch(92.5% 0.084 155.995);
    --color-green-600: oklch(62.7% 0.194 149.214);
    --color-green-800: oklch(44.8% 0.119 151.328);
    --color-emerald-50: oklch(97.9% 0.021 166.113);
    --color-emerald-100: oklch(95% 0.052 163.051);
    --color-emerald-600: oklch(59.6% 0.145 163.225);
    --color-emerald-700: oklch(50.8% 0.118 165.612);
    --color-emerald-800: oklch(43.2% 0.095 166.913);
    --color-emerald-900: oklch(37.8% 0.077 168.94);
    --color-blue-50: oklch(97% 0.014 254.604);
    --color-blue-200: oklch(88.2% 0.059 254.128);
    --color-blue-500: oklch(62.3% 0.214 259.815);
    --color-blue-600: oklch(54.6% 0.245 262.881);
    --color-blue-700: oklch(48.8% 0.243 264.376);
    --color-indigo-600: oklch(51.1% 0.262 276.966);
    --color-indigo-700: oklch(45.7% 0.24 277.023);
    --color-purple-100: oklch(94.6% 0.033 307.174);
    --color-purple-600: oklch(55.8% 0.288 302.321);
    --color-purple-700: oklch(49.6% 0.265 301.924);
    --color-purple-800: oklch(43.8% 0.218 303.724);
    --color-purple-900: oklch(38.1% 0.176 304.987);
    --color-pink-200: oklch(89.9% 0.061 343.231);
    --color-rose-600: oklch(58.6% 0.253 17.585);
    --color-rose-700: oklch(51.4% 0.222 16.935);
    --color-slate-50: oklch(98.4% 0.003 247.858);
    --color-slate-100: oklch(96.8% 0.007 247.896);
    --color-slate-200: oklch(92.9% 0.013 255.508);
    --color-slate-300: oklch(86.9% 0.022 252.894);
    --color-slate-400: oklch(70.4% 0.04 256.788);
    --color-slate-500: oklch(55.4% 0.046 257.417);
    --color-slate-600: oklch(44.6% 0.043 257.281);
    --color-slate-700: oklch(37.2% 0.044 257.287);
    --color-slate-800: oklch(27.9% 0.041 260.031);
    --color-gray-50: oklch(98.5% 0.002 247.839);
    --color-gray-200: oklch(92.8% 0.006 264.531);
    --color-gray-300: oklch(87.2% 0.01 258.338);
    --color-gray-500: oklch(55.1% 0.027 264.364);
    --color-gray-600: oklch(44.6% 0.03 256.802);
    --color-gray-700: oklch(37.3% 0.034 259.733);
    --color-gray-800: oklch(27.8% 0.033 256.848);
    --color-gray-900: oklch(21% 0.034 264.665);
    --color-black: #000;
    --color-white: #fff;
    --spacing: 0.25rem;
    --container-md: 28rem;
    --container-3xl: 48rem;
    --container-4xl: 56rem;
    --text-xs: 0.75rem;
    --text-xs--line-height: calc(1 / 0.75);
    --text-sm: 0.875rem;
    --text-sm--line-height: calc(1.25 / 0.875);
    --text-base: 1rem;
    --text-base--line-height: calc(1.5 / 1);
    --text-lg: 1.125rem;
    --text-lg--line-height: calc(1.75 / 1.125);
    --text-xl: 1.25rem;
    --text-xl--line-height: calc(1.75 / 1.25);
    --text-2xl: 1.5rem;
    --text-2xl--line-height: calc(2 / 1.5);
    --font-weight-normal: 400;
    --font-weight-medium: 500;
    --font-weight-semibold: 600;
    --font-weight-bold: 700;
    --font-weight-black: 900;
    --tracking-wide: 0.025em;
    --tracking-wider: 0.05em;
    --leading-relaxed: 1.625;
    --radius-md: 0.375rem;
    --radius-lg: 0.5rem;
    --ease-out: cubic-bezier(0, 0, 0.2, 1);
    --animate-spin: spin 1s linear infinite;
    --animate-pulse: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    --animate-bounce: bounce 1s infinite;
    --blur-sm: 8px;
    --default-transition-duration: 150ms;
    --default-transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    --default-font-family: var(--font-sans);
    --default-mono-font-family: var(--font-mono);
    --color-blue-bold: #005AE0;
  }
}
@layer base {
  *, ::after, ::before, ::backdrop, ::file-selector-button {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    border: 0 solid;
  }
  html, :host {
    line-height: 1.5;
    -webkit-text-size-adjust: 100%;
    -moz-tab-size: 4;
      -o-tab-size: 4;
         tab-size: 4;
    font-family: var(--default-font-family, ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji");
    font-feature-settings: var(--default-font-feature-settings, normal);
    font-variation-settings: var(--default-font-variation-settings, normal);
    -webkit-tap-highlight-color: transparent;
  }
  hr {
    height: 0;
    color: inherit;
    border-top-width: 1px;
  }
  abbr:where([title]) {
    -webkit-text-decoration: underline dotted;
    text-decoration: underline dotted;
  }
  h1, h2, h3, h4, h5, h6 {
    font-size: inherit;
    font-weight: inherit;
  }
  a {
    color: inherit;
    -webkit-text-decoration: inherit;
    text-decoration: inherit;
  }
  b, strong {
    font-weight: bolder;
  }
  code, kbd, samp, pre {
    font-family: var(--default-mono-font-family, ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace);
    font-feature-settings: var(--default-mono-font-feature-settings, normal);
    font-variation-settings: var(--default-mono-font-variation-settings, normal);
    font-size: 1em;
  }
  small {
    font-size: 80%;
  }
  sub, sup {
    font-size: 75%;
    line-height: 0;
    position: relative;
    vertical-align: baseline;
  }
  sub {
    bottom: -0.25em;
  }
  sup {
    top: -0.5em;
  }
  table {
    text-indent: 0;
    border-color: inherit;
    border-collapse: collapse;
  }
  :-moz-focusring {
    outline: auto;
  }
  progress {
    vertical-align: baseline;
  }
  summary {
    display: list-item;
  }
  ol, ul, menu {
    list-style: none;
  }
  img, svg, video, canvas, audio, iframe, embed, object {
    display: block;
    vertical-align: middle;
  }
  img, video {
    max-width: 100%;
    height: auto;
  }
  button, input, select, optgroup, textarea, ::file-selector-button {
    font: inherit;
    font-feature-settings: inherit;
    font-variation-settings: inherit;
    letter-spacing: inherit;
    color: inherit;
    border-radius: 0;
    background-color: transparent;
    opacity: 1;
  }
  :where(select:is([multiple], [size])) optgroup {
    font-weight: bolder;
  }
  :where(select:is([multiple], [size])) optgroup option {
    padding-inline-start: 20px;
  }
  ::file-selector-button {
    margin-inline-end: 4px;
  }
  ::-moz-placeholder {
    opacity: 1;
  }
  ::placeholder {
    opacity: 1;
  }
  @supports (not (-webkit-appearance: -apple-pay-button))  or (contain-intrinsic-size: 1px) {
    ::-moz-placeholder {
      color: currentcolor;
      @supports (color: color-mix(in lab, red, red)) {
        color: color-mix(in oklab, currentcolor 50%, transparent);
      }
    }
    ::placeholder {
      color: currentcolor;
      @supports (color: color-mix(in lab, red, red)) {
        color: color-mix(in oklab, currentcolor 50%, transparent);
      }
    }
  }
  textarea {
    resize: vertical;
  }
  ::-webkit-search-decoration {
    -webkit-appearance: none;
  }
  ::-webkit-date-and-time-value {
    min-height: 1lh;
    text-align: inherit;
  }
  ::-webkit-datetime-edit {
    display: inline-flex;
  }
  ::-webkit-datetime-edit-fields-wrapper {
    padding: 0;
  }
  ::-webkit-datetime-edit, ::-webkit-datetime-edit-year-field, ::-webkit-datetime-edit-month-field, ::-webkit-datetime-edit-day-field, ::-webkit-datetime-edit-hour-field, ::-webkit-datetime-edit-minute-field, ::-webkit-datetime-edit-second-field, ::-webkit-datetime-edit-millisecond-field, ::-webkit-datetime-edit-meridiem-field {
    padding-block: 0;
  }
  ::-webkit-calendar-picker-indicator {
    line-height: 1;
  }
  :-moz-ui-invalid {
    box-shadow: none;
  }
  button, input:where([type="button"], [type="reset"], [type="submit"]), ::file-selector-button {
    -webkit-appearance: button;
       -moz-appearance: button;
            appearance: button;
  }
  ::-webkit-inner-spin-button, ::-webkit-outer-spin-button {
    height: auto;
  }
  [hidden]:where(:not([hidden="until-found"])) {
    display: none !important;
  }
}
@layer utilities {
  .pointer-events-auto {
    pointer-events: auto;
  }
  .visible {
    visibility: visible;
  }
  .absolute {
    position: absolute;
  }
  .fixed {
    position: fixed;
  }
  .relative {
    position: relative;
  }
  .static {
    position: static;
  }
  .sticky {
    position: sticky;
  }
  .inset-0 {
    inset: calc(var(--spacing) * 0);
  }
  .top-1 {
    top: calc(var(--spacing) * 1);
  }
  .top-5 {
    top: calc(var(--spacing) * 5);
  }
  .top-full {
    top: 100%;
  }
  .right-0 {
    right: calc(var(--spacing) * 0);
  }
  .right-1 {
    right: calc(var(--spacing) * 1);
  }
  .right-1\\.5 {
    right: calc(var(--spacing) * 1.5);
  }
  .right-2 {
    right: calc(var(--spacing) * 2);
  }
  .right-5 {
    right: calc(var(--spacing) * 5);
  }
  .bottom-0 {
    bottom: calc(var(--spacing) * 0);
  }
  .bottom-0\\.5 {
    bottom: calc(var(--spacing) * 0.5);
  }
  .bottom-8 {
    bottom: calc(var(--spacing) * 8);
  }
  .bottom-20 {
    bottom: calc(var(--spacing) * 20);
  }
  .bottom-24 {
    bottom: calc(var(--spacing) * 24);
  }
  .left-0 {
    left: calc(var(--spacing) * 0);
  }
  .left-1 {
    left: calc(var(--spacing) * 1);
  }
  .left-1\\.5 {
    left: calc(var(--spacing) * 1.5);
  }
  .left-1\\/2 {
    left: calc(1/2 * 100%);
  }
  .z-10 {
    z-index: 10;
  }
  .z-2147483645 {
    z-index: 2147483645;
  }
  .z-2147483646 {
    z-index: 2147483646;
  }
  .z-2147483647 {
    z-index: 2147483647;
  }
  .z-2147483648 {
    z-index: 2147483648;
  }
  .z-\\[2147483646\\] {
    z-index: 2147483646;
  }
  .z-\\[2147483647\\] {
    z-index: 2147483647;
  }
  .container {
    width: 100%;
    @media (width >= 40rem) {
      max-width: 40rem;
    }
    @media (width >= 48rem) {
      max-width: 48rem;
    }
    @media (width >= 64rem) {
      max-width: 64rem;
    }
    @media (width >= 80rem) {
      max-width: 80rem;
    }
    @media (width >= 96rem) {
      max-width: 96rem;
    }
  }
  .m-0 {
    margin: calc(var(--spacing) * 0);
  }
  .mx-1 {
    margin-inline: calc(var(--spacing) * 1);
  }
  .mt-1 {
    margin-top: calc(var(--spacing) * 1);
  }
  .mt-4 {
    margin-top: calc(var(--spacing) * 4);
  }
  .mb-1 {
    margin-bottom: calc(var(--spacing) * 1);
  }
  .mb-2 {
    margin-bottom: calc(var(--spacing) * 2);
  }
  .mb-3 {
    margin-bottom: calc(var(--spacing) * 3);
  }
  .mb-4 {
    margin-bottom: calc(var(--spacing) * 4);
  }
  .ml-1 {
    margin-left: calc(var(--spacing) * 1);
  }
  .\\!hidden {
    display: none !important;
  }
  .block {
    display: block;
  }
  .contents {
    display: contents;
  }
  .flex {
    display: flex;
  }
  .grid {
    display: grid;
  }
  .hidden {
    display: none;
  }
  .inline {
    display: inline;
  }
  .inline-block {
    display: inline-block;
  }
  .aspect-square {
    aspect-ratio: 1 / 1;
  }
  .h-0\\.5 {
    height: calc(var(--spacing) * 0.5);
  }
  .h-1\\.5 {
    height: calc(var(--spacing) * 1.5);
  }
  .h-2 {
    height: calc(var(--spacing) * 2);
  }
  .h-4 {
    height: calc(var(--spacing) * 4);
  }
  .h-5 {
    height: calc(var(--spacing) * 5);
  }
  .h-6 {
    height: calc(var(--spacing) * 6);
  }
  .h-7 {
    height: calc(var(--spacing) * 7);
  }
  .h-8 {
    height: calc(var(--spacing) * 8);
  }
  .h-12 {
    height: calc(var(--spacing) * 12);
  }
  .h-48 {
    height: calc(var(--spacing) * 48);
  }
  .h-full {
    height: 100%;
  }
  .max-h-30 {
    max-height: calc(var(--spacing) * 30);
  }
  .max-h-\\[80vh\\] {
    max-height: 80vh;
  }
  .max-h-\\[90vh\\] {
    max-height: 90vh;
  }
  .max-h-\\[calc\\(100vh-32px\\)\\] {
    max-height: calc(100vh - 32px);
  }
  .min-h-\\[200px\\] {
    min-height: 200px;
  }
  .w-4 {
    width: calc(var(--spacing) * 4);
  }
  .w-5 {
    width: calc(var(--spacing) * 5);
  }
  .w-6 {
    width: calc(var(--spacing) * 6);
  }
  .w-7 {
    width: calc(var(--spacing) * 7);
  }
  .w-8 {
    width: calc(var(--spacing) * 8);
  }
  .w-12 {
    width: calc(var(--spacing) * 12);
  }
  .w-28 {
    width: calc(var(--spacing) * 28);
  }
  .w-32 {
    width: calc(var(--spacing) * 32);
  }
  .w-100 {
    width: calc(var(--spacing) * 100);
  }
  .w-\\[400px\\] {
    width: 400px;
  }
  .w-full {
    width: 100%;
  }
  .w-px {
    width: 1px;
  }
  .max-w-3xl {
    max-width: var(--container-3xl);
  }
  .max-w-4xl {
    max-width: var(--container-4xl);
  }
  .max-w-\\[85\\%\\] {
    max-width: 85%;
  }
  .max-w-\\[calc\\(100vw-32px\\)\\] {
    max-width: calc(100vw - 32px);
  }
  .max-w-\\[calc\\(100vw-40px\\)\\] {
    max-width: calc(100vw - 40px);
  }
  .max-w-md {
    max-width: var(--container-md);
  }
  .max-w-none {
    max-width: none;
  }
  .min-w-md {
    min-width: var(--container-md);
  }
  .flex-1 {
    flex: 1;
  }
  .grow {
    flex-grow: 1;
  }
  .-translate-x-1\\/2 {
    --tw-translate-x: calc(calc(1/2 * 100%) * -1);
    translate: var(--tw-translate-x) var(--tw-translate-y);
  }
  .translate-x-0\\.5 {
    --tw-translate-x: calc(var(--spacing) * 0.5);
    translate: var(--tw-translate-x) var(--tw-translate-y);
  }
  .translate-y-0 {
    --tw-translate-y: calc(var(--spacing) * 0);
    translate: var(--tw-translate-x) var(--tw-translate-y);
  }
  .translate-y-0\\.5 {
    --tw-translate-y: calc(var(--spacing) * 0.5);
    translate: var(--tw-translate-x) var(--tw-translate-y);
  }
  .translate-y-2 {
    --tw-translate-y: calc(var(--spacing) * 2);
    translate: var(--tw-translate-x) var(--tw-translate-y);
  }
  .scale-95 {
    --tw-scale-x: 95%;
    --tw-scale-y: 95%;
    --tw-scale-z: 95%;
    scale: var(--tw-scale-x) var(--tw-scale-y);
  }
  .scale-100 {
    --tw-scale-x: 100%;
    --tw-scale-y: 100%;
    --tw-scale-z: 100%;
    scale: var(--tw-scale-x) var(--tw-scale-y);
  }
  .scale-125 {
    --tw-scale-x: 125%;
    --tw-scale-y: 125%;
    --tw-scale-z: 125%;
    scale: var(--tw-scale-x) var(--tw-scale-y);
  }
  .animate-\\[slideIn_0\\.2s_ease\\] {
    animation: slideIn 0.2s ease;
  }
  .animate-bounce {
    animation: var(--animate-bounce);
  }
  .animate-pulse {
    animation: var(--animate-pulse);
  }
  .animate-spin {
    animation: var(--animate-spin);
  }
  .cursor-not-allowed {
    cursor: not-allowed;
  }
  .cursor-pointer {
    cursor: pointer;
  }
  .resize {
    resize: both;
  }
  .resize-none {
    resize: none;
  }
  .grid-cols-4 {
    grid-template-columns: repeat(4, minmax(0, 1fr));
  }
  .flex-col {
    flex-direction: column;
  }
  .flex-wrap {
    flex-wrap: wrap;
  }
  .items-center {
    align-items: center;
  }
  .justify-between {
    justify-content: space-between;
  }
  .justify-center {
    justify-content: center;
  }
  .justify-end {
    justify-content: flex-end;
  }
  .gap-1 {
    gap: calc(var(--spacing) * 1);
  }
  .gap-1\\.5 {
    gap: calc(var(--spacing) * 1.5);
  }
  .gap-2 {
    gap: calc(var(--spacing) * 2);
  }
  .gap-2\\.5 {
    gap: calc(var(--spacing) * 2.5);
  }
  .gap-3 {
    gap: calc(var(--spacing) * 3);
  }
  .gap-4 {
    gap: calc(var(--spacing) * 4);
  }
  .gap-6 {
    gap: calc(var(--spacing) * 6);
  }
  .space-y-4 {
    :where(& > :not(:last-child)) {
      --tw-space-y-reverse: 0;
      margin-block-start: calc(calc(var(--spacing) * 4) * var(--tw-space-y-reverse));
      margin-block-end: calc(calc(var(--spacing) * 4) * calc(1 - var(--tw-space-y-reverse)));
    }
  }
  .self-end {
    align-self: flex-end;
  }
  .self-start {
    align-self: flex-start;
  }
  .truncate {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
  .overflow-auto {
    overflow: auto;
  }
  .overflow-hidden {
    overflow: hidden;
  }
  .overflow-y-auto {
    overflow-y: auto;
  }
  .rounded {
    border-radius: 0.25rem;
  }
  .rounded-full {
    border-radius: calc(infinity * 1px);
  }
  .rounded-lg {
    border-radius: var(--radius-lg);
  }
  .rounded-md {
    border-radius: var(--radius-md);
  }
  .rounded-t-lg {
    border-top-left-radius: var(--radius-lg);
    border-top-right-radius: var(--radius-lg);
  }
  .rounded-b-lg {
    border-bottom-right-radius: var(--radius-lg);
    border-bottom-left-radius: var(--radius-lg);
  }
  .border {
    border-style: var(--tw-border-style);
    border-width: 1px;
  }
  .border-2 {
    border-style: var(--tw-border-style);
    border-width: 2px;
  }
  .border-4 {
    border-style: var(--tw-border-style);
    border-width: 4px;
  }
  .border-x-2 {
    border-inline-style: var(--tw-border-style);
    border-inline-width: 2px;
  }
  .border-y-4 {
    border-block-style: var(--tw-border-style);
    border-block-width: 4px;
  }
  .border-t {
    border-top-style: var(--tw-border-style);
    border-top-width: 1px;
  }
  .border-t-4 {
    border-top-style: var(--tw-border-style);
    border-top-width: 4px;
  }
  .border-r-4 {
    border-right-style: var(--tw-border-style);
    border-right-width: 4px;
  }
  .border-b {
    border-bottom-style: var(--tw-border-style);
    border-bottom-width: 1px;
  }
  .border-b-2 {
    border-bottom-style: var(--tw-border-style);
    border-bottom-width: 2px;
  }
  .border-b-4 {
    border-bottom-style: var(--tw-border-style);
    border-bottom-width: 4px;
  }
  .border-l-4 {
    border-left-style: var(--tw-border-style);
    border-left-width: 4px;
  }
  .border-none {
    --tw-border-style: none;
    border-style: none;
  }
  .border-black {
    border-color: var(--color-black);
  }
  .border-blue-600 {
    border-color: var(--color-blue-600);
  }
  .border-blue-bold {
    border-color: var(--color-blue-bold);
  }
  .border-gray-300 {
    border-color: var(--color-gray-300);
  }
  .border-red-300 {
    border-color: var(--color-red-300);
  }
  .border-red-500 {
    border-color: var(--color-red-500);
  }
  .border-red-800 {
    border-color: var(--color-red-800);
  }
  .border-slate-200 {
    border-color: var(--color-slate-200);
  }
  .border-transparent {
    border-color: transparent;
  }
  .border-white {
    border-color: var(--color-white);
  }
  .border-l-blue-600 {
    border-left-color: var(--color-blue-600);
  }
  .border-l-emerald-600 {
    border-left-color: var(--color-emerald-600);
  }
  .border-l-red-600 {
    border-left-color: var(--color-red-600);
  }
  .bg-amber-100 {
    background-color: var(--color-amber-100);
  }
  .bg-black {
    background-color: var(--color-black);
  }
  .bg-black\\/0 {
    background-color: color-mix(in srgb, #000 0%, transparent);
    @supports (color: color-mix(in lab, red, red)) {
      background-color: color-mix(in oklab, var(--color-black) 0%, transparent);
    }
  }
  .bg-black\\/20 {
    background-color: color-mix(in srgb, #000 20%, transparent);
    @supports (color: color-mix(in lab, red, red)) {
      background-color: color-mix(in oklab, var(--color-black) 20%, transparent);
    }
  }
  .bg-black\\/50 {
    background-color: color-mix(in srgb, #000 50%, transparent);
    @supports (color: color-mix(in lab, red, red)) {
      background-color: color-mix(in oklab, var(--color-black) 50%, transparent);
    }
  }
  .bg-blue-50 {
    background-color: var(--color-blue-50);
  }
  .bg-blue-200 {
    background-color: var(--color-blue-200);
  }
  .bg-blue-600 {
    background-color: var(--color-blue-600);
  }
  .bg-blue-bold {
    background-color: var(--color-blue-bold);
  }
  .bg-emerald-100 {
    background-color: var(--color-emerald-100);
  }
  .bg-emerald-600 {
    background-color: var(--color-emerald-600);
  }
  .bg-gray-50 {
    background-color: var(--color-gray-50);
  }
  .bg-green-200 {
    background-color: var(--color-green-200);
  }
  .bg-green-600 {
    background-color: var(--color-green-600);
  }
  .bg-indigo-600 {
    background-color: var(--color-indigo-600);
  }
  .bg-pink-200 {
    background-color: var(--color-pink-200);
  }
  .bg-purple-100 {
    background-color: var(--color-purple-100);
  }
  .bg-purple-600 {
    background-color: var(--color-purple-600);
  }
  .bg-red-50 {
    background-color: var(--color-red-50);
  }
  .bg-red-100 {
    background-color: var(--color-red-100);
  }
  .bg-red-600 {
    background-color: var(--color-red-600);
  }
  .bg-rose-600 {
    background-color: var(--color-rose-600);
  }
  .bg-slate-100 {
    background-color: var(--color-slate-100);
  }
  .bg-slate-200 {
    background-color: var(--color-slate-200);
  }
  .bg-transparent {
    background-color: transparent;
  }
  .bg-white {
    background-color: var(--color-white);
  }
  .bg-white\\/80 {
    background-color: color-mix(in srgb, #fff 80%, transparent);
    @supports (color: color-mix(in lab, red, red)) {
      background-color: color-mix(in oklab, var(--color-white) 80%, transparent);
    }
  }
  .bg-yellow-200 {
    background-color: var(--color-yellow-200);
  }
  .bg-gradient-to-t {
    --tw-gradient-position: to top in oklab;
    background-image: linear-gradient(var(--tw-gradient-stops));
  }
  .bg-none {
    background-image: none;
  }
  .from-black\\/70 {
    --tw-gradient-from: color-mix(in srgb, #000 70%, transparent);
    @supports (color: color-mix(in lab, red, red)) {
      --tw-gradient-from: color-mix(in oklab, var(--color-black) 70%, transparent);
    }
    --tw-gradient-stops: var(--tw-gradient-via-stops, var(--tw-gradient-position), var(--tw-gradient-from) var(--tw-gradient-from-position), var(--tw-gradient-to) var(--tw-gradient-to-position));
  }
  .to-transparent {
    --tw-gradient-to: transparent;
    --tw-gradient-stops: var(--tw-gradient-via-stops, var(--tw-gradient-position), var(--tw-gradient-from) var(--tw-gradient-from-position), var(--tw-gradient-to) var(--tw-gradient-to-position));
  }
  .object-cover {
    -o-object-fit: cover;
       object-fit: cover;
  }
  .p-0 {
    padding: calc(var(--spacing) * 0);
  }
  .p-1 {
    padding: calc(var(--spacing) * 1);
  }
  .p-1\\.5 {
    padding: calc(var(--spacing) * 1.5);
  }
  .p-2 {
    padding: calc(var(--spacing) * 2);
  }
  .p-3 {
    padding: calc(var(--spacing) * 3);
  }
  .p-4 {
    padding: calc(var(--spacing) * 4);
  }
  .p-10 {
    padding: calc(var(--spacing) * 10);
  }
  .px-1 {
    padding-inline: calc(var(--spacing) * 1);
  }
  .px-2 {
    padding-inline: calc(var(--spacing) * 2);
  }
  .px-3 {
    padding-inline: calc(var(--spacing) * 3);
  }
  .px-4 {
    padding-inline: calc(var(--spacing) * 4);
  }
  .px-5 {
    padding-inline: calc(var(--spacing) * 5);
  }
  .py-1 {
    padding-block: calc(var(--spacing) * 1);
  }
  .py-1\\.5 {
    padding-block: calc(var(--spacing) * 1.5);
  }
  .py-2 {
    padding-block: calc(var(--spacing) * 2);
  }
  .py-2\\.5 {
    padding-block: calc(var(--spacing) * 2.5);
  }
  .py-3 {
    padding-block: calc(var(--spacing) * 3);
  }
  .py-4 {
    padding-block: calc(var(--spacing) * 4);
  }
  .py-8 {
    padding-block: calc(var(--spacing) * 8);
  }
  .pt-4 {
    padding-top: calc(var(--spacing) * 4);
  }
  .pr-3 {
    padding-right: calc(var(--spacing) * 3);
  }
  .pb-1 {
    padding-bottom: calc(var(--spacing) * 1);
  }
  .pl-5 {
    padding-left: calc(var(--spacing) * 5);
  }
  .text-center {
    text-align: center;
  }
  .text-left {
    text-align: left;
  }
  .font-mono {
    font-family: var(--font-mono);
  }
  .font-sans {
    font-family: var(--font-sans);
  }
  .text-2xl {
    font-size: var(--text-2xl);
    line-height: var(--tw-leading, var(--text-2xl--line-height));
  }
  .text-base {
    font-size: var(--text-base);
    line-height: var(--tw-leading, var(--text-base--line-height));
  }
  .text-lg {
    font-size: var(--text-lg);
    line-height: var(--tw-leading, var(--text-lg--line-height));
  }
  .text-sm {
    font-size: var(--text-sm);
    line-height: var(--tw-leading, var(--text-sm--line-height));
  }
  .text-xl {
    font-size: var(--text-xl);
    line-height: var(--tw-leading, var(--text-xl--line-height));
  }
  .text-xs {
    font-size: var(--text-xs);
    line-height: var(--tw-leading, var(--text-xs--line-height));
  }
  .text-\\[10px\\] {
    font-size: 10px;
  }
  .text-\\[11px\\] {
    font-size: 11px;
  }
  .text-\\[13px\\] {
    font-size: 13px;
  }
  .leading-none {
    --tw-leading: 1;
    line-height: 1;
  }
  .leading-relaxed {
    --tw-leading: var(--leading-relaxed);
    line-height: var(--leading-relaxed);
  }
  .font-black {
    --tw-font-weight: var(--font-weight-black);
    font-weight: var(--font-weight-black);
  }
  .font-bold {
    --tw-font-weight: var(--font-weight-bold);
    font-weight: var(--font-weight-bold);
  }
  .font-medium {
    --tw-font-weight: var(--font-weight-medium);
    font-weight: var(--font-weight-medium);
  }
  .font-normal {
    --tw-font-weight: var(--font-weight-normal);
    font-weight: var(--font-weight-normal);
  }
  .font-semibold {
    --tw-font-weight: var(--font-weight-semibold);
    font-weight: var(--font-weight-semibold);
  }
  .tracking-wide {
    --tw-tracking: var(--tracking-wide);
    letter-spacing: var(--tracking-wide);
  }
  .tracking-wider {
    --tw-tracking: var(--tracking-wider);
    letter-spacing: var(--tracking-wider);
  }
  .wrap-break-word {
    overflow-wrap: break-word;
  }
  .text-amber-600 {
    color: var(--color-amber-600);
  }
  .text-amber-700 {
    color: var(--color-amber-700);
  }
  .text-black {
    color: var(--color-black);
  }
  .text-blue-600 {
    color: var(--color-blue-600);
  }
  .text-blue-700 {
    color: var(--color-blue-700);
  }
  .text-blue-bold {
    color: var(--color-blue-bold);
  }
  .text-emerald-600 {
    color: var(--color-emerald-600);
  }
  .text-emerald-700 {
    color: var(--color-emerald-700);
  }
  .text-emerald-800 {
    color: var(--color-emerald-800);
  }
  .text-emerald-900 {
    color: var(--color-emerald-900);
  }
  .text-gray-500 {
    color: var(--color-gray-500);
  }
  .text-gray-600 {
    color: var(--color-gray-600);
  }
  .text-gray-700 {
    color: var(--color-gray-700);
  }
  .text-gray-900 {
    color: var(--color-gray-900);
  }
  .text-green-600 {
    color: var(--color-green-600);
  }
  .text-inherit {
    color: inherit;
  }
  .text-orange-600 {
    color: var(--color-orange-600);
  }
  .text-purple-600 {
    color: var(--color-purple-600);
  }
  .text-purple-900 {
    color: var(--color-purple-900);
  }
  .text-red-500 {
    color: var(--color-red-500);
  }
  .text-red-600 {
    color: var(--color-red-600);
  }
  .text-red-700 {
    color: var(--color-red-700);
  }
  .text-red-800 {
    color: var(--color-red-800);
  }
  .text-rose-600 {
    color: var(--color-rose-600);
  }
  .text-slate-400 {
    color: var(--color-slate-400);
  }
  .text-slate-500 {
    color: var(--color-slate-500);
  }
  .text-slate-600 {
    color: var(--color-slate-600);
  }
  .text-slate-700 {
    color: var(--color-slate-700);
  }
  .text-slate-800 {
    color: var(--color-slate-800);
  }
  .text-white {
    color: var(--color-white);
  }
  .uppercase {
    text-transform: uppercase;
  }
  .italic {
    font-style: italic;
  }
  .not-italic {
    font-style: normal;
  }
  .line-through {
    text-decoration-line: line-through;
  }
  .no-underline {
    text-decoration-line: none;
  }
  .underline {
    text-decoration-line: underline;
  }
  .accent-blue-bold {
    accent-color: var(--color-blue-bold);
  }
  .opacity-0 {
    opacity: 0%;
  }
  .opacity-50 {
    opacity: 50%;
  }
  .opacity-60 {
    opacity: 60%;
  }
  .opacity-80 {
    opacity: 80%;
  }
  .opacity-100 {
    opacity: 100%;
  }
  .shadow {
    --tw-shadow: 0 1px 3px 0 var(--tw-shadow-color, rgb(0 0 0 / 0.1)), 0 1px 2px -1px var(--tw-shadow-color, rgb(0 0 0 / 0.1));
    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
  }
  .shadow-brutalist-md {
    --tw-shadow: 6px 6px 0px 0px var(--tw-shadow-color, rgba(0, 0, 0, 1));
    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
  }
  .shadow-brutalist-sm {
    --tw-shadow: 4px 4px 0px 0px var(--tw-shadow-color, rgba(0, 0, 0, 1));
    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
  }
  .shadow-none {
    --tw-shadow: 0 0 #0000;
    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
  }
  .shadow-xl {
    --tw-shadow: 0 20px 25px -5px var(--tw-shadow-color, rgb(0 0 0 / 0.1)), 0 8px 10px -6px var(--tw-shadow-color, rgb(0 0 0 / 0.1));
    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
  }
  .outline {
    outline-style: var(--tw-outline-style);
    outline-width: 1px;
  }
  .blur {
    --tw-blur: blur(8px);
    filter: var(--tw-blur,) var(--tw-brightness,) var(--tw-contrast,) var(--tw-grayscale,) var(--tw-hue-rotate,) var(--tw-invert,) var(--tw-saturate,) var(--tw-sepia,) var(--tw-drop-shadow,);
  }
  .filter {
    filter: var(--tw-blur,) var(--tw-brightness,) var(--tw-contrast,) var(--tw-grayscale,) var(--tw-hue-rotate,) var(--tw-invert,) var(--tw-saturate,) var(--tw-sepia,) var(--tw-drop-shadow,);
  }
  .backdrop-blur-sm {
    --tw-backdrop-blur: blur(var(--blur-sm));
    backdrop-filter: var(--tw-backdrop-blur,) var(--tw-backdrop-brightness,) var(--tw-backdrop-contrast,) var(--tw-backdrop-grayscale,) var(--tw-backdrop-hue-rotate,) var(--tw-backdrop-invert,) var(--tw-backdrop-opacity,) var(--tw-backdrop-saturate,) var(--tw-backdrop-sepia,);
  }
  .transition {
    transition-property: color, background-color, border-color, outline-color, text-decoration-color, fill, stroke, --tw-gradient-from, --tw-gradient-via, --tw-gradient-to, opacity, box-shadow, transform, translate, scale, rotate, filter, backdrop-filter, display, content-visibility, overlay, pointer-events;
    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));
    transition-duration: var(--tw-duration, var(--default-transition-duration));
  }
  .transition-all {
    transition-property: all;
    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));
    transition-duration: var(--tw-duration, var(--default-transition-duration));
  }
  .transition-colors {
    transition-property: color, background-color, border-color, outline-color, text-decoration-color, fill, stroke, --tw-gradient-from, --tw-gradient-via, --tw-gradient-to;
    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));
    transition-duration: var(--tw-duration, var(--default-transition-duration));
  }
  .transition-opacity {
    transition-property: opacity;
    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));
    transition-duration: var(--tw-duration, var(--default-transition-duration));
  }
  .transition-transform {
    transition-property: transform, translate, scale, rotate;
    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));
    transition-duration: var(--tw-duration, var(--default-transition-duration));
  }
  .duration-200 {
    --tw-duration: 200ms;
    transition-duration: 200ms;
  }
  .duration-300 {
    --tw-duration: 300ms;
    transition-duration: 300ms;
  }
  .ease-out {
    --tw-ease: var(--ease-out);
    transition-timing-function: var(--ease-out);
  }
  .outline-none {
    --tw-outline-style: none;
    outline-style: none;
  }
  .select-none {
    -webkit-user-select: none;
    -moz-user-select: none;
         user-select: none;
  }
  .group-hover\\:bg-black\\/30 {
    &:is(:where(.group):hover *) {
      @media (hover: hover) {
        background-color: color-mix(in srgb, #000 30%, transparent);
        @supports (color: color-mix(in lab, red, red)) {
          background-color: color-mix(in oklab, var(--color-black) 30%, transparent);
        }
      }
    }
  }
  .group-hover\\:text-blue-bold {
    &:is(:where(.group):hover *) {
      @media (hover: hover) {
        color: var(--color-blue-bold);
      }
    }
  }
  .group-hover\\:opacity-100 {
    &:is(:where(.group):hover *) {
      @media (hover: hover) {
        opacity: 100%;
      }
    }
  }
  .placeholder\\:text-slate-400 {
    &::-moz-placeholder {
      color: var(--color-slate-400);
    }
    &::placeholder {
      color: var(--color-slate-400);
    }
  }
  .hover\\:scale-110 {
    &:hover {
      @media (hover: hover) {
        --tw-scale-x: 110%;
        --tw-scale-y: 110%;
        --tw-scale-z: 110%;
        scale: var(--tw-scale-x) var(--tw-scale-y);
      }
    }
  }
  .hover\\:border-blue-500 {
    &:hover {
      @media (hover: hover) {
        border-color: var(--color-blue-500);
      }
    }
  }
  .hover\\:border-slate-300 {
    &:hover {
      @media (hover: hover) {
        border-color: var(--color-slate-300);
      }
    }
  }
  .hover\\:bg-amber-200 {
    &:hover {
      @media (hover: hover) {
        background-color: var(--color-amber-200);
      }
    }
  }
  .hover\\:bg-blue-50 {
    &:hover {
      @media (hover: hover) {
        background-color: var(--color-blue-50);
      }
    }
  }
  .hover\\:bg-blue-700 {
    &:hover {
      @media (hover: hover) {
        background-color: var(--color-blue-700);
      }
    }
  }
  .hover\\:bg-emerald-50 {
    &:hover {
      @media (hover: hover) {
        background-color: var(--color-emerald-50);
      }
    }
  }
  .hover\\:bg-emerald-700 {
    &:hover {
      @media (hover: hover) {
        background-color: var(--color-emerald-700);
      }
    }
  }
  .hover\\:bg-gray-200 {
    &:hover {
      @media (hover: hover) {
        background-color: var(--color-gray-200);
      }
    }
  }
  .hover\\:bg-green-800 {
    &:hover {
      @media (hover: hover) {
        background-color: var(--color-green-800);
      }
    }
  }
  .hover\\:bg-indigo-700 {
    &:hover {
      @media (hover: hover) {
        background-color: var(--color-indigo-700);
      }
    }
  }
  .hover\\:bg-purple-700 {
    &:hover {
      @media (hover: hover) {
        background-color: var(--color-purple-700);
      }
    }
  }
  .hover\\:bg-purple-800 {
    &:hover {
      @media (hover: hover) {
        background-color: var(--color-purple-800);
      }
    }
  }
  .hover\\:bg-red-700 {
    &:hover {
      @media (hover: hover) {
        background-color: var(--color-red-700);
      }
    }
  }
  .hover\\:bg-rose-700 {
    &:hover {
      @media (hover: hover) {
        background-color: var(--color-rose-700);
      }
    }
  }
  .hover\\:bg-slate-50 {
    &:hover {
      @media (hover: hover) {
        background-color: var(--color-slate-50);
      }
    }
  }
  .hover\\:bg-slate-100 {
    &:hover {
      @media (hover: hover) {
        background-color: var(--color-slate-100);
      }
    }
  }
  .hover\\:bg-slate-200 {
    &:hover {
      @media (hover: hover) {
        background-color: var(--color-slate-200);
      }
    }
  }
  .hover\\:text-gray-700 {
    &:hover {
      @media (hover: hover) {
        color: var(--color-gray-700);
      }
    }
  }
  .hover\\:text-gray-800 {
    &:hover {
      @media (hover: hover) {
        color: var(--color-gray-800);
      }
    }
  }
  .hover\\:text-gray-900 {
    &:hover {
      @media (hover: hover) {
        color: var(--color-gray-900);
      }
    }
  }
  .hover\\:text-purple-700 {
    &:hover {
      @media (hover: hover) {
        color: var(--color-purple-700);
      }
    }
  }
  .hover\\:text-slate-200 {
    &:hover {
      @media (hover: hover) {
        color: var(--color-slate-200);
      }
    }
  }
  .focus\\:border-blue-500 {
    &:focus {
      border-color: var(--color-blue-500);
    }
  }
  .focus\\:border-blue-bold {
    &:focus {
      border-color: var(--color-blue-bold);
    }
  }
  .focus\\:bg-blue-50 {
    &:focus {
      background-color: var(--color-blue-50);
    }
  }
  .focus\\:ring-2 {
    &:focus {
      --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);
      box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
    }
  }
  .focus\\:ring-blue-500 {
    &:focus {
      --tw-ring-color: var(--color-blue-500);
    }
  }
  .focus\\:outline-none {
    &:focus {
      --tw-outline-style: none;
      outline-style: none;
    }
  }
  .active\\:translate-x-0\\.5 {
    &:active {
      --tw-translate-x: calc(var(--spacing) * 0.5);
      translate: var(--tw-translate-x) var(--tw-translate-y);
    }
  }
  .active\\:translate-x-px {
    &:active {
      --tw-translate-x: 1px;
      translate: var(--tw-translate-x) var(--tw-translate-y);
    }
  }
  .active\\:translate-y-0\\.5 {
    &:active {
      --tw-translate-y: calc(var(--spacing) * 0.5);
      translate: var(--tw-translate-x) var(--tw-translate-y);
    }
  }
  .active\\:translate-y-px {
    &:active {
      --tw-translate-y: 1px;
      translate: var(--tw-translate-x) var(--tw-translate-y);
    }
  }
  .active\\:shadow-none {
    &:active {
      --tw-shadow: 0 0 #0000;
      box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
    }
  }
  .disabled\\:cursor-not-allowed {
    &:disabled {
      cursor: not-allowed;
    }
  }
  .disabled\\:opacity-50 {
    &:disabled {
      opacity: 50%;
    }
  }
  .md\\:shadow-brutalist-md {
    @media (width >= 48rem) {
      --tw-shadow: 6px 6px 0px 0px var(--tw-shadow-color, rgba(0, 0, 0, 1));
      box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
    }
  }
}
:host {
  all: initial;
}
.cms-root {
  font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  line-height: 1.5;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
.cms-root *,
.cms-root *::before,
.cms-root *::after {
  box-sizing: border-box;
}
@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}
@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
.spinning {
  animation: spin 1s linear infinite;
}
.cms-markdown p {
  margin: 0 0 0.5em 0;
}
.cms-markdown p:last-child {
  margin-bottom: 0;
}
.cms-markdown strong {
  font-weight: 700;
}
.cms-markdown em {
  font-style: italic;
}
.cms-markdown code {
  background: rgba(0, 0, 0, 0.05);
  padding: 0.1em 0.3em;
  border-radius: 3px;
  font-family: ui-monospace, monospace;
  font-size: 0.9em;
}
.cms-markdown pre {
  background: rgba(0, 0, 0, 0.05);
  padding: 0.75em;
  border-radius: 4px;
  overflow-x: auto;
  margin: 0.5em 0;
}
.cms-markdown pre code {
  background: none;
  padding: 0;
}
.cms-markdown ul, .cms-markdown ol {
  margin: 0.5em 0;
  padding-left: 1.5em;
}
.cms-markdown li {
  margin: 0.25em 0;
}
.cms-markdown a {
  color: #005AE0;
  text-decoration: underline;
}
.cms-markdown blockquote {
  border-left: 3px solid #005AE0;
  margin: 0.5em 0;
  padding-left: 1em;
  color: #666;
}
.slide-in {
  animation: slideIn 0.2s ease;
}
@property --tw-translate-x {
  syntax: "*";
  inherits: false;
  initial-value: 0;
}
@property --tw-translate-y {
  syntax: "*";
  inherits: false;
  initial-value: 0;
}
@property --tw-translate-z {
  syntax: "*";
  inherits: false;
  initial-value: 0;
}
@property --tw-scale-x {
  syntax: "*";
  inherits: false;
  initial-value: 1;
}
@property --tw-scale-y {
  syntax: "*";
  inherits: false;
  initial-value: 1;
}
@property --tw-scale-z {
  syntax: "*";
  inherits: false;
  initial-value: 1;
}
@property --tw-space-y-reverse {
  syntax: "*";
  inherits: false;
  initial-value: 0;
}
@property --tw-border-style {
  syntax: "*";
  inherits: false;
  initial-value: solid;
}
@property --tw-gradient-position {
  syntax: "*";
  inherits: false;
}
@property --tw-gradient-from {
  syntax: "<color>";
  inherits: false;
  initial-value: #0000;
}
@property --tw-gradient-via {
  syntax: "<color>";
  inherits: false;
  initial-value: #0000;
}
@property --tw-gradient-to {
  syntax: "<color>";
  inherits: false;
  initial-value: #0000;
}
@property --tw-gradient-stops {
  syntax: "*";
  inherits: false;
}
@property --tw-gradient-via-stops {
  syntax: "*";
  inherits: false;
}
@property --tw-gradient-from-position {
  syntax: "<length-percentage>";
  inherits: false;
  initial-value: 0%;
}
@property --tw-gradient-via-position {
  syntax: "<length-percentage>";
  inherits: false;
  initial-value: 50%;
}
@property --tw-gradient-to-position {
  syntax: "<length-percentage>";
  inherits: false;
  initial-value: 100%;
}
@property --tw-leading {
  syntax: "*";
  inherits: false;
}
@property --tw-font-weight {
  syntax: "*";
  inherits: false;
}
@property --tw-tracking {
  syntax: "*";
  inherits: false;
}
@property --tw-shadow {
  syntax: "*";
  inherits: false;
  initial-value: 0 0 #0000;
}
@property --tw-shadow-color {
  syntax: "*";
  inherits: false;
}
@property --tw-shadow-alpha {
  syntax: "<percentage>";
  inherits: false;
  initial-value: 100%;
}
@property --tw-inset-shadow {
  syntax: "*";
  inherits: false;
  initial-value: 0 0 #0000;
}
@property --tw-inset-shadow-color {
  syntax: "*";
  inherits: false;
}
@property --tw-inset-shadow-alpha {
  syntax: "<percentage>";
  inherits: false;
  initial-value: 100%;
}
@property --tw-ring-color {
  syntax: "*";
  inherits: false;
}
@property --tw-ring-shadow {
  syntax: "*";
  inherits: false;
  initial-value: 0 0 #0000;
}
@property --tw-inset-ring-color {
  syntax: "*";
  inherits: false;
}
@property --tw-inset-ring-shadow {
  syntax: "*";
  inherits: false;
  initial-value: 0 0 #0000;
}
@property --tw-ring-inset {
  syntax: "*";
  inherits: false;
}
@property --tw-ring-offset-width {
  syntax: "<length>";
  inherits: false;
  initial-value: 0px;
}
@property --tw-ring-offset-color {
  syntax: "*";
  inherits: false;
  initial-value: #fff;
}
@property --tw-ring-offset-shadow {
  syntax: "*";
  inherits: false;
  initial-value: 0 0 #0000;
}
@property --tw-outline-style {
  syntax: "*";
  inherits: false;
  initial-value: solid;
}
@property --tw-blur {
  syntax: "*";
  inherits: false;
}
@property --tw-brightness {
  syntax: "*";
  inherits: false;
}
@property --tw-contrast {
  syntax: "*";
  inherits: false;
}
@property --tw-grayscale {
  syntax: "*";
  inherits: false;
}
@property --tw-hue-rotate {
  syntax: "*";
  inherits: false;
}
@property --tw-invert {
  syntax: "*";
  inherits: false;
}
@property --tw-opacity {
  syntax: "*";
  inherits: false;
}
@property --tw-saturate {
  syntax: "*";
  inherits: false;
}
@property --tw-sepia {
  syntax: "*";
  inherits: false;
}
@property --tw-drop-shadow {
  syntax: "*";
  inherits: false;
}
@property --tw-drop-shadow-color {
  syntax: "*";
  inherits: false;
}
@property --tw-drop-shadow-alpha {
  syntax: "<percentage>";
  inherits: false;
  initial-value: 100%;
}
@property --tw-drop-shadow-size {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-blur {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-brightness {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-contrast {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-grayscale {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-hue-rotate {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-invert {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-opacity {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-saturate {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-sepia {
  syntax: "*";
  inherits: false;
}
@property --tw-duration {
  syntax: "*";
  inherits: false;
}
@property --tw-ease {
  syntax: "*";
  inherits: false;
}
@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}
@keyframes pulse {
  50% {
    opacity: 0.5;
  }
}
@keyframes bounce {
  0%, 100% {
    transform: translateY(-25%);
    animation-timing-function: cubic-bezier(0.8, 0, 1, 1);
  }
  50% {
    transform: none;
    animation-timing-function: cubic-bezier(0, 0, 0.2, 1);
  }
}
@layer properties {
  @supports ((-webkit-hyphens: none) and (not (margin-trim: inline))) or ((-moz-orient: inline) and (not (color:rgb(from red r g b)))) {
    *, ::before, ::after, ::backdrop {
      --tw-translate-x: 0;
      --tw-translate-y: 0;
      --tw-translate-z: 0;
      --tw-scale-x: 1;
      --tw-scale-y: 1;
      --tw-scale-z: 1;
      --tw-space-y-reverse: 0;
      --tw-border-style: solid;
      --tw-gradient-position: initial;
      --tw-gradient-from: #0000;
      --tw-gradient-via: #0000;
      --tw-gradient-to: #0000;
      --tw-gradient-stops: initial;
      --tw-gradient-via-stops: initial;
      --tw-gradient-from-position: 0%;
      --tw-gradient-via-position: 50%;
      --tw-gradient-to-position: 100%;
      --tw-leading: initial;
      --tw-font-weight: initial;
      --tw-tracking: initial;
      --tw-shadow: 0 0 #0000;
      --tw-shadow-color: initial;
      --tw-shadow-alpha: 100%;
      --tw-inset-shadow: 0 0 #0000;
      --tw-inset-shadow-color: initial;
      --tw-inset-shadow-alpha: 100%;
      --tw-ring-color: initial;
      --tw-ring-shadow: 0 0 #0000;
      --tw-inset-ring-color: initial;
      --tw-inset-ring-shadow: 0 0 #0000;
      --tw-ring-inset: initial;
      --tw-ring-offset-width: 0px;
      --tw-ring-offset-color: #fff;
      --tw-ring-offset-shadow: 0 0 #0000;
      --tw-outline-style: solid;
      --tw-blur: initial;
      --tw-brightness: initial;
      --tw-contrast: initial;
      --tw-grayscale: initial;
      --tw-hue-rotate: initial;
      --tw-invert: initial;
      --tw-opacity: initial;
      --tw-saturate: initial;
      --tw-sepia: initial;
      --tw-drop-shadow: initial;
      --tw-drop-shadow-color: initial;
      --tw-drop-shadow-alpha: 100%;
      --tw-drop-shadow-size: initial;
      --tw-backdrop-blur: initial;
      --tw-backdrop-brightness: initial;
      --tw-backdrop-contrast: initial;
      --tw-backdrop-grayscale: initial;
      --tw-backdrop-hue-rotate: initial;
      --tw-backdrop-invert: initial;
      --tw-backdrop-opacity: initial;
      --tw-backdrop-saturate: initial;
      --tw-backdrop-sepia: initial;
      --tw-duration: initial;
      --tw-ease: initial;
    }
  }
}
`;function qq(Z){let Q=Z.composedPath(),J=document.querySelector(X0.HIGHLIGHT_ELEMENT);for(let X of Q){if(X===J)return!0;if(X instanceof HTMLElement){if(X.tagName?.startsWith("CMS-"))return!0;if(X.hasAttribute?.(X0.UI_ATTRIBUTE))return!0}}return!1}function Gq(Z){let[Q,J]=J0({visible:!1,rect:null,isComponent:!1,componentName:void 0,tagName:void 0,element:null}),X=x0(0),Y=x0(null);return j0(()=>{if(!Q.visible||!Q.element)return;let q=()=>{if(Q.element&&document.contains(Q.element))J((G)=>({...G,rect:Q.element.getBoundingClientRect()}));else J((G)=>({...G,visible:!1,element:null}))};return window.addEventListener("scroll",q,!0),window.addEventListener("resize",q),()=>{window.removeEventListener("scroll",q,!0),window.removeEventListener("resize",q)}},[Q.visible,Q.element]),j0(()=>{let q=(G)=>{if(!M1.value){J((B)=>({...B,visible:!1}));return}if(qq(G)){J((B)=>({...B,visible:!1}));return}let K=Date.now();if(K-X.current<c1.ELEMENT_DETECTION_THROTTLE_MS)return;X.current=K;let H=F1.value,W=H.entries,z=aY(G.clientX,G.clientY,W);if(z&&!z.hasAttribute(X0.COMPONENT_ID_ATTRIBUTE)){let B=z.getBoundingClientRect();J({visible:!0,rect:B,isComponent:!1,componentName:void 0,tagName:void 0,element:z}),Y.current=z;return}let F=nY(G.clientX,G.clientY);if(F){let B=F.getBoundingClientRect(),V=sY(G.clientX,G.clientY,B,R4.COMPONENT_EDGE_THRESHOLD);if(G.altKey||V){let O=F.getAttribute(X0.COMPONENT_ID_ATTRIBUTE),N=O?P6(H,O):null;J({visible:!0,rect:B,isComponent:!0,componentName:N?.componentName,tagName:F.tagName.toLowerCase(),element:F}),Y.current=F;return}}J({visible:!1,rect:null,isComponent:!1,componentName:void 0,tagName:void 0,element:null}),Y.current=null};return document.addEventListener("mousemove",q,!0),()=>document.removeEventListener("mousemove",q,!0)},[]),Q}function Uq({onComponentSelect:Z}){j0(()=>{let Q=(J)=>{if(!M1.value)return;if(qq(J))return;let q=F1.value.entries,G=aY(J.clientX,J.clientY,q);if(G&&!G.hasAttribute(X0.COMPONENT_ID_ATTRIBUTE))return;let U=nY(J.clientX,J.clientY);if(U){let K=U.getBoundingClientRect(),H=sY(J.clientX,J.clientY,K,R4.COMPONENT_EDGE_THRESHOLD);if(J.altKey||H){let W=U.getAttribute(X0.COMPONENT_ID_ATTRIBUTE);if(W)J.preventDefault(),J.stopPropagation(),Z(W,K)}}};return document.addEventListener("click",Q,!0),()=>document.removeEventListener("click",Q,!0)},[Z])}function Kq(Z){let[Q,J]=J0({elementId:null,rect:null,element:null}),X=U0(()=>{let q=l5.value,G=N6.value;if(!q||G){J({elementId:null,rect:null,element:null});return}let U=i5(q);if(!U){J({elementId:null,rect:null,element:null});return}J({elementId:q,rect:U.element.getBoundingClientRect(),element:U.element})},[]),Y=U0(()=>{J({elementId:null,rect:null,element:null})},[]);return j0(()=>{if(!Q.elementId||!Q.element)return;let q=()=>{if(Q.element&&document.contains(Q.element))J((U)=>({...U,rect:Q.element.getBoundingClientRect()}));else J({elementId:null,rect:null,element:null})},G=(U)=>{let K=U.composedPath(),H=K[0];if(Q.element?.contains(H)||Q.element===H)return;let W=document.querySelector(X0.HIGHLIGHT_ELEMENT);for(let z of K){if(z===W)return;if(z instanceof HTMLElement){if(z.tagName?.startsWith("CMS-"))return;if(z.hasAttribute?.(X0.UI_ATTRIBUTE))return}}if(H.hasAttribute?.(X0.ID_ATTRIBUTE))return;J({elementId:null,rect:null,element:null})};return window.addEventListener("scroll",q,!0),window.addEventListener("resize",q),document.addEventListener("mousedown",G,!0),()=>{window.removeEventListener("scroll",q,!0),window.removeEventListener("resize",q),document.removeEventListener("mousedown",G,!0)}},[Q.elementId,Q.element]),{tooltipState:Q,showTooltipForElement:X,hideTooltip:Y}}function CI(Z){return{endpoint:Z.apiBase,headers:{"Content-Type":"application/json"}}}class Hq{config;aiConfig;abortController=null;constructor(Z){this.config=Z,this.aiConfig=CI(Z)}async streamRequest(Z,Q){this.abortController=new AbortController;let J="";Q.onStart?.();let X={prompt:Z.prompt,elementId:Z.elementId,currentContent:Z.currentContent,pageUrl:window.location.href},Y={onToken:(q,G)=>{J=G,Q.onToken?.(q,G)},onStatus:(q,G)=>{z0(this.config.debug,"AI status:",q,G),Q.onStatus?.(q,G)},onAction:(q)=>{z0(this.config.debug,"AI action:",q),Q.onAction?.(q)},onError:(q,G)=>{z0(this.config.debug,"AI error:",q,G),Q.onError?.(Error(q))},onDone:(q)=>{z0(this.config.debug,"AI done:",q),Q.onComplete?.(J)}};try{await sB(this.aiConfig.endpoint,X,Y,this.abortController.signal)}catch(q){Q.onError?.(q instanceof Error?q:Error(String(q)))}finally{this.abortController=null}}abort(){if(this.abortController)this.abortController.abort(),this.abortController=null}isStreaming(){return this.abortController!==null}async generateBlockProps(Z){try{let Q=await fetch(`${this.aiConfig.endpoint}/ai/generate-props`,{method:"POST",credentials:"include",headers:this.aiConfig.headers,body:JSON.stringify({prompt:Z.prompt,componentName:Z.componentName,props:Z.props,currentValues:Z.currentValues,context:Z.context,pageUrl:window.location.href})});if(!Q.ok)throw Error(`AI request failed: ${Q.status} ${Q.statusText}`);return(await Q.json()).props||{}}catch(Q){throw z0(this.config.debug,"AI generateBlockProps error:",Q),Q}}async suggestComponent(Z,Q){try{let J=await fetch(`${this.aiConfig.endpoint}/ai/suggest-component`,{method:"POST",credentials:"include",headers:this.aiConfig.headers,body:JSON.stringify({prompt:Z,availableComponents:Q,pageUrl:window.location.href})});if(!J.ok)throw Error(`AI request failed: ${J.status} ${J.statusText}`);return(await J.json()).suggestion||null}catch(J){throw z0(this.config.debug,"AI suggestComponent error:",J),J}}}function Wq({config:Z,showToast:Q,onTooltipHide:J,onUIUpdate:X}){let Y=V6(()=>new Hq(Z),[Z]),q=U0(async()=>{if(d1.value)K7(!1);else{K7(!0);let z=l5.value;if(z)g2(z);try{let F=await oB(Z.apiBase);if(F.messages&&F.messages.length>0){let B=F.messages.filter((V)=>{let O=V.content?.trim()||"";if(!O)return!1;if(/^\w+\([^)]*\)$/.test(O))return!1;if(O.split(`
`).every((N)=>/^\w+\([^)]*\)$/.test(N.trim())||!N.trim()))return!1;return!0}).map((V)=>({id:V.id,role:V.role,content:V.content||"",timestamp:new Date(V.created_at).getTime()}));uG(B)}}catch(F){z0(Z.debug,"Failed to load chat history:",F)}}},[Z]),G=U0(()=>{K7(!1)},[]),U=U0(async(z,F)=>{let B=i5(F);if(!B){Q("Element not found","error");return}let V=R2(B.element),O=F1.value;R5(!0),z0(Z.debug,"Tooltip AI request for element:",F,"prompt:",z);try{await Y.streamRequest({prompt:z,elementId:F,currentContent:V,context:hZ(O,F)?.file},{onToken:(N,j)=>{B.element.textContent=j},onComplete:(N)=>{z0(Z.debug,"Tooltip AI completed:",N),B.element.textContent=N,JZ(Z,F,B.element,X),R5(!1),J(),Q("AI edit applied","success")},onError:(N)=>{z0(Z.debug,"Tooltip AI error:",N),R5(!1),Q(`AI error: ${N.message}`,"error")}})}catch(N){R5(!1),Q("AI request failed","error")}},[Z,Y,Q,J,X]),K=U0(async(z,F)=>{let B={id:`user-${Date.now()}`,role:"user",content:z,elementId:F,timestamp:Date.now()};H7(B);let V=`assistant-${Date.now()}`,O={id:V,role:"assistant",content:"",elementId:F,timestamp:Date.now()};R5(!0),k2();let N=F?i5(F):null,j=N?R2(N.element):void 0,R=F1.value,E=($)=>{if(z0(Z.debug,"AI action received:",$),$.name==="preview"&&$.url)window.open($.url,"_blank");else if($.name==="refresh")window.location.reload()};try{let $=!1;await Y.streamRequest({prompt:z,elementId:F||"",currentContent:j||"",context:F?hZ(R,F)?.file:void 0},{onStart:()=>{if(!$)H7(O),$=!0},onToken:(w,I)=>{if(!$)H7(O),$=!0;W7(V,I)},onStatus:(w,I)=>{let S={thinking:"thinking",coding:"coding",building:"building",deploying:"deploying",complete:"complete"}[w]??null;hG(S,I)},onAction:E,onComplete:(w)=>{W7(V,w),R5(!1),k2()},onError:(w)=>{W7(V,`Error: ${w.message}`),R5(!1),k2(),Q(`AI error: ${w.message}`,"error")}})}catch($){R5(!1),k2(),Q("AI request failed","error")}},[Z,Y,Q]),H=U0((z,F)=>{let B=i5(F);if(!B){Q("Element not found","error");return}B.element.textContent=z,JZ(Z,F,B.element,X),Q("Content applied to element","success")},[Z,Q,X]),W=U0(async(z,F)=>{let B=F1.value,V=P6(B,z);if(!V)return Q("Component not found","error"),{};let O=B7(B,V.componentName);if(!O)return Q("Component definition not found","error"),{};try{let N=await Y.generateBlockProps({prompt:F,componentName:V.componentName,props:O.props,currentValues:V.props});return Q("AI filled props","success"),N}catch(N){return z0(Z.debug,"AI fill props error:",N),Q("AI request failed","error"),V.props||{}}},[Z,Y,Q]);return{aiService:Y,handleAIChatToggle:q,handleChatClose:G,handleTooltipPromptSubmit:U,handleChatSend:K,handleApplyToElement:H,handleAIFillProps:W}}function zq({config:Z,showToast:Q}){let[J,X]=J0(null),Y=U0((H,W)=>{wZ(H),kZ(!0),X(W)},[]),q=U0(()=>{kZ(!1),wZ(null),X(null)},[]),G=U0((H,W)=>{z0(Z.debug,"Update props for component:",H,W),Q("Props updated (preview only)","info")},[Z.debug,Q]),U=U0(async(H,W,z,F)=>{z0(Z.debug,"Insert component:",z,H,W,"props:",F);let B=document.querySelector(`[data-cms-component-id="${W}"]`);if(!B){Q("Reference component not found","error");return}let V=`preview-${Date.now()}`,O=document.createElement("div");if(O.setAttribute("data-cms-preview-id",V),O.style.cssText=`
        padding: 24px;
        margin: 8px 0;
        background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
        border: 2px dashed #22c55e;
        border-radius: 8px;
        text-align: center;
        font-family: system-ui, -apple-system, sans-serif;
      `,O.innerHTML=`
        <div style="font-weight: 600; color: #16a34a; margin-bottom: 8px;">
          ✓ New ${z} Component
        </div>
        <div style="font-size: 13px; color: #15803d;">
          ${Object.entries(F).map(([N,j])=>`${N}: "${j}"`).join(", ")||"No props set"}
        </div>
        <div style="font-size: 12px; color: #86efac; margin-top: 8px;">
          Saving changes...
        </div>
      `,H==="before")B.parentNode?.insertBefore(O,B);else B.parentNode?.insertBefore(O,B.nextSibling);try{let N=await fetch(`${Z.apiBase}/insert-component`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({position:H,referenceComponentId:W,componentName:z,props:F})});if(!N.ok){let R=await N.text();throw Error(R||"Failed to insert component")}let j=await N.json();O.innerHTML=`
          <div style="font-weight: 600; color: #16a34a; margin-bottom: 8px;">
            ✓ ${z} inserted successfully!
          </div>
          <div style="font-size: 13px; color: #15803d;">
            Refresh the page to see the actual component.
          </div>
        `,Q(`${z} inserted ${H} component`,"success"),setTimeout(()=>{O.remove()},c1.PREVIEW_SUCCESS_DURATION_MS)}catch(N){console.error("[CMS] Failed to insert component:",N),O.style.background="linear-gradient(135deg, #fef2f2 0%, #fecaca 100%)",O.style.borderColor="#ef4444",O.innerHTML=`
          <div style="font-weight: 600; color: #dc2626; margin-bottom: 8px;">
            ✗ Failed to insert component
          </div>
          <div style="font-size: 13px; color: #991b1b;">
            ${N instanceof Error?N.message:"Unknown error"}
          </div>
        `,Q("Failed to insert component","error"),setTimeout(()=>{O.remove()},c1.PREVIEW_ERROR_DURATION_MS)}},[Z.apiBase,Z.debug,Q]),K=U0((H)=>{z0(Z.debug,"Remove block:",H),Q("Block removed (preview only)","info")},[Z.debug,Q]);return{blockEditorRect:J,handleComponentSelect:Y,handleBlockEditorClose:q,handleUpdateProps:G,handleInsertComponent:U,handleRemoveBlock:K}}function Fq(){let[Z,Q]=J0({hasSelection:!1,selection:null,rect:null,element:null});return j0(()=>{let J=()=>{if(!M1.value){Q({hasSelection:!1,selection:null,rect:null,element:null});return}let U=window.getSelection();if(!U||U.isCollapsed||U.rangeCount===0){Q({hasSelection:!1,selection:null,rect:null,element:null});return}let K=U.getRangeAt(0),H=K.commonAncestorContainer,W=H.nodeType===Node.TEXT_NODE?H.parentElement:H,z=null;while(W&&W!==document.body){if(W.hasAttribute(X0.ID_ATTRIBUTE)&&W.contentEditable==="true"){z=W;break}W=W.parentElement}if(!z){Q({hasSelection:!1,selection:null,rect:null,element:null});return}let F=f8(z);if(!F){Q({hasSelection:!1,selection:null,rect:null,element:null});return}let B=K.getBoundingClientRect();Q({hasSelection:!0,selection:F,rect:B,element:z})},X=null,Y=()=>{if(X)clearTimeout(X);X=window.setTimeout(J,50)};document.addEventListener("selectionchange",Y);let q=(G)=>{let U=G.target;if(U.hasAttribute?.(X0.UI_ATTRIBUTE)||U.closest?.(`[${X0.UI_ATTRIBUTE}]`))return;setTimeout(J,10)};return document.addEventListener("mouseup",q),()=>{if(document.removeEventListener("selectionchange",Y),document.removeEventListener("mouseup",q),X)clearTimeout(X)}},[]),j0(()=>{if(!Z.hasSelection)return;let J=()=>{let X=window.getSelection();if(X&&X.rangeCount>0){let q=X.getRangeAt(0).getBoundingClientRect();Q((G)=>({...G,rect:q}))}};return window.addEventListener("scroll",J,!0),window.addEventListener("resize",J),()=>{window.removeEventListener("scroll",J,!0),window.removeEventListener("resize",J)}},[Z.hasSelection]),Z}var yI=()=>{let Z=P5.value,Q=Gq(),J=Fq(),{tooltipState:X,showTooltipForElement:Y,hideTooltip:q}=Kq(),G=U0(()=>{Y()},[Y]),{handleAIChatToggle:U,handleChatClose:K,handleTooltipPromptSubmit:H,handleChatSend:W,handleApplyToElement:z,handleAIFillProps:F}=Wq({config:Z,showToast:I0,onTooltipHide:q,onUIUpdate:G}),{blockEditorRect:B,handleComponentSelect:V,handleBlockEditorClose:O,handleUpdateProps:N,handleInsertComponent:j,handleRemoveBlock:R}=zq({config:Z,showToast:I0});Uq({onComponentSelect:V});let E=U0(async()=>{if(M1.value)q(),Yq(G);else await ZV(Z,G)},[Z,G,q]),$=U0(()=>{QV(Z,G)},[Z,G]),w=U0(async()=>{try{let c=await XV(Z,G);if(c.success)I0(`Saved ${c.updated} change(s) successfully!`,"success");else if(c.errors)I0(`Saved ${c.updated}, ${c.errors.length} failed`,"error")}catch(c){I0("Save failed – see console","error")}},[Z,G]),I=U0(()=>{JV(G),I0("All changes discarded","info")},[G]),g=U0(()=>{dG(!0)},[]),S=U0(()=>{pG(!0)},[]),u=M1.value,T=N6.value,F0=d1.value,e=p5.value,m=O6.value;return A(X1,{children:[A(r1,{componentName:"Outline",children:A(qB,{visible:Q.visible,rect:Q.rect,isComponent:Q.isComponent,componentName:Q.componentName,tagName:Q.tagName,element:Q.element},void 0,!1,void 0,this)},void 0,!1,void 0,this),A(r1,{componentName:"Toolbar",children:A(kB,{callbacks:{onEdit:E,onCompare:$,onSave:w,onDiscard:I,onAIChat:U,onNewPage:g,onMediaLibrary:S}},void 0,!1,void 0,this)},void 0,!1,void 0,this),A(r1,{componentName:"AI Tooltip",children:A(sG,{callbacks:{onPromptSubmit:H},visible:!!X.elementId&&u&&!T&&!J.hasSelection,elementId:X.elementId,rect:X.rect,processing:T},void 0,!1,void 0,this)},void 0,!1,void 0,this),A(r1,{componentName:"Text Style Toolbar",children:A(SB,{visible:J.hasSelection&&u&&!T,rect:J.rect,element:J.element,onStyleChange:G},void 0,!1,void 0,this)},void 0,!1,void 0,this),A(r1,{componentName:"AI Chat",children:A(nG,{callbacks:{onSend:W,onClose:K,onApplyToElement:z}},void 0,!1,void 0,this)},void 0,!1,void 0,this),A(r1,{componentName:"Block Editor",children:A(QU,{visible:e.isOpen&&u,componentId:e.currentComponentId,rect:B,onClose:O,onUpdateProps:N,onInsertComponent:j,onRemoveBlock:R,onAIFillProps:F},void 0,!1,void 0,this)},void 0,!1,void 0,this),A(r1,{componentName:"Media Library",children:A(YB,{},void 0,!1,void 0,this)},void 0,!1,void 0,this),A(r1,{componentName:"Create Page Modal",children:A(qU,{},void 0,!1,void 0,this)},void 0,!1,void 0,this),A(r1,{componentName:"Markdown Editor",children:A(XB,{},void 0,!1,void 0,this)},void 0,!1,void 0,this),A(xB,{toasts:m,onRemove:rG},void 0,!1,void 0,this)]},void 0,!0,void 0,this)};class Bq{appRoot=null;shadowRoot=null;config=U7();async init(){aG(this.config),z0(this.config.debug,"Initializing CMS editor with config:",this.config),this.setupUI(),this.setupKeyboardShortcuts()}setupUI(){let Z=document.createElement("div");Z.id="cms-app-host",Z.style.cssText="position: fixed; top: 0; left: 0; width: 0; height: 0; z-index: 2147483647;",document.body.appendChild(Z);let Q=document.createElement("div");Q.id="cms-text-styling-safelist",Q.innerHTML=CB,document.body.appendChild(Q),this.shadowRoot=Z.attachShadow({mode:"open"});let J=document.createElement("style");J.textContent=YV,this.shadowRoot.appendChild(J),this.appRoot=document.createElement("div"),this.appRoot.id="cms-app-root",this.appRoot.className="cms-root",this.shadowRoot.appendChild(this.appRoot),uq(A(yI,{},void 0,!1,void 0,this),this.appRoot)}setupKeyboardShortcuts(){document.addEventListener("keydown",(Z)=>{if(!((Z.metaKey||Z.ctrlKey)&&Z.shiftKey&&Z.key.toLowerCase()==="e"))return;Z.preventDefault(),this.toggleVisibility()})}toggleVisibility(){if(!this.appRoot)return;let Z=this.appRoot.style.display==="none";this.appRoot.style.display=Z?"block":"none",I0(Z?"CMS editing enabled":"CMS editing disabled","info")}}if(typeof window<"u"){let Z=()=>{new Bq().init()};if(document.readyState==="loading")document.addEventListener("DOMContentLoaded",Z);else Z()}})();

//# debugId=1ACD7AEAED6033EC64756E2164756E21
